"use strict";(self.webpackChunkweather_app=self.webpackChunkweather_app||[]).push([[179],{2011:(lt,Ie,P)=>{P.d(Ie,{Dh:()=>pe,GT:()=>fe,cc:()=>Ae,hO:()=>He,on:()=>H,pX:()=>ue,xv:()=>me});var d=P(4650),te=P(127),k=P(5813);lt=P.hmd(lt);const le=["ngOnDestroy"],ue=(Me,Ce,Ve,xe={})=>new Proxy(Me,{get:(be,Re)=>Ve.runOutsideAngular(()=>{var $e;if(Me[Re])return!(null===($e=xe?.spy)||void 0===$e)&&$e.get&&xe.spy.get(Re,Me[Re]),Me[Re];if(le.indexOf(Re)>-1)return()=>{};const Pe=Ce.toPromise().then(j=>{const we=j&&j[Re];return"function"==typeof we?we.bind(j):we&&we.then?we.then(K=>Ve.run(()=>K)):Ve.run(()=>we)});return new Proxy(()=>{},{get:(j,we)=>Pe[we],apply:(j,we,K)=>Pe.then(X=>{var oe;const ie=X&&X(...K);return!(null===(oe=xe?.spy)||void 0===oe)&&oe.apply&&xe.spy.apply(Re,K,ie),ie})})})}),fe=(Me,Ce)=>{Ce.forEach(Ve=>{Object.getOwnPropertyNames(Ve.prototype||Ve).forEach(xe=>{Object.defineProperty(Me.prototype,xe,Object.getOwnPropertyDescriptor(Ve.prototype||Ve,xe))})})};class ce{constructor(Ce){return Ce}}const pe=new d.OlP("angularfire2.app.options"),me=new d.OlP("angularfire2.app.name");function H(Me,Ce,Ve){const be="object"==typeof Ve&&Ve||{};be.name=be.name||"string"==typeof Ve&&Ve||"[DEFAULT]";const $e=te.Z.apps.filter(Pe=>Pe&&Pe.name===be.name)[0]||Ce.runOutsideAngular(()=>te.Z.initializeApp(Me,be));try{JSON.stringify(Me)!==JSON.stringify($e.options)&&$("error",`${$e.name} Firebase App already initialized with different options${lt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ce($e)}const $=(Me,...Ce)=>{(0,d.X6Q)()&&typeof console<"u"&&console[Me](...Ce)},Q={provide:ce,useFactory:H,deps:[pe,d.R0b,[new d.FiY,me]]};let He=(()=>{class Me{constructor(Ve){te.Z.registerVersion("angularfire",k.q4.full,"core"),te.Z.registerVersion("angularfire",k.q4.full,"app-compat"),te.Z.registerVersion("angular",d.q4F.full,Ve.toString())}static initializeApp(Ve,xe){return{ngModule:Me,providers:[{provide:pe,useValue:Ve},{provide:me,useValue:xe}]}}}return Me.\u0275fac=function(Ve){return new(Ve||Me)(d.LFG(d.Lbi))},Me.\u0275mod=d.oAB({type:Me}),Me.\u0275inj=d.cJS({providers:[Q]}),Me})();function Ae(Me,Ce,Ve,xe,be){const[,Re,$e]=globalThis.\u0275AngularfireInstanceCache.find(Pe=>Pe[0]===Me)||[];if(Re)return function Ye(Me,Ce){try{return Me.toString()===Ce.toString()}catch{return Me===Ce}}(be,$e)||(ge("error",`${Ce} was already initialized on the ${Ve} Firebase App with different settings.${rt?" You may need to reload as Firebase is not HMR aware.":""}`),ge("warn",{is:be,was:$e})),Re;{const Pe=xe();return globalThis.\u0275AngularfireInstanceCache.push([Me,Pe,be]),Pe}}const rt=!!lt.hot,ge=(Me,...Ce)=>{(0,d.X6Q)()&&typeof console<"u"&&console[Me](...Ce)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(lt,Ie,P)=>{P.d(Ie,{q4:()=>t_,iC:()=>Sr,HU:()=>yi,vb:()=>bn,JM:()=>Qe});var d=P(4650),te=P(5867),k=P(5861),le=P(9681),ue=P(2090),fe=P(4859),ce=P(1877),pe=P(8766);const me="@firebase/installations",H="0.5.16",Q=`w:${H}`,He="FIS_v2",Ce=new ue.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ve(D){return D instanceof ue.ZR&&D.code.includes("request-failed")}function xe({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function be(D){return{token:D.token,requestStatus:2,expiresIn:X(D.expiresIn),creationTime:Date.now()}}function Re(D,T){return $e.apply(this,arguments)}function $e(){return($e=(0,k.Z)(function*(D,T){const L=(yield T.json()).error;return Ce.create("request-failed",{requestName:D,serverCode:L.code,serverMessage:L.message,serverStatus:L.status})})).apply(this,arguments)}function Pe({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function j(D,{refreshToken:T}){const N=Pe(D);return N.append("Authorization",function oe(D){return`${He} ${D}`}(T)),N}function we(D){return K.apply(this,arguments)}function K(){return(K=(0,k.Z)(function*(D){const T=yield D();return T.status>=500&&T.status<600?D():T})).apply(this,arguments)}function X(D){return Number(D.replace("s","000"))}function ie(D,T){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,k.Z)(function*({appConfig:D,heartbeatServiceProvider:T},{fid:N}){const L=xe(D),J=Pe(D),se=T.getImmediate({optional:!0});if(se){const Mt=yield se.getHeartbeatsHeader();Mt&&J.append("x-firebase-client",Mt)}const ze={method:"POST",headers:J,body:JSON.stringify({fid:N,authVersion:He,appId:D.appId,sdkVersion:Q})},ot=yield we(()=>fetch(L,ze));if(ot.ok){const Mt=yield ot.json();return{fid:Mt.fid||N,registrationStatus:2,refreshToken:Mt.refreshToken,authToken:be(Mt.authToken)}}throw yield Re("Create Installation",ot)})).apply(this,arguments)}function Fe(D){return new Promise(T=>{setTimeout(T,D)})}const nn=/^[cdef][\w-]{21}$/;function Bt(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const N=function Ht(D){return function pt(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return nn.test(N)?N:""}catch{return""}}function yt(D){return`${D.appName}!${D.appId}`}const tn=new Map;function wr(D,T){const N=yt(D);In(N,T),function di(D,T){const N=function Pr(){return!Xr&&"BroadcastChannel"in self&&(Xr=new BroadcastChannel("[Firebase] FID Change"),Xr.onmessage=D=>{In(D.data.key,D.data.fid)}),Xr}();N&&N.postMessage({key:D,fid:T}),function Fr(){0===tn.size&&Xr&&(Xr.close(),Xr=null)}()}(N,T)}function In(D,T){const N=tn.get(D);if(N)for(const L of N)L(T)}let Xr=null;const xi="firebase-installations-store";let Lr=null;function ao(){return Lr||(Lr=(0,pe.X3)("firebase-installations-database",1,{upgrade:(D,T)=>{0===T&&D.createObjectStore(xi)}})),Lr}function yn(D,T){return ei.apply(this,arguments)}function ei(){return(ei=(0,k.Z)(function*(D,T){const N=yt(D),J=(yield ao()).transaction(xi,"readwrite"),se=J.objectStore(xi),Se=yield se.get(N);return yield se.put(T,N),yield J.done,(!Se||Se.fid!==T.fid)&&wr(D,T.fid),T})).apply(this,arguments)}function _t(D){return ts.apply(this,arguments)}function ts(){return(ts=(0,k.Z)(function*(D){const T=yt(D),L=(yield ao()).transaction(xi,"readwrite");yield L.objectStore(xi).delete(T),yield L.done})).apply(this,arguments)}function Ni(D,T){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,k.Z)(function*(D,T){const N=yt(D),J=(yield ao()).transaction(xi,"readwrite"),se=J.objectStore(xi),Se=yield se.get(N),ze=T(Se);return void 0===ze?yield se.delete(N):yield se.put(ze,N),yield J.done,ze&&(!Se||Se.fid!==ze.fid)&&wr(D,ze.fid),ze})).apply(this,arguments)}function Vr(D){return xs.apply(this,arguments)}function xs(){return(xs=(0,k.Z)(function*(D){let T;const N=yield Ni(D.appConfig,L=>{const J=kt(L),se=wt(D,J);return T=se.registrationPromise,se.installationEntry});return""===N.fid?{installationEntry:yield T}:{installationEntry:N,registrationPromise:T}})).apply(this,arguments)}function kt(D){return br(D||{fid:Bt(),registrationStatus:0})}function wt(D,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(Ce.create("app-offline"))};const N={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},L=function Tt(D,T){return ns.apply(this,arguments)}(D,N);return{installationEntry:N,registrationPromise:L}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:On(D)}:{installationEntry:T}}function ns(){return(ns=(0,k.Z)(function*(D,T){try{const N=yield ie(D,T);return yn(D.appConfig,N)}catch(N){throw Ve(N)&&409===N.customData.serverCode?yield _t(D.appConfig):yield yn(D.appConfig,{fid:T.fid,registrationStatus:0}),N}})).apply(this,arguments)}function On(D){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,k.Z)(function*(D){let T=yield Ri(D.appConfig);for(;1===T.registrationStatus;)yield Fe(100),T=yield Ri(D.appConfig);if(0===T.registrationStatus){const{installationEntry:N,registrationPromise:L}=yield Vr(D);return L||N}return T})).apply(this,arguments)}function Ri(D){return Ni(D,T=>{if(!T)throw Ce.create("installation-not-found");return br(T)})}function br(D){return function pa(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function un(D,T){return rs.apply(this,arguments)}function rs(){return(rs=(0,k.Z)(function*({appConfig:D,heartbeatServiceProvider:T},N){const L=Xt(D,N),J=j(D,N),se=T.getImmediate({optional:!0});if(se){const Mt=yield se.getHeartbeatsHeader();Mt&&J.append("x-firebase-client",Mt)}const ze={method:"POST",headers:J,body:JSON.stringify({installation:{sdkVersion:Q,appId:D.appId}})},ot=yield we(()=>fetch(L,ze));if(ot.ok)return be(yield ot.json());throw yield Re("Generate Auth Token",ot)})).apply(this,arguments)}function Xt(D,{fid:T}){return`${xe(D)}/${T}/authTokens:generate`}function Ir(D){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,k.Z)(function*(D,T=!1){let N;const L=yield Ni(D.appConfig,se=>{if(!jt(se))throw Ce.create("not-registered");const Se=se.authToken;if(!T&&z(Se))return se;if(1===Se.requestStatus)return N=Ge(D,T),se;{if(!navigator.onLine)throw Ce.create("app-offline");const ze=Y(se);return N=Dt(D,ze),ze}});return N?yield N:L.authToken})).apply(this,arguments)}function Ge(D,T){return Te.apply(this,arguments)}function Te(){return(Te=(0,k.Z)(function*(D,T){let N=yield et(D.appConfig);for(;1===N.authToken.requestStatus;)yield Fe(100),N=yield et(D.appConfig);const L=N.authToken;return 0===L.requestStatus?Ir(D,T):L})).apply(this,arguments)}function et(D){return Ni(D,T=>{if(!jt(T))throw Ce.create("not-registered");return function _e(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function Dt(D,T){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,k.Z)(function*(D,T){try{const N=yield un(D,T),L=Object.assign(Object.assign({},T),{authToken:N});return yield yn(D.appConfig,L),N}catch(N){if(!Ve(N)||401!==N.customData.serverCode&&404!==N.customData.serverCode){const L=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield yn(D.appConfig,L)}else yield _t(D.appConfig);throw N}})).apply(this,arguments)}function jt(D){return void 0!==D&&2===D.registrationStatus}function z(D){return 2===D.requestStatus&&!function U(D){const T=Date.now();return T<D.creationTime||D.creationTime+D.expiresIn<T+36e5}(D)}function Y(D){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:T})}function it(){return(it=(0,k.Z)(function*(D){const T=D,{installationEntry:N,registrationPromise:L}=yield Vr(T);return L?L.catch(console.error):Ir(T).catch(console.error),N.fid})).apply(this,arguments)}function Qt(){return(Qt=(0,k.Z)(function*(D,T=!1){const N=D;return yield An(N),(yield Ir(N,T)).token})).apply(this,arguments)}function An(D){return bt.apply(this,arguments)}function bt(){return(bt=(0,k.Z)(function*(D){const{registrationPromise:T}=yield Vr(D);T&&(yield T)})).apply(this,arguments)}function su(D){return Ce.create("missing-app-config-values",{valueName:D})}const Dc="installations",Sn=D=>{const T=D.getProvider("app").getImmediate(),N=function ma(D){if(!D||!D.options)throw su("App Configuration");if(!D.name)throw su("App Name");const T=["projectId","apiKey","appId"];for(const N of T)if(!D.options[N])throw su(N);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(T);return{app:T,appConfig:N,heartbeatServiceProvider:(0,le._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},od=D=>{const T=D.getProvider("app").getImmediate(),N=(0,le._getProvider)(T,Dc).getImmediate();return{getId:()=>function ne(D){return it.apply(this,arguments)}(N),getToken:J=>function $t(D){return Qt.apply(this,arguments)}(N,J)}};(function Cc(){(0,le._registerComponent)(new fe.wA(Dc,Sn,"PUBLIC")),(0,le._registerComponent)(new fe.wA("installations-internal",od,"PRIVATE"))})(),(0,le.registerVersion)(me,H),(0,le.registerVersion)(me,H,"esm2017");const ya="@firebase/remote-config",$n=new ue.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Bo{constructor(T,N,L,J){this.client=T,this.storage=N,this.storageCache=L,this.logger=J}isCachedDataFresh(T,N){if(!N)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const L=Date.now()-N,J=L<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${L}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${J}.`),J}fetch(T){var N=this;return(0,k.Z)(function*(){const[L,J]=yield Promise.all([N.storage.getLastSuccessfulFetchTimestampMillis(),N.storage.getLastSuccessfulFetchResponse()]);if(J&&N.isCachedDataFresh(T.cacheMaxAgeMillis,L))return J;T.eTag=J&&J.eTag;const se=yield N.client.fetch(T),Se=[N.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===se.status&&Se.push(N.storage.setLastSuccessfulFetchResponse(se)),yield Promise.all(Se),se})()}}function Ur(D=navigator){return D.languages&&D.languages[0]||D.language}class is{constructor(T,N,L,J,se,Se){this.firebaseInstallations=T,this.sdkVersion=N,this.namespace=L,this.projectId=J,this.apiKey=se,this.appId=Se}fetch(T){var N=this;return(0,k.Z)(function*(){var L,J,se;const[Se,ze]=yield Promise.all([N.firebaseInstallations.getId(),N.firebaseInstallations.getToken()]),Mt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${N.projectId}/namespaces/${N.namespace}:fetch?key=${N.apiKey}`,St={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},dt={sdk_version:N.sdkVersion,app_instance_id:Se,app_instance_id_token:ze,app_id:N.appId,language_code:Ur()},Dn={method:"POST",headers:St,body:JSON.stringify(dt)},ii=fetch(Mt,Dn),Ys=new Promise((si,fn)=>{T.signal.addEventListener(()=>{const vo=new Error("The operation was aborted.");vo.name="AbortError",fn(vo)})});let Gr;try{yield Promise.race([ii,Ys]),Gr=yield ii}catch(si){let fn="fetch-client-network";throw"AbortError"===(null===(L=si)||void 0===L?void 0:L.name)&&(fn="fetch-timeout"),$n.create(fn,{originalErrorMessage:null===(J=si)||void 0===J?void 0:J.message})}let gr=Gr.status;const tl=Gr.headers.get("ETag")||void 0;let Bn,fs;if(200===Gr.status){let si;try{si=yield Gr.json()}catch(fn){throw $n.create("fetch-client-parse",{originalErrorMessage:null===(se=fn)||void 0===se?void 0:se.message})}Bn=si.entries,fs=si.state}if("INSTANCE_STATE_UNSPECIFIED"===fs?gr=500:"NO_CHANGE"===fs?gr=304:("NO_TEMPLATE"===fs||"EMPTY_CONFIG"===fs)&&(Bn={}),304!==gr&&200!==gr)throw $n.create("fetch-status",{httpStatus:gr});return{status:gr,eTag:tl,config:Bn}})()}}class Jh{constructor(T,N){this.client=T,this.storage=N}fetch(T){var N=this;return(0,k.Z)(function*(){const L=(yield N.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return N.attemptFetch(T,L)})()}attemptFetch(T,{throttleEndTimeMillis:N,backoffCount:L}){var J=this;return(0,k.Z)(function*(){yield function Vn(D,T){return new Promise((N,L)=>{const J=Math.max(T-Date.now(),0),se=setTimeout(N,J);D.addEventListener(()=>{clearTimeout(se),L($n.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,N);try{const se=yield J.client.fetch(T);return yield J.storage.deleteThrottleMetadata(),se}catch(se){if(!function ln(D){if(!(D instanceof ue.ZR&&D.customData))return!1;const T=Number(D.customData.httpStatus);return 429===T||500===T||503===T||504===T}(se))throw se;const Se={throttleEndTimeMillis:Date.now()+(0,ue.$s)(L),backoffCount:L+1};return yield J.storage.setThrottleMetadata(Se),J.attemptFetch(T,Se)}})()}}class Ea{constructor(T,N,L,J,se){this.app=T,this._client=N,this._storageCache=L,this._storage=J,this._logger=se,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Rs(D,T){var N;const L=D.target.error||void 0;return $n.create(T,{originalErrorMessage:L&&(null===(N=L)||void 0===N?void 0:N.message)})}const fi="app_namespace_store";class Br{constructor(T,N,L,J=function Xh(){return new Promise((D,T)=>{var N;try{const L=indexedDB.open("firebase_remote_config",1);L.onerror=J=>{T(Rs(J,"storage-open"))},L.onsuccess=J=>{D(J.target.result)},L.onupgradeneeded=J=>{0===J.oldVersion&&J.target.result.createObjectStore(fi,{keyPath:"compositeKey"})}}catch(L){T($n.create("storage-open",{originalErrorMessage:null===(N=L)||void 0===N?void 0:N.message}))}})}()){this.appId=T,this.appName=N,this.namespace=L,this.openDbPromise=J}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var N=this;return(0,k.Z)(function*(){const L=yield N.openDbPromise;return new Promise((J,se)=>{var Se;const ot=L.transaction([fi],"readonly").objectStore(fi),Mt=N.createCompositeKey(T);try{const St=ot.get(Mt);St.onerror=dt=>{se(Rs(dt,"storage-get"))},St.onsuccess=dt=>{const Dn=dt.target.result;J(Dn?Dn.value:void 0)}}catch(St){se($n.create("storage-get",{originalErrorMessage:null===(Se=St)||void 0===Se?void 0:Se.message}))}})})()}set(T,N){var L=this;return(0,k.Z)(function*(){const J=yield L.openDbPromise;return new Promise((se,Se)=>{var ze;const Mt=J.transaction([fi],"readwrite").objectStore(fi),St=L.createCompositeKey(T);try{const dt=Mt.put({compositeKey:St,value:N});dt.onerror=Dn=>{Se(Rs(Dn,"storage-set"))},dt.onsuccess=()=>{se()}}catch(dt){Se($n.create("storage-set",{originalErrorMessage:null===(ze=dt)||void 0===ze?void 0:ze.message}))}})})()}delete(T){var N=this;return(0,k.Z)(function*(){const L=yield N.openDbPromise;return new Promise((J,se)=>{var Se;const ot=L.transaction([fi],"readwrite").objectStore(fi),Mt=N.createCompositeKey(T);try{const St=ot.delete(Mt);St.onerror=dt=>{se(Rs(dt,"storage-delete"))},St.onsuccess=()=>{J()}}catch(St){se($n.create("storage-delete",{originalErrorMessage:null===(Se=St)||void 0===Se?void 0:Se.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class ni{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,k.Z)(function*(){const N=T.storage.getLastFetchStatus(),L=T.storage.getLastSuccessfulFetchTimestampMillis(),J=T.storage.getActiveConfig(),se=yield N;se&&(T.lastFetchStatus=se);const Se=yield L;Se&&(T.lastSuccessfulFetchTimestampMillis=Se);const ze=yield J;ze&&(T.activeConfig=ze)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function Tr(){return ud.apply(this,arguments)}function ud(){return(ud=(0,k.Z)(function*(){if(!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch{return!1}})).apply(this,arguments)}!function ss(){(0,le._registerComponent)(new fe.wA("remote-config",function D(T,{instanceIdentifier:N}){const L=T.getProvider("app").getImmediate(),J=T.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw $n.create("registration-window");if(!(0,ue.hl)())throw $n.create("indexed-db-unavailable");const{projectId:se,apiKey:Se,appId:ze}=L.options;if(!se)throw $n.create("registration-project-id");if(!Se)throw $n.create("registration-api-key");if(!ze)throw $n.create("registration-app-id");const ot=new Br(ze,L.name,N=N||"firebase"),Mt=new ni(ot),St=new ce.Yd(ya);St.logLevel=ce.in.ERROR;const dt=new is(J,le.SDK_VERSION,N,se,Se,ze),Dn=new Jh(dt,ot),ii=new Bo(Dn,ot,Mt,St),Ys=new Ea(L,ii,Mt,ot,St);return function cn(D){const T=(0,ue.m9)(D);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(Ys),Ys},"PUBLIC").setMultipleInstances(!0)),(0,le.registerVersion)(ya,"0.3.15"),(0,le.registerVersion)(ya,"0.3.15","esm2017")}();const cd="/firebase-messaging-sw.js",os="/firebase-cloud-messaging-push-scope",Os="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ld="google.c.a.c_id",ef="google.c.a.c_l",Ac="google.c.a.ts",dd="google.c.a.e";var uu=(()=>{return(D=uu||(uu={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",uu;var D})();function ri(D){const T=new Uint8Array(D);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function hd(D){const N=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),L=atob(N),J=new Uint8Array(L.length);for(let se=0;se<L.length;++se)J[se]=L.charCodeAt(se);return J}const Sc="fcm_token_details_db",pi="fcm_token_object_Store";function tf(D){return Mc.apply(this,arguments)}function Mc(){return Mc=(0,k.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(se=>se.name).includes(Sc))return null;let T=null;return(yield(0,pe.X3)(Sc,5,{upgrade:(L=(0,k.Z)(function*(J,se,Se,ze){var ot;if(se<2||!J.objectStoreNames.contains(pi))return;const Mt=ze.objectStore(pi),St=yield Mt.index("fcmSenderId").get(D);if(yield Mt.clear(),St)if(2===se){const dt=St;if(!dt.auth||!dt.p256dh||!dt.endpoint)return;T={token:dt.fcmToken,createTime:null!==(ot=dt.createTime)&&void 0!==ot?ot:Date.now(),subscriptionOptions:{auth:dt.auth,p256dh:dt.p256dh,endpoint:dt.endpoint,swScope:dt.swScope,vapidKey:"string"==typeof dt.vapidKey?dt.vapidKey:ri(dt.vapidKey)}}}else if(3===se){const dt=St;T={token:dt.fcmToken,createTime:dt.createTime,subscriptionOptions:{auth:ri(dt.auth),p256dh:ri(dt.p256dh),endpoint:dt.endpoint,swScope:dt.swScope,vapidKey:ri(dt.vapidKey)}}}else if(4===se){const dt=St;T={token:dt.fcmToken,createTime:dt.createTime,subscriptionOptions:{auth:ri(dt.auth),p256dh:ri(dt.p256dh),endpoint:dt.endpoint,swScope:dt.swScope,vapidKey:ri(dt.vapidKey)}}}}),function(se,Se,ze,ot){return L.apply(this,arguments)})})).close(),yield(0,pe.Lj)(Sc),yield(0,pe.Lj)("fcm_vapid_details_db"),yield(0,pe.Lj)("undefined"),xc(T)?T:null;var L}),Mc.apply(this,arguments)}function xc(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:T}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const fo="firebase-messaging-store";let pd=null;function gi(){return pd||(pd=(0,pe.X3)("firebase-messaging-database",1,{upgrade:(D,T)=>{0===T&&D.createObjectStore(fo)}})),pd}function cu(D){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,k.Z)(function*(D){const T=Da(D),L=yield(yield gi()).transaction(fo).objectStore(fo).get(T);if(L)return L;{const J=yield tf(D.appConfig.senderId);if(J)return yield ks(D,J),J}})).apply(this,arguments)}function ks(D,T){return lu.apply(this,arguments)}function lu(){return(lu=(0,k.Z)(function*(D,T){const N=Da(D),J=(yield gi()).transaction(fo,"readwrite");return yield J.objectStore(fo).put(T,N),yield J.done,T})).apply(this,arguments)}function du(D){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,k.Z)(function*(D){const T=Da(D),L=(yield gi()).transaction(fo,"readwrite");yield L.objectStore(fo).delete(T),yield L.done})).apply(this,arguments)}function Da({appConfig:D}){return D.appId}const xn=new ue.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function hu(D,T){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,k.Z)(function*(D,T){var N;const L=yield kn(D),J=gu(T),se={method:"POST",headers:L,body:JSON.stringify(J)};let Se;try{Se=yield(yield fetch(pu(D.appConfig),se)).json()}catch(ze){throw xn.create("token-subscribe-failed",{errorInfo:null===(N=ze)||void 0===N?void 0:N.toString()})}if(Se.error)throw xn.create("token-subscribe-failed",{errorInfo:Se.error.message});if(!Se.token)throw xn.create("token-subscribe-no-token");return Se.token})).apply(this,arguments)}function Ps(D,T){return fu.apply(this,arguments)}function fu(){return(fu=(0,k.Z)(function*(D,T){var N;const L=yield kn(D),J=gu(T.subscriptionOptions),se={method:"PATCH",headers:L,body:JSON.stringify(J)};let Se;try{Se=yield(yield fetch(`${pu(D.appConfig)}/${T.token}`,se)).json()}catch(ze){throw xn.create("token-update-failed",{errorInfo:null===(N=ze)||void 0===N?void 0:N.toString()})}if(Se.error)throw xn.create("token-update-failed",{errorInfo:Se.error.message});if(!Se.token)throw xn.create("token-update-no-token");return Se.token})).apply(this,arguments)}function $o(D,T){return gd.apply(this,arguments)}function gd(){return(gd=(0,k.Z)(function*(D,T){var N;const J={method:"DELETE",headers:yield kn(D)};try{const Se=yield(yield fetch(`${pu(D.appConfig)}/${T}`,J)).json();if(Se.error)throw xn.create("token-unsubscribe-failed",{errorInfo:Se.error.message})}catch(se){throw xn.create("token-unsubscribe-failed",{errorInfo:null===(N=se)||void 0===N?void 0:N.toString()})}})).apply(this,arguments)}function pu({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function kn(D){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,k.Z)(function*({appConfig:D,installations:T}){const N=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${N}`})})).apply(this,arguments)}function gu({p256dh:D,auth:T,endpoint:N,vapidKey:L}){const J={web:{endpoint:N,auth:T,p256dh:D}};return L!==Os&&(J.web.applicationPubKey=L),J}const Ta=6048e5;function pr(D){return Rc.apply(this,arguments)}function Rc(){return(Rc=(0,k.Z)(function*(D){const T=yield Gi(D.swRegistration,D.vapidKey),N={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:T.endpoint,auth:ri(T.getKey("auth")),p256dh:ri(T.getKey("p256dh"))},L=yield cu(D.firebaseDependencies);if(L){if(Aa(L.subscriptionOptions,N))return Date.now()>=L.createTime+Ta?jr(D,{token:L.token,createTime:Date.now(),subscriptionOptions:N}):L.token;try{yield $o(D.firebaseDependencies,L.token)}catch(J){console.warn(J)}return po(D.firebaseDependencies,N)}return po(D.firebaseDependencies,N)})).apply(this,arguments)}function Go(D){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,k.Z)(function*(D){const T=yield cu(D.firebaseDependencies);T&&(yield $o(D.firebaseDependencies,T.token),yield du(D.firebaseDependencies));const N=yield D.swRegistration.pushManager.getSubscription();return!N||N.unsubscribe()})).apply(this,arguments)}function jr(D,T){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,k.Z)(function*(D,T){try{const N=yield Ps(D.firebaseDependencies,T),L=Object.assign(Object.assign({},T),{token:N,createTime:Date.now()});return yield ks(D.firebaseDependencies,L),N}catch(N){throw yield Go(D),N}})).apply(this,arguments)}function po(D,T){return mu.apply(this,arguments)}function mu(){return(mu=(0,k.Z)(function*(D,T){const L={token:yield hu(D,T),createTime:Date.now(),subscriptionOptions:T};return yield ks(D,L),L.token})).apply(this,arguments)}function Gi(D,T){return kc.apply(this,arguments)}function kc(){return(kc=(0,k.Z)(function*(D,T){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:hd(T)})})).apply(this,arguments)}function Aa(D,T){return T.vapidKey===D.vapidKey&&T.endpoint===D.endpoint&&T.auth===D.auth&&T.p256dh===D.p256dh}function tt(D){const T={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function Pc(D,T){if(!T.notification)return;D.notification={};const N=T.notification.title;N&&(D.notification.title=N);const L=T.notification.body;L&&(D.notification.body=L);const J=T.notification.image;J&&(D.notification.image=J);const se=T.notification.icon;se&&(D.notification.icon=se)}(T,D),function Xy(D,T){!T.data||(D.data=T.data)}(T,D),function Mg(D,T){var N,L,J,se,Se;if(!(T.fcmOptions||null!==(N=T.notification)&&void 0!==N&&N.click_action))return;D.fcmOptions={};const ze=null!==(J=null===(L=T.fcmOptions)||void 0===L?void 0:L.link)&&void 0!==J?J:null===(se=T.notification)||void 0===se?void 0:se.click_action;ze&&(D.fcmOptions.link=ze);const ot=null===(Se=T.fcmOptions)||void 0===Se?void 0:Se.analytics_label;ot&&(D.fcmOptions.analyticsLabel=ot)}(T,D),T}function md(D){return"object"==typeof D&&!!D&&ld in D}function nf(D,T){const N=[];for(let L=0;L<D.length;L++)N.push(D.charAt(L)),L<T.length&&N.push(T.charAt(L));return N.join("")}function Sa(D){return xn.create("missing-app-config-values",{valueName:D})}nf("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),nf("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class xg{constructor(T,N,L){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const J=function rf(D){if(!D||!D.options)throw Sa("App Configuration Object");if(!D.name)throw Sa("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:N}=D;for(const L of T)if(!N[L])throw Sa(L);return{appName:D.name,projectId:N.projectId,apiKey:N.apiKey,appId:N.appId,senderId:N.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:J,installations:N,analyticsProvider:L}}_delete(){return Promise.resolve()}}function De(D){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,k.Z)(function*(D){var T;try{D.swRegistration=yield navigator.serviceWorker.register(cd,{scope:os}),D.swRegistration.update().catch(()=>{})}catch(N){throw xn.create("failed-service-worker-registration",{browserErrorMessage:null===(T=N)||void 0===T?void 0:T.message})}})).apply(this,arguments)}function Ma(D,T){return yu.apply(this,arguments)}function yu(){return(yu=(0,k.Z)(function*(D,T){if(!T&&!D.swRegistration&&(yield De(D)),T||!D.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw xn.create("invalid-sw-registration");D.swRegistration=T}})).apply(this,arguments)}function Gn(D,T){return zo.apply(this,arguments)}function zo(){return(zo=(0,k.Z)(function*(D,T){T?D.vapidKey=T:D.vapidKey||(D.vapidKey=Os)})).apply(this,arguments)}function Pi(){return(Pi=(0,k.Z)(function*(D,T){if(!navigator)throw xn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw xn.create("permission-blocked");return yield Gn(D,T?.vapidKey),yield Ma(D,T?.serviceWorkerRegistration),pr(D)})).apply(this,arguments)}function _u(D,T,N){return qo.apply(this,arguments)}function qo(){return(qo=(0,k.Z)(function*(D,T,N){const L=Fc(T);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(L,{message_id:N[ld],message_name:N[ef],message_time:N[Ac],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Fc(D){switch(D){case uu.NOTIFICATION_CLICKED:return"notification_open";case uu.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Lc(){return(Lc=(0,k.Z)(function*(D,T){const N=T.data;if(!N.isFirebaseMessaging)return;D.onMessageHandler&&N.messageType===uu.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(tt(N)):D.onMessageHandler.next(tt(N)));const L=N.data;md(L)&&"1"===L[dd]&&(yield _u(D,N.messageType,L))})).apply(this,arguments)}const Vc="@firebase/messaging",Ls=D=>{const T=new xg(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",N=>function sf(D,T){return Lc.apply(this,arguments)}(T,N)),T},Wo=D=>{const T=D.getProvider("messaging").getImmediate();return{getToken:L=>function mi(D,T){return Pi.apply(this,arguments)}(T,L)}};function as(){return yd.apply(this,arguments)}function yd(){return(yd=(0,k.Z)(function*(){try{yield(0,ue.eu)()}catch{return!1}return typeof window<"u"&&(0,ue.hl)()&&(0,ue.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Zo(){(0,le._registerComponent)(new fe.wA("messaging",Ls,"PUBLIC")),(0,le._registerComponent)(new fe.wA("messaging-internal",Wo,"PRIVATE")),(0,le.registerVersion)(Vc,"0.11.0"),(0,le.registerVersion)(Vc,"0.11.0","esm2017")}();const Uc="analytics",df="firebase_id",go="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Eu="https://www.googletagmanager.com/gtag/js",Jn=new ce.Yd("@firebase/analytics");function vd(D){return Promise.all(D.map(T=>T.catch(N=>N)))}function jc(D,T){const N=document.createElement("script");N.src=`${Eu}?l=${D}&id=${T}`,N.async=!0,document.head.appendChild(N)}function us(D,T,N,L,J,se){return rn.apply(this,arguments)}function rn(){return(rn=(0,k.Z)(function*(D,T,N,L,J,se){const Se=L[J];try{if(Se)yield T[Se];else{const ot=(yield vd(N)).find(Mt=>Mt.measurementId===J);ot&&(yield T[ot.appId])}}catch(ze){Jn.error(ze)}D("config",J,se)})).apply(this,arguments)}function Ed(D,T,N,L,J){return mo.apply(this,arguments)}function mo(){return(mo=(0,k.Z)(function*(D,T,N,L,J){try{let se=[];if(J&&J.send_to){let Se=J.send_to;Array.isArray(Se)||(Se=[Se]);const ze=yield vd(N);for(const ot of Se){const Mt=ze.find(dt=>dt.measurementId===ot),St=Mt&&T[Mt.appId];if(!St){se=[];break}se.push(St)}}0===se.length&&(se=Object.values(T)),yield Promise.all(se),D("event",L,J||{})}catch(se){Jn.error(se)}})).apply(this,arguments)}function ff(D){const T=window.document.getElementsByTagName("script");for(const N of Object.values(T))if(N.src&&N.src.includes(Eu)&&N.src.includes(D))return N;return null}const Xn=new ue.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),yo=new class Fi{constructor(T={},N=1e3){this.throttleMetadata=T,this.intervalMillis=N}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,N){this.throttleMetadata[T]=N}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function wd(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function Hr(D){return cs.apply(this,arguments)}function cs(){return(cs=(0,k.Z)(function*(D){var T;const{appId:N,apiKey:L}=D,J={method:"GET",headers:wd(L)},se=go.replace("{app-id}",N),Se=yield fetch(se,J);if(200!==Se.status&&304!==Se.status){let ze="";try{const ot=yield Se.json();null!==(T=ot.error)&&void 0!==T&&T.message&&(ze=ot.error.message)}catch{}throw Xn.create("config-fetch-failed",{httpStatus:Se.status,responseMessage:ze})}return Se.json()})).apply(this,arguments)}function Un(D){return bu.apply(this,arguments)}function bu(){return(bu=(0,k.Z)(function*(D,T=yo,N){const{appId:L,apiKey:J,measurementId:se}=D.options;if(!L)throw Xn.create("no-app-id");if(!J){if(se)return{measurementId:se,appId:L};throw Xn.create("no-api-key")}const Se=T.getThrottleMetadata(L)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ze=new Gc;return setTimeout((0,k.Z)(function*(){ze.abort()}),void 0!==N?N:6e4),Vs({appId:L,apiKey:J,measurementId:se},Se,ze,T)})).apply(this,arguments)}function Vs(D,T,N){return xa.apply(this,arguments)}function xa(){return(xa=(0,k.Z)(function*(D,{throttleEndTimeMillis:T,backoffCount:N},L,J=yo){var se,Se;const{appId:ze,measurementId:ot}=D;try{yield $c(L,T)}catch(Mt){if(ot)return Jn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ot} provided in the "measurementId" field in the local Firebase config. [${null===(se=Mt)||void 0===se?void 0:se.message}]`),{appId:ze,measurementId:ot};throw Mt}try{const Mt=yield Hr(D);return J.deleteThrottleMetadata(ze),Mt}catch(Mt){const St=Mt;if(!gf(St)){if(J.deleteThrottleMetadata(ze),ot)return Jn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ot} provided in the "measurementId" field in the local Firebase config. [${St?.message}]`),{appId:ze,measurementId:ot};throw Mt}const dt=503===Number(null===(Se=St?.customData)||void 0===Se?void 0:Se.httpStatus)?(0,ue.$s)(N,J.intervalMillis,30):(0,ue.$s)(N,J.intervalMillis),Dn={throttleEndTimeMillis:Date.now()+dt,backoffCount:N+1};return J.setThrottleMetadata(ze,Dn),Jn.debug(`Calling attemptFetch again in ${dt} millis`),Vs(D,Dn,L,J)}})).apply(this,arguments)}function $c(D,T){return new Promise((N,L)=>{const J=Math.max(T-Date.now(),0),se=setTimeout(N,J);D.addEventListener(()=>{clearTimeout(se),L(Xn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function gf(D){if(!(D instanceof ue.ZR&&D.customData))return!1;const T=Number(D.customData.httpStatus);return 429===T||500===T||503===T||504===T}class Gc{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let Iu,js;function qi(){return(qi=(0,k.Z)(function*(D,T,N,L,J){if(J&&J.global)D("event",N,L);else{const se=yield T;D("event",N,Object.assign(Object.assign({},L),{send_to:se}))}})).apply(this,arguments)}function Id(D){js=D}function zc(D){Iu=D}function Cu(){return mf.apply(this,arguments)}function mf(){return(mf=(0,k.Z)(function*(){var D;if(!(0,ue.hl)())return Jn.warn(Xn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ue.eu)()}catch(T){return Jn.warn(Xn.create("indexeddb-unavailable",{errorInfo:null===(D=T)||void 0===D?void 0:D.toString()}).message),!1}return!0})).apply(this,arguments)}function Tu(){return(Tu=(0,k.Z)(function*(D,T,N,L,J,se,Se){var ze;const ot=Un(D);ot.then(ii=>{N[ii.measurementId]=ii.appId,D.options.measurementId&&ii.measurementId!==D.options.measurementId&&Jn.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${ii.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ii=>Jn.error(ii)),T.push(ot);const Mt=Cu().then(ii=>{if(ii)return L.getId()}),[St,dt]=yield Promise.all([ot,Mt]);ff(se)||jc(se,St.measurementId),js&&(J("consent","default",js),Id(void 0)),J("js",new Date);const Dn=null!==(ze=Se?.config)&&void 0!==ze?ze:{};return Dn.origin="firebase",Dn.update=!0,null!=dt&&(Dn[df]=dt),J("config",St.measurementId,Dn),Iu&&(J("set",Iu),zc(void 0)),St.measurementId})).apply(this,arguments)}class qc{constructor(T){this.app=T}_delete(){return delete Vi[this.app.options.appId],Promise.resolve()}}let Vi={},Qo=[];const Oa={};let Au,Ui,Hs="dataLayer",$s=!1;function Su(D,T,N){!function Og(){const D=[];if((0,ue.ru)()&&D.push("This is a browser extension environment."),(0,ue.zI)()||D.push("Cookies are not available."),D.length>0){const T=D.map((L,J)=>`(${J+1}) ${L}`).join(" "),N=Xn.create("invalid-analytics-context",{errorInfo:T});Jn.warn(N.message)}}();const L=D.options.appId;if(!L)throw Xn.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw Xn.create("no-api-key");Jn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Vi[L])throw Xn.create("already-exists",{id:L});if(!$s){!function zn(D){let T=[];Array.isArray(window[D])?T=window[D]:window[D]=T}(Hs);const{wrappedGtag:se,gtagCore:Se}=function hf(D,T,N,L,J){let se=function(...Se){window[L].push(arguments)};return window[J]&&"function"==typeof window[J]&&(se=window[J]),window[J]=function Hc(D,T,N,L){function se(){return(se=(0,k.Z)(function*(Se,ze,ot){try{"event"===Se?yield Ed(D,T,N,ze,ot):"config"===Se?yield us(D,T,N,L,ze,ot):"consent"===Se?D("consent","update",ot):D("set",ze)}catch(Mt){Jn.error(Mt)}})).apply(this,arguments)}return function J(Se,ze,ot){return se.apply(this,arguments)}}(se,D,T,N),{gtagCore:se,wrappedGtag:window[J]}}(Vi,Qo,Oa,Hs,"gtag");Ui=se,Au=Se,$s=!0}return Vi[L]=function $r(D,T,N,L,J,se,Se){return Tu.apply(this,arguments)}(D,Qo,Oa,T,Au,Hs,N),new qc(D)}function Zc(){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,k.Z)(function*(){if((0,ue.ru)()||!(0,ue.zI)()||!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch{return!1}})).apply(this,arguments)}const ls="@firebase/analytics";!function Pa(){(0,le._registerComponent)(new fe.wA(Uc,(T,{options:N})=>Su(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),N),"PUBLIC")),(0,le._registerComponent)(new fe.wA("analytics-internal",function D(T){try{const N=T.getProvider(Uc).getImmediate();return{logEvent:(L,J,se)=>function Cd(D,T,N,L){D=(0,ue.m9)(D),function bd(D,T,N,L,J){return qi.apply(this,arguments)}(Ui,Vi[D.app.options.appId],T,N,L).catch(J=>Jn.error(J))}(N,L,J,se)}}catch(N){throw Xn.create("interop-component-reg-failed",{reason:N})}},"PRIVATE")),(0,le.registerVersion)(ls,"0.8.4"),(0,le.registerVersion)(ls,"0.8.4","esm2017")}();var Yc=P(4408),Gs=P(7565);const Sd=new class Ad extends Gs.v{}(class Td extends Yc.o{constructor(T,N){super(T,N),this.scheduler=T,this.work=N}schedule(T,N=0){return N>0?super.schedule(T,N):(this.delay=N,this.state=T,this.scheduler.flush(this),this)}execute(T,N){return N>0||this.closed?super.execute(T,N):this._execute(T,N)}requestAsyncId(T,N,L=0){return null!=L&&L>0||null==L&&this.delay>0?super.requestAsyncId(T,N,L):(T.flush(this),0)}});var vf=P(4986),Qc=P(8505),Xo=P(9468),Ef=P(5363);const t_=new d.GfV("7.5.0"),wf="__angularfire_symbol__analyticsIsSupportedValue",bf="__angularfire_symbol__analyticsIsSupported",zs="__angularfire_symbol__remoteConfigIsSupportedValue",Md="__angularfire_symbol__remoteConfigIsSupported",Jc="__angularfire_symbol__messagingIsSupportedValue",Pn="__angularfire_symbol__messagingIsSupported";function Qe(D,T,N){if(T){if(1===T.length)return T[0];const se=T.filter(Se=>Se.app===N);if(1===se.length)return se[0]}return N.container.getProvider(D).getImmediate({optional:!0})}globalThis[bf]||(globalThis[bf]=Zc().then(D=>globalThis[wf]=D).catch(()=>globalThis[wf]=!1)),globalThis[Pn]||(globalThis[Pn]=as().then(D=>globalThis[Jc]=D).catch(()=>globalThis[Jc]=!1)),globalThis[Md]||(globalThis[Md]=Tr().then(D=>globalThis[zs]=D).catch(()=>globalThis[zs]=!1));const bn=(D,T)=>{const N=T?[T]:(0,te.C6)(),L=[];return N.forEach(J=>{J.container.getProvider(D).instances.forEach(Se=>{L.includes(Se)||L.push(Se)})}),L};function sr(){}class ds{constructor(T,N=Sd){this.zone=T,this.delegate=N}now(){return this.delegate.now()}schedule(T,N,L){const J=this.zone;return this.delegate.schedule(function(Se){J.runGuarded(()=>{T.apply(this,[Se])})},N,L)}}class Ws{constructor(T){this.zone=T,this.task=null}call(T,N){const L=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",sr,{},sr,sr)),N.pipe((0,Qc.b)({next:L,complete:L,error:L})).subscribe(T).add(L)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let yi=(()=>{class D{constructor(N){this.ngZone=N,this.outsideAngular=N.runOutsideAngular(()=>new ds(Zone.current)),this.insideAngular=N.run(()=>new ds(Zone.current,vf.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(N){return new(N||D)(d.LFG(d.R0b))},D.\u0275prov=d.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function hs(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function Sr(D){return hs(),function Ks(D){return function(N){return(N=N.lift(new Ws(D.ngZone))).pipe((0,Xo.R)(D.outsideAngular),(0,Ef.Q)(D.insideAngular))}}(hs())(D)}},2090:(lt,Ie,P)=>{P.d(Ie,{$s:()=>et,BH:()=>gn,G6:()=>Re,L:()=>pe,LL:()=>tn,Pz:()=>nn,Sg:()=>Bt,UG:()=>Ye,US:()=>fe,ZB:()=>$,ZR:()=>yt,aH:()=>pt,b$:()=>Me,eu:()=>Pe,hl:()=>$e,jU:()=>rt,m9:()=>jt,ne:()=>xs,pd:()=>Cn,r3:()=>Ms,ru:()=>ge,tV:()=>me,uI:()=>Ae,vZ:()=>yn,w1:()=>Ve,xO:()=>ts,xb:()=>Lr,z$:()=>He,zI:()=>j,zd:()=>Ni});const le=function(z){const U=[];let Y=0;for(let _e=0;_e<z.length;_e++){let ne=z.charCodeAt(_e);ne<128?U[Y++]=ne:ne<2048?(U[Y++]=ne>>6|192,U[Y++]=63&ne|128):55296==(64512&ne)&&_e+1<z.length&&56320==(64512&z.charCodeAt(_e+1))?(ne=65536+((1023&ne)<<10)+(1023&z.charCodeAt(++_e)),U[Y++]=ne>>18|240,U[Y++]=ne>>12&63|128,U[Y++]=ne>>6&63|128,U[Y++]=63&ne|128):(U[Y++]=ne>>12|224,U[Y++]=ne>>6&63|128,U[Y++]=63&ne|128)}return U},fe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(z,U){if(!Array.isArray(z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Y=U?this.byteToCharMapWebSafe_:this.byteToCharMap_,_e=[];for(let ne=0;ne<z.length;ne+=3){const it=z[ne],$t=ne+1<z.length,Qt=$t?z[ne+1]:0,An=ne+2<z.length,bt=An?z[ne+2]:0;let Kn=(15&Qt)<<2|bt>>6,Uo=63&bt;An||(Uo=64,$t||(Kn=64)),_e.push(Y[it>>2],Y[(3&it)<<4|Qt>>4],Y[Kn],Y[Uo])}return _e.join("")},encodeString(z,U){return this.HAS_NATIVE_SUPPORT&&!U?btoa(z):this.encodeByteArray(le(z),U)},decodeString(z,U){return this.HAS_NATIVE_SUPPORT&&!U?atob(z):function(z){const U=[];let Y=0,_e=0;for(;Y<z.length;){const ne=z[Y++];if(ne<128)U[_e++]=String.fromCharCode(ne);else if(ne>191&&ne<224){const it=z[Y++];U[_e++]=String.fromCharCode((31&ne)<<6|63&it)}else if(ne>239&&ne<365){const An=((7&ne)<<18|(63&z[Y++])<<12|(63&z[Y++])<<6|63&z[Y++])-65536;U[_e++]=String.fromCharCode(55296+(An>>10)),U[_e++]=String.fromCharCode(56320+(1023&An))}else{const it=z[Y++],$t=z[Y++];U[_e++]=String.fromCharCode((15&ne)<<12|(63&it)<<6|63&$t)}}return U.join("")}(this.decodeStringToByteArray(z,U))},decodeStringToByteArray(z,U){this.init_();const Y=U?this.charToByteMapWebSafe_:this.charToByteMap_,_e=[];for(let ne=0;ne<z.length;){const it=Y[z.charAt(ne++)],Qt=ne<z.length?Y[z.charAt(ne)]:0;++ne;const bt=ne<z.length?Y[z.charAt(ne)]:64;++ne;const Wt=ne<z.length?Y[z.charAt(ne)]:64;if(++ne,null==it||null==Qt||null==bt||null==Wt)throw Error();_e.push(it<<2|Qt>>4),64!==bt&&(_e.push(Qt<<4&240|bt>>2),64!==Wt&&_e.push(bt<<6&192|Wt))}return _e},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let z=0;z<this.ENCODED_VALS.length;z++)this.byteToCharMap_[z]=this.ENCODED_VALS.charAt(z),this.charToByteMap_[this.byteToCharMap_[z]]=z,this.byteToCharMapWebSafe_[z]=this.ENCODED_VALS_WEBSAFE.charAt(z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[z]]=z,z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(z)]=z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(z)]=z)}}},pe=function(z){return function(z){const U=le(z);return fe.encodeByteArray(U,!0)}(z).replace(/\./g,"")},me=function(z){try{return fe.decodeString(z,!0)}catch(U){console.error("base64Decode failed: ",U)}return null};function $(z,U){if(!(U instanceof Object))return U;switch(U.constructor){case Date:return new Date(U.getTime());case Object:void 0===z&&(z={});break;case Array:z=[];break;default:return U}for(const Y in U)!U.hasOwnProperty(Y)||!Q(Y)||(z[Y]=$(z[Y],U[Y]));return z}function Q(z){return"__proto__"!==z}function He(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ae(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(He())}function Ye(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function rt(){return"object"==typeof self&&self.self===self}function ge(){const z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof z&&void 0!==z.id}function Me(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ve(){const z=He();return z.indexOf("MSIE ")>=0||z.indexOf("Trident/")>=0}function Re(){return!Ye()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $e(){return"object"==typeof indexedDB}function Pe(){return new Promise((z,U)=>{try{let Y=!0;const _e="validate-browser-context-for-indexeddb-analytics-module",ne=self.indexedDB.open(_e);ne.onsuccess=()=>{ne.result.close(),Y||self.indexedDB.deleteDatabase(_e),z(!0)},ne.onupgradeneeded=()=>{Y=!1},ne.onerror=()=>{var it;U((null===(it=ne.error)||void 0===it?void 0:it.message)||"")}}catch(Y){U(Y)}})}function j(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const ie=()=>{try{return function we(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const z=process.env.__FIREBASE_DEFAULTS__;return z?JSON.parse(z):void 0})()||(()=>{if(typeof document>"u")return;let z;try{z=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const U=z&&me(z[1]);return U&&JSON.parse(U)})()}catch(z){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${z}`)}},pt=()=>{var z;return null===(z=ie())||void 0===z?void 0:z.config},nn=z=>{var U;return null===(U=ie())||void 0===U?void 0:U[`_${z}`]};class gn{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((U,Y)=>{this.resolve=U,this.reject=Y})}wrapCallback(U){return(Y,_e)=>{Y?this.reject(Y):this.resolve(_e),"function"==typeof U&&(this.promise.catch(()=>{}),1===U.length?U(Y):U(Y,_e))}}}function Bt(z,U){if(z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const _e=U||"demo-project",ne=z.iat||0,it=z.sub||z.user_id;if(!it)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const $t=Object.assign({iss:`https://securetoken.google.com/${_e}`,aud:_e,iat:ne,exp:ne+3600,auth_time:ne,sub:it,user_id:it,firebase:{sign_in_provider:"custom",identities:{}}},z);return[pe(JSON.stringify({alg:"none",type:"JWT"})),pe(JSON.stringify($t)),""].join(".")}class yt extends Error{constructor(U,Y,_e){super(Y),this.code=U,this.customData=_e,this.name="FirebaseError",Object.setPrototypeOf(this,yt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tn.prototype.create)}}class tn{constructor(U,Y,_e){this.service=U,this.serviceName=Y,this.errors=_e}create(U,...Y){const _e=Y[0]||{},ne=`${this.service}/${U}`,it=this.errors[U],$t=it?function wr(z,U){return z.replace(kr,(Y,_e)=>{const ne=U[_e];return null!=ne?String(ne):`<${_e}?>`})}(it,_e):"Error";return new yt(ne,`${this.serviceName}: ${$t} (${ne}).`,_e)}}const kr=/\{\$([^}]+)}/g;function Ms(z,U){return Object.prototype.hasOwnProperty.call(z,U)}function Lr(z){for(const U in z)if(Object.prototype.hasOwnProperty.call(z,U))return!1;return!0}function yn(z,U){if(z===U)return!0;const Y=Object.keys(z),_e=Object.keys(U);for(const ne of Y){if(!_e.includes(ne))return!1;const it=z[ne],$t=U[ne];if(ei(it)&&ei($t)){if(!yn(it,$t))return!1}else if(it!==$t)return!1}for(const ne of _e)if(!Y.includes(ne))return!1;return!0}function ei(z){return null!==z&&"object"==typeof z}function ts(z){const U=[];for(const[Y,_e]of Object.entries(z))Array.isArray(_e)?_e.forEach(ne=>{U.push(encodeURIComponent(Y)+"="+encodeURIComponent(ne))}):U.push(encodeURIComponent(Y)+"="+encodeURIComponent(_e));return U.length?"&"+U.join("&"):""}function Ni(z){const U={};return z.replace(/^\?/,"").split("&").forEach(_e=>{if(_e){const[ne,it]=_e.split("=");U[decodeURIComponent(ne)]=decodeURIComponent(it)}}),U}function Cn(z){const U=z.indexOf("?");if(!U)return"";const Y=z.indexOf("#",U);return z.substring(U,Y>0?Y:void 0)}function xs(z,U){const Y=new kt(z,U);return Y.subscribe.bind(Y)}class kt{constructor(U,Y){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Y,this.task.then(()=>{U(this)}).catch(_e=>{this.error(_e)})}next(U){this.forEachObserver(Y=>{Y.next(U)})}error(U){this.forEachObserver(Y=>{Y.error(U)}),this.close(U)}complete(){this.forEachObserver(U=>{U.complete()}),this.close()}subscribe(U,Y,_e){let ne;if(void 0===U&&void 0===Y&&void 0===_e)throw new Error("Missing Observer.");ne=function Tt(z,U){if("object"!=typeof z||null===z)return!1;for(const Y of U)if(Y in z&&"function"==typeof z[Y])return!0;return!1}(U,["next","error","complete"])?U:{next:U,error:Y,complete:_e},void 0===ne.next&&(ne.next=ns),void 0===ne.error&&(ne.error=ns),void 0===ne.complete&&(ne.complete=ns);const it=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ne.error(this.finalError):ne.complete()}catch{}}),this.observers.push(ne),it}unsubscribeOne(U){void 0===this.observers||void 0===this.observers[U]||(delete this.observers[U],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(U){if(!this.finalized)for(let Y=0;Y<this.observers.length;Y++)this.sendOne(Y,U)}sendOne(U,Y){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[U])try{Y(this.observers[U])}catch(_e){typeof console<"u"&&console.error&&console.error(_e)}})}close(U){this.finalized||(this.finalized=!0,void 0!==U&&(this.finalError=U),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ns(){}function et(z,U=1e3,Y=2){const _e=U*Math.pow(Y,z),ne=Math.round(.5*_e*(Math.random()-.5)*2);return Math.min(144e5,_e+ne)}function jt(z){return z&&z._delegate?z._delegate:z}},2546:(lt,Ie,P)=>{var d=P(4650);let te=null;function k(){return te}class fe{}const ce=new d.OlP("DocumentToken");let pe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function me(){return(0,d.LFG)($)}()},providedIn:"platform"}),n})();const H=new d.OlP("Location Initialized");let $=(()=>{class n extends pe{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){Q()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){Q()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ce))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function He(){return new $((0,d.LFG)(ce))}()},providedIn:"platform"}),n})();function Q(){return!!window.history.pushState}function Ae(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ye(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function rt(n){return n&&"?"!==n[0]?"?"+n:n}let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(Ce)},providedIn:"root"}),n})();const Me=new d.OlP("appBaseHref");let Ce=(()=>{class n extends ge{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,d.f3M)(ce).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ae(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+rt(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,u){const l=this.prepareExternalUrl(i+rt(u));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,u){const l=this.prepareExternalUrl(i+rt(u));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(pe),d.LFG(Me,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ve=(()=>{class n extends ge{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ae(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,u){let l=this.prepareExternalUrl(i+rt(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,u){let l=this.prepareExternalUrl(i+rt(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(pe),d.LFG(Me,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),xe=(()=>{class n{constructor(t){this._subject=new d.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=Ye($e(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+rt(r))}normalize(t){return n.stripTrailingSlash(function Re(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,$e(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+rt(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+rt(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=rt,n.joinWithSlash=Ae,n.stripTrailingSlash=Ye,n.\u0275fac=function(t){return new(t||n)(d.LFG(ge))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function be(){return new xe((0,d.LFG)(ge))}()},providedIn:"root"}),n})();function $e(n){return n.replace(/\/index.html$/,"")}function hr(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(u)}return null}class Cr{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let hi=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,u,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Cr(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===u?void 0:u);else if(null!==u){const p=r.get(u);r.move(p,l),Mn(p,i)}});for(let i=0,u=r.length;i<u;i++){const p=r.get(i).context;p.index=i,p.count=u,p.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Mn(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Mn(n,e){n.context.$implicit=e.item}let cn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new uo,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Ns("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Ns("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class uo{constructor(){this.$implicit=null,this.ngIf=null}}function Ns(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}let Ur=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:i,ngTemplateOutletContext:u,ngTemplateOutletInjector:l}=this;this._viewRef=r.createEmbeddedView(i,u,l?{injector:l}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[d.TTD]}),n})(),ri=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const hd="browser";function Mc(n){return"server"===n}let fo=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new pd((0,d.LFG)(ce),window)}),n})();class pd{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function cu(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const u=i.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],i-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=gi(this.window.history)||gi(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function gi(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ks{}class vd extends fe{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class jc extends vd{static makeCurrent(){!function ue(n){te||(te=n)}(new jc)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function us(){return zn=zn||document.querySelector("base"),zn?zn.getAttribute("href"):null}();return null==t?null:function Ed(n){rn=rn||document.createElement("a"),rn.setAttribute("href",n);const e=rn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){zn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return hr(document.cookie,e)}}let rn,zn=null;const mo=new d.OlP("TRANSITION_ID"),hf=[{provide:d.ip1,useFactory:function Hc(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const r=k(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<i.length;u++)r.remove(i[u])})}},deps:[mo,ce,d.zs3],multi:!0}];let pf=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Xn=new d.OlP("EventManagerPlugins");let zi=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let u=0;u<i.length;u++){const l=i[u];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Xn),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class wu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=k().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Fi=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),yo=(()=>{class n extends Fi{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(u=>{const l=this._doc.createElement("style");l.textContent=u,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(wd),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(wd))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ce))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function wd(n){k().remove(n)}const Hr={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},cs=/%COMP%/g;function Gc(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Gc(n,i,t):(i=i.replace(cs,n),t.push(i))}return t}function Iu(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let qi=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Na(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case d.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Us(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case d.ifc.ShadowDom:return new Du(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Gc(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(zi),d.LFG(yo),d.LFG(d.AFp))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Na{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Hr[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Ra(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Ra(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const u=Hr[i];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Hr[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,i&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Iu(r)):this.eventManager.addEventListener(e,t,Iu(r))}}function Ra(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Us extends Na{constructor(e,t,r,i){super(e),this.component=r;const u=Gc(i+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function $c(n){return"_ngcontent-%COMP%".replace(cs,n)}(i+"-"+r.id),this.hostAttr=function gf(n){return"_nghost-%COMP%".replace(cs,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Du extends Na{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Gc(i.id,i.styles,[]);for(let l=0;l<u.length;l++){const p=document.createElement("style");p.textContent=u[l],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Bs=(()=>{class n extends wu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ce))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Yo=["alt","control","meta","shift"],js={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Id={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let zc=(()=>{class n extends wu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const u=n._normalizeKey(r.pop());let l="",p=r.indexOf("code");if(p>-1&&(r.splice(p,1),l="code."),Yo.forEach(b=>{const C=r.indexOf(b);C>-1&&(r.splice(C,1),l+=b+".")}),l+=u,0!=r.length||0===u.length)return null;const _={};return _.domEventName=i,_.fullKey=l,_}static matchEventFullKeyCode(t,r){let i=js[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(i=t.code,u="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Yo.forEach(l=>{l!==i&&(0,Id[l])(t)&&(u+=l+".")}),u+=i,u===r)}static eventCallback(t,r,i){return u=>{n.matchEventFullKeyCode(u,t)&&i.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ce))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Wc=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:hd},{provide:d.g9A,useValue:function Vi(){jc.makeCurrent()},multi:!0},{provide:ce,useFactory:function Oa(){return(0,d.RDi)(document),document},deps:[]}]),Au=new d.OlP(""),Ui=[{provide:d.rWj,useClass:class ff{addToWindow(e){d.dqk.getAngularTestability=(r,i=!0)=>{const u=e.findTestabilityInTree(r,i);if(null==u)throw new Error("Could not find testability for element.");return u},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const i=d.dqk.getAllAngularTestabilities();let u=i.length,l=!1;const p=function(_){l=l||_,u--,0==u&&r(l)};i.forEach(function(_){_.whenStable(p)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:d.lri,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]}],$s=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function Qo(){return new d.qLn},deps:[]},{provide:Xn,useClass:Bs,multi:!0,deps:[ce,d.R0b,d.Lbi]},{provide:Xn,useClass:zc,multi:!0,deps:[ce]},{provide:qi,useClass:qi,deps:[zi,yo,d.AFp]},{provide:d.FYo,useExisting:qi},{provide:Fi,useExisting:yo},{provide:yo,useClass:yo,deps:[ce]},{provide:zi,useClass:zi,deps:[Xn,d.R0b]},{provide:ks,useClass:pf,deps:[]},[]];let Dd=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:mo,useExisting:d.AFp},hf]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Au,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[...$s,...Ui],imports:[ri,d.hGG]}),n})(),Zc=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ce))},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function yf(){return new Zc((0,d.LFG)(ce))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;let Jc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):d.LFG(qs),r},providedIn:"root"}),n})(),qs=(()=>{class n extends Jc{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case d.q3G.NONE:return r;case d.q3G.HTML:return(0,d.qzn)(r,"HTML")?(0,d.z3N)(r):(0,d.EiD)(this._doc,String(r)).toString();case d.q3G.STYLE:return(0,d.qzn)(r,"Style")?(0,d.z3N)(r):r;case d.q3G.SCRIPT:if((0,d.qzn)(r,"Script"))return(0,d.z3N)(r);throw new Error("unsafe value used in a script context");case d.q3G.URL:return(0,d.qzn)(r,"URL")?(0,d.z3N)(r):(0,d.mCW)(String(r));case d.q3G.RESOURCE_URL:if((0,d.qzn)(r,"ResourceURL"))return(0,d.z3N)(r);throw new Error(`unsafe value used in a resource URL context (see ${d.JZr})`);default:throw new Error(`Unexpected SecurityContext ${t} (see ${d.JZr})`)}}bypassSecurityTrustHtml(t){return(0,d.JVY)(t)}bypassSecurityTrustStyle(t){return(0,d.L6k)(t)}bypassSecurityTrustScript(t){return(0,d.eBb)(t)}bypassSecurityTrustUrl(t){return(0,d.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,d.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ce))},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Pn(n){return new qs(n.get(ce))}(d.LFG(d.zs3)),r},providedIn:"root"}),n})();var vn=P(8996),Fa=P(7669);function Qe(...n){const e=(0,Fa.yG)(n);return(0,vn.D)(n,e)}var bn=P(7579);class sr extends bn.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Ws=(0,P(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var yi=P(9751);const{isArray:hs}=Array,{getPrototypeOf:el,prototype:Zs,keys:n_}=Object;function Nu(n){if(1===n.length){const e=n[0];if(hs(e))return{args:e,keys:null};if(function Sr(n){return n&&"object"==typeof n&&el(n)===Zs}(e)){const t=n_(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Ks=P(4671),at=P(4004);const{isArray:r_}=Array;function T(n){return(0,at.U)(e=>function D(n,e){return r_(e)?n(...e):n(e)}(n,e))}function N(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var L=P(5403),J=P(9672);function se(...n){const e=(0,Fa.yG)(n),t=(0,Fa.jO)(n),{args:r,keys:i}=Nu(n);if(0===r.length)return(0,vn.D)([],e);const u=new yi.y(function Se(n,e,t=Ks.y){return r=>{ze(e,()=>{const{length:i}=n,u=new Array(i);let l=i,p=i;for(let _=0;_<i;_++)ze(e,()=>{const b=(0,vn.D)(n[_],e);let C=!1;b.subscribe((0,L.x)(r,x=>{u[_]=x,C||(C=!0,p--),p||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>N(i,l):Ks.y));return t?u.pipe(T(t)):u}function ze(n,e,t){n?(0,J.f)(t,n,e):e()}var ot=P(8189);function St(...n){return function Mt(){return(0,ot.J)(1)}()((0,vn.D)(n,(0,Fa.yG)(n)))}var dt=P(8421);function Dn(n){return new yi.y(e=>{(0,dt.Xf)(n()).subscribe(e)})}var ii=P(9635),Ys=P(576);function Gr(n,e){const t=(0,Ys.m)(n)?n:()=>n,r=i=>i.error(t());return new yi.y(e?i=>e.schedule(r,0,i):r)}var gr=P(515),tl=P(727),Bn=P(4482);function fs(){return(0,Bn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,L.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,u=t;t=null,i&&(!u||i===u)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class si extends yi.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Bn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new tl.w0;const t=this.getSubject();e.add(this.source.subscribe((0,L.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=tl.w0.EMPTY)}return e}refCount(){return fs()(this)}}function fn(n,e){return(0,Bn.e)((t,r)=>{let i=null,u=0,l=!1;const p=()=>l&&!i&&r.complete();t.subscribe((0,L.x)(r,_=>{i?.unsubscribe();let b=0;const C=u++;(0,dt.Xf)(n(_,C)).subscribe(i=(0,L.x)(r,x=>r.next(e?e(_,x,C,b++):x),()=>{i=null,p()}))},()=>{l=!0,p()}))})}function vo(n){return n<=0?()=>gr.E:(0,Bn.e)((e,t)=>{let r=0;e.subscribe((0,L.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Ru(...n){const e=(0,Fa.yG)(n);return(0,Bn.e)((t,r)=>{(e?St(n,t,e):St(n,t)).subscribe(r)})}function _i(n,e){return(0,Bn.e)((t,r)=>{let i=0;t.subscribe((0,L.x)(r,u=>n.call(e,u,i++)&&r.next(u)))})}var oi=P(5577);function xd(n){return(0,Bn.e)((e,t)=>{let r=!1;e.subscribe((0,L.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function kg(n=Nd){return(0,Bn.e)((e,t)=>{let r=!1;e.subscribe((0,L.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Nd(){return new Ws}function Eo(n,e){const t=arguments.length>=2;return r=>r.pipe(n?_i((i,u)=>n(i,u,r)):Ks.y,vo(1),t?xd(e):kg(()=>new Ws))}function ps(n,e){return(0,Ys.m)(e)?(0,oi.z)(n,e,1):(0,oi.z)(n,1)}var Mr=P(8505);function ea(n){return(0,Bn.e)((e,t)=>{let u,r=null,i=!1;r=e.subscribe((0,L.x)(t,void 0,void 0,l=>{u=(0,dt.Xf)(n(l,ea(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,u.subscribe(t))})}function Pg(n,e,t,r,i){return(u,l)=>{let p=t,_=e,b=0;u.subscribe((0,L.x)(l,C=>{const x=b++;_=p?n(_,C,x):(p=!0,C),r&&l.next(_)},i&&(()=>{p&&l.next(_),l.complete()})))}}function Rd(n,e){return(0,Bn.e)(Pg(n,e,arguments.length>=2,!0))}function Od(n){return n<=0?()=>gr.E:(0,Bn.e)((e,t)=>{let r=[];e.subscribe((0,L.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function i_(n,e){const t=arguments.length>=2;return r=>r.pipe(n?_i((i,u)=>n(i,u,r)):Ks.y,Od(1),t?xd(e):kg(()=>new Ws))}function nl(n){return(0,Bn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Zt="primary",kd=Symbol("RouteTitle");class Df{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ou(n){return new Df(n)}function qE(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let u=0;u<r.length;u++){const l=r[u],p=n[u];if(l.startsWith(":"))i[l.substring(1)]=p;else if(l!==p.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function wo(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let u=0;u<t.length;u++)if(i=t[u],!o_(n[i],e[i]))return!1;return!0}function o_(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,u)=>r[u]===i)}return n===e}function Pd(n){return Array.prototype.concat.apply([],n)}function Cf(n){return n.length>0?n[n.length-1]:null}function mr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Qs(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,vn.D)(Promise.resolve(n)):Qe(n)}const rl=!1,Zi={exact:function Af(n,e,t){if(!Io(n.segments,e.segments)||!Ld(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Af(n.children[r],e.children[r],t))return!1;return!0},subset:Vg},Fg={exact:function Lg(n,e){return wo(n,e)},subset:function Sf(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>o_(n[t],e[t]))},ignored:()=>!0};function Tf(n,e,t){return Zi[t.paths](n.root,e.root,t.matrixParams)&&Fg[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Vg(n,e,t){return Ug(n,e,e.segments,t)}function Ug(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Io(i,t)||e.hasChildren()||!Ld(i,t,r))}if(n.segments.length===t.length){if(!Io(n.segments,t)||!Ld(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Vg(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Io(n.segments,i)&&Ld(n.segments,i,r)&&n.children[Zt])&&Ug(n.children[Zt],e,u,r)}}function Ld(n,e,t){return e.every((r,i)=>Fg[t](n[i].parameters,r.parameters))}class bo{constructor(e=new Kt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ou(this.queryParams)),this._queryParamMap}toString(){return La.serialize(this)}}class Kt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,mr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return il(this)}}class Vd{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ou(this.parameters)),this._parameterMap}toString(){return jg(this)}}function Io(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let ku=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return new yr},providedIn:"root"}),n})();class yr{parse(e){const t=new l_(e);return new bo(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Pu(e.root,!0)}`,r=function xf(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${sl(t)}=${sl(i)}`).join("&"):`${sl(t)}=${sl(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function a_(n){return encodeURI(n)}(e.fragment)}`:""}`}}const La=new yr;function il(n){return n.segments.map(e=>jg(e)).join("/")}function Pu(n,e){if(!n.hasChildren())return il(n);if(e){const t=n.children[Zt]?Pu(n.children[Zt],!1):"",r=[];return mr(n.children,(i,u)=>{u!==Zt&&r.push(`${u}:${Pu(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Bg(n,e){let t=[];return mr(n.children,(r,i)=>{i===Zt&&(t=t.concat(e(r,i)))}),mr(n.children,(r,i)=>{i!==Zt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Zt?[Pu(n.children[Zt],!1)]:[`${i}:${Pu(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Zt]?`${il(n)}/${t[0]}`:`${il(n)}/(${t.join("//")})`}}function Ud(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function sl(n){return Ud(n).replace(/%3B/gi,";")}function Fu(n){return Ud(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Bd(n){return decodeURIComponent(n)}function Mf(n){return Bd(n.replace(/\+/g,"%20"))}function jg(n){return`${Fu(n.path)}${function u_(n){return Object.keys(n).map(e=>`;${Fu(e)}=${Fu(n[e])}`).join("")}(n.parameters)}`}const jd=/^[^\/()?;=#]+/;function Lu(n){const e=n.match(jd);return e?e[0]:""}const Hg=/^[^=?&#]+/,Va=/^[^&#]+/;class l_{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Kt([],{}):new Kt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Zt]=new Kt(e,t)),r}parseSegment(){const e=Lu(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new d.vHH(4009,rl);return this.capture(e),new Vd(Bd(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Lu(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Lu(this.remaining);i&&(r=i,this.capture(r))}e[Bd(t)]=Bd(r)}parseQueryParam(e){const t=function c_(n){const e=n.match(Hg);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function Nf(n){const e=n.match(Va);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=Mf(t),u=Mf(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(u)}else e[i]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Lu(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new d.vHH(4010,rl);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Zt);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[Zt]:new Kt([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new d.vHH(4011,rl)}}function ol(n){return n.segments.length>0?new Kt([],{[Zt]:n}):n}function Do(n){const e={};for(const r of Object.keys(n.children)){const u=Do(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function $g(n){if(1===n.numberOfChildren&&n.children[Zt]){const e=n.children[Zt];return new Kt(n.segments.concat(e.segments),e.children)}return n}(new Kt(n.segments,e))}function Vu(n){return n instanceof bo}function Of(n,e,t,r,i){if(0===t.length)return Uu(e.root,e.root,e.root,r,i);const u=function qg(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new zg(!0,0,n);let e=0,t=!1;const r=n.reduce((i,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const p={};return mr(u.outlets,(_,b)=>{p[b]="string"==typeof _?_.split("/"):_}),[...i,{outlets:p}]}if(u.segmentPath)return[...i,u.segmentPath]}return"string"!=typeof u?[...i,u]:0===l?(u.split("/").forEach((p,_)=>{0==_&&"."===p||(0==_&&""===p?t=!0:".."===p?e++:""!=p&&i.push(p))}),i):[...i,u]},[]);return new zg(t,e,r)}(t);return u.toRoot()?Uu(e.root,e.root,new Kt([],{}),r,i):function l(_){const b=function Ff(n,e,t,r){if(n.isAbsolute)return new Ua(e.root,!0,0);if(-1===r)return new Ua(t,t===e.root,0);return function Bu(n,e,t){let r=n,i=e,u=t;for(;u>i;){if(u-=i,r=r.parent,!r)throw new d.vHH(4005,!1);i=r.segments.length}return new Ua(r,!1,i-u)}(t,r+(al(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,_),C=b.processChildren?ju(b.segmentGroup,b.index,u.commands):Hd(b.segmentGroup,b.index,u.commands);return Uu(e.root,b.segmentGroup,C,r,i)}(n.snapshot?._lastPathIndex)}function al(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Co(n){return"object"==typeof n&&null!=n&&n.outlets}function Uu(n,e,t,r,i){let l,u={};r&&mr(r,(_,b)=>{u[b]=Array.isArray(_)?_.map(C=>`${C}`):`${_}`}),l=n===e?t:kf(n,e,t);const p=ol(Do(l));return new bo(p,u,i)}function kf(n,e,t){const r={};return mr(n.children,(i,u)=>{r[u]=i===e?t:kf(i,e,t)}),new Kt(n.segments,r)}class zg{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&al(r[0]))throw new d.vHH(4003,!1);const i=r.find(Co);if(i&&i!==Cf(r))throw new d.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ua{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Hd(n,e,t){if(n||(n=new Kt([],{})),0===n.segments.length&&n.hasChildren())return ju(n,e,t);const r=function $d(n,e,t){let r=0,i=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return u;const l=n.segments[i],p=t[r];if(Co(p))break;const _=`${p}`,b=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&b&&"object"==typeof b&&void 0===b.outlets){if(!Vf(_,b,l))return u;r+=2}else{if(!Vf(_,{},l))return u;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Kt(n.segments.slice(0,r.pathIndex),{});return u.children[Zt]=new Kt(n.segments.slice(r.pathIndex),n.children),ju(u,0,i)}return r.match&&0===i.length?new Kt(n.segments,{}):r.match&&!n.hasChildren()?To(n,e,t):r.match?ju(n,0,i):To(n,e,t)}function ju(n,e,t){if(0===t.length)return new Kt(n.segments,{});{const r=function Lf(n){return Co(n[0])?n[0].outlets:{[Zt]:n}}(t),i={};return mr(r,(u,l)=>{"string"==typeof u&&(u=[u]),null!==u&&(i[l]=Hd(n.children[l],e,u))}),mr(n.children,(u,l)=>{void 0===r[l]&&(i[l]=u)}),new Kt(n.segments,i)}}function To(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const u=t[i];if(Co(u)){const _=vi(u.outlets);return new Kt(r,_)}if(0===i&&al(t[0])){r.push(new Vd(n.segments[e].path,Ba(t[0]))),i++;continue}const l=Co(u)?u.outlets[Zt]:`${u}`,p=i<t.length-1?t[i+1]:null;l&&p&&al(p)?(r.push(new Vd(l,Ba(p))),i+=2):(r.push(new Vd(l,{})),i++)}return new Kt(r,{})}function vi(n){const e={};return mr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=To(new Kt([],{}),0,t))}),e}function Ba(n){const e={};return mr(n,(t,r)=>e[r]=`${t}`),e}function Vf(n,e,t){return n==t.path&&wo(e,t.parameters)}class na{constructor(e,t){this.id=e,this.url=t}}class ra extends na{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ao extends na{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ul extends na{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Gd extends na{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Wg extends na{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Js extends na{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Uf extends na{constructor(e,t,r,i,u){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class zd extends na{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qd extends na{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zg{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Wd{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class zr{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cl{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ja{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class h_{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gs{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Bf{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Zd(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Zd(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Kd(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Kd(e,this._root).map(t=>t.value)}}function Zd(n,e){if(n===e.value)return e;for(const t of e.children){const r=Zd(n,t);if(r)return r}return null}function Kd(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Kd(n,t);if(r.length)return r.unshift(e),r}return[]}class Ki{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function So(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Yd extends Bf{constructor(e,t){super(e),this.snapshot=t,O(this,e)}toString(){return this.snapshot.toString()}}function ia(n,e){const t=function f_(n,e){const l=new E([],{},{},"",{},Zt,e,null,n.root,-1,{});return new M("",new Ki(l,[]))}(n,e),r=new sr([new Vd("",{})]),i=new sr({}),u=new sr({}),l=new sr({}),p=new sr(""),_=new v(r,i,l,p,u,Zt,e,t.root);return _.snapshot=t.root,new Yd(new Ki(_,[]),t)}class v{constructor(e,t,r,i,u,l,p,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=l,this.component=p,this.title=this.data?.pipe((0,at.U)(b=>b[kd]))??Qe(void 0),this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,at.U)(e=>Ou(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,at.U)(e=>Ou(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function f(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],u=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(u.component)break;r--}}return function m(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class E{constructor(e,t,r,i,u,l,p,_,b,C,x){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=l,this.component=p,this.routeConfig=_,this._urlSegment=b,this._lastPathIndex=C,this._resolve=x}get title(){return this.data?.[kd]}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ou(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ou(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class M extends Bf{constructor(e,t){super(t),this.url=e,O(this,t)}toString(){return q(this._root)}}function O(n,e){e.value._routerState=n,e.children.forEach(t=>O(n,t))}function q(n){const e=n.children.length>0?` { ${n.children.map(q).join(", ")} } `:"";return`${n.value}${e}`}function de(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,wo(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),wo(e.params,t.params)||n.params.next(t.params),function WE(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!wo(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),wo(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Be(n,e){const t=wo(n.params,e.params)&&function qn(n,e){return Io(n,e)&&n.every((t,r)=>wo(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Be(n.parent,e.parent))}function vt(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function ut(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return vt(n,r,i);return vt(n,r)})}(n,e,t);return new Ki(r,i)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(p=>vt(n,p)),l}}const r=function or(n){return new v(new sr(n.url),new sr(n.params),new sr(n.queryParams),new sr(n.fragment),new sr(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(u=>vt(n,u));return new Ki(r,i)}}const Bi="ngNavigationCancelingError";function dl(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Vu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=jf(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function jf(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Bi]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Qd(n){return ms(n)&&Vu(n.url)}function ms(n){return n&&n[Bi]}class Ha{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new $a,this.attachRef=null}}let $a=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Ha,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const hl=!1;let Jd=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Zt,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.parentContexts=(0,d.f3M)($a),this.location=(0,d.f3M)(d.s_b),this.changeDetector=(0,d.f3M)(d.sBO),this.environmentInjector=(0,d.f3M)(d.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new d.vHH(4012,hl);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new d.vHH(4012,hl);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new d.vHH(4012,hl);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new d.vHH(4013,hl);this._activatedRoute=t;const i=this.location,l=t.snapshot.component,p=this.parentContexts.getOrCreateContext(this.name).children,_=new Hf(t,p,i.injector);if(r&&function Kg(n){return!!n.resolveComponentFactory}(r)){const b=r.resolveComponentFactory(l);this.activated=i.createComponent(b,i.length,_)}else this.activated=i.createComponent(l,{index:i.length,injector:_,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[d.TTD]}),n})();class Hf{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===v?this.route:e===$a?this.childContexts:this.parent.get(e,t)}}let $f=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[d.jDz],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},dependencies:[Jd],encapsulation:2}),n})();function fl(n,e){return n.providers&&!n._injector&&(n._injector=(0,d.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Yg(n){const e=n.children&&n.children.map(Yg),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Zt&&(t.component=$f),t}function ys(n){return n.outlet||Zt}function IC(n,e){const t=n.filter(r=>ys(r)===e);return t.push(...n.filter(r=>ys(r)!==e)),t}function Qg(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class p_{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),de(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=So(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,i[l],r),delete i[l]}),mr(i,(u,l)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(i===u)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=So(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],i);if(r&&r.outlet){const l=r.outlet.detach(),p=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:p})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=So(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=So(t);e.children.forEach(u=>{this.activateRoutes(u,i[u.value.outlet],r),this.forwardEvent(new h_(u.value.snapshot))}),e.children.length&&this.forwardEvent(new cl(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(de(i),i===u)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const p=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(p.contexts),l.attachRef=p.componentRef,l.route=p.route.value,l.outlet&&l.outlet.attach(p.componentRef,p.route.value),de(p.route.value),this.activateChildRoutes(e,null,l.children)}else{const p=Qg(i.snapshot),_=p?.get(d._Vd)??null;l.attachRef=null,l.route=i,l.resolver=_,l.injector=p,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class Jg{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class g_{constructor(e,t){this.component=e,this.route=t}}function eN(n,e,t){const r=n._root;return zf(r,e?e._root:null,t,[r.value])}function eh(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,d.Z0I)(n)?e.get(n):n:r}function zf(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=So(e);return n.children.forEach(l=>{(function DC(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,p=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const _=function CC(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Io(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Io(n.url,e.url)||!wo(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Be(n,e)||!wo(n.queryParams,e.queryParams);default:return!Be(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new Jg(r)):(u.data=l.data,u._resolvedData=l._resolvedData),zf(n,e,u.component?p?p.children:null:t,r,i),_&&p&&p.outlet&&p.outlet.isActivated&&i.canDeactivateChecks.push(new g_(p.outlet.component,l))}else l&&th(e,p,i),i.canActivateChecks.push(new Jg(r)),zf(n,null,u.component?p?p.children:null:t,r,i)})(l,u[l.value.outlet],t,r.concat([l.value]),i),delete u[l.value.outlet]}),mr(u,(l,p)=>th(l,t.getContext(p),i)),i}function th(n,e,t){const r=So(n),i=n.value;mr(r,(u,l)=>{th(u,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new g_(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Hu(n){return"function"==typeof n}function y_(n){return n instanceof Ws||"EmptyError"===n?.name}const Xg=Symbol("INITIAL_VALUE");function nh(){return fn(n=>se(n.map(e=>e.pipe(vo(1),Ru(Xg)))).pipe((0,at.U)(e=>{for(const t of e)if(!0!==t){if(t===Xg)return Xg;if(!1===t||t instanceof bo)return t}return!0}),_i(e=>e!==Xg),vo(1)))}function iw(n){return(0,ii.z)((0,Mr.b)(e=>{if(Vu(e))throw dl(0,e)}),(0,at.U)(e=>!0===e))}const em={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function v_(n,e,t,r,i){const u=Wf(n,e,t);return u.matched?function xC(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?Qe(i.map(l=>{const p=eh(l,n);return Qs(function AC(n){return n&&Hu(n.canMatch)}(p)?p.canMatch(e,t):n.runInContext(()=>p(e,t)))})).pipe(nh(),iw()):Qe(!0)}(r=fl(e,r),e,t).pipe((0,at.U)(l=>!0===l?u:{...em})):Qe(u)}function Wf(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...em}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||qE)(t,n,e);if(!i)return{...em};const u={};mr(i.posParams,(p,_)=>{u[_]=p.path});const l=i.consumed.length>0?{...u,...i.consumed[i.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function E_(n,e,t,r){if(t.length>0&&function b_(n,e,t){return t.some(r=>Zf(n,e,r)&&ys(r)!==Zt)}(n,t,r)){const u=new Kt(e,function NC(n,e,t,r){const i={};i[Zt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&ys(u)!==Zt){const l=new Kt([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[ys(u)]=l}return i}(n,e,r,new Kt(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function sw(n,e,t){return t.some(r=>Zf(n,e,r))}(n,t,r)){const u=new Kt(n.segments,function w_(n,e,t,r,i){const u={};for(const l of r)if(Zf(n,t,l)&&!i[ys(l)]){const p=new Kt([],{});p._sourceSegment=n,p._segmentIndexShift=e.length,u[ys(l)]=p}return{...i,...u}}(n,e,t,r,n.children));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const i=new Kt(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function Zf(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function $u(n,e,t,r){return!!(ys(n)===r||r!==Zt&&Zf(e,t,n))&&("**"===n.path||Wf(e,n,t).matched)}function ow(n,e,t){return 0===e.length&&!n.children[t]}const rh=!1;class pl{constructor(e){this.segmentGroup=e||null}}class aw{constructor(e){this.urlTree=e}}function gl(n){return Gr(new pl(n))}function Kf(n){return Gr(new aw(n))}class RC{constructor(e,t,r,i,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=u,this.allowRedirects=!0}apply(){const e=E_(this.urlTree.root,[],[],this.config).segmentGroup,t=new Kt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Zt).pipe((0,at.U)(u=>this.createUrlTree(Do(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ea(u=>{if(u instanceof aw)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof pl?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Zt).pipe((0,at.U)(i=>this.createUrlTree(Do(i),e.queryParams,e.fragment))).pipe(ea(i=>{throw i instanceof pl?this.noMatchError(i):i}))}noMatchError(e){return new d.vHH(4002,rh)}createUrlTree(e,t,r){const i=ol(e);return new bo(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,at.U)(u=>new Kt([],u))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const u of Object.keys(r.children))"primary"===u?i.unshift(u):i.push(u);return(0,vn.D)(i).pipe(ps(u=>{const l=r.children[u],p=IC(t,u);return this.expandSegmentGroup(e,p,l,u).pipe((0,at.U)(_=>({segment:_,outlet:u})))}),Rd((u,l)=>(u[l.outlet]=l.segment,u),{}),i_())}expandSegment(e,t,r,i,u,l){return(0,vn.D)(r).pipe(ps(p=>this.expandSegmentAgainstRoute(e,t,r,p,i,u,l).pipe(ea(b=>{if(b instanceof pl)return Qe(null);throw b}))),Eo(p=>!!p),ea((p,_)=>{if(y_(p))return ow(t,i,u)?Qe(new Kt([],{})):gl(t);throw p}))}expandSegmentAgainstRoute(e,t,r,i,u,l,p){return $u(i,t,u,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,u,l):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,l):gl(t):gl(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Kf(u):this.lineralizeSegments(r,u).pipe((0,oi.z)(l=>{const p=new Kt(l,{});return this.expandSegment(e,p,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,l){const{matched:p,consumedSegments:_,remainingSegments:b,positionalParamSegments:C}=Wf(t,i,u);if(!p)return gl(t);const x=this.applyRedirectCommands(_,i.redirectTo,C);return i.redirectTo.startsWith("/")?Kf(x):this.lineralizeSegments(i,x).pipe((0,oi.z)(V=>this.expandSegment(e,t,r,V.concat(b),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,u){return"**"===r.path?(e=fl(r,e),r.loadChildren?(r._loadedRoutes?Qe({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,at.U)(p=>(r._loadedRoutes=p.routes,r._loadedInjector=p.injector,new Kt(i,{})))):Qe(new Kt(i,{}))):v_(t,r,i,e).pipe(fn(({matched:l,consumedSegments:p,remainingSegments:_})=>l?this.getChildConfig(e=r._injector??e,r,i).pipe((0,oi.z)(C=>{const x=C.injector??e,V=C.routes,{segmentGroup:B,slicedSegments:G}=E_(t,p,_,V),re=new Kt(B.segments,B.children);if(0===G.length&&re.hasChildren())return this.expandChildren(x,V,re).pipe((0,at.U)(ft=>new Kt(p,ft)));if(0===V.length&&0===G.length)return Qe(new Kt(p,{}));const ye=ys(r)===u;return this.expandSegment(x,re,V,G,ye?Zt:u,!0).pipe((0,at.U)(nt=>new Kt(p.concat(nt.segments),nt.children)))})):gl(t)))}getChildConfig(e,t,r){return t.children?Qe({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Qe({routes:t._loadedRoutes,injector:t._loadedInjector}):function rw(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?Qe(!0):Qe(i.map(l=>{const p=eh(l,n);return Qs(function m_(n){return n&&Hu(n.canLoad)}(p)?p.canLoad(e,t):n.runInContext(()=>p(e,t)))})).pipe(nh(),iw())}(e,t,r).pipe((0,oi.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,Mr.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function uw(n){return Gr(jf(rh,3))}())):Qe({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Qe(r);if(i.numberOfChildren>1||!i.children[Zt])return Gr(new d.vHH(4e3,rh));i=i.children[Zt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const u=this.createSegmentGroup(e,t.root,r,i);return new bo(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return mr(e,(i,u)=>{if("string"==typeof i&&i.startsWith(":")){const p=i.substring(1);r[u]=t[p]}else r[u]=i}),r}createSegmentGroup(e,t,r,i){const u=this.createSegments(e,t.segments,r,i);let l={};return mr(t.children,(p,_)=>{l[_]=this.createSegmentGroup(e,p,r,i)}),new Kt(u,l)}createSegments(e,t,r,i){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,i):this.findOrReturn(u,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new d.vHH(4001,rh);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class ih{}class FC{constructor(e,t,r,i,u,l,p){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=u,this.paramsInheritanceStrategy=l,this.urlSerializer=p}recognize(){const e=E_(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Zt).pipe((0,at.U)(t=>{if(null===t)return null;const r=new E([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Zt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Ki(r,t),u=new M(this.url,i);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=f(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,vn.D)(Object.keys(r.children)).pipe(ps(i=>{const u=r.children[i],l=IC(t,i);return this.processSegmentGroup(e,l,u,i)}),Rd((i,u)=>i&&u?(i.push(...u),i):null),function If(n,e=!1){return(0,Bn.e)((t,r)=>{let i=0;t.subscribe((0,L.x)(r,u=>{const l=n(u,i++);(l||e)&&r.next(u),!l&&r.complete()}))})}(i=>null!==i),xd(null),i_(),(0,at.U)(i=>{if(null===i)return null;const u=lw(i);return function C_(n){n.sort((e,t)=>e.value.outlet===Zt?-1:t.value.outlet===Zt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,i,u){return(0,vn.D)(t).pipe(ps(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,i,u)),Eo(l=>!!l),ea(l=>{if(y_(l))return ow(r,i,u)?Qe([]):Qe(null);throw l}))}processSegmentAgainstRoute(e,t,r,i,u){if(t.redirectTo||!$u(t,r,i,u))return Qe(null);let l;if("**"===t.path){const p=i.length>0?Cf(i).parameters:{},_=hw(r)+i.length;l=Qe({snapshot:new E(i,p,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,fw(t),ys(t),t.component??t._loadedComponent??null,t,VC(r),_,yl(t)),consumedSegments:[],remainingSegments:[]})}else l=v_(r,t,i,e).pipe((0,at.U)(({matched:p,consumedSegments:_,remainingSegments:b,parameters:C})=>{if(!p)return null;const x=hw(r)+_.length;return{snapshot:new E(_,C,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,fw(t),ys(t),t.component??t._loadedComponent??null,t,VC(r),x,yl(t)),consumedSegments:_,remainingSegments:b}}));return l.pipe(fn(p=>{if(null===p)return Qe(null);const{snapshot:_,consumedSegments:b,remainingSegments:C}=p;e=t._injector??e;const x=t._loadedInjector??e,V=function LC(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:B,slicedSegments:G}=E_(r,b,C,V.filter(ye=>void 0===ye.redirectTo));if(0===G.length&&B.hasChildren())return this.processChildren(x,V,B).pipe((0,at.U)(ye=>null===ye?null:[new Ki(_,ye)]));if(0===V.length&&0===G.length)return Qe([new Ki(_,[])]);const re=ys(t)===u;return this.processSegment(x,V,B,G,re?Zt:u).pipe((0,at.U)(ye=>null===ye?null:[new Ki(_,ye)]))}))}}function cw(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function lw(n){const e=[],t=new Set;for(const r of n){if(!cw(r)){e.push(r);continue}const i=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=lw(r.children);e.push(new Ki(r.value,i))}return e.filter(r=>!t.has(r))}function VC(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function hw(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function fw(n){return n.data||{}}function yl(n){return n.resolve||{}}function gw(n){return"string"==typeof n.title||null===n.title}function nm(n){return fn(e=>{const t=n(e);return t?(0,vn.D)(t).pipe((0,at.U)(()=>e)):Qe(e)})}class A_{constructor(e){this.router=e,this.currentNavigation=null}setupNavigations(e){const t=this.router.events;return e.pipe(_i(r=>0!==r.id),(0,at.U)(r=>({...r,extractedUrl:this.router.urlHandlingStrategy.extract(r.rawUrl)})),fn(r=>{let i=!1,u=!1;return Qe(r).pipe((0,Mr.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.router.lastSuccessfulNavigation?{...this.router.lastSuccessfulNavigation,previousNavigation:null}:null}}),fn(l=>{const p=this.router.browserUrlTree.toString(),_=!this.router.navigated||l.extractedUrl.toString()!==p||p!==this.router.currentUrlTree.toString();if(("reload"===this.router.onSameUrlNavigation||_)&&this.router.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return rm(l.source)&&(this.router.browserUrlTree=l.extractedUrl),Qe(l).pipe(fn(C=>{const x=this.router.transitions.getValue();return t.next(new ra(C.id,this.router.serializeUrl(C.extractedUrl),C.source,C.restoredState)),x!==this.router.transitions.getValue()?gr.E:Promise.resolve(C)}),function OC(n,e,t,r){return fn(i=>function I_(n,e,t,r,i){return new RC(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,at.U)(u=>({...i,urlAfterRedirects:u}))))}(this.router.ngModule.injector,this.router.configLoader,this.router.urlSerializer,this.router.config),(0,Mr.b)(C=>{this.currentNavigation={...this.currentNavigation,finalUrl:C.urlAfterRedirects},r.urlAfterRedirects=C.urlAfterRedirects}),function Yf(n,e,t,r,i){return(0,oi.z)(u=>function PC(n,e,t,r,i,u,l="emptyOnly"){return new FC(n,e,t,r,i,l,u).recognize().pipe(fn(p=>null===p?function kC(n){return new yi.y(e=>e.error(n))}(new ih):Qe(p)))}(n,e,t,u.urlAfterRedirects,r.serialize(u.urlAfterRedirects),r,i).pipe((0,at.U)(l=>({...u,targetSnapshot:l}))))}(this.router.ngModule.injector,this.router.rootComponentType,this.router.config,this.router.urlSerializer,this.router.paramsInheritanceStrategy),(0,Mr.b)(C=>{if(r.targetSnapshot=C.targetSnapshot,"eager"===this.router.urlUpdateStrategy){if(!C.extras.skipLocationChange){const V=this.router.urlHandlingStrategy.merge(C.urlAfterRedirects,C.rawUrl);this.router.setBrowserUrl(V,C)}this.router.browserUrlTree=C.urlAfterRedirects}const x=new Wg(C.id,this.router.serializeUrl(C.extractedUrl),this.router.serializeUrl(C.urlAfterRedirects),C.targetSnapshot);t.next(x)}));if(_&&this.router.rawUrlTree&&this.router.urlHandlingStrategy.shouldProcessUrl(this.router.rawUrlTree)){const{id:x,extractedUrl:V,source:B,restoredState:G,extras:re}=l,ye=new ra(x,this.router.serializeUrl(V),B,G);t.next(ye);const je=ia(V,this.router.rootComponentType).snapshot;return Qe(r={...l,targetSnapshot:je,urlAfterRedirects:V,extras:{...re,skipLocationChange:!1,replaceUrl:!1}})}return this.router.rawUrlTree=l.rawUrl,l.resolve(null),gr.E}),(0,Mr.b)(l=>{const p=new Js(l.id,this.router.serializeUrl(l.extractedUrl),this.router.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.router.triggerEvent(p)}),(0,at.U)(l=>r={...l,guards:eN(l.targetSnapshot,l.currentSnapshot,this.router.rootContexts)}),function MC(n,e){return(0,oi.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?Qe({...t,guardsResult:!0}):function ew(n,e,t,r){return(0,vn.D)(n).pipe((0,oi.z)(i=>function nw(n,e,t,r,i){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?Qe(u.map(p=>{const _=Qg(e)??i,b=eh(p,_);return Qs(function JE(n){return n&&Hu(n.canDeactivate)}(b)?b.canDeactivate(n,e,t,r):_.runInContext(()=>b(n,e,t,r))).pipe(Eo())})).pipe(nh()):Qe(!0)}(i.component,i.route,t,e,r)),Eo(i=>!0!==i,!0))}(l,r,i,n).pipe((0,oi.z)(p=>p&&function QE(n){return"boolean"==typeof n}(p)?function tN(n,e,t,r){return(0,vn.D)(e).pipe(ps(i=>St(function qf(n,e){return null!==n&&e&&e(new zr(n)),Qe(!0)}(i.route.parent,r),function nN(n,e){return null!==n&&e&&e(new ja(n)),Qe(!0)}(i.route,r),function tw(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function YE(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>Dn(()=>Qe(l.guards.map(_=>{const b=Qg(l.node)??t,C=eh(_,b);return Qs(function ar(n){return n&&Hu(n.canActivateChild)}(C)?C.canActivateChild(r,n):b.runInContext(()=>C(r,n))).pipe(Eo())})).pipe(nh())));return Qe(u).pipe(nh())}(n,i.path,t),function __(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Qe(!0);const i=r.map(u=>Dn(()=>{const l=Qg(e)??t,p=eh(u,l);return Qs(function TC(n){return n&&Hu(n.canActivate)}(p)?p.canActivate(e,n):l.runInContext(()=>p(e,n))).pipe(Eo())}));return Qe(i).pipe(nh())}(n,i.route,t))),Eo(i=>!0!==i,!0))}(r,u,n,e):Qe(p)),(0,at.U)(p=>({...t,guardsResult:p})))})}(this.router.ngModule.injector,l=>this.router.triggerEvent(l)),(0,Mr.b)(l=>{if(r.guardsResult=l.guardsResult,Vu(l.guardsResult))throw dl(0,l.guardsResult);const p=new Uf(l.id,this.router.serializeUrl(l.extractedUrl),this.router.serializeUrl(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.router.triggerEvent(p)}),_i(l=>!!l.guardsResult||(this.router.restoreHistory(l),this.router.cancelNavigationTransition(l,"",3),!1)),nm(l=>{if(l.guards.canActivateChecks.length)return Qe(l).pipe((0,Mr.b)(p=>{const _=new zd(p.id,this.router.serializeUrl(p.extractedUrl),this.router.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.router.triggerEvent(_)}),fn(p=>{let _=!1;return Qe(p).pipe(function UC(n,e){return(0,oi.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Qe(t);let u=0;return(0,vn.D)(i).pipe(ps(l=>function rN(n,e,t,r){const i=n.routeConfig,u=n._resolve;return void 0!==i?.title&&!gw(i)&&(u[kd]=i.title),function pw(n,e,t,r){const i=function BC(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return Qe({});const u={};return(0,vn.D)(i).pipe((0,oi.z)(l=>function jC(n,e,t,r){const i=Qg(e)??r,u=eh(n,i);return Qs(u.resolve?u.resolve(e,t):i.runInContext(()=>u(e,t)))}(n[l],e,t,r).pipe(Eo(),(0,Mr.b)(p=>{u[l]=p}))),Od(1),function s_(n){return(0,at.U)(()=>n)}(u),ea(l=>y_(l)?gr.E:Gr(l)))}(u,n,e,r).pipe((0,at.U)(l=>(n._resolvedData=l,n.data=f(n,t).resolve,i&&gw(i)&&(n.data[kd]=i.title),null)))}(l.route,r,n,e)),(0,Mr.b)(()=>u++),Od(1),(0,oi.z)(l=>u===i.length?Qe(t):gr.E))})}(this.router.paramsInheritanceStrategy,this.router.ngModule.injector),(0,Mr.b)({next:()=>_=!0,complete:()=>{_||(this.router.restoreHistory(p),this.router.cancelNavigationTransition(p,"",2))}}))}),(0,Mr.b)(p=>{const _=new qd(p.id,this.router.serializeUrl(p.extractedUrl),this.router.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.router.triggerEvent(_)}))}),nm(l=>{const p=_=>{const b=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&b.push(this.router.configLoader.loadComponent(_.routeConfig).pipe((0,Mr.b)(C=>{_.component=C}),(0,at.U)(()=>{})));for(const C of _.children)b.push(...p(C));return b};return se(p(l.targetSnapshot.root)).pipe(xd(),vo(1))}),nm(()=>this.router.afterPreactivation()),(0,at.U)(l=>{const p=function Xe(n,e,t){const r=vt(n,e._root,t?t._root:void 0);return new Yd(r,e)}(this.router.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:p}}),(0,Mr.b)(l=>{this.router.currentUrlTree=l.urlAfterRedirects,this.router.rawUrlTree=this.router.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),this.router.routerState=l.targetRouterState,"deferred"===this.router.urlUpdateStrategy&&(l.extras.skipLocationChange||this.router.setBrowserUrl(this.router.rawUrlTree,l),this.router.browserUrlTree=l.urlAfterRedirects)}),((n,e,t)=>(0,at.U)(r=>(new p_(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.router.rootContexts,this.router.routeReuseStrategy,l=>this.router.triggerEvent(l)),(0,Mr.b)({next(){i=!0},complete(){i=!0}}),nl(()=>{i||u||this.router.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),ea(l=>{if(u=!0,ms(l)){Qd(l)||(this.router.navigated=!0,this.router.restoreHistory(r,!0));const p=new ul(r.id,this.router.serializeUrl(r.extractedUrl),l.message,l.cancellationCode);if(t.next(p),Qd(l)){const _=this.router.urlHandlingStrategy.merge(l.url,this.router.rawUrlTree),b={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.router.urlUpdateStrategy||rm(r.source)};this.router.scheduleNavigation(_,"imperative",null,b,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{this.router.restoreHistory(r,!0);const p=new Gd(r.id,this.router.serializeUrl(r.extractedUrl),l,r.targetSnapshot??void 0);t.next(p);try{r.resolve(this.router.errorHandler(l))}catch(_){r.reject(_)}}return gr.E}))}))}}function rm(n){return"imperative"!==n}let mw=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(u=>u.outlet===Zt);return r}getResolvedTitleForRoute(t){return t.data[kd]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(S_)},providedIn:"root"}),n})(),S_=(()=>{class n extends mw{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Zc))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Qf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)($C)},providedIn:"root"}),n})();class HC{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let $C=(()=>{class n extends HC{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const im=new d.OlP("",{providedIn:"root",factory:()=>({})}),sh=new d.OlP("ROUTES");let Gu=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Qe(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Qs(t.loadComponent()).pipe((0,at.U)(_w),(0,Mr.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),nl(()=>{this.componentLoaders.delete(t)})),i=new si(r,()=>new bn.x).pipe(fs());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Qe({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,at.U)(p=>{this.onLoadEndListener&&this.onLoadEndListener(r);let _,b,C=!1;Array.isArray(p)?b=p:(_=p.create(t).injector,b=Pd(_.get(sh,[],d.XFs.Self|d.XFs.Optional)));return{routes:b.map(Yg),injector:_}}),nl(()=>{this.childrenLoaders.delete(r)})),l=new si(u,()=>new bn.x).pipe(fs());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return Qs(t()).pipe((0,at.U)(_w),(0,oi.z)(i=>i instanceof d.YKP||Array.isArray(i)?Qe(i):(0,vn.D)(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3),d.LFG(d.Sil))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function _w(n){return function za(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let qC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(iN)},providedIn:"root"}),n})(),iN=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function vw(n){throw n}function sN(n,e,t){return e.parse("/")}const Ew={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},oN={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function bw(){const n=(0,d.f3M)(ku),e=(0,d.f3M)($a),t=(0,d.f3M)(xe),r=(0,d.f3M)(d.zs3),i=(0,d.f3M)(d.Sil),u=(0,d.f3M)(sh,{optional:!0})??[],l=(0,d.f3M)(im,{optional:!0})??{},p=new _r(null,n,e,t,r,i,Pd(u));return function ww(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,p),p}let _r=(()=>{class n{constructor(t,r,i,u,l,p,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=u,this.config=_,this.lastSuccessfulNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new bn.x,this.errorHandler=vw,this.malformedUriErrorHandler=sN,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Qe(void 0),this.urlHandlingStrategy=(0,d.f3M)(qC),this.routeReuseStrategy=(0,d.f3M)(Qf),this.titleStrategy=(0,d.f3M)(mw),this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.canceledNavigationResolution="replace",this.navigationTransitions=new A_(this),this.configLoader=l.get(Gu),this.configLoader.onLoadEndListener=V=>this.triggerEvent(new Wd(V)),this.configLoader.onLoadStartListener=V=>this.triggerEvent(new Zg(V)),this.ngModule=l.get(d.h0i),this.console=l.get(d.c2e);const x=l.get(d.R0b);this.isNgZoneEnabled=x instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=new bo,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=ia(this.currentUrlTree,this.rootComponentType),this.transitions=new sr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.navigationTransitions.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(t.state){const p={...t.state};delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(i.state=p)}const l=this.parseUrl(t.url);this.scheduleNavigation(l,r,u,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(Yg),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:u,fragment:l,queryParamsHandling:p,preserveFragment:_}=r,b=i||this.routerState.root,C=_?this.currentUrlTree.fragment:l;let x=null;switch(p){case"merge":x={...this.currentUrlTree.queryParams,...u};break;case"preserve":x=this.currentUrlTree.queryParams;break;default:x=u||null}return null!==x&&(x=this.removeEmptyProps(x)),Of(b,this.currentUrlTree,t,x,C??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Vu(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function ZC(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new d.vHH(4008,!1)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...Ew}:!1===r?{...oN}:r,Vu(t))return Tf(this.currentUrlTree,t,i);const u=this.parseUrl(t);return Tf(this.currentUrlTree,u,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const u=t[i];return null!=u&&(r[i]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Ao(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.getCurrentNavigation(),this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,u,l){if(this.disposed)return Promise.resolve(!1);let p,_,b;l?(p=l.resolve,_=l.reject,b=l.promise):b=new Promise((V,B)=>{p=V,_=B});const C=++this.navigationId;let x;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),x=i&&i.\u0275routerPageId?i.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):x=0,this.setTransition({id:C,targetPageId:x,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,rawUrl:t,extras:u,resolve:p,reject:_,promise:b,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),b.catch(V=>Promise.reject(V))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",u):this.location.go(i,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===i?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const u=new ul(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(u),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:function(){return bw()},providedIn:"root"}),n})();class x_{}let YC=(()=>{class n{constructor(t,r,i,u,l){this.router=t,this.injector=i,this.preloadingStrategy=u,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(_i(t=>t instanceof Ao),ps(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,d.MMx)(u.providers,t,`Route: ${u.path}`));const l=u._injector??t,p=u._loadedInjector??l;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?i.push(this.preloadConfig(l,u)):(u.children||u._loadedRoutes)&&i.push(this.processRoutes(p,u.children??u._loadedRoutes))}return(0,vn.D)(i).pipe((0,ot.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Qe(null);const u=i.pipe((0,oi.z)(l=>null===l?Qe(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,vn.D)([u,l]).pipe((0,ot.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(_r),d.LFG(d.Sil),d.LFG(d.lqb),d.LFG(x_),d.LFG(Gu))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const N_=new d.OlP("");let R_=(()=>{class n{constructor(t,r,i,u={}){this.router=t,this.viewportScroller=r,this.zone=i,this.options=u,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},u.scrollPositionRestoration=u.scrollPositionRestoration||"disabled",u.anchorScrolling=u.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ra?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ao&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof gs&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.router.triggerEvent(new gs(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Pt(n,e){return{\u0275kind:n,\u0275providers:e}}function Cw(){const n=(0,d.f3M)(d.zs3);return e=>{const t=n.get(d.z2F);if(e!==t.components[0])return;const r=n.get(_r),i=n.get(O_);1===n.get(k_)&&r.initialNavigation(),n.get(eT,null,d.XFs.Optional)?.setUpPreloading(),n.get(N_,null,d.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const O_=new d.OlP("",{factory:()=>new bn.x}),k_=new d.OlP("",{providedIn:"root",factory:()=>1});const eT=new d.OlP("");function Aw(n){return Pt(0,[{provide:eT,useExisting:YC},{provide:x_,useExisting:n}])}const om=new d.OlP("ROUTER_FORROOT_GUARD"),P_=[xe,{provide:ku,useClass:yr},{provide:_r,useFactory:bw},$a,{provide:v,useFactory:function Iw(n){return n.routerState.root},deps:[_r]},Gu,[]];function nT(){return new d.PXZ("Router",_r)}let rT=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[P_,[],{provide:sh,multi:!0,useValue:t},{provide:om,useFactory:Sw,deps:[[_r,new d.FiY,new d.tp0]]},{provide:im,useValue:r||{}},r?.useHash?{provide:ge,useClass:Ve}:{provide:ge,useClass:Ce},{provide:N_,useFactory:()=>{const n=(0,d.f3M)(_r),e=(0,d.f3M)(fo),t=(0,d.f3M)(d.R0b),r=(0,d.f3M)(im);return r.scrollOffset&&e.setOffset(r.scrollOffset),new R_(n,e,t,r)}},r?.preloadingStrategy?Aw(r.preloadingStrategy).\u0275providers:[],{provide:d.PXZ,multi:!0,useFactory:nT},r?.initialNavigation?pN(r):[],[{provide:Mw,useFactory:Cw},{provide:d.tb,multi:!0,useExisting:Mw}]]}}static forChild(t){return{ngModule:n,providers:[{provide:sh,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(om,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[$f]}),n})();function Sw(n){return"guarded"}function pN(n){return["disabled"===n.initialNavigation?Pt(3,[{provide:d.ip1,multi:!0,useFactory:()=>{const e=(0,d.f3M)(_r);return()=>{e.setUpLocationChangeListener()}}},{provide:k_,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Pt(2,[{provide:k_,useValue:0},{provide:d.ip1,multi:!0,deps:[d.zs3],useFactory:e=>{const t=e.get(H,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const u=e.get(_r),l=e.get(O_);(function r(i){e.get(_r).events.pipe(_i(l=>l instanceof Ao||l instanceof ul||l instanceof Gd),(0,at.U)(l=>l instanceof Ao||l instanceof ul&&(0===l.code||1===l.code)&&null),_i(l=>null!==l),vo(1)).subscribe(()=>{i()})})(()=>{i(!0)}),u.afterPreactivation=()=>(i(!0),l.closed?Qe(void 0):l),u.initialNavigation()}))}}]).\u0275providers:[]]}const Mw=new d.OlP("");let Jf=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n}),n})(),_l=(()=>{class n extends Jf{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();const No=new d.OlP("NgValueAccessor"),oT={provide:No,useExisting:(0,d.Gpc)(()=>uh),multi:!0},uT=new d.OlP("CompositionEventMode");let uh=(()=>{class n extends Jf{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function aT(){const n=k()?k().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(uT,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[d._Bn([oT]),d.qOj]}),n})();function qa(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function F_(n){return null!=n&&"number"==typeof n.length}const qr=new d.OlP("NgValidators"),vl=new d.OlP("NgAsyncValidators"),L_=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Ei{static min(e){return function lT(n){return e=>{if(qa(e.value)||qa(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function El(n){return e=>{if(qa(e.value)||qa(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return V_(e)}static requiredTrue(e){return function U_(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function Xf(n){return qa(n.value)||L_.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function Xs(n){return e=>qa(e.value)||!F_(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function B_(n){return e=>F_(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function Rw(n){if(!n)return ch;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(qa(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return dT(e)}static composeAsync(e){return ep(e)}}function V_(n){return qa(n.value)?{required:!0}:null}function ch(n){return null}function sa(n){return null!=n}function am(n){return(0,d.QGY)(n)?(0,vn.D)(n):n}function j_(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function um(n,e){return e.map(t=>t(n))}function H_(n){return n.map(e=>function mN(n){return!n.validate}(e)?e:t=>e.validate(t))}function dT(n){if(!n)return null;const e=n.filter(sa);return 0==e.length?null:function(t){return j_(um(t,e))}}function lh(n){return null!=n?dT(H_(n)):null}function ep(n){if(!n)return null;const e=n.filter(sa);return 0==e.length?null:function(t){return function xw(...n){const e=(0,Fa.jO)(n),{args:t,keys:r}=Nu(n),i=new yi.y(u=>{const{length:l}=t;if(!l)return void u.complete();const p=new Array(l);let _=l,b=l;for(let C=0;C<l;C++){let x=!1;(0,dt.Xf)(t[C]).subscribe((0,L.x)(u,V=>{x||(x=!0,b--),p[C]=V},()=>_--,void 0,()=>{(!_||!x)&&(b||u.next(r?N(r,p):p),u.complete())}))}});return e?i.pipe(T(e)):i}(um(t,e).map(am)).pipe((0,at.U)(j_))}}function tp(n){return null!=n?ep(H_(n)):null}function cm(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function lm(n){return n._rawValidators}function hT(n){return n._rawAsyncValidators}function $_(n){return n?Array.isArray(n)?n:[n]:[]}function dm(n,e){return Array.isArray(n)?n.includes(e):n===e}function Ow(n,e){const t=$_(e);return $_(n).forEach(i=>{dm(t,i)||t.push(i)}),t}function kw(n,e){return $_(e).filter(t=>!dm(n,t))}class G_{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=lh(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=tp(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Yi extends G_{get formDirective(){return null}get path(){return null}}class zu extends G_{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class fT{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let z_=(()=>{class n extends fT{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(zu,2))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[d.qOj]}),n})(),np=(()=>{class n extends fT{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Yi,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[d.qOj]}),n})();const eo="VALID",rp="INVALID",dh="PENDING",ip="DISABLED";function hm(n){return(Wa(n)?n.validators:n)||null}function Q_(n,e){return(Wa(e)?e.asyncValidators:n)||null}function Wa(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function pm(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new d.vHH(1e3,"");if(!r[t])throw new d.vHH(1001,"")}function hh(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new d.vHH(1002,"")})}class fh{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===eo}get invalid(){return this.status===rp}get pending(){return this.status==dh}get disabled(){return this.status===ip}get enabled(){return this.status!==ip}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Ow(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Ow(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(kw(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(kw(e,this._rawAsyncValidators))}hasValidator(e){return dm(this._rawValidators,e)}hasAsyncValidator(e){return dm(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=dh,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=ip,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=eo,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===eo||this.status===dh)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ip:eo}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=dh,this._hasOwnPendingAsyncValidator=!0;const t=am(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?ip:this.errors?rp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(dh)?dh:this._anyControlsHaveStatus(rp)?rp:eo}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Wa(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function yT(n){return Array.isArray(n)?lh(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function fm(n){return Array.isArray(n)?tp(n):n||null}(this._rawAsyncValidators)}}class qu extends fh{constructor(e,t,r){super(hm(t),Q_(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){hh(this,0,e),Object.keys(e).forEach(r=>{pm(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,u)=>{r=t(r,i,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class gm extends qu{}const bl=new d.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>ph}),ph="always";function sp(n,e,t=ph){_m(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function vT(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&J_(n,e)})}(n,e),function ET(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function _s(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&J_(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function jw(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function op(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),vm(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function ym(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function _m(n,e){const t=lm(n);null!==e.validator?n.setValidators(cm(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=hT(n);null!==e.asyncValidator?n.setAsyncValidators(cm(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();ym(e._rawValidators,i),ym(e._rawAsyncValidators,i)}function vm(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=lm(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(l=>l!==e.validator);u.length!==i.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const i=hT(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(l=>l!==e.asyncValidator);u.length!==i.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return ym(e._rawValidators,r),ym(e._rawAsyncValidators,r),t}function J_(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function wm(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function Hw(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Za=class extends fh{constructor(e=null,t,r){super(hm(t),Q_(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Wa(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=Hw(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){wm(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){wm(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Hw(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let lp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),sv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const Il=new d.OlP("NgModelWithFormControlWarning"),Ww={provide:Yi,useExisting:(0,d.Gpc)(()=>hp)};let hp=(()=>{class n extends Yi{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new d.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(vm(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return sp(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){op(t.control||null,t,!1),function TT(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function Em(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(op(r||null,t),(n=>n instanceof Za)(i)&&(sp(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function wT(n,e){_m(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function X_(n,e){return vm(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){_m(this.form,this),this._oldForm&&vm(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(qr,10),d.Y36(vl,10),d.Y36(bl,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([Ww]),d.qOj,d.TTD]}),n})();const CN={provide:zu,useExisting:(0,d.Gpc)(()=>Dm)};let Dm=(()=>{class n extends zu{constructor(t,r,i,u,l){super(),this._ngModelWarningConfig=l,this._added=!1,this.update=new d.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function nv(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(u=>{u.constructor===uh?t=u:function CT(n){return Object.getPrototypeOf(n.constructor)===_l}(u)?r=u:i=u}),i||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function tv(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function mm(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(d.Y36(Yi,13),d.Y36(qr,10),d.Y36(vl,10),d.Y36(No,10),d.Y36(Il,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[d._Bn([CN]),d.qOj,d.TTD]}),n})(),Cl=(()=>{class n{constructor(){this._validator=ch}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):ch,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,features:[d.TTD]}),n})();const eb={provide:qr,useExisting:(0,d.Gpc)(()=>dv),multi:!0};let dv=(()=>{class n extends Cl{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=d.D6c,this.createValidator=t=>V_}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&d.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[d._Bn([eb]),d.qOj]}),n})(),Zu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[sv]}),n})(),Am=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:bl,useValue:t.callSetDisabledState??ph}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Zu]}),n})(),vs=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Il,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:bl,useValue:t.callSetDisabledState??ph}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Zu]}),n})();class Sm extends fh{constructor(e,t,r){super(hm(t),Q_(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){hh(this,0,e),e.forEach((r,i)=>{pm(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function Tl(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let Al=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let u={};return Tl(r)?u=r:null!==r&&(u.validators=r.validator,u.asyncValidators=r.asyncValidator),new qu(i,u)}record(t,r=null){const i=this._reduceControls(t);return new gm(i,r)}control(t,r,i){let u={};return this.useNonNullable?(Tl(r)?u=r:(u.validators=r,u.asyncValidators=i),new Za(t,{...u,nonNullable:!0})):new Za(t,r,i)}array(t,r,i){const u=t.map(l=>this._createControl(l));return new Sm(u,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof Za||t instanceof fh?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:vs}),n})();var mh=P(6451),Ya=P(5363),rb=P(6063);class ib extends bn.x{constructor(e=1/0,t=1/0,r=rb.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!i&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,u=i.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,u=(i?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!i){const l=t.now();let p=0;for(let _=1;_<r.length&&r[_]<=l;_+=2)p=_;p&&r.splice(0,p+1)}}}var sb=P(3099);function pv(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,sb.B)({connector:()=>new ib(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function gv(n,e){return(0,Ys.m)(e)?fn(()=>n,e):fn(()=>n)}var Mm=P(9468),xr=P(5813),no=P(2011);P(5867);var Ee=P(5861),Ku=P(9681),yh=P(4859),on=P(2090),Yu=P(1877);const Om=new Map,Ev={activated:!1,tokenObservers:[]},db={initialized:!1,enabled:!1};function Wr(n){return Om.get(n)||Object.assign({},Ev)}function km(){return db}class pb{constructor(e,t,r,i,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=i,i>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ee.Z)(function*(){t.stop();try{t.pending=new on.BH,yield function gb(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new on.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const wi=new on.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function KT(n){if(!Wr(n).activated)throw wi.create("use-before-activation",{appName:n.name})}function Fm(n,e){return Tv.apply(this,arguments)}function Tv(){return(Tv=(0,Ee.Z)(function*({url:n,body:e},t){var r,i;const u={"Content-Type":"application/json"},l=t.getImmediate({optional:!0});if(l){const B=yield l.getHeartbeatsHeader();B&&(u["X-Firebase-Client"]=B)}const p={method:"POST",body:JSON.stringify(e),headers:u};let _,b;try{_=yield fetch(n,p)}catch(B){throw wi.create("fetch-network-error",{originalErrorMessage:null===(r=B)||void 0===r?void 0:r.message})}if(200!==_.status)throw wi.create("fetch-status-error",{httpStatus:_.status});try{b=yield _.json()}catch(B){throw wi.create("fetch-parse-error",{originalErrorMessage:null===(i=B)||void 0===i?void 0:i.message})}const C=b.ttl.match(/^([\d.]+)(s)$/);if(!C||!C[2]||isNaN(Number(C[1])))throw wi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${b.ttl}`});const x=1e3*Number(C[1]),V=Date.now();return{token:b.token,expireTimeMillis:V+x,issuedAtTimeMillis:V}})).apply(this,arguments)}function YT(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Ep="firebase-app-check-store";let wp=null;function Sl(){return wp||(wp=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var u;e(wi.create("storage-open",{originalErrorMessage:null===(u=i.target.error)||void 0===u?void 0:u.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(Ep,{keyPath:"compositeKey"})}}catch(r){e(wi.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),wp)}function Eb(){return(Eb=(0,Ee.Z)(function*(n,e){const r=(yield Sl()).transaction(Ep,"readwrite"),u=r.objectStore(Ep).put({compositeKey:n,value:e});return new Promise((l,p)=>{u.onsuccess=_=>{l()},r.onerror=_=>{var b;p(wi.create("storage-set",{originalErrorMessage:null===(b=_.target.error)||void 0===b?void 0:b.message}))}})})).apply(this,arguments)}const Ip=new Yu.Yd("@firebase/app-check");function Es(n,e){return(0,on.hl)()?function XT(n,e){return function Sv(n,e){return Eb.apply(this,arguments)}(function Ro(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Ip.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Mv(){return km().enabled}function bb(){return xv.apply(this,arguments)}function xv(){return(xv=(0,Ee.Z)(function*(){const n=km();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const nA={error:"UNKNOWN_ERROR"};function Nv(n){return on.US.encodeString(JSON.stringify(n),!1)}function Qu(n){return Rv.apply(this,arguments)}function Rv(){return(Rv=(0,Ee.Z)(function*(n,e=!1){const t=n.app;KT(t);const r=Wr(t);let u,i=r.token;if(i&&!_h(i)&&(r.token=void 0,i=void 0),!i){const _=yield r.cachedTokenPromise;_&&(_h(_)?i=_:yield Es(t,void 0))}if(!e&&i&&_h(i))return{token:i.token};let p,l=!1;if(Mv()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Fm(YT(t,yield bb()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const _=yield r.exchangeTokenPromise;return yield Es(t,_),r.token=_,{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield Wr(t).exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?Ip.warn(_.message):Ip.error(_),u=_}return i?u?p=_h(i)?{token:i.token,internalError:u}:Pv(u):(p={token:i.token},r.token=i,yield Es(t,i)):p=Pv(u),l&&Dp(t,p),p})).apply(this,arguments)}function Ov(n,e){const t=Wr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function kv(n){const{app:e}=n,t=Wr(e);let r=t.tokenRefresher;r||(r=function Ib(n){const{app:e}=n;return new pb((0,Ee.Z)(function*(){let r;if(r=Wr(e).token?yield Qu(n,!0):yield Qu(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Wr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Dp(n,e){const t=Wr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function _h(n){return n.expireTimeMillis-Date.now()>0}function Pv(n){return{token:Nv(nA),error:n}}class Db{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Wr(this.app);for(const t of e)Ov(this.app,t.next);return Promise.resolve()}}const Fb="app-check-internal";!function Lb(){(0,Ku._registerComponent)(new yh.wA("app-check",n=>function Fv(n,e){return new Db(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Fb).initialize()})),(0,Ku._registerComponent)(new yh.wA(Fb,n=>function Bm(n){return{getToken:e=>Qu(n,e),addTokenListener:e=>function Um(n,e,t,r){const{app:i}=n,u=Wr(i);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&_h(u.token)){const p=u.token;Promise.resolve().then(()=>{t({token:p.token}),kv(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>kv(n))}(n,"INTERNAL",e),removeTokenListener:e=>Ov(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ku.registerVersion)("@firebase/app-check","0.5.17")}();class Hm{constructor(){return(0,xr.vb)("app-check")}}typeof window<"u"&&window;var $v=P(127);const At=new d.OlP("angularfire2.auth.use-emulator"),jb=new d.OlP("angularfire2.auth.settings"),Hb=new d.OlP("angularfire2.auth.tenant-id"),$b=new d.OlP("angularfire2.auth.langugage-code"),Ml=new d.OlP("angularfire2.auth.use-device-language"),Gb=new d.OlP("angularfire.auth.persistence"),Ap=(n,e,t,r,i,u,l,p)=>(0,no.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,u&&_.useDeviceLanguage(),l)for(const[b,C]of Object.entries(l))_.settings[b]=C;return p&&_.setPersistence(p),_},[t,r,i,u,l,p]);let Ju=(()=>{class n{constructor(t,r,i,u,l,p,_,b,C,x,V,B){const G=new bn.x,re=Qe(void 0).pipe((0,Ya.Q)(l.outsideAngular),fn(()=>u.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,1277)))),(0,at.U)(()=>(0,no.on)(t,u,r)),(0,at.U)(ye=>Ap(ye,u,p,b,C,x,_,V)),pv({bufferSize:1,refCount:!1}));if(Mc(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Qe(null);else{re.pipe(Eo()).subscribe();const je=re.pipe(fn(ct=>ct.getRedirectResult().then(Rt=>Rt,()=>null)),xr.iC,pv({bufferSize:1,refCount:!1})),nt=re.pipe(fn(ct=>new yi.y(Rt=>({unsubscribe:u.runOutsideAngular(()=>ct.onAuthStateChanged(Ft=>Rt.next(Ft),Ft=>Rt.error(Ft),()=>Rt.complete()))})))),ft=re.pipe(fn(ct=>new yi.y(Rt=>({unsubscribe:u.runOutsideAngular(()=>ct.onIdTokenChanged(Ft=>Rt.next(Ft),Ft=>Rt.error(Ft),()=>Rt.complete()))}))));this.authState=je.pipe(gv(nt),(0,Mm.R)(l.outsideAngular),(0,Ya.Q)(l.insideAngular)),this.user=je.pipe(gv(ft),(0,Mm.R)(l.outsideAngular),(0,Ya.Q)(l.insideAngular)),this.idToken=this.user.pipe(fn(ct=>ct?(0,vn.D)(ct.getIdToken()):Qe(null))),this.idTokenResult=this.user.pipe(fn(ct=>ct?(0,vn.D)(ct.getIdTokenResult()):Qe(null))),this.credential=(0,mh.T)(je,G,this.authState.pipe(_i(ct=>!ct))).pipe((0,at.U)(ct=>ct?.user?ct:null),(0,Mm.R)(l.outsideAngular),(0,Ya.Q)(l.insideAngular))}return(0,no.pX)(this,re,u,{spy:{apply:(ye,je,nt)=>{(ye.startsWith("signIn")||ye.startsWith("createUser"))&&nt.then(ft=>G.next(ft))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(no.Dh),d.LFG(no.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(xr.HU),d.LFG(At,8),d.LFG(jb,8),d.LFG(Hb,8),d.LFG($b,8),d.LFG(Ml,8),d.LFG(Gb,8),d.LFG(Hm,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),er=(()=>{class n{constructor(){$v.Z.registerVersion("angularfire",xr.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[Ju]}),n})();var fA=P(4986);function Gm(){return(0,Bn.e)((n,e)=>{let t,r=!1;n.subscribe((0,L.x)(e,i=>{const u=t;t=i,r&&e.next([u,i]),r=!0}))})}function pA(n,e){return n===e}P(1277);var gt,qb=P(3942),Wb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},aa={},Gv=Gv||{},Gt=Wb||self;function Xu(){}function zm(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Sp(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Eh="closure_uid_"+(1e9*Math.random()>>>0),Zb=0;function Kb(n,e,t){return n.call.apply(n.bind,arguments)}function Yb(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function bi(n,e,t){return(bi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Kb:Yb).apply(null,arguments)}function ec(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ur(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,u){for(var l=Array(arguments.length-2),p=2;p<arguments.length;p++)l[p-2]=arguments[p];return e.prototype[i].apply(r,l)}}function tc(){this.s=this.s,this.o=this.o}tc.prototype.s=!1,tc.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function mA(n){Object.prototype.hasOwnProperty.call(n,Eh)&&n[Eh]||(n[Eh]=++Zb)}(this)},tc.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Qb=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function qm(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function zv(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(zm(r)){const i=n.length||0,u=r.length||0;n.length=i+u;for(let l=0;l<u;l++)n[i+l]=r[l]}else n.push(r)}}function ai(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}ai.prototype.h=function(){this.defaultPrevented=!0};var _A=function(){if(!Gt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Gt.addEventListener("test",Xu,e),Gt.removeEventListener("test",Xu,e)}catch{}return n}();function Mp(n){return/^[\s\xa0]*$/.test(n)}var Jb=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function qv(n,e){return n<e?-1:n>e?1:0}function Wv(){var n=Gt.navigator;return n&&(n=n.userAgent)?n:""}function Qa(n){return-1!=Wv().indexOf(n)}function Xb(n){return Xb[" "](n),n}Xb[" "]=Xu;var Wm,n,eI=Qa("Opera"),Ja=Qa("Trident")||Qa("MSIE"),tI=Qa("Edge"),Zv=tI||Ja,Kv=Qa("Gecko")&&!(-1!=Wv().toLowerCase().indexOf("webkit")&&!Qa("Edge"))&&!(Qa("Trident")||Qa("MSIE"))&&!Qa("Edge"),xp=-1!=Wv().toLowerCase().indexOf("webkit")&&!Qa("Edge");function nI(){var n=Gt.document;return n?n.documentMode:void 0}e:{var Yv="",Qv=(n=Wv(),Kv?/rv:([^\);]+)(\)|;)/.exec(n):tI?/Edge\/([\d\.]+)/.exec(n):Ja?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):xp?/WebKit\/(\S+)/.exec(n):eI?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Qv&&(Yv=Qv?Qv[1]:""),Ja){var Jv=nI();if(null!=Jv&&Jv>parseFloat(Yv)){Wm=String(Jv);break e}}Wm=Yv}var rI={};var EA=Gt.document&&Ja&&(nI()||parseInt(Wm,10))||void 0;function bh(n,e){if(ai.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Kv){e:{try{Xb(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:wA[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&bh.X.h.call(this)}}ur(bh,ai);var wA={2:"touch",3:"pen",4:"mouse"};bh.prototype.h=function(){bh.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Ih="closure_listenable_"+(1e6*Math.random()|0),bA=0;function iI(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++bA,this.ba=this.ea=!1}function Zm(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Np(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function sI(n){const e={};for(const t in n)e[t]=n[t];return e}const e0="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function t0(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let u=0;u<e0.length;u++)t=e0[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Km(n){this.src=n,this.g={},this.h=0}function n0(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],i=Qb(r,e);(u=0<=i)&&Array.prototype.splice.call(r,i,1),u&&(Zm(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function r0(n,e,t,r){for(var i=0;i<n.length;++i){var u=n[i];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return i}return-1}Km.prototype.add=function(n,e,t,r,i){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=r0(n,e,r,i);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new iI(e,this.src,u,!!r,i)).ea=t,n.push(e)),e};var Rp="closure_lm_"+(1e6*Math.random()|0),s0={};function o0(n,e,t,r,i){if(r&&r.once)return aI(n,e,t,r,i);if(Array.isArray(e)){for(var u=0;u<e.length;u++)o0(n,e[u],t,r,i);return null}return t=Qm(t),n&&n[Ih]?n.N(e,t,Sp(r)?!!r.capture:!!r,i):oI(n,e,t,!1,r,i)}function oI(n,e,t,r,i,u){if(!e)throw Error("Invalid event type");var l=Sp(i)?!!i.capture:!!i,p=u0(n);if(p||(n[Rp]=p=new Km(n)),(t=p.add(e,t,r,l,u)).proxy)return t;if(r=function IA(){const e=DA;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)_A||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(cI(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function aI(n,e,t,r,i){if(Array.isArray(e)){for(var u=0;u<e.length;u++)aI(n,e[u],t,r,i);return null}return t=Qm(t),n&&n[Ih]?n.O(e,t,Sp(r)?!!r.capture:!!r,i):oI(n,e,t,!0,r,i)}function uI(n,e,t,r,i){if(Array.isArray(e))for(var u=0;u<e.length;u++)uI(n,e[u],t,r,i);else r=Sp(r)?!!r.capture:!!r,t=Qm(t),n&&n[Ih]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=r0(u=n.g[e],t,r,i))&&(Zm(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=u0(n))&&(e=n.g[e.toString()],n=-1,e&&(n=r0(e,t,r,i)),(t=-1<n?e[n]:null)&&a0(t))}function a0(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Ih])n0(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(cI(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=u0(e))?(n0(t,n),0==t.h&&(t.src=null,e[Rp]=null)):Zm(n)}}}function cI(n){return n in s0?s0[n]:s0[n]="on"+n}function DA(n,e){if(n.ba)n=!0;else{e=new bh(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&a0(n),n=t.call(r,e)}return n}function u0(n){return(n=n[Rp])instanceof Km?n:null}var Ym="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qm(n){return"function"==typeof n?n:(n[Ym]||(n[Ym]=function(e){return n.handleEvent(e)}),n[Ym])}function Zr(){tc.call(this),this.i=new Km(this),this.P=this,this.I=null}function ui(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ai(e,n);else if(e instanceof ai)e.target=e.target||n;else{var i=e;t0(e=new ai(r,n),i)}if(i=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];i=Op(l,r,!0,e)&&i}if(i=Op(l=e.g=n,r,!0,e)&&i,i=Op(l,r,!1,e)&&i,t)for(u=0;u<t.length;u++)i=Op(l=e.g=t[u],r,!1,e)&&i}function Op(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.ba&&l.capture==t){var p=l.listener,_=l.ha||l.src;l.ea&&n0(n.i,l),i=!1!==p.call(_,r)&&i}}return i&&!r.defaultPrevented}ur(Zr,tc),Zr.prototype[Ih]=!0,Zr.prototype.removeEventListener=function(n,e,t,r){uI(this,n,e,t,r)},Zr.prototype.M=function(){if(Zr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Zm(t[r]);delete n.g[e],n.h--}}this.I=null},Zr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Zr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var c0=Gt.JSON.stringify;function CA(){var n=dI;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var d0,Jm=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new l0,n=>n.reset());class l0{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function lI(n){Gt.setTimeout(()=>{throw n},0)}function Xm(n,e){d0||function AA(){var n=Gt.Promise.resolve(void 0);d0=function(){n.then(hI)}}(),kp||(d0(),kp=!0),dI.add(n,e)}var kp=!1,dI=new class TA{constructor(){this.h=this.g=null}add(e,t){const r=Jm.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function hI(){for(var n;n=CA();){try{n.h.call(n.g)}catch(t){lI(t)}var e=Jm;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}kp=!1}function Xa(n,e){Zr.call(this),this.h=n||1,this.g=e||Gt,this.j=bi(this.lb,this),this.l=Date.now()}function ey(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function h0(n,e,t){if("function"==typeof n)t&&(n=bi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=bi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Gt.setTimeout(n,e||0)}function SA(n){n.g=h0(()=>{n.g=null,n.i&&(n.i=!1,SA(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ur(Xa,Zr),(gt=Xa.prototype).ca=!1,gt.R=null,gt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),ui(this,"tick"),this.ca&&(ey(this),this.start()))}},gt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},gt.M=function(){Xa.X.M.call(this),ey(this),delete this.g};class fI extends tc{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:SA(this)}M(){super.M(),this.g&&(Gt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xl(n){tc.call(this),this.h=n,this.g={}}ur(xl,tc);var pI=[];function ty(n,e,t,r){Array.isArray(t)||(t&&(pI[0]=t.toString()),t=pI);for(var i=0;i<t.length;i++){var u=o0(e,t[i],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function gI(n){Np(n.g,function(e,t){this.g.hasOwnProperty(t)&&a0(e)},n),n.g={}}function Pp(){this.g=!0}function Nl(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function _I(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var u=i[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<i.length;l++)i[l]=""}}}return c0(t)}catch{return e}}(n,t)+(r?" "+r:"")})}xl.prototype.M=function(){xl.X.M.call(this),gI(this)},xl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Pp.prototype.Aa=function(){this.g=!1},Pp.prototype.info=function(){};var Rl={},vI=null;function ny(){return vI=vI||new Zr}function EI(n){ai.call(this,Rl.Pa,n)}function Dh(n){const e=ny();ui(e,new EI(e))}function MA(n,e){ai.call(this,Rl.STAT_EVENT,n),this.stat=e}function Ii(n){const e=ny();ui(e,new MA(e,n))}function wI(n,e){ai.call(this,Rl.Qa,n),this.size=e}function Fp(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Gt.setTimeout(function(){n()},e)}Rl.Pa="serverreachability",ur(EI,ai),Rl.STAT_EVENT="statevent",ur(MA,ai),Rl.Qa="timingevent",ur(wI,ai);var p0={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},xA={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function g0(){}function II(){}g0.prototype.h=null;var _0,Lp={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function m0(){ai.call(this,"d")}function y0(){ai.call(this,"c")}function ry(){}function Vp(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new xl(this),this.O=NA,this.T=new Xa(n=Zv?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new DI}function DI(){this.i=null,this.g="",this.h=!1}ur(m0,ai),ur(y0,ai),ur(ry,g0),ry.prototype.g=function(){return new XMLHttpRequest},ry.prototype.i=function(){return{}},_0=new ry;var NA=45e3,v0={},nc={};function iy(n,e,t){n.K=1,n.v=sy(eu(e)),n.s=t,n.P=!0,E0(n,null)}function E0(n,e){n.F=Date.now(),Ch(n),n.A=eu(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),ay(t.i,"t",r),n.C=0,t=n.l.H,n.h=new DI,n.g=F0(n.l,t?e:null,!n.s),0<n.N&&(n.L=new fI(bi(n.La,n,n.g),n.N)),ty(n.S,n.g,"readystatechange",n.ib),e=n.H?sI(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Dh(),function f0(n,e,t,r,i,u){n.info(function(){if(n.g)if(u)for(var l="",p=u.split("&"),_=0;_<p.length;_++){var b=p[_].split("=");if(1<b.length){var C=b[0];b=b[1];var x=C.split("_");l=2<=x.length&&"type"==x[1]?l+(C+"=")+b+"&":l+(C+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function w0(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function b0(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=CI(n,t),i==nc){4==e&&(n.o=4,Ii(14),r=!1),Nl(n.j,n.m,null,"[Incomplete Response]");break}if(i==v0){n.o=4,Ii(15),Nl(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Nl(n.j,n.m,i,null),D0(n,i)}w0(n)&&i!=nc&&i!=v0&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ii(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),k0(e),e.K=!0,Ii(11))):(Nl(n.j,n.m,t,"[Invalid Chunked Response]"),Ol(n),Th(n))}function CI(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?nc:(t=Number(e.substring(t,r)),isNaN(t)?v0:(r+=1)+t>e.length?nc:(e=e.substr(r,t),n.C=r+t,e))}function Ch(n){n.V=Date.now()+n.O,TI(n,n.O)}function TI(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Fp(bi(n.gb,n),e)}function I0(n){n.B&&(Gt.clearTimeout(n.B),n.B=null)}function Th(n){0==n.l.G||n.I||qI(n.l,n)}function Ol(n){I0(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,ey(n.T),gI(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function D0(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||uy(t.h,n)))if(!n.J&&uy(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;my(t),N0(t)}zI(t),Ii(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=Fp(bi(t.cb,t),6e3));if(1>=PI(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else ac(t,11)}else if((n.J||t.g==n)&&my(t),!Mp(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let b=i[e];if(t.T=b[0],b=b[1],2==t.G)if("c"==b[0]){t.I=b[1],t.ka=b[2];const C=b[3];null!=C&&(t.ma=C,t.j.info("VER="+t.ma));const x=b[4];null!=x&&(t.Ca=x,t.j.info("SVER="+t.Ca));const V=b[5];null!=V&&"number"==typeof V&&0<V&&(t.J=r=1.5*V,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const B=n.g;if(B){const G=B.g?B.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(G){var u=r.h;u.g||-1==G.indexOf("spdy")&&-1==G.indexOf("quic")&&-1==G.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(Bp(u,u.h),u.h=null))}if(r.D){const re=B.g?B.g.getResponseHeader("X-HTTP-Session-Id"):null;re&&(r.za=re,jn(r.F,r.D,re))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=ZI(r,r.H?r.ka:null,r.V),l.J){M0(r.h,l);var p=l,_=r.J;_&&p.setTimeout(_),p.B&&(I0(p),Ch(p)),r.g=l}else gy(r);0<t.i.length&&py(t)}else"stop"!=b[0]&&"close"!=b[0]||ac(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?ac(t,7):Zp(t):"noop"!=b[0]&&t.l&&t.l.wa(b),t.A=0)}Dh()}catch{}}function Ah(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(zm(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function OA(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(zm(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function RA(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(zm(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,u=0;u<i;u++)e.call(void 0,r[u],t&&t[u],n)}(gt=Vp.prototype).setTimeout=function(n){this.O=n},gt.ib=function(n){n=n.target;const e=this.L;e&&3==tu(n)?e.l():this.La(n)},gt.La=function(n){try{if(n==this.g)e:{const C=tu(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>C)&&(3!=C||Zv||this.g&&(this.h.h||this.g.fa()||$I(this.g)))){this.I||4!=C||7==e||Dh(),I0(this);var t=this.g.aa();this.Y=t;t:if(w0(this)){var r=$I(this.g);n="";var i=r.length,u=4==tu(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Ol(this),Th(this);var l="";break t}this.h.i=new Gt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function mI(n,e,t,r,i,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.U,C,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var p,_=this.g;if((p=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Mp(p)){var b=p;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,Ii(12),Ol(this),Th(this);break e}Nl(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,D0(this,t)}this.P?(b0(this,C,l),Zv&&this.i&&3==C&&(ty(this.S,this.T,"tick",this.hb),this.T.start())):(Nl(this.j,this.m,l,null),D0(this,l)),4==C&&Ol(this),this.i&&!this.I&&(4==C?qI(this.l,this):(this.i=!1,Ch(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Ii(12)):(this.o=0,Ii(13)),Ol(this),Th(this)}}}catch{}},gt.hb=function(){if(this.g){var n=tu(this.g),e=this.g.fa();this.C<e.length&&(I0(this),b0(this,n,e),this.i&&4!=n&&Ch(this))}},gt.cancel=function(){this.I=!0,Ol(this)},gt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function yI(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Dh(),Ii(17)),Ol(this),this.o=2,Th(this)):TI(this,this.V-n)};var AI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Di(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Di){this.h=void 0!==e?e:n.h,Sh(this,n.j),this.s=n.s,this.g=n.g,rc(this,n.m),this.l=n.l,e=n.i;var t=new Up;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),SI(this,t),this.o=n.o}else n&&(t=String(n).match(AI))?(this.h=!!e,Sh(this,t[1]||"",!0),this.s=ic(t[2]||""),this.g=ic(t[3]||"",!0),rc(this,t[4]),this.l=ic(t[5]||"",!0),SI(this,t[6]||"",!0),this.o=ic(t[7]||"")):(this.h=!!e,this.i=new Up(null,this.h))}function eu(n){return new Di(n)}function Sh(n,e,t){n.j=t?ic(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function rc(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function SI(n,e,t){e instanceof Up?(n.i=e,function A0(n,e){e&&!n.j&&(oc(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(PA(this,r),ay(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=sc(e,T0)),n.i=new Up(e,n.h))}function jn(n,e,t){n.i.set(e,t)}function sy(n){return jn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function ic(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function sc(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,kA),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function kA(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Di.prototype.toString=function(){var n=[],e=this.j;e&&n.push(sc(e,MI,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(sc(e,MI,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(sc(t,"/"==t.charAt(0)?NI:xI,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",sc(t,RI)),n.join("")};var MI=/[#\/\?@]/g,xI=/[#\?:]/g,NI=/[#\?]/g,T0=/[#\?@]/g,RI=/#/g;function Up(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function oc(n){n.g||(n.g=new Map,n.h=0,n.i&&function C0(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var u=n[t].substring(0,r);i=n[t].substring(r+1)}else u=n[t];e(u,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function PA(n,e){oc(n),e=kl(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function oy(n,e){return oc(n),e=kl(n,e),n.g.has(e)}function ay(n,e,t){PA(n,e),0<t.length&&(n.i=null,n.g.set(kl(n,e),qm(t)),n.h+=t.length)}function kl(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function OI(n){this.l=n||FA,n=Gt.PerformanceNavigationTiming?0<(n=Gt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Gt.g&&Gt.g.Ga&&Gt.g.Ga()&&Gt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(gt=Up.prototype).add=function(n,e){oc(this),this.i=null,n=kl(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},gt.forEach=function(n,e){oc(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},gt.oa=function(){oc(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let u=0;u<i.length;u++)t.push(e[r])}return t},gt.W=function(n){oc(this);let e=[];if("string"==typeof n)oy(this,n)&&(e=e.concat(this.g.get(kl(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},gt.set=function(n,e){return oc(this),this.i=null,oy(this,n=kl(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},gt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},gt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var i=u;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var FA=10;function kI(n){return!!n.h||!!n.g&&n.g.size>=n.j}function PI(n){return n.h?1:n.g?n.g.size:0}function uy(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Bp(n,e){n.g?n.g.add(e):n.h=e}function M0(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function x0(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return qm(n.i)}function cy(){}function FI(){this.g=new cy}function LA(n,e,t){const r=t||"";try{Ah(n,function(i,u){let l=i;Sp(i)&&(l=c0(i)),e.push(r+u+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function jp(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Hp(n){this.l=n.ac||null,this.j=n.jb||!1}function $p(n,e){Zr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=ly,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}OI.prototype.cancel=function(){if(this.i=x0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},cy.prototype.stringify=function(n){return Gt.JSON.stringify(n,void 0)},cy.prototype.parse=function(n){return Gt.JSON.parse(n,void 0)},ur(Hp,g0),Hp.prototype.g=function(){return new $p(this.l,this.j)},Hp.prototype.i=function(n){return function(){return n}}({}),ur($p,Zr);var ly=0;function Ci(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function ua(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Gp(n)}function Gp(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(gt=$p.prototype).open=function(n,e){if(this.readyState!=ly)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Gp(this)},gt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Gt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},gt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ua(this)),this.readyState=ly},gt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Gp(this)),this.g&&(this.readyState=3,Gp(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Gt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ci(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},gt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?ua(this):Gp(this),3==this.readyState&&Ci(this)}},gt.Va=function(n){this.g&&(this.response=this.responseText=n,ua(this))},gt.Ua=function(n){this.g&&(this.response=n,ua(this))},gt.ga=function(){this.g&&ua(this)},gt.setRequestHeader=function(n,e){this.v.append(n,e)},gt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},gt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty($p.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var VA=Gt.JSON.parse;function cr(n){Zr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=UA,this.K=this.L=!1}ur(cr,Zr);var UA="",VI=/^https?$/i,UI=["POST","PUT"];function BI(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,dy(n),qp(n)}function dy(n){n.D||(n.D=!0,ui(n,"complete"),ui(n,"error"))}function jI(n){if(n.h&&typeof Gv<"u"&&(!n.C[1]||4!=tu(n)||2!=n.aa()))if(n.v&&4==tu(n))h0(n.Ha,0,n);else if(ui(n,"readystatechange"),4==tu(n)){n.h=!1;try{const p=n.aa();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===p){var i=String(n.H).match(AI)[1]||null;if(!i&&Gt.self&&Gt.self.location){var u=Gt.self.location.protocol;i=u.substr(0,u.length-1)}r=!VI.test(i?i.toLowerCase():"")}t=r}if(t)ui(n,"complete"),ui(n,"success");else{n.m=6;try{var l=2<tu(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",dy(n)}}finally{qp(n)}}}function qp(n,e){if(n.g){HI(n);const t=n.g,r=n.C[0]?Xu:null;n.g=null,n.C=null,e||ui(n,"ready");try{t.onreadystatechange=r}catch{}}}function HI(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Gt.clearTimeout(n.A),n.A=null)}function tu(n){return n.g?n.g.readyState:0}function $I(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case UA:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function hy(n){let e="";return Np(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function fy(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=hy(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):jn(n,e,t))}function Mh(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Wp(n){this.Ca=0,this.i=[],this.j=new Pp,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Mh("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Mh("baseRetryDelayMs",5e3,n),this.bb=Mh("retryDelaySeedMs",1e4,n),this.$a=Mh("forwardChannelMaxRetries",2,n),this.ta=Mh("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new OI(n&&n.concurrentRequestLimit),this.Fa=new FI,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Zp(n){if(R0(n),3==n.G){var e=n.U++,t=eu(n.F);jn(t,"SID",n.I),jn(t,"RID",e),jn(t,"TYPE","terminate"),Kp(n,t),(e=new Vp(n,n.j,e,void 0)).K=2,e.v=sy(eu(t)),t=!1,Gt.navigator&&Gt.navigator.sendBeacon&&(t=Gt.navigator.sendBeacon(e.v.toString(),"")),!t&&Gt.Image&&((new Image).src=e.v,t=!0),t||(e.g=F0(e.l,null),e.g.da(e.v)),e.F=Date.now(),Ch(e)}P0(n)}function N0(n){n.g&&(k0(n),n.g.cancel(),n.g=null)}function R0(n){N0(n),n.u&&(Gt.clearTimeout(n.u),n.u=null),my(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Gt.clearTimeout(n.m),n.m=null)}function py(n){kI(n.h)||n.m||(n.m=!0,Xm(n.Ja,n),n.C=0)}function Pl(n,e){var t;t=e?e.m:n.U++;const r=eu(n.F);jn(r,"SID",n.I),jn(r,"RID",t),jn(r,"AID",n.T),Kp(n,r),n.o&&n.s&&fy(r,n.o,n.s),t=new Vp(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=O0(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),Bp(n.h,t),iy(t,r,e)}function Kp(n,e){n.ia&&Np(n.ia,function(t,r){jn(e,r,t)}),n.l&&Ah({},function(t,r){jn(e,r,t)})}function O0(n,e,t){t=Math.min(n.i.length,t);var r=n.l?bi(n.l.Ra,n.l,n):null;e:{var i=n.i;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=i[0].h,l.push("ofs="+u)):u=0:l.push("ofs="+u);let p=!0;for(let _=0;_<t;_++){let b=i[_].h;const C=i[_].g;if(b-=u,0>b)u=Math.max(0,i[_].h-100),p=!1;else try{LA(C,l,"req"+b+"_")}catch{r&&r(C)}}if(p){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function gy(n){n.g||n.u||(n.Z=1,Xm(n.Ia,n),n.A=0)}function zI(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Fp(bi(n.Ia,n),WI(n,n.A)),n.A++,0))}function k0(n){null!=n.B&&(Gt.clearTimeout(n.B),n.B=null)}function BA(n){n.g=new Vp(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=eu(n.sa);jn(e,"RID","rpc"),jn(e,"SID",n.I),jn(e,"CI",n.L?"0":"1"),jn(e,"AID",n.T),jn(e,"TYPE","xmlhttp"),Kp(n,e),n.o&&n.s&&fy(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=sy(eu(e)),t.s=null,t.P=!0,E0(t,n)}function my(n){null!=n.v&&(Gt.clearTimeout(n.v),n.v=null)}function qI(n,e){var t=null;if(n.g==e){my(n),k0(n),n.g=null;var r=2}else{if(!uy(n.h,e))return;t=e.D,M0(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;ui(r=ny(),new wI(r,t)),py(n)}else gy(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function GI(n,e){return!(PI(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Fp(bi(n.Ja,n,e),WI(n,n.C)),n.C++,0)))}(n,e)||2==r&&zI(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:ac(n,5);break;case 4:ac(n,10);break;case 3:ac(n,6);break;default:ac(n,2)}}function WI(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function ac(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=bi(n.kb,n);t||(t=new Di("//www.google.com/images/cleardot.gif"),Gt.location&&"http"==Gt.location.protocol||Sh(t,"https"),sy(t)),function LI(n,e){const t=new Pp;if(Gt.Image){const r=new Image;r.onload=ec(jp,t,r,"TestLoadImage: loaded",!0,e),r.onerror=ec(jp,t,r,"TestLoadImage: error",!1,e),r.onabort=ec(jp,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=ec(jp,t,r,"TestLoadImage: timeout",!1,e),Gt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ii(2);n.G=0,n.l&&n.l.va(e),P0(n),R0(n)}function P0(n){if(n.G=0,n.la=[],n.l){const e=x0(n.h);(0!=e.length||0!=n.i.length)&&(zv(n.la,e),zv(n.la,n.i),n.h.i.length=0,qm(n.i),n.i.length=0),n.l.ua()}}function ZI(n,e,t){var r=t instanceof Di?eu(t):new Di(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),rc(r,r.m);else{var i=Gt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var u=new Di(null,void 0);r&&Sh(u,r),e&&(u.g=e),i&&rc(u,i),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&jn(r,t,e),jn(r,"VER",n.ma),Kp(n,r),r}function F0(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new cr(t&&n.Da&&!n.ra?new Hp({jb:!0}):n.ra)).Ka(n.H),e}function L0(){}function yy(){if(Ja&&!(10<=Number(EA)))throw Error("Environmental error: no available transport.")}function ws(n,e){Zr.call(this),this.g=new Wp(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!Mp(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Mp(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Fl(this)}function V0(n){m0.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function KI(){y0.call(this),this.status=1}function Fl(n){this.g=n}(gt=cr.prototype).Ka=function(n){this.L=n},gt.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():_0.g(),this.C=function bI(n){return n.h||(n.h=n.i())}(this.u?this.u:_0),this.g.onreadystatechange=bi(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void BI(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),i=Gt.FormData&&n instanceof Gt.FormData,!(0<=Qb(UI,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,l]of t)this.g.setRequestHeader(u,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{HI(this),0<this.B&&((this.K=function zp(n){return Ja&&function vA(){return function PN(n){var e=rI;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Jb(String(Wm)).split("."),t=Jb("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",u=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==i[0].length&&0==u[0].length)break;n=qv(0==i[1].length?0:parseInt(i[1],10),0==u[1].length?0:parseInt(u[1],10))||qv(0==i[2].length,0==u[2].length)||qv(i[2],u[2]),i=i[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=bi(this.qa,this)):this.A=h0(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){BI(this,u)}},gt.qa=function(){typeof Gv<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ui(this,"timeout"),this.abort(8))},gt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ui(this,"complete"),ui(this,"abort"),qp(this))},gt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),qp(this,!0)),cr.X.M.call(this)},gt.Ha=function(){this.s||(this.F||this.v||this.l?jI(this):this.fb())},gt.fb=function(){jI(this)},gt.aa=function(){try{return 2<tu(this)?this.g.status:-1}catch{return-1}},gt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},gt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),VA(e)}},gt.Ea=function(){return this.m},gt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(gt=Wp.prototype).ma=8,gt.G=1,gt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new Vp(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=sI(u),t0(u,this.S)):u=this.S),null!==this.o||this.N||(i.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=O0(this,i,e),jn(t=eu(this.F),"RID",n),jn(t,"CVER",22),this.D&&jn(t,"X-HTTP-Session-Id",this.D),Kp(this,t),u&&(this.N?e="headers="+encodeURIComponent(String(hy(u)))+"&"+e:this.o&&fy(t,this.o,u)),Bp(this.h,i),this.Ya&&jn(t,"TYPE","init"),this.O?(jn(t,"$req",e),jn(t,"SID","null"),i.Z=!0,iy(i,t,null)):iy(i,t,e),this.G=2}}else 3==this.G&&(n?Pl(this,n):0==this.i.length||kI(this.h)||Pl(this))},gt.Ia=function(){if(this.u=null,BA(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Fp(bi(this.eb,this),n)}},gt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Ii(10),N0(this),BA(this))},gt.cb=function(){null!=this.v&&(this.v=null,N0(this),zI(this),Ii(19))},gt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Ii(2)):(this.j.info("Failed to ping google.com"),Ii(1))},(gt=L0.prototype).xa=function(){},gt.wa=function(){},gt.va=function(){},gt.ua=function(){},gt.Ra=function(){},yy.prototype.g=function(n,e){return new ws(n,e)},ur(ws,Zr),ws.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Ii(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=ZI(n,null,n.V),py(n)},ws.prototype.close=function(){Zp(this.g)},ws.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=c0(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&py(e)},ws.prototype.M=function(){this.g.l=null,delete this.j,Zp(this.g),delete this.g,ws.X.M.call(this)},ur(V0,m0),ur(KI,y0),ur(Fl,L0),Fl.prototype.xa=function(){ui(this.g,"a")},Fl.prototype.wa=function(n){ui(this.g,new V0(n))},Fl.prototype.va=function(n){ui(this.g,new KI)},Fl.prototype.ua=function(){ui(this.g,"b")},yy.prototype.createWebChannel=yy.prototype.g,ws.prototype.send=ws.prototype.u,ws.prototype.open=ws.prototype.m,ws.prototype.close=ws.prototype.close,p0.NO_ERROR=0,p0.TIMEOUT=8,p0.HTTP_ERROR=6,xA.COMPLETE="complete",II.EventType=Lp,Lp.OPEN="a",Lp.CLOSE="b",Lp.ERROR="c",Lp.MESSAGE="d",Zr.prototype.listen=Zr.prototype.N,cr.prototype.listenOnce=cr.prototype.O,cr.prototype.getLastError=cr.prototype.Oa,cr.prototype.getLastErrorCode=cr.prototype.Ea,cr.prototype.getStatus=cr.prototype.aa,cr.prototype.getResponseJson=cr.prototype.Sa,cr.prototype.getResponseText=cr.prototype.fa,cr.prototype.send=cr.prototype.da,cr.prototype.setWithCredentials=cr.prototype.Ka;var YI=aa.createWebChannelTransport=function(){return new yy},QI=aa.getStatEventTarget=function(){return ny()},_y=aa.ErrorCode=p0,jA=aa.EventType=xA,HA=aa.Event=Rl,$A=aa.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},JI=aa.FetchXmlHttpFactory=Hp,U0=aa.WebChannel=II,FN=aa.XhrIo=cr;const GA="@firebase/firestore";class ci{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ci.UNAUTHENTICATED=new ci(null),ci.GOOGLE_CREDENTIALS=new ci("google-credentials-uid"),ci.FIRST_PARTY=new ci("first-party-uid"),ci.MOCK_USER=new ci("mock-user");let Yp="9.14.0";const Ll=new Yu.Yd("@firebase/firestore");function XI(){return Ll.logLevel}function ke(n,...e){if(Ll.logLevel<=Yu.in.DEBUG){const t=e.map(xh);Ll.debug(`Firestore (${Yp}): ${n}`,...t)}}function vr(n,...e){if(Ll.logLevel<=Yu.in.ERROR){const t=e.map(xh);Ll.error(`Firestore (${Yp}): ${n}`,...t)}}function uc(n,...e){if(Ll.logLevel<=Yu.in.WARN){const t=e.map(xh);Ll.warn(`Firestore (${Yp}): ${n}`,...t)}}function xh(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function st(n="Unexpected state"){const e=`FIRESTORE (${Yp}) INTERNAL ASSERTION FAILED: `+n;throw vr(e),new Error(e)}function xt(n,e){n||st()}function Ze(n,e){return n}const he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Oe extends on.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Er{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class zA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ci.UNAUTHENTICATED))}shutdown(){}}class WA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ZA{constructor(e){this.t=e,this.currentUser=ci.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const u=b=>this.i!==i?(i=this.i,t(b)):Promise.resolve();let l=new Er;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Er,e.enqueueRetryable(()=>u(this.currentUser))};const p=()=>{const b=l;e.enqueueRetryable((0,Ee.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},_=b=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),p()};this.t.onInit(b=>_(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?_(b):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Er)}},0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xt("string"==typeof r.accessToken),new zA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return xt(null===e||"string"==typeof e),new ci(e)}}class vy{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=ci.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(xt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class KA{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new vy(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(ci.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class YA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class UN{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.A;return this.A=u.token,ke("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const i=u=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>i(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?i(u):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(xt("string"==typeof t.token),this.A=t.token,new YA(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function QA(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class eD{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=QA(40);for(let u=0;u<i.length;++u)r.length<20&&i[u]<t&&(r+=e.charAt(i[u]%e.length))}return r}}function zt(n,e){return n<e?-1:n>e?1:0}function Qp(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function tD(n){return n+"\0"}class Fn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Oe(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Oe(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Oe(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Oe(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Fn.fromMillis(Date.now())}static fromDate(e){return Fn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Fn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?zt(this.nanoseconds,e.nanoseconds):zt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Nt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Nt(e)}static min(){return new Nt(new Fn(0,0))}static max(){return new Nt(new Fn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ey{constructor(e,t,r){void 0===t?t=0:t>e.length&&st(),void 0===r?r=e.length-t:r>e.length-t&&st(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Ey.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ey?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const u=e.get(i),l=t.get(i);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class qt extends Ey{construct(e,t,r){return new qt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Oe(he.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new qt(t)}static emptyPath(){return new qt([])}}const JA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Hn extends Ey{construct(e,t,r){return new Hn(e,t,r)}static isValidIdentifier(e){return JA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Hn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Hn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const u=()=>{if(0===r.length)throw new Oe(he.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const p=e[i];if("\\"===p){if(i+1===e.length)throw new Oe(he.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Oe(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===p?(l=!l,i++):"."!==p||l?(r+=p,i++):(u(),i++)}if(u(),l)throw new Oe(he.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Hn(t)}static emptyPath(){return new Hn([])}}class Ke{constructor(e){this.path=e}static fromPath(e){return new Ke(qt.fromString(e))}static fromName(e){return new Ke(qt.fromString(e).popFirst(5))}static empty(){return new Ke(qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===qt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return qt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ke(new qt(e.slice()))}}class B0{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Qi(n){return n.fields.find(e=>2===e.kind)}function Vl(n){return n.fields.filter(e=>2!==e.kind)}B0.UNKNOWN_ID=-1;class wy{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ul{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ul(0,bs.min())}}function H0(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Nt.fromTimestamp(1e9===r?new Fn(t+1,0):new Fn(t,r));return new bs(i,Ke.empty(),e)}function $0(n){return new bs(n.readTime,n.key,-1)}class bs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new bs(Nt.min(),Ke.empty(),-1)}static max(){return new bs(Nt.max(),Ke.empty(),-1)}}function by(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ke.comparator(n.documentKey,e.documentKey),0!==t?t:zt(n.largestBatchId,e.largestBatchId))}const G0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function nu(n){return z0.apply(this,arguments)}function z0(){return z0=(0,Ee.Z)(function*(n){if(n.code!==he.FAILED_PRECONDITION||n.message!==G0)throw n;ke("LocalStore","Unexpectedly lost primary lease")}),z0.apply(this,arguments)}class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&st(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ae((r,i)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,i)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ae?t:ae.resolve(t)}catch(t){return ae.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.reject(t)}static resolve(e){return new ae((t,r)=>{t(e)})}static reject(e){return new ae((t,r)=>{r(e)})}static waitFor(e){return new ae((t,r)=>{let i=0,u=0,l=!1;e.forEach(p=>{++i,p.next(()=>{++u,l&&u===i&&t()},_=>r(_))}),l=!0,u===i&&t()})}static or(e){let t=ae.resolve(!1);for(const r of e)t=t.next(i=>i?ae.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,u)=>{r.push(t.call(this,i,u))}),this.waitFor(r)}static mapArray(e,t){return new ae((r,i)=>{const u=e.length,l=new Array(u);let p=0;for(let _=0;_<u;_++){const b=_;t(e[b]).next(C=>{l[b]=C,++p,p===u&&r(l)},C=>i(C))}})}static doWhile(e,t){return new ae((r,i)=>{const u=()=>{!0===e()?t().next(()=>{u()},i):r()};u()})}}class ko{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Er,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Is(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=W0(r.target.error);this.P.reject(new Is(e,i))}}static open(e,t,r,i){try{return new ko(t,e.transaction(i,r))}catch(u){throw new Is(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new BN(t)}}class io{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===io.D((0,on.z$)())&&vr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ke("SimpleDb","Removing database:",e),Bl(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,on.hl)())return!1;if(io.N())return!0;const e=(0,on.z$)(),t=io.D(e),r=0<t&&t<10,i=io.k(e),u=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,Ee.Z)(function*(){return t.db||(ke("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=l=>{r(l.target.result)},u.onblocked=()=>{i(new Is(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=l=>{const p=l.target.error;i("VersionError"===p.name?new Oe(he.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===p.name?new Oe(he.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+p):new Is(e,p))},u.onupgradeneeded=l=>{ke("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.$(l.target.result,u.transaction,l.oldVersion,t.version).next(()=>{ke("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var u=this;return(0,Ee.Z)(function*(){const l="readonly"===t;let p=0;for(;;){++p;try{u.db=yield u.F(e);const _=ko.open(u.db,e,l?"readonly":"readwrite",r),b=i(_).next(C=>(_.V(),C)).catch(C=>(_.abort(C),ae.reject(C))).toPromise();return b.catch(()=>{}),yield _.v,b}catch(_){const b=_,C="FirebaseError"!==b.name&&p<3;if(ke("SimpleDb","Transaction failed with error:",b.message,"Retrying:",C),u.close(),!C)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class q0{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return Bl(this.U.delete())}}class Is extends Oe{constructor(e,t){super(he.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function cc(n){return"IndexedDbTransactionError"===n.name}class BN{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ke("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Bl(r)}add(e){return ke("SimpleDb","ADD",this.store.name,e,e),Bl(this.store.add(e))}get(e){return Bl(this.store.get(e)).next(t=>(void 0===t&&(t=null),ke("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ke("SimpleDb","DELETE",this.store.name,e),Bl(this.store.delete(e))}count(){return ke("SimpleDb","COUNT",this.store.name),Bl(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),u=[];return this.H(i,(l,p)=>{u.push(p)}).next(()=>u)}{const i=this.store.getAll(r.range);return new ae((u,l)=>{i.onerror=p=>{l(p.target.error)},i.onsuccess=p=>{u(p.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ae((i,u)=>{r.onerror=l=>{u(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}Y(e,t){ke("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(u,l,p)=>p.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new ae((r,i)=>{t.onerror=u=>{const l=W0(u.target.error);i(l)},t.onsuccess=u=>{const l=u.target.result;l?e(l.primaryKey,l.value).next(p=>{p?l.continue():r()}):r()}})}H(e,t){const r=[];return new ae((i,u)=>{e.onerror=l=>{u(l.target.error)},e.onsuccess=l=>{const p=l.target.result;if(!p)return void i();const _=new q0(p),b=t(p.primaryKey,p.value,_);if(b instanceof ae){const C=b.catch(x=>(_.done(),ae.reject(x)));r.push(C)}_.isDone?i():null===_.G?p.continue():p.continue(_.G)}}).next(()=>ae.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Bl(n){return new ae((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=W0(r.target.error);t(i)}})}let rD=!1;function W0(n){const e=io.D((0,on.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Oe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return rD||(rD=!0,setTimeout(()=>{throw r},0)),r}}return n}class eS{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;ke("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ee.Z)(function*(){t.task=null;try{ke("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){cc(r)?ke("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield nu(r)}yield t.nt(6e4)}))}}class iD{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,Ee.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,u=!0;return ae.doWhile(()=>!0===u&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return ke("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,i).next(p=>{i-=p,r.add(l)});u=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(u=>{const l=u.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(i,u)).next(p=>(ke("IndexBackiller",`Updating offset: ${p}`),this.localStore.indexManager.updateCollectionGroup(e,t,p))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,u)=>{const l=$0(u);by(l,r)>0&&(r=l)}),new bs(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Ds{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function Z0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function jl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function K0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Ds.at=-1;class lr{constructor(e,t){this.comparator=e,this.root=t||Kr.EMPTY}insert(e,t){return new lr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Kr.BLACK,null,null))}remove(e){return new lr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Kr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Nh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Nh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Nh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Nh(this.root,e,this.comparator,!0)}}class Nh{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&i&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Kr{constructor(e,t,r,i,u){this.key=e,this.value=t,this.color=r??Kr.RED,this.left=i??Kr.EMPTY,this.right=u??Kr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,u){return new Kr(e??this.key,t??this.value,r??this.color,i??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const u=r(e,i.key);return i=u<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===u?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Kr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Kr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Kr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Kr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw st();const e=this.left.check();if(e!==this.right.check())throw st();return e+(this.isRed()?0:1)}}Kr.EMPTY=null,Kr.RED=!0,Kr.BLACK=!1,Kr.EMPTY=new class{constructor(){this.size=0}get key(){throw st()}get value(){throw st()}get color(){throw st()}get left(){throw st()}get right(){throw st()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Kr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class En{constructor(e){this.comparator=e,this.data=new lr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Y0(this.data.getIterator())}getIteratorFrom(e){return new Y0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof En)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(i,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new En(this.comparator);return t.data=e,t}}class Y0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Hl(n){return n.hasNext()?n.getNext():void 0}class Ji{constructor(e){this.fields=e,e.sort(Hn.comparator)}static empty(){return new Ji([])}unionWith(e){let t=new En(Hn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ji(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Qp(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class tr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new tr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let u=0;u<r.length;++u)i+=String.fromCharCode(r[u]);return i}(e);return new tr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return zt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tr.EMPTY_BYTE_STRING=new tr("");const sD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function lc(n){if(xt(!!n),"string"==typeof n){let e=0;const t=sD.exec(n);if(xt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:nr(n.seconds),nanos:nr(n.nanos)}}function nr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Rh(n){return"string"==typeof n?tr.fromBase64String(n):tr.fromUint8Array(n)}function oD(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function tS(n){const e=n.mapValue.fields.__previous_value__;return oD(e)?tS(e):e}function Oh(n){const e=lc(n.mapValue.fields.__local_write_time__.timestampValue);return new Fn(e.seconds,e.nanos)}class nS{constructor(e,t,r,i,u,l,p,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=p,this.useFetchStreams=_}}class dc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new dc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof dc&&e.projectId===this.projectId&&e.database===this.database}}function Jp(n){return null==n}function Dy(n){return 0===n&&1/n==-1/0}function rS(n){return"number"==typeof n&&Number.isInteger(n)&&!Dy(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const $l={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Q0={nullValue:"NULL_VALUE"};function kh(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?oD(n)?4:iS(n)?9007199254740991:10:st()}function ca(n,e){if(n===e)return!0;const t=kh(n);if(t!==kh(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Oh(n).isEqual(Oh(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const u=lc(r.timestampValue),l=lc(i.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Rh(n.bytesValue).isEqual(Rh(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return nr(r.geoPointValue.latitude)===nr(i.geoPointValue.latitude)&&nr(r.geoPointValue.longitude)===nr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return nr(r.integerValue)===nr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const u=nr(r.doubleValue),l=nr(i.doubleValue);return u===l?Dy(u)===Dy(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return Qp(n.arrayValue.values||[],e.arrayValue.values||[],ca);case 10:return function(r,i){const u=r.mapValue.fields||{},l=i.mapValue.fields||{};if(Z0(u)!==Z0(l))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(void 0===l[p]||!ca(u[p],l[p])))return!1;return!0}(n,e);default:return st()}var i}function hc(n,e){return void 0!==(n.values||[]).find(t=>ca(t,e))}function fc(n,e){if(n===e)return 0;const t=kh(n),r=kh(e);if(t!==r)return zt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return zt(n.booleanValue,e.booleanValue);case 2:return function(i,u){const l=nr(i.integerValue||i.doubleValue),p=nr(u.integerValue||u.doubleValue);return l<p?-1:l>p?1:l===p?0:isNaN(l)?isNaN(p)?0:-1:1}(n,e);case 3:return aD(n.timestampValue,e.timestampValue);case 4:return aD(Oh(n),Oh(e));case 5:return zt(n.stringValue,e.stringValue);case 6:return function(i,u){const l=Rh(i),p=Rh(u);return l.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(i,u){const l=i.split("/"),p=u.split("/");for(let _=0;_<l.length&&_<p.length;_++){const b=zt(l[_],p[_]);if(0!==b)return b}return zt(l.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,u){const l=zt(nr(i.latitude),nr(u.latitude));return 0!==l?l:zt(nr(i.longitude),nr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,u){const l=i.values||[],p=u.values||[];for(let _=0;_<l.length&&_<p.length;++_){const b=fc(l[_],p[_]);if(b)return b}return zt(l.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,u){if(i===$l.mapValue&&u===$l.mapValue)return 0;if(i===$l.mapValue)return 1;if(u===$l.mapValue)return-1;const l=i.fields||{},p=Object.keys(l),_=u.fields||{},b=Object.keys(_);p.sort(),b.sort();for(let C=0;C<p.length&&C<b.length;++C){const x=zt(p[C],b[C]);if(0!==x)return x;const V=fc(l[p[C]],_[b[C]]);if(0!==V)return V}return zt(p.length,b.length)}(n.mapValue,e.mapValue);default:throw st()}}function aD(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return zt(n,e);const t=lc(n),r=lc(e),i=zt(t.seconds,r.seconds);return 0!==i?i:zt(t.nanos,r.nanos)}function Gl(n){return ru(n)}function ru(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=lc(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Rh(n.bytesValue).toBase64():"referenceValue"in n?Ke.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",u=!0;for(const l of r.values||[])u?u=!1:i+=",",i+=ru(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const p of i)l?l=!1:u+=",",u+=`${p}:${ru(r.fields[p])}`;return u+"}"}(n.mapValue):st();var e}function pc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Xp(n){return!!n&&"integerValue"in n}function zl(n){return!!n&&"arrayValue"in n}function uD(n){return!!n&&"nullValue"in n}function Cy(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ph(n){return!!n&&"mapValue"in n}function gc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return jl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=gc(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=gc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function iS(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function jN(n){return"nullValue"in n?Q0:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?pc(dc.empty(),Ke.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:st()}function HN(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?pc(dc.empty(),Ke.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?$l:st()}function sS(n,e){const t=fc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function J0(n,e){const t=fc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class li{constructor(e){this.value=e}static empty(){return new li({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ph(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=gc(t)}setAll(e){let t=Hn.emptyPath(),r={},i=[];e.forEach((l,p)=>{if(!t.isImmediateParentOf(p)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=p.popLast()}l?r[p.lastSegment()]=gc(l):i.push(p.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,i)}delete(e){const t=this.field(e.popLast());Ph(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ca(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Ph(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){jl(t,(i,u)=>e[i]=u);for(const i of r)delete e[i]}clone(){return new li(gc(this.value))}}function cD(n){const e=[];return jl(n.fields,(t,r)=>{const i=new Hn([t]);if(Ph(r)){const u=cD(r.mapValue).fields;if(0===u.length)e.push(i);else for(const l of u)e.push(i.child(l))}else e.push(i)}),new Ji(e)}class Nn{constructor(e,t,r,i,u,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=u,this.documentState=l}static newInvalidDocument(e){return new Nn(e,0,Nt.min(),Nt.min(),li.empty(),0)}static newFoundDocument(e,t,r){return new Nn(e,1,t,Nt.min(),r,0)}static newNoDocument(e,t){return new Nn(e,2,t,Nt.min(),li.empty(),0)}static newUnknownDocument(e,t){return new Nn(e,3,t,Nt.min(),li.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=li.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=li.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Nt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class oS{constructor(e,t=null,r=[],i=[],u=null,l=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=u,this.startAt=l,this.endAt=p,this.ht=null}}function X0(n,e=null,t=[],r=[],i=null,u=null,l=null){return new oS(n,e,t,r,i,u,l)}function mc(n){const e=Ze(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Gl(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Jp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Gl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Gl(r)).join(",")),e.ht=t}return e.ht}function eg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!GN(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!ca(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!gS(n.startAt,e.startAt)&&gS(n.endAt,e.endAt)}function Ty(n){return Ke.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function tg(n,e){return n.filters.filter(t=>t instanceof Yr&&t.field.isEqual(e))}function Ay(n,e,t){let r=Q0,i=!0;for(const u of tg(n,e)){let l=Q0,p=!0;switch(u.op){case"<":case"<=":l=jN(u.value);break;case"==":case"in":case">=":l=u.value;break;case">":l=u.value,p=!1;break;case"!=":case"not-in":l=Q0}sS({value:r,inclusive:i},{value:l,inclusive:p})<0&&(r=l,i=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];sS({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function aS(n,e,t){let r=$l,i=!0;for(const u of tg(n,e)){let l=$l,p=!0;switch(u.op){case">=":case">":l=HN(u.value),p=!1;break;case"==":case"in":case"<=":l=u.value;break;case"<":l=u.value,p=!1;break;case"!=":case"not-in":l=$l}J0({value:r,inclusive:i},{value:l,inclusive:p})>0&&(r=l,i=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];J0({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class Yr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new eE(e,t,r):"array-contains"===t?new $N(e,r):"in"===t?new dS(e,r):"not-in"===t?new hS(e,r):"array-contains-any"===t?new fS(e,r):new Yr(e,t,r)}static lt(e,t,r){return"in"===t?new uS(e,r):new cS(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(fc(t,this.value)):null!==t&&kh(this.value)===kh(t)&&this.ft(fc(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return st()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class eE extends Yr{constructor(e,t,r){super(e,t,r),this.key=Ke.fromName(r.referenceValue)}matches(e){const t=Ke.comparator(e.key,this.key);return this.ft(t)}}class uS extends Yr{constructor(e,t){super(e,"in",t),this.keys=lS(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class cS extends Yr{constructor(e,t){super(e,"not-in",t),this.keys=lS(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function lS(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ke.fromName(r.referenceValue))}class $N extends Yr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return zl(t)&&hc(t.arrayValue,this.value)}}class dS extends Yr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&hc(this.value.arrayValue,t)}}class hS extends Yr{constructor(e,t){super(e,"not-in",t)}matches(e){if(hc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!hc(this.value.arrayValue,t)}}class fS extends Yr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!zl(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>hc(this.value.arrayValue,r))}}class ql{constructor(e,t){this.position=e,this.inclusive=t}}class ng{constructor(e,t="asc"){this.field=e,this.dir=t}}function GN(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function pS(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const u=e[i],l=n.position[i];if(r=u.field.isKeyField()?Ke.comparator(Ke.fromName(l.referenceValue),t.key):fc(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function gS(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ca(n.position[t],e.position[t]))return!1;return!0}class iu{constructor(e,t=null,r=[],i=[],u=null,l="F",p=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=u,this.limitType=l,this.startAt=p,this.endAt=_,this._t=null,this.wt=null}}function mS(n,e,t,r,i,u,l,p){return new iu(n,e,t,r,i,u,l,p)}function rg(n){return new iu(n)}function yS(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function dD(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function hD(n){for(const e of n.filters)if(e.dt())return e.field;return null}function fD(n){return null!==n.collectionGroup}function s(n){const e=Ze(n);if(null===e._t){e._t=[];const t=hD(e),r=dD(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new ng(t)),e._t.push(new ng(Hn.keyField(),"asc"));else{let i=!1;for(const u of e.explicitOrderBy)e._t.push(u),u.field.isKeyField()&&(i=!0);if(!i){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new ng(Hn.keyField(),u))}}}return e._t}function o(n){const e=Ze(n);if(!e.wt)if("F"===e.limitType)e.wt=X0(e.path,e.collectionGroup,s(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of s(e))t.push(new ng(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new ql(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new ql(e.startAt.position,e.startAt.inclusive):null;e.wt=X0(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function a(n,e,t){return new iu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function c(n,e){return eg(o(n),o(e))&&n.limitType===e.limitType}function h(n){return`${mc(o(n))}|lt:${n.limitType}`}function g(n){return`Query(target=${function lD(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Gl(r.value)}`;var r}).join(", ")}]`),Jp(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Gl(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Gl(t)).join(",")),`Target(${e})`}(o(n))}; limitType=${n.limitType})`}function y(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ke.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,u,l){const p=pS(i,u,l);return i.inclusive?p<=0:p<0}(t.startAt,s(t),r)||t.endAt&&!function(i,u,l){const p=pS(i,u,l);return i.inclusive?p>=0:p>0}(t.endAt,s(t),r)));var t,r}function w(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function I(n){return(e,t)=>{let r=!1;for(const i of s(n)){const u=S(i,e,t);if(0!==u)return u;r=r||i.field.isKeyField()}return 0}}function S(n,e,t){const r=n.field.isKeyField()?Ke.comparator(e.key,t.key):function(i,u,l){const p=u.data.field(i),_=l.data.field(i);return null!==p&&null!==_?fc(p,_):st()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return st()}}function R(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dy(e)?"-0":e}}function F(n){return{integerValue:""+n}}function W(n,e){return rS(e)?F(e):R(n,e)}class ee{constructor(){this._=void 0}}function ve(n,e,t){return n instanceof Je?function(r,i){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(u.fields.__previous_value__=i),{mapValue:u}}(t,e):n instanceof ht?Ne(n,e):n instanceof It?wn(n,e):function(r,i){const u=qe(r,i),l=ig(u)+ig(r.yt);return Xp(u)&&Xp(r.yt)?F(l):R(r.It,l)}(n,e)}function Le(n,e,t){return n instanceof ht?Ne(n,e):n instanceof It?wn(n,e):t}function qe(n,e){return n instanceof mn?Xp(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Je extends ee{}class ht extends ee{constructor(e){super(),this.elements=e}}function Ne(n,e){const t=Sy(e);for(const r of n.elements)t.some(i=>ca(i,r))||t.push(r);return{arrayValue:{values:t}}}class It extends ee{constructor(e){super(),this.elements=e}}function wn(n,e){let t=Sy(e);for(const r of n.elements)t=t.filter(i=>!ca(i,r));return{arrayValue:{values:t}}}class mn extends ee{constructor(e,t){super(),this.It=e,this.yt=t}}function ig(n){return nr(n.integerValue||n.doubleValue)}function Sy(n){return zl(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Wl{constructor(e,t){this.field=e,this.transform=t}}class nE{constructor(e,t){this.version=e,this.transformResults=t}}class Rn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Rn}static exists(e){return new Rn(void 0,e)}static updateTime(e){return new Rn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fh(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Lh{}function My(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Ny(n.key,Rn.none()):new xy(n.key,n.data,Rn.none());{const t=n.data,r=li.empty();let i=new En(Hn.comparator);for(let u of e.fields)if(!i.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),i=i.add(u)}return new Zl(n.key,r,new Ji(i.toArray()),Rn.none())}}function rE(n,e,t){n instanceof xy?function(r,i,u){const l=r.value.clone(),p=WN(r.fieldTransforms,i,u.transformResults);l.setAll(p),i.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Zl?function(r,i,u){if(!Fh(r.precondition,i))return void i.convertToUnknownDocument(u.version);const l=WN(r.fieldTransforms,i,u.transformResults),p=i.data;p.setAll(qN(r)),p.setAll(l),i.convertToFoundDocument(u.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function sg(n,e,t,r){return n instanceof xy?function(i,u,l,p){if(!Fh(i.precondition,u))return l;const _=i.value.clone(),b=ZN(i.fieldTransforms,p,u);return _.setAll(b),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof Zl?function(i,u,l,p){if(!Fh(i.precondition,u))return l;const _=ZN(i.fieldTransforms,p,u),b=u.data;return b.setAll(qN(i)),b.setAll(_),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(C=>C.field))}(n,e,t,r):(l=t,Fh(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function fP(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),u=qe(r.transform,i||null);null!=u&&(null===t&&(t=li.empty()),t.set(r.field,u))}return t||null}function zN(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Qp(t,r,(i,u)=>function tE(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof ht&&r instanceof ht||t instanceof It&&r instanceof It?Qp(t.elements,r.elements,ca):t instanceof mn&&r instanceof mn?ca(t.yt,r.yt):t instanceof Je&&r instanceof Je);var t,r}(i,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class xy extends Lh{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Zl extends Lh{constructor(e,t,r,i,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function qN(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function WN(n,e,t){const r=new Map;xt(n.length===t.length);for(let i=0;i<t.length;i++){const u=n[i],l=u.transform,p=e.data.field(u.field);r.set(u.field,Le(l,p,t[i]))}return r}function ZN(n,e,t){const r=new Map;for(const i of n){const u=i.transform,l=t.data.field(i.field);r.set(i.field,ve(u,l,e))}return r}class Ny extends Lh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _S extends Lh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class pP{constructor(e){this.count=e}}var Qr,dn;function KN(n){switch(n){default:return st();case he.CANCELLED:case he.UNKNOWN:case he.DEADLINE_EXCEEDED:case he.RESOURCE_EXHAUSTED:case he.INTERNAL:case he.UNAVAILABLE:case he.UNAUTHENTICATED:return!1;case he.INVALID_ARGUMENT:case he.NOT_FOUND:case he.ALREADY_EXISTS:case he.PERMISSION_DENIED:case he.FAILED_PRECONDITION:case he.ABORTED:case he.OUT_OF_RANGE:case he.UNIMPLEMENTED:case he.DATA_LOSS:return!0}}function YN(n){if(void 0===n)return vr("GRPC error has no .code"),he.UNKNOWN;switch(n){case Qr.OK:return he.OK;case Qr.CANCELLED:return he.CANCELLED;case Qr.UNKNOWN:return he.UNKNOWN;case Qr.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case Qr.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case Qr.INTERNAL:return he.INTERNAL;case Qr.UNAVAILABLE:return he.UNAVAILABLE;case Qr.UNAUTHENTICATED:return he.UNAUTHENTICATED;case Qr.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case Qr.NOT_FOUND:return he.NOT_FOUND;case Qr.ALREADY_EXISTS:return he.ALREADY_EXISTS;case Qr.PERMISSION_DENIED:return he.PERMISSION_DENIED;case Qr.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case Qr.ABORTED:return he.ABORTED;case Qr.OUT_OF_RANGE:return he.OUT_OF_RANGE;case Qr.UNIMPLEMENTED:return he.UNIMPLEMENTED;case Qr.DATA_LOSS:return he.DATA_LOSS;default:return st()}}(dn=Qr||(Qr={}))[dn.OK=0]="OK",dn[dn.CANCELLED=1]="CANCELLED",dn[dn.UNKNOWN=2]="UNKNOWN",dn[dn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dn[dn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dn[dn.NOT_FOUND=5]="NOT_FOUND",dn[dn.ALREADY_EXISTS=6]="ALREADY_EXISTS",dn[dn.PERMISSION_DENIED=7]="PERMISSION_DENIED",dn[dn.UNAUTHENTICATED=16]="UNAUTHENTICATED",dn[dn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dn[dn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dn[dn.ABORTED=10]="ABORTED",dn[dn.OUT_OF_RANGE=11]="OUT_OF_RANGE",dn[dn.UNIMPLEMENTED=12]="UNIMPLEMENTED",dn[dn.INTERNAL=13]="INTERNAL",dn[dn.UNAVAILABLE=14]="UNAVAILABLE",dn[dn.DATA_LOSS=15]="DATA_LOSS";class Vh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,u]of r)if(this.equalsFn(i,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<i.length;u++)if(this.equalsFn(i[u][0],e))return void(i[u]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){jl(this.inner,(t,r)=>{for(const[i,u]of r)e(i,u)})}isEmpty(){return K0(this.inner)}size(){return this.innerSize}}const gP=new lr(Ke.comparator);function so(){return gP}const QN=new lr(Ke.comparator);function iE(...n){let e=QN;for(const t of n)e=e.insert(t.key,t);return e}function JN(n){let e=QN;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function yc(){return sE()}function XN(){return sE()}function sE(){return new Vh(n=>n.toString(),(n,e)=>n.isEqual(e))}const mP=new lr(Ke.comparator),yP=new En(Ke.comparator);function Yt(...n){let e=yP;for(const t of n)e=e.add(t);return e}const _P=new En(zt);function pD(){return _P}class oE{constructor(e,t,r,i,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,aE.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new oE(Nt.min(),i,pD(),so(),Yt())}}class aE{constructor(e,t,r,i,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new aE(r,t,Yt(),Yt(),Yt())}}class gD{constructor(e,t,r,i){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=i}}class eR{constructor(e,t){this.targetId=e,this.At=t}}class tR{constructor(e,t,r=tr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class nR{constructor(){this.Rt=0,this.bt=iR(),this.Pt=tr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Yt(),t=Yt(),r=Yt();return this.bt.forEach((i,u)=>{switch(u){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:st()}}),new aE(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=iR()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class vP{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=so(),this.qt=rR(),this.Kt=new En(zt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:st()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,i)=>{this.Ht(i)&&t(i)})}Yt(e){const t=e.targetId,r=e.At.count,i=this.Xt(t);if(i){const u=i.target;if(Ty(u))if(0===r){const l=new Ke(u.path);this.jt(t,l,Nn.newNoDocument(l,Nt.min()))}else xt(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((u,l)=>{const p=this.Xt(l);if(p){if(u.current&&Ty(p.target)){const _=new Ke(p.target.path);null!==this.Ut.get(_)||this.ee(l,_)||this.jt(l,_,Nn.newNoDocument(_,e))}u.Dt&&(t.set(l,u.xt()),u.Nt())}});let r=Yt();this.qt.forEach((u,l)=>{let p=!0;l.forEachWhile(_=>{const b=this.Xt(_);return!b||2===b.purpose||(p=!1,!1)}),p&&(r=r.add(u))}),this.Ut.forEach((u,l)=>l.setReadTime(e));const i=new oE(e,t,this.Kt,this.Ut,r);return this.Ut=so(),this.qt=rR(),this.Kt=new En(zt),i}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const i=this.zt(e);this.ee(e,t)?i.kt(t,1):i.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new nR,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new En(zt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||ke("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new nR),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function rR(){return new lr(Ke.comparator)}function iR(){return new lr(Ke.comparator)}const EP={asc:"ASCENDING",desc:"DESCENDING"},wP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class bP{constructor(e,t){this.databaseId=e,this.gt=t}}function uE(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sR(n,e){return n.gt?e.toBase64():e.toUint8Array()}function IP(n,e){return uE(n,e.toTimestamp())}function Ti(n){return xt(!!n),Nt.fromTimestamp(function(e){const t=lc(e);return new Fn(t.seconds,t.nanos)}(n))}function vS(n,e){return(t=n,new qt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function oR(n){const e=qt.fromString(n);return xt(pR(e)),e}function cE(n,e){return vS(n.databaseId,e.path)}function _c(n,e){const t=oR(e);if(t.get(1)!==n.databaseId.projectId)throw new Oe(he.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Oe(he.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ke(uR(t))}function ES(n,e){return vS(n.databaseId,e)}function aR(n){const e=oR(n);return 4===e.length?qt.emptyPath():uR(e)}function lE(n){return new qt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function uR(n){return xt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function cR(n,e,t){return{name:cE(n,e),fields:t.value.mapValue.fields}}function lR(n,e,t){const r=_c(n,e.name),i=Ti(e.updateTime),u=new li({mapValue:{fields:e.fields}}),l=Nn.newFoundDocument(r,i,u);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function dE(n,e){let t;if(e instanceof xy)t={update:cR(n,e.key,e.value)};else if(e instanceof Ny)t={delete:cE(n,e.key)};else if(e instanceof Zl)t={update:cR(n,e.key,e.data),updateMask:RP(e.fieldMask)};else{if(!(e instanceof _S))return st();t={verify:cE(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,u){const l=u.transform;if(l instanceof Je)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ht)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof It)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof mn)return{fieldPath:u.field.canonicalString(),increment:l.yt};throw st()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:IP(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:st()),t;var i}function wS(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Rn.updateTime(Ti(i.updateTime)):void 0!==i.exists?Rn.exists(i.exists):Rn.none():Rn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(u,l){let p=null;"setToServerValue"in l?(xt("REQUEST_TIME"===l.setToServerValue),p=new Je):"appendMissingElements"in l?p=new ht(l.appendMissingElements.values||[]):"removeAllFromArray"in l?p=new It(l.removeAllFromArray.values||[]):"increment"in l?p=new mn(u,l.increment):st();const _=Hn.fromServerFormat(l.fieldPath);return new Wl(_,p)}(n,i)):[];var i;if(e.update){const i=_c(n,e.update.name),u=new li({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Ji((e.updateMask.fieldPaths||[]).map(b=>Hn.fromServerFormat(b)));return new Zl(i,u,l,t,r)}return new xy(i,u,t,r)}if(e.delete){const i=_c(n,e.delete);return new Ny(i,t)}if(e.verify){const i=_c(n,e.verify);return new _S(i,t)}return st()}function dR(n,e){return{documents:[ES(n,e.path)]}}function bS(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=ES(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=ES(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0===_.length)return;const b=_.map(C=>function(x){if("=="===x.op){if(Cy(x.value))return{unaryFilter:{field:Ry(x.field),op:"IS_NAN"}};if(uD(x.value))return{unaryFilter:{field:Ry(x.field),op:"IS_NULL"}}}else if("!="===x.op){if(Cy(x.value))return{unaryFilter:{field:Ry(x.field),op:"IS_NOT_NAN"}};if(uD(x.value))return{unaryFilter:{field:Ry(x.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ry(x.field),op:MP(x.op),value:x.value}}}(C));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);i&&(t.structuredQuery.where=i);const u=function(_){if(0!==_.length)return _.map(b=>{return{field:Ry((C=b).field),direction:SP(C.dir)};var C})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=(b=e.limit,n.gt||Jp(b)?b:{value:b});var b,p,_;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(p=e.startAt).inclusive,values:p.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function hR(n){let e=aR(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){xt(1===r);const C=t.from[0];C.allDescendants?i=C.collectionId:e=e.child(C.collectionId)}let u=[];t.where&&(u=fR(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(C=>{return new ng(Oy((x=C).field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction));var x}));let p=null;t.limit&&(p=function(C){let x;return x="object"==typeof C?C.value:C,Jp(x)?null:x}(t.limit));let _=null;var C;t.startAt&&(_=new ql((C=t.startAt).values||[],!!C.before));let b=null;return t.endAt&&(b=function(C){return new ql(C.values||[],!C.before)}(t.endAt)),mS(e,i,l,u,p,"F",_,b)}function fR(n){return n?void 0!==n.unaryFilter?[NP(n)]:void 0!==n.fieldFilter?[xP(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>fR(e)).reduce((e,t)=>e.concat(t)):st():[]}function SP(n){return EP[n]}function MP(n){return wP[n]}function Ry(n){return{fieldPath:n.canonicalString()}}function Oy(n){return Hn.fromServerFormat(n.fieldPath)}function xP(n){return Yr.create(Oy(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return st()}}(n.fieldFilter.op),n.fieldFilter.value)}function NP(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Oy(n.unaryFilter.field);return Yr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Oy(n.unaryFilter.field);return Yr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Oy(n.unaryFilter.field);return Yr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Oy(n.unaryFilter.field);return Yr.create(i,"!=",{nullValue:"NULL_VALUE"});default:return st()}}function RP(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function pR(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Cs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=gR(e)),e=OP(n.get(t),e);return gR(e)}function OP(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const u=n.charAt(i);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function gR(n){return n+"\x01\x01"}function vc(n){const e=n.length;if(xt(e>=2),2===e)return xt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),qt.emptyPath();const t=e-2,r=[];let i="";for(let u=0;u<e;){const l=n.indexOf("\x01",u);switch((l<0||l>t)&&st(),n.charAt(l+1)){case"\x01":const p=n.substring(u,l);let _;0===i.length?_=p:(i+=p,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(u,l),i+="\0";break;case"\x11":i+=n.substring(u,l+1);break;default:st()}u=l+2}return new qt(r)}const mR=["userId","batchId"];function mD(n,e){return[n,Cs(e)]}function yR(n,e,t){return[n,Cs(e),t]}const kP={},PP=["prefixPath","collectionGroup","readTime","documentId"],FP=["prefixPath","collectionGroup","documentId"],LP=["collectionGroup","readTime","prefixPath","documentId"],VP=["canonicalId","targetId"],UP=["targetId","path"],BP=["path","targetId"],jP=["collectionId","parent"],HP=["indexId","uid"],$P=["uid","sequenceNumber"],GP=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],zP=["indexId","uid","orderedDocumentKey"],qP=["userId","collectionPath","documentId"],WP=["userId","collectionPath","largestBatchId"],ZP=["userId","collectionGroup","largestBatchId"],_R=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],KP=[..._R,"documentOverlays"],vR=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ER=vR,YP=[...ER,"indexConfiguration","indexState","indexEntries"];class IS extends nD{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Ai(n,e){const t=Ze(n);return io.M(t.ie,e)}class DS{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const u=this.mutations[i];u.key.isEqual(e.key)&&rE(u,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=sg(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=sg(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=XN();return this.mutations.forEach(i=>{const u=e.get(i.key),l=u.overlayedDocument;let p=this.applyToLocalView(l,u.mutatedFields);p=t.has(i.key)?null:p;const _=My(l,p);null!==_&&r.set(i.key,_),l.isValidDocument()||l.convertToNoDocument(Nt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Yt())}isEqual(e){return this.batchId===e.batchId&&Qp(this.mutations,e.mutations,(t,r)=>zN(t,r))&&Qp(this.baseMutations,e.baseMutations,(t,r)=>zN(t,r))}}class CS{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){xt(e.mutations.length===r.length);let i=mP;const u=e.mutations;for(let l=0;l<u.length;l++)i=i.insert(u[l].key,r[l].version);return new CS(e,t,r,i)}}class TS{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Uh{constructor(e,t,r,i,u=Nt.min(),l=Nt.min(),p=tr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=p}withSequenceNumber(e){return new Uh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Uh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Uh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class wR{constructor(e){this.re=e}}function bR(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:yD(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:cE(i=n.re,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:uE(i,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:og(e.version)};else{if(!e.isUnknownDocument())return st();r.unknownDocument={path:t.path.toArray(),version:og(e.version)}}var i,u;return r}function yD(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function og(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ag(n){const e=new Fn(n.seconds,n.nanoseconds);return Nt.fromTimestamp(e)}function ug(n,e){const t=(e.baseMutations||[]).map(u=>wS(n.re,u));for(let u=0;u<e.mutations.length-1;++u){const l=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(l.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>wS(n.re,u)),i=Fn.fromMillis(e.localWriteTimeMs);return new DS(e.batchId,i,t,r)}function hE(n){const e=ag(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?ag(n.lastLimboFreeSnapshotVersion):Nt.min();let r;var i;return void 0!==n.query.documents?(xt(1===(i=n.query).documents.length),r=o(rg(aR(i.documents[0])))):r=o(hR(n.query)),new Uh(r,n.targetId,0,n.lastListenSequenceNumber,e,t,tr.fromBase64String(n.resumeToken))}function IR(n,e){const t=og(e.snapshotVersion),r=og(e.lastLimboFreeSnapshotVersion);let i;i=Ty(e.target)?dR(n.re,e.target):bS(n.re,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:mc(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function AS(n){const e=hR({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?a(e,e.limit,"L"):e}function SS(n,e){return new TS(e.largestBatchId,wS(n.re,e.overlayMutation))}function DR(n,e){const t=e.path.lastSegment();return[n,Cs(e.path.popLast()),t]}function CR(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:og(r.readTime),documentKey:Cs(r.documentKey.path),largestBatchId:r.largestBatchId}}class JP{getBundleMetadata(e,t){return TR(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:ag(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return TR(e).put({bundleId:(r=t).id,createTime:og(Ti(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return AR(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:AS(i.bundledQuery),readTime:ag(i.readTime)};var i})}saveNamedQuery(e,t){return AR(e).put({name:(r=t).name,readTime:og(Ti(r.readTime)),bundledQuery:r.bundledQuery});var r}}function TR(n){return Ai(n,"bundles")}function AR(n){return Ai(n,"namedQueries")}class _D{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new _D(e,t.uid||"")}getOverlay(e,t){return fE(e).get(DR(this.userId,t)).next(r=>r?SS(this.It,r):null)}getOverlays(e,t){const r=yc();return ae.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((u,l)=>{const p=new TS(t,l);i.push(this.ue(e,p))}),ae.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Cs(l.getCollectionPath())));const u=[];return i.forEach(l=>{const p=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);u.push(fE(e).Y("collectionPathOverlayIndex",p))}),ae.waitFor(u)}getOverlaysForCollection(e,t,r){const i=yc(),u=Cs(t),l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return fE(e).W("collectionPathOverlayIndex",l).next(p=>{for(const _ of p){const b=SS(this.It,_);i.set(b.getKey(),b)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const u=yc();let l;const p=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return fE(e).Z({index:"collectionGroupOverlayIndex",range:p},(_,b,C)=>{const x=SS(this.It,b);u.size()<i||x.largestBatchId===l?(u.set(x.getKey(),x),l=x.largestBatchId):C.done()}).next(()=>u)}ue(e,t){return fE(e).put(function(r,i,u){const[l,p,_]=DR(i,u.mutation.key);return{userId:i,collectionPath:p,documentId:_,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:dE(r.re,u.mutation)}}(this.It,this.userId,t))}}function fE(n){return Ai(n,"documentOverlays")}class cg{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(nr(e.integerValue));else if("doubleValue"in e){const r=nr(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),Dy(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(Rh(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?iS(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):st()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const i of Object.keys(r))this._e(i,t),this.ae(r[i],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const i of r)this.ae(i,t)}ge(e,t){this.le(t,37),Ke.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function XP(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function SR(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const u=XP(255&t[i]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}cg.Te=new cg;class eF{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=t.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.ve()}De(e){const t=this.Ce(e),r=SR(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ne(e){const t=this.Ce(e),r=SR(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(i){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,i,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class tF{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class nF{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class pE{constructor(){this.Be=new eF,this.Le=new tF(this.Be),this.Ue=new nF(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class lg{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new lg(this.indexId,this.documentKey,this.arrayValue,r)}}function dg(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=MR(n.arrayValue,e.arrayValue),0!==t?t:(t=MR(n.directionalValue,e.directionalValue),0!==t?t:Ke.comparator(n.documentKey,e.documentKey)))}function MR(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class rF{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=Qi(e);if(void 0!==t&&!this.ze(t))return!1;const r=Vl(e);let i=0,u=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.je){const l=r[i];if(!this.He(this.je,l)||!this.Je(this.Ge[u++],l))return!1;++i}for(;i<r.length;++i){const l=r[i];if(u>=this.Ge.length||!this.Je(this.Ge[u++],l))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class iF{constructor(){this.Ye=new MS}addToCollectionParentIndex(e,t){return this.Ye.add(t),ae.resolve()}getCollectionParents(e,t){return ae.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return ae.resolve()}deleteFieldIndex(e,t){return ae.resolve()}getDocumentsMatchingTarget(e,t){return ae.resolve(null)}getIndexType(e,t){return ae.resolve(0)}getFieldIndexes(e,t){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,t){return ae.resolve(bs.min())}getMinOffsetFromCollectionGroup(e,t){return ae.resolve(bs.min())}updateCollectionGroup(e,t,r){return ae.resolve()}updateIndexEntries(e,t){return ae.resolve()}}class MS{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new En(qt.comparator),u=!i.has(r);return this.index[t]=i.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new En(qt.comparator)).toArray()}}const vD=new Uint8Array(0);class sF{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new MS,this.Ze=new Vh(r=>mc(r),(r,i)=>eg(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const u={collectionId:r,parent:Cs(i)};return xR(e).put(u)}return ae.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[tD(t),""],!1,!0);return xR(e).W(i).next(u=>{for(const l of u){if(l.collectionId!==t)break;r.push(vc(l.parent))}return r})}addFieldIndex(e,t){const r=ED(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(p=>[p.fieldPath.canonicalString(),p.kind])};var l;delete i.indexId;const u=r.add(i);if(t.indexState){const l=mE(e);return u.next(p=>{l.put(CR(p,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=ED(e),i=mE(e),u=gE(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=gE(e);let i=!0;const u=new Map;return ae.forEach(this.tn(t),l=>this.en(e,l).next(p=>{i&&(i=!!p),u.set(l,p)})).next(()=>{if(i){let l=Yt();const p=[];return ae.forEach(u,(_,b)=>{var C;ke("IndexedDbIndexManager",`Using index ${C=_,`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map(ft=>`${ft.fieldPath}:${ft.kind}`).join(",")}`} to execute ${mc(t)}`);const x=function(ft,ct){const Rt=Qi(ct);if(void 0===Rt)return null;for(const Ft of tg(ft,Rt.fieldPath))switch(Ft.op){case"array-contains-any":return Ft.value.arrayValue.values||[];case"array-contains":return[Ft.value]}return null}(b,_),V=function(ft,ct){const Rt=new Map;for(const Ft of Vl(ct))for(const an of tg(ft,Ft.fieldPath))switch(an.op){case"==":case"in":Rt.set(Ft.fieldPath.canonicalString(),an.value);break;case"not-in":case"!=":return Rt.set(Ft.fieldPath.canonicalString(),an.value),Array.from(Rt.values())}return null}(b,_),B=function(ft,ct){const Rt=[];let Ft=!0;for(const an of Vl(ct)){const Ss=0===an.kind?Ay(ft,an.fieldPath,ft.startAt):aS(ft,an.fieldPath,ft.startAt);Rt.push(Ss.value),Ft&&(Ft=Ss.inclusive)}return new ql(Rt,Ft)}(b,_),G=function(ft,ct){const Rt=[];let Ft=!0;for(const an of Vl(ct)){const Ss=0===an.kind?aS(ft,an.fieldPath,ft.endAt):Ay(ft,an.fieldPath,ft.endAt);Rt.push(Ss.value),Ft&&(Ft=Ss.inclusive)}return new ql(Rt,Ft)}(b,_),re=this.nn(_,b,B),ye=this.nn(_,b,G),je=this.sn(_,b,V),nt=this.rn(_.indexId,x,re,B.inclusive,ye,G.inclusive,je);return ae.forEach(nt,ft=>r.J(ft,t.limit).next(ct=>{ct.forEach(Rt=>{const Ft=Ke.fromSegments(Rt.documentKey);l.has(Ft)||(l=l.add(Ft),p.push(Ft))})}))}).next(()=>p)}return ae.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,i,u,l,p){const _=(null!=t?t.length:1)*Math.max(r.length,u.length),b=_/(null!=t?t.length:1),C=[];for(let x=0;x<_;++x){const V=t?this.on(t[x/b]):vD,B=this.un(e,V,r[x%b],i),G=this.cn(e,V,u[x%b],l),re=p.map(ye=>this.un(e,V,ye,!0));C.push(...this.createRange(B,G,re))}return C}un(e,t,r,i){const u=new lg(e,Ke.empty(),t,r);return i?u:u.Ke()}cn(e,t,r,i){const u=new lg(e,Ke.empty(),t,r);return i?u.Ke():u}en(e,t){const r=new rF(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(u=>{let l=null;for(const p of u)r.We(p)&&(!l||p.fields.length>l.fields.length)&&(l=p);return l})}getIndexType(e,t){let r=2;return ae.forEach(this.tn(t),i=>this.en(e,i).next(u=>{u?0!==r&&u.fields.length<function(l){let p=new En(Hn.comparator),_=!1;for(const b of l.filters){const C=b;C.field.isKeyField()||("array-contains"===C.op||"array-contains-any"===C.op?_=!0:p=p.add(C.field))}for(const b of l.orderBy)b.field.isKeyField()||(p=p.add(b.field));return p.size+(_?1:0)}(i)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new pE;for(const i of Vl(e)){const u=t.data.field(i.fieldPath);if(null==u)return null;const l=r.qe(i.kind);cg.Te.ce(u,l)}return r.$e()}on(e){const t=new pE;return cg.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new pE;return cg.Te.ce(pc(this.databaseId,t),r.qe(function(i){const u=Vl(i);return 0===u.length?0:u[u.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let i=[];i.push(new pE);let u=0;for(const l of Vl(e)){const p=r[u++];for(const _ of i)if(this.ln(t,l.fieldPath)&&zl(p))i=this.fn(i,l,p);else{const b=_.qe(l.kind);cg.Te.ce(p,b)}}return this.dn(i)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const i=[...e],u=[];for(const l of r.arrayValue.values||[])for(const p of i){const _=new pE;_.seed(p.$e()),cg.Te.ce(l,_.qe(t.kind)),u.push(_)}return u}ln(e,t){return!!e.filters.find(r=>r instanceof Yr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=ED(e),i=mE(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const l=[];return ae.forEach(u,p=>i.get([p.indexId,this.uid]).next(_=>{l.push(function(b,C){const x=C?new Ul(C.sequenceNumber,new bs(ag(C.readTime),new Ke(vc(C.documentKey)),C.largestBatchId)):Ul.empty(),V=b.fields.map(([B,G])=>new wy(Hn.fromServerFormat(B),G));return new B0(b.indexId,b.collectionGroup,V,x)}(p,_))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const u=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==u?u:zt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=ED(e),u=mE(e);return this._n(e).next(l=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(p=>ae.forEach(p,_=>u.put(CR(_.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return ae.forEach(t,(i,u)=>{const l=r.get(i.collectionGroup);return(l?ae.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(p=>(r.set(i.collectionGroup,p),ae.forEach(p,_=>this.wn(e,i,_).next(b=>{const C=this.mn(u,_);return b.isEqual(C)?ae.resolve():this.gn(e,u,_,b,C)}))))})}yn(e,t,r,i){return gE(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,i){return gE(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=gE(e);let u=new En(dg);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(l,p)=>{u=u.add(new lg(r.indexId,t,p.arrayValue,p.directionalValue))}).next(()=>u)}mn(e,t){let r=new En(dg);const i=this.an(t,e);if(null==i)return r;const u=Qi(t);if(null!=u){const l=e.data.field(u.fieldPath);if(zl(l))for(const p of l.arrayValue.values||[])r=r.add(new lg(t.indexId,e.key,this.on(p),i))}else r=r.add(new lg(t.indexId,e.key,vD,i));return r}gn(e,t,r,i,u){ke("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(p,_,b,C,x){const V=p.getIterator(),B=_.getIterator();let G=Hl(V),re=Hl(B);for(;G||re;){let ye=!1,je=!1;if(G&&re){const nt=b(G,re);nt<0?je=!0:nt>0&&(ye=!0)}else null!=G?je=!0:ye=!0;ye?(C(re),re=Hl(B)):je?(x(G),G=Hl(V)):(G=Hl(V),re=Hl(B))}}(i,u,dg,p=>{l.push(this.yn(e,t,r,p))},p=>{l.push(this.pn(e,t,r,p))}),ae.waitFor(l)}_n(e){let t=1;return mE(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,u)=>{u.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,p)=>dg(l,p)).filter((l,p,_)=>!p||0!==dg(l,_[p-1]));const i=[];i.push(e);for(const l of r){const p=dg(l,e),_=dg(l,t);if(0===p)i[0]=e.Ke();else if(p>0&&_<0)i.push(l),i.push(l.Ke());else if(_>0)break}i.push(t);const u=[];for(let l=0;l<i.length;l+=2)u.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,vD,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,vD,[]]));return u}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(NR)}getMinOffset(e,t){return ae.mapArray(this.tn(t),r=>this.en(e,r).next(i=>i||st())).next(NR)}}function xR(n){return Ai(n,"collectionParents")}function gE(n){return Ai(n,"indexEntries")}function ED(n){return Ai(n,"indexConfiguration")}function mE(n){return Ai(n,"indexState")}function NR(n){xt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;by(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new bs(e.readTime,e.documentKey,t)}const RR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class oo{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new oo(e,oo.DEFAULT_COLLECTION_PERCENTILE,oo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function OR(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),u=[],l=IDBKeyRange.only(t.batchId);let p=0;const _=r.Z({range:l},(C,x,V)=>(p++,V.delete()));u.push(_.next(()=>{xt(1===p)}));const b=[];for(const C of t.mutations){const x=yR(e,C.key.path,t.batchId);u.push(i.delete(x)),b.push(C.key)}return ae.waitFor(u).next(()=>b)}function wD(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw st();e=n.noDocument}return JSON.stringify(e).length}oo.DEFAULT_COLLECTION_PERCENTILE=10,oo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,oo.DEFAULT=new oo(41943040,oo.DEFAULT_COLLECTION_PERCENTILE,oo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),oo.DISABLED=new oo(-1,0,0);class bD{constructor(e,t,r,i){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static oe(e,t,r,i){xt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new bD(u,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Bh(e).Z({index:"userMutationsIndex",range:r},(i,u,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const u=ky(e),l=Bh(e);return l.add({}).next(p=>{xt("number"==typeof p);const _=new DS(p,t,r,i),b=function(V,B,G){const re=G.baseMutations.map(je=>dE(V.re,je)),ye=G.mutations.map(je=>dE(V.re,je));return{userId:B,batchId:G.batchId,localWriteTimeMs:G.localWriteTime.toMillis(),baseMutations:re,mutations:ye}}(this.It,this.userId,_),C=[];let x=new En((V,B)=>zt(V.canonicalString(),B.canonicalString()));for(const V of i){const B=yR(this.userId,V.key.path,p);x=x.add(V.key.path.popLast()),C.push(l.put(b)),C.push(u.put(B,kP))}return x.forEach(V=>{C.push(this.indexManager.addToCollectionParentIndex(e,V))}),e.addOnCommittedListener(()=>{this.In[p]=_.keys()}),ae.waitFor(C).next(()=>_)})}lookupMutationBatch(e,t){return Bh(e).get(t).next(r=>r?(xt(r.userId===this.userId),ug(this.It,r)):null)}Tn(e,t){return this.In[t]?ae.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Bh(e).Z({index:"userMutationsIndex",range:i},(l,p,_)=>{p.userId===this.userId&&(xt(p.batchId>=r),u=ug(this.It,p)),_.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Bh(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,u,l)=>{r=u.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Bh(e).W("userMutationsIndex",t).next(r=>r.map(i=>ug(this.It,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=mD(this.userId,t.path),i=IDBKeyRange.lowerBound(r),u=[];return ky(e).Z({range:i},(l,p,_)=>{const[b,C,x]=l,V=vc(C);if(b===this.userId&&t.path.isEqual(V))return Bh(e).get(x).next(B=>{if(!B)throw st();xt(B.userId===this.userId),u.push(ug(this.It,B))});_.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new En(zt);const i=[];return t.forEach(u=>{const l=mD(this.userId,u.path),p=IDBKeyRange.lowerBound(l),_=ky(e).Z({range:p},(b,C,x)=>{const[V,B,G]=b,re=vc(B);V===this.userId&&u.path.isEqual(re)?r=r.add(G):x.done()});i.push(_)}),ae.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,u=mD(this.userId,r),l=IDBKeyRange.lowerBound(u);let p=new En(zt);return ky(e).Z({range:l},(_,b,C)=>{const[x,V,B]=_,G=vc(V);x===this.userId&&r.isPrefixOf(G)?G.length===i&&(p=p.add(B)):C.done()}).next(()=>this.En(e,p))}En(e,t){const r=[],i=[];return t.forEach(u=>{i.push(Bh(e).get(u).next(l=>{if(null===l)throw st();xt(l.userId===this.userId),r.push(ug(this.It,l))}))}),ae.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return OR(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),ae.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ae.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return ky(e).Z({range:r},(u,l,p)=>{if(u[0]===this.userId){const _=vc(u[1]);i.push(_)}else p.done()}).next(()=>{xt(0===i.length)})})}containsKey(e,t){return kR(e,this.userId,t)}Rn(e){return PR(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function kR(n,e,t){const r=mD(e,t.path),i=r[1],u=IDBKeyRange.lowerBound(r);let l=!1;return ky(n).Z({range:u,X:!0},(p,_,b)=>{const[C,x,V]=p;C===e&&x===i&&(l=!0),b.done()}).next(()=>l)}function Bh(n){return Ai(n,"mutations")}function ky(n){return Ai(n,"documentMutations")}function PR(n){return Ai(n,"mutationQueues")}class hg{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new hg(0)}static vn(){return new hg(-1)}}class oF{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new hg(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Nt.fromTimestamp(new Fn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Py(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(xt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const u=[];return Py(e).Z((l,p)=>{const _=hE(p);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,u.push(this.removeTargetData(e,_)))}).next(()=>ae.waitFor(u)).next(()=>i)}forEachTarget(e,t){return Py(e).Z((r,i)=>{const u=hE(i);t(u)})}Vn(e){return FR(e).get("targetGlobalKey").next(t=>(xt(null!==t),t))}Sn(e,t){return FR(e).put("targetGlobalKey",t)}Dn(e,t){return Py(e).put(IR(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=mc(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Py(e).Z({range:i,index:"queryTargetsIndex"},(l,p,_)=>{const b=hE(p);eg(t,b.target)&&(u=b,_.done())}).next(()=>u)}addMatchingKeys(e,t,r){const i=[],u=jh(e);return t.forEach(l=>{const p=Cs(l.path);i.push(u.put({targetId:r,path:p})),i.push(this.referenceDelegate.addReference(e,r,l))}),ae.waitFor(i)}removeMatchingKeys(e,t,r){const i=jh(e);return ae.forEach(t,u=>{const l=Cs(u.path);return ae.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=jh(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=jh(e);let u=Yt();return i.Z({range:r,X:!0},(l,p,_)=>{const b=vc(l[1]),C=new Ke(b);u=u.add(C)}).next(()=>u)}containsKey(e,t){const r=Cs(t.path),i=IDBKeyRange.bound([r],[tD(r)],!1,!0);let u=0;return jh(e).Z({index:"documentTargetsIndex",X:!0,range:i},([l,p],_,b)=>{0!==l&&(u++,b.done())}).next(()=>u>0)}se(e,t){return Py(e).get(t).next(r=>r?hE(r):null)}}function Py(n){return Ai(n,"targets")}function FR(n){return Ai(n,"targetGlobal")}function jh(n){return Ai(n,"targetDocuments")}function LR([n,e],[t,r]){const i=zt(n,t);return 0===i?zt(e,r):i}class aF{constructor(e){this.xn=e,this.buffer=new En(LR),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();LR(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class uF{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;ke("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ee.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){cc(r)?ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield nu(r)}yield t.Fn(3e5)}))}}class cF{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ae.resolve(Ds.at);const r=new aF(t);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(RR)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),RR):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,i,u,l,p,_,b;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),i=this.params.maximumSequenceNumbersToCollect):i=x,l=Date.now(),this.nthSequenceNumber(e,i))).next(x=>(r=x,p=Date.now(),this.removeTargets(e,r,t))).next(x=>(u=x,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(x=>(b=Date.now(),XI()<=Yu.in.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-C}ms\n\tDetermined least recently used ${i} in `+(p-l)+`ms\n\tRemoved ${u} targets in `+(_-p)+`ms\n\tRemoved ${x} documents in `+(b-_)+`ms\nTotal Duration: ${b-C}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:u,documentsRemoved:x})))}}class lF{constructor(e,t){this.db=e,this.garbageCollector=new cF(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return ID(e,r)}removeReference(e,t,r){return ID(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return ID(e,t)}Gn(e,t){return function(r,i){let u=!1;return PR(r).tt(l=>kR(r,l,i).next(p=>(p&&(u=!0),ae.resolve(!p)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let u=0;return this.Kn(e,(l,p)=>{if(p<=t){const _=this.Gn(e,l).next(b=>{if(!b)return u++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Nt.min()),jh(e).delete([0,Cs(l.path)])))});i.push(_)}}).next(()=>ae.waitFor(i)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return ID(e,t)}Kn(e,t){const r=jh(e);let i,u=Ds.at;return r.Z({index:"documentTargetsIndex"},([l,p],{path:_,sequenceNumber:b})=>{0===l?(u!==Ds.at&&t(new Ke(vc(i)),u),u=b,i=_):u=Ds.at}).next(()=>{u!==Ds.at&&t(new Ke(vc(i)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ID(n,e){return jh(n).put((r=n.currentSequenceNumber,{targetId:0,path:Cs(e.path),sequenceNumber:r}));var r}class VR{constructor(){this.changes=new Vh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Nn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ae.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class dF{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return fg(e).put(r)}removeEntry(e,t,r){return fg(e).delete(function(i,u){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],yD(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Nn.newInvalidDocument(t);return fg(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(yE(t))},(i,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:Nn.newInvalidDocument(t)};return fg(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(yE(t))},(i,u)=>{r={document:this.jn(t,u),size:wD(u)}}).next(()=>r)}getEntries(e,t){let r=so();return this.zn(e,t,(i,u)=>{const l=this.jn(i,u);r=r.insert(i,l)}).next(()=>r)}Hn(e,t){let r=so(),i=new lr(Ke.comparator);return this.zn(e,t,(u,l)=>{const p=this.jn(u,l);r=r.insert(u,p),i=i.insert(u,wD(l))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return ae.resolve();let i=new En(HR);t.forEach(_=>i=i.add(_));const u=IDBKeyRange.bound(yE(i.first()),yE(i.last())),l=i.getIterator();let p=l.getNext();return fg(e).Z({index:"documentKeyIndex",range:u},(_,b,C)=>{const x=Ke.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;p&&HR(p,x)<0;)r(p,null),p=l.getNext();p&&p.isEqual(x)&&(r(p,b),p=l.hasNext()?l.getNext():null),p?C.j(yE(p)):C.done()}).next(()=>{for(;p;)r(p,null),p=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),yD(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return fg(e).W(IDBKeyRange.bound(i,u,!0)).next(l=>{let p=so();for(const _ of l){const b=this.jn(Ke.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);p=p.insert(b.key,b)}return p})}getAllFromCollectionGroup(e,t,r,i){let u=so();const l=jR(t,r),p=jR(t,bs.max());return fg(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,p,!0)},(_,b,C)=>{const x=this.jn(Ke.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(x.key,x),u.size===i&&C.done()}).next(()=>u)}newChangeBuffer(e){return new hF(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return BR(e).get("remoteDocumentGlobalKey").next(t=>(xt(!!t),t))}Qn(e,t){return BR(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function QP(n,e){let t;if(e.document)t=lR(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ke.fromSegments(e.noDocument.path),i=ag(e.noDocument.readTime);t=Nn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return st();{const r=Ke.fromSegments(e.unknownDocument.path),i=ag(e.unknownDocument.version);t=Nn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Fn(r[0],r[1]);return Nt.fromTimestamp(i)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(Nt.min()))return r}return Nn.newInvalidDocument(e)}}function UR(n){return new dF(n)}class hF extends VR{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Vh(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new En((u,l)=>zt(u.canonicalString(),l.canonicalString()));return this.changes.forEach((u,l)=>{const p=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,p.readTime)),l.isValidDocument()){const _=bR(this.Yn.It,l);i=i.add(u.path.popLast());const b=wD(_);r+=b-p.size,t.push(this.Yn.addEntry(e,u,_))}else if(r-=p.size,this.trackRemovals){const _=bR(this.Yn.It,l.convertToNoDocument(Nt.min()));t.push(this.Yn.addEntry(e,u,_))}}),i.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),ae.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((u,l)=>{this.Xn.set(u,{size:l,readTime:r.get(u).readTime})}),r))}}function BR(n){return Ai(n,"remoteDocumentGlobal")}function fg(n){return Ai(n,"remoteDocumentsV14")}function yE(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function jR(n,e){const t=e.documentKey.path.toArray();return[n,yD(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function HR(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(i=zt(t[u],r[u]),i)return i;return i=zt(t.length,r.length),i||(i=zt(t[t.length-2],r[r.length-2]),i||zt(t[t.length-1],r[r.length-1]))}class fF{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class $R{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&sg(r.mutation,i,Ji.empty(),Fn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Yt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Yt()){const i=yc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(u=>{let l=iE();return u.forEach((p,_)=>{l=l.insert(p,_.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=yc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Yt()))}populateOverlays(e,t,r){const i=[];return r.forEach(u=>{t.has(u)||i.push(u)}),this.documentOverlayCache.getOverlays(e,i).next(u=>{u.forEach((l,p)=>{t.set(l,p)})})}computeViews(e,t,r,i){let u=so();const l=sE(),p=sE();return t.forEach((_,b)=>{const C=r.get(b.key);i.has(b.key)&&(void 0===C||C.mutation instanceof Zl)?u=u.insert(b.key,b):void 0!==C&&(l.set(b.key,C.mutation.getFieldMask()),sg(C.mutation,b,C.mutation.getFieldMask(),Fn.now()))}),this.recalculateAndSaveOverlays(e,u).next(_=>(_.forEach((b,C)=>l.set(b,C)),t.forEach((b,C)=>{var x;return p.set(b,new fF(C,null!==(x=l.get(b))&&void 0!==x?x:null))}),p))}recalculateAndSaveOverlays(e,t){const r=sE();let i=new lr((l,p)=>l-p),u=Yt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const p of l)p.keys().forEach(_=>{const b=t.get(_);if(null===b)return;let C=r.get(_)||Ji.empty();C=p.applyToLocalView(b,C),r.set(_,C);const x=(i.get(p.batchId)||Yt()).add(_);i=i.insert(p.batchId,x)})}).next(()=>{const l=[],p=i.getReverseIterator();for(;p.hasNext();){const _=p.getNext(),b=_.key,C=_.value,x=XN();C.forEach(V=>{if(!u.has(V)){const B=My(t.get(V),r.get(V));null!==B&&x.set(V,B),u=u.add(V)}}),l.push(this.documentOverlayCache.saveOverlays(e,b,x))}return ae.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ke.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):fD(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(u=>{const l=i-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-u.size):ae.resolve(yc());let p=-1,_=u;return l.next(b=>ae.forEach(b,(C,x)=>(p<x.largestBatchId&&(p=x.largestBatchId),u.get(C)?ae.resolve():this.getBaseDocument(e,C,x).next(V=>{_=_.insert(C,V)}))).next(()=>this.populateOverlays(e,b,u)).next(()=>this.computeViews(e,_,b,Yt())).next(C=>({batchId:p,changes:JN(C)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ke(t)).next(r=>{let i=iE();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let u=iE();return this.indexManager.getCollectionParents(e,i).next(l=>ae.forEach(l,p=>{const _=(b=t,C=p.child(i),new iu(C,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,C;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(b=>{b.forEach((C,x)=>{u=u.insert(C,x)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(i=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((p,_)=>{const b=_.getKey();null===i.get(b)&&(i=i.insert(b,Nn.newInvalidDocument(b)))});let l=iE();return i.forEach((p,_)=>{const b=u.get(p);void 0!==b&&sg(b.mutation,_,Ji.empty(),Fn.now()),y(t,_)&&(l=l.insert(p,_))}),l})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):ae.resolve(Nn.newInvalidDocument(t))}}class pF{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return ae.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Ti(r.createTime)}),ae.resolve()}getNamedQuery(e,t){return ae.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:AS(r.bundledQuery),readTime:Ti(r.readTime)}),ae.resolve();var r}}class gF{constructor(){this.overlays=new lr(Ke.comparator),this.es=new Map}getOverlay(e,t){return ae.resolve(this.overlays.get(t))}getOverlays(e,t){const r=yc();return ae.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,u)=>{this.ue(e,t,u)}),ae.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),ae.resolve()}getOverlaysForCollection(e,t,r){const i=yc(),u=t.length+1,l=new Ke(t.child("")),p=this.overlays.getIteratorFrom(l);for(;p.hasNext();){const _=p.getNext().value,b=_.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&_.largestBatchId>r&&i.set(_.getKey(),_)}return ae.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let u=new lr((b,C)=>b-C);const l=this.overlays.getIterator();for(;l.hasNext();){const b=l.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let C=u.get(b.largestBatchId);null===C&&(C=yc(),u=u.insert(b.largestBatchId,C)),C.set(b.getKey(),b)}}const p=yc(),_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((b,C)=>p.set(b,C)),!(p.size()>=i)););return ae.resolve(p)}ue(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new TS(t,r));let u=this.es.get(t);void 0===u&&(u=Yt(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class xS{constructor(){this.ns=new En(Si.ss),this.rs=new En(Si.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new Si(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new Si(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Ke(new qt([])),r=new Si(t,e),i=new Si(t,e+1),u=[];return this.rs.forEachInRange([r,i],l=>{this.cs(l),u.push(l.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Ke(new qt([])),r=new Si(t,e),i=new Si(t,e+1);let u=Yt();return this.rs.forEachInRange([r,i],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new Si(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Si{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Ke.comparator(e.key,t.key)||zt(e._s,t._s)}static os(e,t){return zt(e._s,t._s)||Ke.comparator(e.key,t.key)}}class mF{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new En(Si.ss)}checkEmpty(e){return ae.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const u=this.ws;this.ws++;const l=new DS(u,t,r,i);this.mutationQueue.push(l);for(const p of i)this.gs=this.gs.add(new Si(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return ae.resolve(l)}lookupMutationBatch(e,t){return ae.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),u=i<0?0:i;return ae.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Si(t,0),i=new Si(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,i],l=>{const p=this.ys(l._s);u.push(p)}),ae.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new En(zt);return t.forEach(i=>{const u=new Si(i,0),l=new Si(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,l],p=>{r=r.add(p._s)})}),ae.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let u=r;Ke.isDocumentKey(u)||(u=u.child(""));const l=new Si(new Ke(u),0);let p=new En(zt);return this.gs.forEachWhile(_=>{const b=_.key.path;return!!r.isPrefixOf(b)&&(b.length===i&&(p=p.add(_._s)),!0)},l),ae.resolve(this.Is(p))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){xt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return ae.forEach(t.mutations,i=>{const u=new Si(i.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new Si(t,0),i=this.gs.firstAfterOrEqual(r);return ae.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ae.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class yF{constructor(e){this.Es=e,this.docs=new lr(Ke.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),u=i?i.size:0,l=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ae.resolve(r?r.document.mutableCopy():Nn.newInvalidDocument(t))}getEntries(e,t){let r=so();return t.forEach(i=>{const u=this.docs.get(i);r=r.insert(i,u?u.document.mutableCopy():Nn.newInvalidDocument(i))}),ae.resolve(r)}getAllFromCollection(e,t,r){let i=so();const u=new Ke(t.child("")),l=this.docs.getIteratorFrom(u);for(;l.hasNext();){const{key:p,value:{document:_}}=l.getNext();if(!t.isPrefixOf(p.path))break;p.path.length>t.length+1||by($0(_),r)<=0||(i=i.insert(_.key,_.mutableCopy()))}return ae.resolve(i)}getAllFromCollectionGroup(e,t,r,i){st()}As(e,t){return ae.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new _F(this)}getSize(e){return ae.resolve(this.size)}}class _F extends VR{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),ae.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class vF{constructor(e){this.persistence=e,this.Rs=new Vh(t=>mc(t),eg),this.lastRemoteSnapshotVersion=Nt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new xS,this.targetCount=0,this.vs=hg.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),ae.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new hg(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,ae.resolve()}updateTargetData(e,t){return this.Dn(t),ae.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,t,r){let i=0;const u=[];return this.Rs.forEach((l,p)=>{p.sequenceNumber<=t&&null===r.get(p.targetId)&&(this.Rs.delete(l),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),i++)}),ae.waitFor(u).next(()=>i)}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return ae.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),ae.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,u=[];return i&&t.forEach(l=>{u.push(i.markPotentiallyOrphaned(e,l))}),ae.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),ae.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return ae.resolve(r)}containsKey(e,t){return ae.resolve(this.Ps.containsKey(t))}}class GR{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Ds(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new vF(this),this.indexManager=new iF,this.remoteDocumentCache=new yF(r=>this.referenceDelegate.xs(r)),this.It=new wR(t),this.Ns=new pF(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new gF,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new mF(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){ke("MemoryPersistence","Starting transaction:",e);const i=new EF(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(u=>this.referenceDelegate.Os(i).next(()=>u)).toPromise().then(u=>(i.raiseOnCommittedEvent(),u))}Ms(e,t){return ae.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class EF extends nD{constructor(e){super(),this.currentSequenceNumber=e}}class DD{constructor(e){this.persistence=e,this.Fs=new xS,this.$s=null}static Bs(e){return new DD(e)}get Ls(){if(this.$s)return this.$s;throw st()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),ae.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),ae.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),ae.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.Ls,r=>{const i=Ke.fromPath(r);return this.Us(e,i).next(u=>{u||t.removeEntry(i,Nt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return ae.or([()=>ae.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class wF{constructor(e){this.It=e}$(e,t,r,i){const u=new ko("createOrUpgrade",t);var p;r<1&&i>=1&&(e.createObjectStore("owner"),(p=e).createObjectStore("mutationQueues",{keyPath:"userId"}),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",mR,{unique:!0}),p.createObjectStore("documentMutations"),zR(e),function(p){p.createObjectStore("remoteDocuments")}(e));let l=ae.resolve();return r<3&&i>=3&&(0!==r&&(function(p){p.deleteObjectStore("targetDocuments"),p.deleteObjectStore("targets"),p.deleteObjectStore("targetGlobal")}(e),zR(e)),l=l.next(()=>function(p){const _=p.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Nt.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",b)}(u))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(p,_){return _.store("mutations").W().next(b=>{p.deleteObjectStore("mutations"),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",mR,{unique:!0});const C=_.store("mutations"),x=b.map(V=>C.put(V));return ae.waitFor(x)})}(e,u))),l=l.next(()=>{!function(p){p.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.qs(u))),r<6&&i>=6&&(l=l.next(()=>(function(p){p.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&i>=7&&(l=l.next(()=>this.Gs(u))),r<8&&i>=8&&(l=l.next(()=>this.Qs(e,u))),r<9&&i>=9&&(l=l.next(()=>{!function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.js(u))),r<11&&i>=11&&(l=l.next(()=>{(function(p){p.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(p){p.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(p){const _=p.createObjectStore("documentOverlays",{keyPath:qP});_.createIndex("collectionPathOverlayIndex",WP,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",ZP,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(p){const _=p.createObjectStore("remoteDocumentsV14",{keyPath:PP});_.createIndex("documentKeyIndex",FP),_.createIndex("collectionGroupIndex",LP)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.zs(e,u))),r<15&&i>=15&&(l=l.next(()=>function(p){p.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),p.createObjectStore("indexState",{keyPath:HP}).createIndex("sequenceNumberIndex",$P,{unique:!1}),p.createObjectStore("indexEntries",{keyPath:GP}).createIndex("documentKeyIndex",zP,{unique:!1})}(e))),l}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=wD(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>ae.forEach(i,u=>{const l=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(p=>ae.forEach(p,_=>{xt(_.userId===u.userId);const b=ug(this.It,_);return OR(e,u.userId,b).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const u=[];return r.Z((l,p)=>{const _=new qt(l),b=[0,Cs(_)];u.push(t.get(b).next(C=>C?ae.resolve():t.put({targetId:0,path:Cs(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ae.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:jP});const r=t.store("collectionParents"),i=new MS,u=l=>{if(i.add(l)){const p=l.lastSegment(),_=l.popLast();return r.put({collectionId:p,parent:Cs(_)})}};return t.store("remoteDocuments").Z({X:!0},(l,p)=>{const _=new qt(l);return u(_.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([l,p,_],b)=>{const C=vc(p);return u(C.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const u=hE(i),l=IR(this.It,u);return t.put(l)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((u,l)=>{const p=t.store("remoteDocumentsV14"),_=(b=l,b.document?new Ke(qt.fromString(b.document.name).popFirst(5)):b.noDocument?Ke.fromSegments(b.noDocument.path):b.unknownDocument?Ke.fromSegments(b.unknownDocument.path):st()).path.toArray();var b;const C={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(p.put(C))}).next(()=>ae.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=UR(this.It),u=new GR(DD.Bs,this.It.re);return r.W().next(l=>{const p=new Map;return l.forEach(_=>{var b;let C=null!==(b=p.get(_.userId))&&void 0!==b?b:Yt();ug(this.It,_).keys().forEach(x=>C=C.add(x)),p.set(_.userId,C)}),ae.forEach(p,(_,b)=>{const C=new ci(b),x=_D.oe(this.It,C),V=u.getIndexManager(C),B=bD.oe(C,this.It,V,u.referenceDelegate);return new $R(i,B,x,V).recalculateAndSaveOverlaysForDocumentKeys(new IS(t,Ds.at),_).next()})})}}function zR(n){n.createObjectStore("targetDocuments",{keyPath:UP}).createIndex("documentTargetsIndex",BP,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",VP,{unique:!0}),n.createObjectStore("targetGlobal")}const NS="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class RS{constructor(e,t,r,i,u,l,p,_,b,C,x=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=l,this.document=p,this.Js=b,this.Ys=C,this.Xs=x,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=V=>Promise.resolve(),!RS.C())throw new Oe(he.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new lF(this,i),this.ii=t+"main",this.It=new wR(_),this.ri=new io(this.ii,this.Xs,new wF(this.It)),this.Cs=new oF(this.referenceDelegate,this.It),this.remoteDocumentCache=UR(this.It),this.Ns=new JP,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===C&&vr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Oe(he.FAILED_PRECONDITION,NS);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Ds(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,Ee.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,Ee.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,Ee.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>CD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(cc(e))return ke("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return _E(e).get("owner").next(t=>ae.resolve(this.mi(t)))}gi(e){return CD(e).delete(this.clientId)}yi(){var e=this;return(0,Ee.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Ai(r,"clientMetadata");return i.W().next(u=>{const l=e.Ii(u,18e5),p=u.filter(_=>-1===l.indexOf(_));return ae.forEach(p,_=>i.delete(_.clientId)).next(()=>p)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?ae.resolve(!0):_E(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Oe(he.FAILED_PRECONDITION,NS);return!1}}return!(!this.networkEnabled||!this.inForeground)||CD(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,p=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&p)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&ke("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ee.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new IS(t,Ds.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>CD(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return bD.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new sF(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return _D.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){ke("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",u=15===(l=this.Xs)?YP:14===l?ER:13===l?vR:12===l?KP:11===l?_R:void st();var l;let p;return this.ri.runTransaction(e,i,u,_=>(p=new IS(_,this.Ss?this.Ss.next():Ds.at),"readwrite-primary"===t?this.fi(p).next(b=>!!b||this.di(p)).next(b=>{if(!b)throw vr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Oe(he.FAILED_PRECONDITION,G0);return r(p)}).next(b=>this.wi(p).next(()=>b)):this.Vi(p).next(()=>r(p)))).then(_=>(p.raiseOnCommittedEvent(),_))}Vi(e){return _E(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Oe(he.FAILED_PRECONDITION,NS)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return _E(e).put("owner",t)}static C(){return io.C()}_i(e){const t=_E(e);return t.get("owner").next(r=>this.mi(r)?(ke("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ae.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(vr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,on.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return ke("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return vr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){vr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function _E(n){return Ai(n,"owner")}function CD(n){return Ai(n,"clientMetadata")}function OS(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class kS{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=Yt(),i=Yt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}return new kS(e,t.fromCache,r,i)}}class qR{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(u=>u||this.Oi(e,t,i,r)).next(u=>u||this.Mi(e,t))}ki(e,t){if(yS(t))return ae.resolve(null);let r=o(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=a(t,null,"F"),r=o(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=Yt(...u);return this.Ni.getDocuments(e,l).next(p=>this.indexManager.getMinOffset(e,r).next(_=>{const b=this.Fi(t,p);return this.$i(t,b,l,_.readTime)?this.ki(e,a(t,null,"F")):this.Bi(e,b,t,_)}))})))}Oi(e,t,r,i){return yS(t)||i.isEqual(Nt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(u=>{const l=this.Fi(t,u);return this.$i(t,l,r,i)?this.Mi(e,t):(XI()<=Yu.in.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),g(t)),this.Bi(e,l,t,H0(i,-1)))})}Fi(e,t){let r=new En(I(e));return t.forEach((i,u)=>{y(e,u)&&(r=r.add(u))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(i)>0)}Mi(e,t){return XI()<=Yu.in.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",g(t)),this.Ni.getDocumentsMatchingQuery(e,t,bs.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class bF{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.It=i,this.Ui=new lr(zt),this.qi=new Vh(u=>mc(u),eg),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $R(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function WR(n,e,t,r){return new bF(n,e,t,r)}function ZR(n,e){return PS.apply(this,arguments)}function PS(){return PS=(0,Ee.Z)(function*(n,e){const t=Ze(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(u=>(i=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],p=[];let _=Yt();for(const b of i){l.push(b.batchId);for(const C of b.mutations)_=_.add(C.key)}for(const b of u){p.push(b.batchId);for(const C of b.mutations)_=_.add(C.key)}return t.localDocuments.getDocuments(r,_).next(b=>({ji:b,removedBatchIds:l,addedBatchIds:p}))})})}),PS.apply(this,arguments)}function IF(n,e){const t=Ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(l,p,_,b){const C=_.batch,x=C.keys();let V=ae.resolve();return x.forEach(B=>{V=V.next(()=>b.getEntry(p,B)).next(G=>{const re=_.docVersions.get(B);xt(null!==re),G.version.compareTo(re)<0&&(C.applyToRemoteDocument(G,_),G.isValidDocument()&&(G.setReadTime(_.commitVersion),b.addEntry(G)))})}),V.next(()=>l.mutationQueue.removeMutationBatch(p,C))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let p=Yt();for(let _=0;_<l.mutationResults.length;++_)l.mutationResults[_].transformResults.length>0&&(p=p.add(l.batch.mutations[_].key));return p}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function KR(n){const e=Ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function DF(n,e){const t=Ze(n),r=e.snapshotVersion;let i=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.Ui;const p=[];e.targetChanges.forEach((C,x)=>{const V=i.get(x);if(!V)return;p.push(t.Cs.removeMatchingKeys(u,C.removedDocuments,x).next(()=>t.Cs.addMatchingKeys(u,C.addedDocuments,x)));let B=V.withSequenceNumber(u.currentSequenceNumber);var G,re,ye;e.targetMismatches.has(x)?B=B.withResumeToken(tr.EMPTY_BYTE_STRING,Nt.min()).withLastLimboFreeSnapshotVersion(Nt.min()):C.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(C.resumeToken,r)),i=i.insert(x,B),re=B,ye=C,(0===(G=V).resumeToken.approximateByteSize()||re.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=3e8||ye.addedDocuments.size+ye.modifiedDocuments.size+ye.removedDocuments.size>0)&&p.push(t.Cs.updateTargetData(u,B))});let _=so(),b=Yt();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(u,C))}),p.push(YR(u,l,e.documentUpdates).next(C=>{_=C.Wi,b=C.zi})),!r.isEqual(Nt.min())){const C=t.Cs.getLastRemoteSnapshotVersion(u).next(x=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));p.push(C)}return ae.waitFor(p).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,_,b)).next(()=>_)}).then(u=>(t.Ui=i,u))}function YR(n,e,t){let r=Yt(),i=Yt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=so();return t.forEach((p,_)=>{const b=u.get(p);_.isFoundDocument()!==b.isFoundDocument()&&(i=i.add(p)),_.isNoDocument()&&_.version.isEqual(Nt.min())?(e.removeEntry(p,_.readTime),l=l.insert(p,_)):!b.isValidDocument()||_.version.compareTo(b.version)>0||0===_.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(_),l=l.insert(p,_)):ke("LocalStore","Ignoring outdated watch update for ",p,". Current version:",b.version," Watch version:",_.version)}),{Wi:l,zi:i}})}function CF(n,e){const t=Ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Fy(n,e){const t=Ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(u=>u?(i=u,ae.resolve(i)):t.Cs.allocateTargetId(r).next(l=>(i=new Uh(e,l,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function Ly(n,e,t){return FS.apply(this,arguments)}function FS(){return FS=(0,Ee.Z)(function*(n,e,t){const r=Ze(n),i=r.Ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!cc(l))throw l;ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ui=r.Ui.remove(e),r.qi.delete(i.target)}),FS.apply(this,arguments)}function TD(n,e,t){const r=Ze(n);let i=Nt.min(),u=Yt();return r.persistence.runTransaction("Execute query","readonly",l=>function(p,_,b){const C=Ze(p),x=C.qi.get(b);return void 0!==x?ae.resolve(C.Ui.get(x)):C.Cs.getTargetData(_,b)}(r,l,o(e)).next(p=>{if(p)return i=p.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(l,p.targetId).next(_=>{u=_})}).next(()=>r.Li.getDocumentsMatchingQuery(l,e,t?i:Nt.min(),t?u:Yt())).next(p=>(XR(r,w(e),p),{documents:p,Hi:u})))}function QR(n,e){const t=Ze(n),r=Ze(t.Cs),i=t.Ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",u=>r.se(u,e).next(l=>l?l.target:null))}function JR(n,e){const t=Ze(n),r=t.Ki.get(e)||Nt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,H0(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(XR(t,e,i),i))}function XR(n,e,t){let r=n.Ki.get(e)||Nt.min();t.forEach((i,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function LS(){return LS=(0,Ee.Z)(function*(n,e,t,r){const i=Ze(n);let u=Yt(),l=so();for(const b of t){const C=e.Ji(b.metadata.name);b.document&&(u=u.add(C));const x=e.Yi(b);x.setReadTime(e.Xi(b.metadata.readTime)),l=l.insert(C,x)}const p=i.Gi.newChangeBuffer({trackRemovals:!0}),_=yield Fy(i,(b=r,o(rg(qt.fromString(`__bundle__/docs/${b}`)))));var b;return i.persistence.runTransaction("Apply bundle documents","readwrite",b=>YR(b,p,l).next(C=>(p.apply(b),C)).next(C=>i.Cs.removeMatchingKeysForTargetId(b,_.targetId).next(()=>i.Cs.addMatchingKeys(b,u,_.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(b,C.Wi,C.zi)).next(()=>C.Wi)))}),LS.apply(this,arguments)}function AF(n,e){return VS.apply(this,arguments)}function VS(){return VS=(0,Ee.Z)(function*(n,e,t=Yt()){const r=yield Fy(n,o(AS(e.bundledQuery))),i=Ze(n);return i.persistence.runTransaction("Save named query","readwrite",u=>{const l=Ti(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Ns.saveNamedQuery(u,e);const p=r.withResumeToken(tr.EMPTY_BYTE_STRING,l);return i.Ui=i.Ui.insert(p.targetId,p),i.Cs.updateTargetData(u,p).next(()=>i.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>i.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(u,e))})}),VS.apply(this,arguments)}function eO(n,e){return`firestore_clients_${n}_${e}`}function tO(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function US(n,e){return`firestore_targets_${n}_${e}`}class AD{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let u,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(u=new Oe(i.error.code,i.error.message))),l?new AD(e,t,i.state,u):(vr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class vE{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(i=new Oe(r.error.code,r.error.message))),u?new vE(e,r.state,i):(vr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class SD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,u=pD();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=rS(r.activeTargetIds[l]),u=u.add(r.activeTargetIds[l]);return i?new SD(e,u):(vr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class BS{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new BS(t.clientId,t.onlineState):(vr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class jS{constructor(){this.activeTargetIds=pD()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class HS{constructor(e,t,r,i,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new lr(zt),this.started=!1,this.cr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=eO(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new jS),this.lr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(p){return`firestore_bundle_loaded_v2_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const u=e.getItem(eO(e.persistenceKey,i));if(u){const l=SD.Zi(i,u);l&&(e.ur=e.ur.insert(l.clientId,l))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(US(this.persistenceKey,e));if(r){const i=vE.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(US(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ke("SharedClientState","READ",e,t),t}setItem(e,t){ke("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ke("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void vr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,Ee.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(u){let l=Ds.at;if(null!=u)try{const p=JSON.parse(u);xt("number"==typeof p),l=p}catch(p){vr("SharedClientState","Failed to read sequence number from WebStorage",p)}return l}(r.newValue);i!==Ds.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Or(r.newValue);yield Promise.all(i.map(u=>t.syncEngine.Mr(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new AD(this.currentUser,e,t,r),u=tO(this.persistenceKey,this.currentUser,e);this.setItem(u,i.tr())}Er(e){const t=tO(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=US(this.persistenceKey,e),u=new vE(e,t,r);this.setItem(i,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return SD.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return AD.Zi(new ci(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return vE.Zi(i,t)}yr(e){return BS.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,Ee.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);ke("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),u=this.Ir(r),l=[],p=[];return u.forEach(_=>{i.has(_)||l.push(_)}),i.forEach(_=>{u.has(_)||p.push(_)}),this.syncEngine.Br(l,p).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=pD();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class nO{constructor(){this.Lr=new jS,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new jS,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class SF{qr(e){}shutdown(){}}class rO{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const MF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class xF{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class NF extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,u){const l=this.ho(e,t);ke("RestConnection","Sending: ",l,r);const p={};return this.lo(p,i,u),this.fo(e,l,p,r).then(_=>(ke("RestConnection","Received: ",_),_),_=>{throw uc("RestConnection",`${e} failed with error: `,_,"url: ",l,"request:",r),_})}_o(e,t,r,i,u,l){return this.ao(e,t,r,i,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Yp,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,u)=>e[u]=i),r&&r.headers.forEach((i,u)=>e[u]=i)}ho(e,t){return`${this.oo}/v1/${t}:${MF[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((u,l)=>{const p=new FN;p.setWithCredentials(!0),p.listenOnce(jA.COMPLETE,()=>{var b;try{switch(p.getLastErrorCode()){case _y.NO_ERROR:const C=p.getResponseJson();ke("Connection","XHR received:",JSON.stringify(C)),u(C);break;case _y.TIMEOUT:ke("Connection",'RPC "'+e+'" timed out'),l(new Oe(he.DEADLINE_EXCEEDED,"Request time out"));break;case _y.HTTP_ERROR:const x=p.getStatus();if(ke("Connection",'RPC "'+e+'" failed with status:',x,"response text:",p.getResponseText()),x>0){let V=p.getResponseJson();Array.isArray(V)&&(V=V[0]);const B=null===(b=V)||void 0===b?void 0:b.error;if(B&&B.status&&B.message){const G=function(re){const ye=re.toLowerCase().replace(/_/g,"-");return Object.values(he).indexOf(ye)>=0?ye:he.UNKNOWN}(B.status);l(new Oe(G,B.message))}else l(new Oe(he.UNKNOWN,"Server responded with status "+p.getStatus()))}else l(new Oe(he.UNAVAILABLE,"Connection failed."));break;default:st()}}finally{ke("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(i);p.send(t,"POST",_,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=YI(),l=QI(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(p.xmlHttpFactory=new JI({})),this.lo(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const _=i.join("");ke("Connection","Creating WebChannel: "+_,p);const b=u.createWebChannel(_,p);let C=!1,x=!1;const V=new xF({Hr:G=>{x?ke("Connection","Not sending because WebChannel is closed:",G):(C||(ke("Connection","Opening WebChannel transport."),b.open(),C=!0),ke("Connection","WebChannel sending:",G),b.send(G))},Jr:()=>b.close()}),B=(G,re,ye)=>{G.listen(re,je=>{try{ye(je)}catch(nt){setTimeout(()=>{throw nt},0)}})};return B(b,U0.EventType.OPEN,()=>{x||ke("Connection","WebChannel transport opened.")}),B(b,U0.EventType.CLOSE,()=>{x||(x=!0,ke("Connection","WebChannel transport closed"),V.io())}),B(b,U0.EventType.ERROR,G=>{x||(x=!0,uc("Connection","WebChannel transport errored:",G),V.io(new Oe(he.UNAVAILABLE,"The operation could not be completed")))}),B(b,U0.EventType.MESSAGE,G=>{var re;if(!x){const ye=G.data[0];xt(!!ye);const je=ye,nt=je.error||(null===(re=je[0])||void 0===re?void 0:re.error);if(nt){ke("Connection","WebChannel received error:",nt);const ft=nt.status;let ct=function(Ft){const an=Qr[Ft];if(void 0!==an)return YN(an)}(ft),Rt=nt.message;void 0===ct&&(ct=he.INTERNAL,Rt="Unknown error status: "+ft+" with message "+nt.message),x=!0,V.io(new Oe(ct,Rt)),b.close()}else ke("Connection","WebChannel received:",ye),V.ro(ye)}}),B(l,HA.STAT_EVENT,G=>{G.stat===$A.PROXY?ke("Connection","Detected buffering proxy"):G.stat===$A.NOPROXY&&ke("Connection","Detected no buffering proxy")}),setTimeout(()=>{V.so()},0),V}}function iO(){return typeof window<"u"?window:null}function MD(){return typeof document<"u"?document:null}function EE(n){return new bP(n,!0)}class $S{constructor(e,t,r=1e3,i=1.5,u=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&ke("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class sO{constructor(e,t,r,i,u,l,p,_){this.Hs=e,this.vo=r,this.Vo=i,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=p,this.listener=_,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new $S(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,Ee.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,Ee.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,Ee.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===he.RESOURCE_EXHAUSTED?(vr(t.toString()),vr("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===he.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new Oe(he.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,Ee.Z)(function*(){e.state=0,e.start()}))}Qo(e){return ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class RF extends sO{constructor(e,t,r,i,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.It=u}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function CP(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:st(),i=e.targetChange.targetIds||[],u=function(_,b){return _.gt?(xt(void 0===b||"string"==typeof b),tr.fromBase64String(b||"")):(xt(void 0===b||b instanceof Uint8Array),tr.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,p=l&&function(_){const b=void 0===_.code?he.UNKNOWN:YN(_.code);return new Oe(b,_.message||"")}(l);t=new tR(r,i,u,p||null)}else if("documentChange"in e){const r=e.documentChange,i=_c(n,r.document.name),u=Ti(r.document.updateTime),l=new li({mapValue:{fields:r.document.fields}}),p=Nn.newFoundDocument(i,u,l);t=new gD(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,i=_c(n,r.document),u=r.readTime?Ti(r.readTime):Nt.min(),l=Nn.newNoDocument(i,u);t=new gD([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=_c(n,r.document);t=new gD([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return st();{const r=e.filter,u=new pP(r.count||0);t=new eR(r.targetId,u)}}var _;return t}(this.It,e),r=function(i){if(!("targetChange"in i))return Nt.min();const u=i.targetChange;return u.targetIds&&u.targetIds.length?Nt.min():u.readTime?Ti(u.readTime):Nt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=lE(this.It),t.addTarget=function(i,u){let l;const p=u.target;return l=Ty(p)?{documents:dR(i,p)}:{query:bS(i,p)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?l.resumeToken=sR(i,u.resumeToken):u.snapshotVersion.compareTo(Nt.min())>0&&(l.readTime=uE(i,u.snapshotVersion.toTimestamp())),l}(this.It,e);const r=function AP(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return st()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=lE(this.It),t.removeTarget=e,this.Bo(t)}}class OF extends sO{constructor(e,t,r,i,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.It=u,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(xt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function TP(n,e){return n&&n.length>0?(xt(void 0!==e),n.map(t=>function(r,i){let u=Ti(r.updateTime?r.updateTime:i);return u.isEqual(Nt.min())&&(u=Ti(i)),new nE(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Ti(e.commitTime);return this.listener.Zo(r,t)}return xt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=lE(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>dE(this.It,r))};this.Bo(t)}}class kF extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.It=i,this.nu=!1}su(){if(this.nu)throw new Oe(he.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.connection.ao(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Oe(he.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection._o(e,t,r,u,l,i)).catch(u=>{throw"FirebaseError"===u.name?(u.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Oe(he.UNKNOWN,u.toString())})}terminate(){this.nu=!0}}class FF{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(vr(t),this.ou=!1):ke("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class LF{constructor(e,t,r,i,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=u,this.mu.qr(p=>{r.enqueueAndForget((0,Ee.Z)(function*(){var _;Kl(l)&&(ke("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,Ee.Z)(function*(b){const C=Ze(b);C._u.add(4),yield Vy(C),C.gu.set("Unknown"),C._u.delete(4),yield wE(C)}),function(b){return _.apply(this,arguments)})(l))}))}),this.gu=new FF(r,i)}}function wE(n){return zS.apply(this,arguments)}function zS(){return zS=(0,Ee.Z)(function*(n){if(Kl(n))for(const e of n.wu)yield e(!0)}),zS.apply(this,arguments)}function Vy(n){return qS.apply(this,arguments)}function qS(){return qS=(0,Ee.Z)(function*(n){for(const e of n.wu)yield e(!1)}),qS.apply(this,arguments)}function xD(n,e){const t=Ze(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),KS(t)?ZS(t):By(t).ko()&&WS(t,e))}function bE(n,e){const t=Ze(n),r=By(t);t.du.delete(e),r.ko()&&oO(t,e),0===t.du.size&&(r.ko()?r.Fo():Kl(t)&&t.gu.set("Unknown"))}function WS(n,e){n.yu.Mt(e.targetId),By(n).zo(e)}function oO(n,e){n.yu.Mt(e),By(n).Ho(e)}function ZS(n){n.yu=new vP({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),By(n).start(),n.gu.uu()}function KS(n){return Kl(n)&&!By(n).No()&&n.du.size>0}function Kl(n){return 0===Ze(n)._u.size}function aO(n){n.yu=void 0}function VF(n){return YS.apply(this,arguments)}function YS(){return YS=(0,Ee.Z)(function*(n){n.du.forEach((e,t)=>{WS(n,e)})}),YS.apply(this,arguments)}function UF(n,e){return QS.apply(this,arguments)}function QS(){return QS=(0,Ee.Z)(function*(n,e){aO(n),KS(n)?(n.gu.hu(e),ZS(n)):n.gu.set("Unknown")}),QS.apply(this,arguments)}function BF(n,e,t){return JS.apply(this,arguments)}function JS(){return JS=(0,Ee.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof tR&&2===e.state&&e.cause)try{yield(r=(0,Ee.Z)(function*(i,u){const l=u.cause;for(const p of u.targetIds)i.du.has(p)&&(yield i.remoteSyncer.rejectListen(p,l),i.du.delete(p),i.yu.removeTarget(p))}),function(i,u){return r.apply(this,arguments)})(n,e)}catch(r){ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ND(n,r)}else if(e instanceof gD?n.yu.Gt(e):e instanceof eR?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(Nt.min()))try{const r=yield KR(n.localStore);t.compareTo(r)>=0&&(yield function(i,u){const l=i.yu.te(u);return l.targetChanges.forEach((p,_)=>{if(p.resumeToken.approximateByteSize()>0){const b=i.du.get(_);b&&i.du.set(_,b.withResumeToken(p.resumeToken,u))}}),l.targetMismatches.forEach(p=>{const _=i.du.get(p);if(!_)return;i.du.set(p,_.withResumeToken(tr.EMPTY_BYTE_STRING,_.snapshotVersion)),oO(i,p);const b=new Uh(_.target,p,1,_.sequenceNumber);WS(i,b)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){ke("RemoteStore","Failed to raise snapshot:",r),yield ND(n,r)}var r}),JS.apply(this,arguments)}function ND(n,e,t){return XS.apply(this,arguments)}function XS(){return XS=(0,Ee.Z)(function*(n,e,t){if(!cc(e))throw e;n._u.add(1),yield Vy(n),n.gu.set("Offline"),t||(t=()=>KR(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ee.Z)(function*(){ke("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield wE(n)}))}),XS.apply(this,arguments)}function uO(n,e){return e().catch(t=>ND(n,t,e))}function Uy(n){return eM.apply(this,arguments)}function eM(){return eM=(0,Ee.Z)(function*(n){const e=Ze(n),t=Hh(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;jF(e);)try{const i=yield CF(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,HF(e,i)}catch(i){yield ND(e,i)}cO(e)&&lO(e)}),eM.apply(this,arguments)}function jF(n){return Kl(n)&&n.fu.length<10}function HF(n,e){n.fu.push(e);const t=Hh(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function cO(n){return Kl(n)&&!Hh(n).No()&&n.fu.length>0}function lO(n){Hh(n).start()}function $F(n){return tM.apply(this,arguments)}function tM(){return tM=(0,Ee.Z)(function*(n){Hh(n).eu()}),tM.apply(this,arguments)}function GF(n){return nM.apply(this,arguments)}function nM(){return nM=(0,Ee.Z)(function*(n){const e=Hh(n);for(const t of n.fu)e.Xo(t.mutations)}),nM.apply(this,arguments)}function zF(n,e,t){return rM.apply(this,arguments)}function rM(){return rM=(0,Ee.Z)(function*(n,e,t){const r=n.fu.shift(),i=CS.from(r,e,t);yield uO(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Uy(n)}),rM.apply(this,arguments)}function qF(n,e){return iM.apply(this,arguments)}function iM(){return iM=(0,Ee.Z)(function*(n,e){var t;e&&Hh(n).Yo&&(yield(t=(0,Ee.Z)(function*(r,i){if(KN(u=i.code)&&u!==he.ABORTED){const l=r.fu.shift();Hh(r).Mo(),yield uO(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield Uy(r)}var u}),function(r,i){return t.apply(this,arguments)})(n,e)),cO(n)&&lO(n)}),iM.apply(this,arguments)}function dO(n,e){return sM.apply(this,arguments)}function sM(){return sM=(0,Ee.Z)(function*(n,e){const t=Ze(n);t.asyncQueue.verifyOperationInProgress(),ke("RemoteStore","RemoteStore received new credentials");const r=Kl(t);t._u.add(3),yield Vy(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield wE(t)}),sM.apply(this,arguments)}function oM(n,e){return aM.apply(this,arguments)}function aM(){return aM=(0,Ee.Z)(function*(n,e){const t=Ze(n);e?(t._u.delete(2),yield wE(t)):e||(t._u.add(2),yield Vy(t),t.gu.set("Unknown"))}),aM.apply(this,arguments)}function By(n){return n.pu||(n.pu=function(e,t,r){const i=Ze(e);return i.su(),new RF(t,i.connection,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:VF.bind(null,n),Zr:UF.bind(null,n),Wo:BF.bind(null,n)}),n.wu.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.pu.Mo(),KS(n)?ZS(n):n.gu.set("Unknown")):(yield n.pu.stop(),aO(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Hh(n){return n.Iu||(n.Iu=function(e,t,r){const i=Ze(e);return i.su(),new OF(t,i.connection,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:$F.bind(null,n),Zr:qF.bind(null,n),tu:GF.bind(null,n),Zo:zF.bind(null,n)}),n.wu.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.Iu.Mo(),yield Uy(n)):(yield n.Iu.stop(),n.fu.length>0&&(ke("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class uM{constructor(e,t,r,i,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=u,this.deferred=new Er,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,u){const l=Date.now()+r,p=new uM(e,t,l,i,u);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Oe(he.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jy(n,e){if(vr("AsyncQueue",`${e}: ${n}`),cc(n))return new Oe(he.UNAVAILABLE,`${e}: ${n}`);throw n}class Hy{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ke.comparator(t.key,r.key):(t,r)=>Ke.comparator(t.key,r.key),this.keyedMap=iE(),this.sortedSet=new lr(this.comparator)}static emptySet(e){return new Hy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Hy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(!i.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Hy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class hO{constructor(){this.Tu=new lr(Ke.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):st():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class $y{constructor(e,t,r,i,u,l,p,_,b){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=p,this.excludesMetadataChanges=_,this.hasCachedResults=b}static fromInitialDocuments(e,t,r,i,u){const l=[];return t.forEach(p=>{l.push({type:0,doc:p})}),new $y(e,t,Hy.emptySet(t),l,r,i,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&c(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class WF{constructor(){this.Au=void 0,this.listeners=[]}}class ZF{constructor(){this.queries=new Vh(e=>h(e),c),this.onlineState="Unknown",this.Ru=new Set}}function cM(n,e){return lM.apply(this,arguments)}function lM(){return lM=(0,Ee.Z)(function*(n,e){const t=Ze(n),r=e.query;let i=!1,u=t.queries.get(r);if(u||(i=!0,u=new WF),i)try{u.Au=yield t.onListen(r)}catch(l){const p=jy(l,`Initialization of query '${g(e.query)}' failed`);return void e.onError(p)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Au&&e.Pu(u.Au)&&fM(t)}),lM.apply(this,arguments)}function dM(n,e){return hM.apply(this,arguments)}function hM(){return hM=(0,Ee.Z)(function*(n,e){const t=Ze(n),r=e.query;let i=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),i=0===u.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),hM.apply(this,arguments)}function KF(n,e){const t=Ze(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const p of l.listeners)p.Pu(i)&&(r=!0);l.Au=i}}r&&fM(t)}function YF(n,e,t){const r=Ze(n),i=r.queries.get(e);if(i)for(const u of i.listeners)u.onError(t);r.queries.delete(e)}function fM(n){n.Ru.forEach(e=>{e.next()})}class pM{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new $y(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=$y.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class QF{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class fO{constructor(e){this.It=e}Ji(e){return _c(this.It,e)}Yi(e){return e.metadata.exists?lR(this.It,e.document,!1):Nn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Ti(e)}}class JF{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=pO(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=qt.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new fO(this.It);for(const i of e)if(i.metadata.queries){const u=r.Ji(i.metadata.name);for(const l of i.metadata.queries){const p=(t.get(l)||Yt()).add(u);t.set(l,p)}}return t}complete(){var e=this;return(0,Ee.Z)(function*(){const t=yield function TF(n,e,t,r){return LS.apply(this,arguments)}(e.localStore,new fO(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const i of e.queries)yield AF(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function pO(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class gO{constructor(e){this.key=e}}class mO{constructor(e){this.key=e}}class yO{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Yt(),this.mutatedKeys=Yt(),this.Gu=I(e),this.Qu=new Hy(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new hO,i=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,l=i,p=!1;const _="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,b="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((C,x)=>{const V=i.get(C),B=y(this.query,x)?x:null,G=!!V&&this.mutatedKeys.has(V.key),re=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let ye=!1;V&&B?V.data.isEqual(B.data)?G!==re&&(r.track({type:3,doc:B}),ye=!0):this.Hu(V,B)||(r.track({type:2,doc:B}),ye=!0,(_&&this.Gu(B,_)>0||b&&this.Gu(B,b)<0)&&(p=!0)):!V&&B?(r.track({type:0,doc:B}),ye=!0):V&&!B&&(r.track({type:1,doc:V}),ye=!0,(_||b)&&(p=!0)),ye&&(B?(l=l.add(B),u=re?u.add(C):u.delete(C)):(l=l.delete(C),u=u.delete(C)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const C="F"===this.query.limitType?l.last():l.first();l=l.delete(C.key),u=u.delete(C.key),r.track({type:1,doc:C})}return{Qu:l,zu:r,$i:p,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Eu();u.sort((b,C)=>function(x,V){const B=G=>{switch(G){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st()}};return B(x)-B(V)}(b.type,C.type)||this.Gu(b.doc,C.doc)),this.Ju(r);const l=t?this.Yu():[],p=0===this.Ku.size&&this.current?1:0,_=p!==this.qu;return this.qu=p,0!==u.length||_?{snapshot:new $y(this.query,e.Qu,i,u,e.mutatedKeys,0===p,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:l}:{Xu:l}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new hO,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Yt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new mO(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new gO(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=Yt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return $y.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class XF{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class eL{constructor(e){this.key=e,this.nc=!1}}class tL{constructor(e,t,r,i,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.sc={},this.ic=new Vh(p=>h(p),c),this.rc=new Map,this.oc=new Set,this.uc=new lr(Ke.comparator),this.cc=new Map,this.ac=new xS,this.hc={},this.lc=new Map,this.fc=hg.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function nL(n,e){return gM.apply(this,arguments)}function gM(){return gM=(0,Ee.Z)(function*(n,e){const t=VM(n);let r,i;const u=t.ic.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),i=u.view.ec();else{const l=yield Fy(t.localStore,o(e));t.isPrimaryClient&&xD(t.remoteStore,l);const p=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield mM(t,e,r,"current"===p,l.resumeToken)}return i}),gM.apply(this,arguments)}function mM(n,e,t,r,i){return yM.apply(this,arguments)}function yM(){return yM=(0,Ee.Z)(function*(n,e,t,r,i){n._c=(x,V,B)=>{return(G=(0,Ee.Z)(function*(re,ye,je,nt){let ft=ye.view.Wu(je);ft.$i&&(ft=yield TD(re.localStore,ye.query,!1).then(({documents:Ft})=>ye.view.Wu(Ft,ft)));const ct=nt&&nt.targetChanges.get(ye.targetId),Rt=ye.view.applyChanges(ft,re.isPrimaryClient,ct);return AM(re,ye.targetId,Rt.Xu),Rt.snapshot}),function(re,ye,je,nt){return G.apply(this,arguments)})(n,x,V,B);var G};const u=yield TD(n.localStore,e,!0),l=new yO(e,u.Hi),p=l.Wu(u.documents),_=aE.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),b=l.applyChanges(p,n.isPrimaryClient,_);AM(n,t,b.Xu);const C=new XF(e,t,l);return n.ic.set(e,C),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),b.snapshot}),yM.apply(this,arguments)}function rL(n,e){return _M.apply(this,arguments)}function _M(){return _M=(0,Ee.Z)(function*(n,e){const t=Ze(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(u=>!c(u,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Ly(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),bE(t.remoteStore,r.targetId),Gy(t,r.targetId)}).catch(nu))):(Gy(t,r.targetId),yield Ly(t.localStore,r.targetId,!0))}),_M.apply(this,arguments)}function vM(){return vM=(0,Ee.Z)(function*(n,e,t){const r=UM(n);try{const i=yield function(u,l){const p=Ze(u),_=Fn.now(),b=l.reduce((V,B)=>V.add(B.key),Yt());let C,x;return p.persistence.runTransaction("Locally write mutations","readwrite",V=>{let B=so(),G=Yt();return p.Gi.getEntries(V,b).next(re=>{B=re,B.forEach((ye,je)=>{je.isValidDocument()||(G=G.add(ye))})}).next(()=>p.localDocuments.getOverlayedDocuments(V,B)).next(re=>{C=re;const ye=[];for(const je of l){const nt=fP(je,C.get(je.key).overlayedDocument);null!=nt&&ye.push(new Zl(je.key,nt,cD(nt.value.mapValue),Rn.exists(!0)))}return p.mutationQueue.addMutationBatch(V,_,ye,l)}).next(re=>{x=re;const ye=re.applyToLocalDocumentSet(C,G);return p.documentOverlayCache.saveOverlays(V,re.batchId,ye)})}).then(()=>({batchId:x.batchId,changes:JN(C)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,l,p){let _=u.hc[u.currentUser.toKey()];_||(_=new lr(zt)),_=_.insert(l,p),u.hc[u.currentUser.toKey()]=_}(r,i.batchId,t),yield Yl(r,i.changes),yield Uy(r.remoteStore)}catch(i){const u=jy(i,"Failed to persist write");t.reject(u)}}),vM.apply(this,arguments)}function _O(n,e){return EM.apply(this,arguments)}function EM(){return EM=(0,Ee.Z)(function*(n,e){const t=Ze(n);try{const r=yield DF(t.localStore,e);e.targetChanges.forEach((i,u)=>{const l=t.cc.get(u);l&&(xt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.nc=!0:i.modifiedDocuments.size>0?xt(l.nc):i.removedDocuments.size>0&&(xt(l.nc),l.nc=!1))}),yield Yl(t,r,e)}catch(r){yield nu(r)}}),EM.apply(this,arguments)}function vO(n,e,t){const r=Ze(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ic.forEach((u,l)=>{const p=l.view.bu(e);p.snapshot&&i.push(p.snapshot)}),function(u,l){const p=Ze(u);p.onlineState=l;let _=!1;p.queries.forEach((b,C)=>{for(const x of C.listeners)x.bu(l)&&(_=!0)}),_&&fM(p)}(r.eventManager,e),i.length&&r.sc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function sL(n,e,t){return wM.apply(this,arguments)}function wM(){return wM=(0,Ee.Z)(function*(n,e,t){const r=Ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),u=i&&i.key;if(u){let l=new lr(Ke.comparator);l=l.insert(u,Nn.newNoDocument(u,Nt.min()));const p=Yt().add(u),_=new oE(Nt.min(),new Map,new En(zt),l,p);yield _O(r,_),r.uc=r.uc.remove(u),r.cc.delete(e),SM(r)}else yield Ly(r.localStore,e,!1).then(()=>Gy(r,e,t)).catch(nu)}),wM.apply(this,arguments)}function oL(n,e){return bM.apply(this,arguments)}function bM(){return bM=(0,Ee.Z)(function*(n,e){const t=Ze(n),r=e.batch.batchId;try{const i=yield IF(t.localStore,e);TM(t,r,null),CM(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Yl(t,i)}catch(i){yield nu(i)}}),bM.apply(this,arguments)}function aL(n,e,t){return IM.apply(this,arguments)}function IM(){return IM=(0,Ee.Z)(function*(n,e,t){const r=Ze(n);try{const i=yield function(u,l){const p=Ze(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let b;return p.mutationQueue.lookupMutationBatch(_,l).next(C=>(xt(null!==C),b=C.keys(),p.mutationQueue.removeMutationBatch(_,C))).next(()=>p.mutationQueue.performConsistencyCheck(_)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(_,b,l)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,b)).next(()=>p.localDocuments.getDocuments(_,b))})}(r.localStore,e);TM(r,e,t),CM(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Yl(r,i)}catch(i){yield nu(i)}}),IM.apply(this,arguments)}function DM(){return DM=(0,Ee.Z)(function*(n,e){const t=Ze(n);Kl(t.remoteStore)||ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const l=Ze(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>l.mutationQueue.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(-1===r)return void e.resolve();const i=t.lc.get(r)||[];i.push(e),t.lc.set(r,i)}catch(r){const i=jy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),DM.apply(this,arguments)}function CM(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function TM(n,e,t){const r=Ze(n);let i=r.hc[r.currentUser.toKey()];if(i){const u=i.get(e);u&&(t?u.reject(t):u.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function Gy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||EO(n,r)})}function EO(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(bE(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),SM(n))}function AM(n,e,t){for(const r of t)r instanceof gO?(n.ac.addReference(r.key,e),cL(n,r)):r instanceof mO?(ke("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||EO(n,r.key)):st()}function cL(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(ke("SyncEngine","New document in limbo: "+t),n.oc.add(r),SM(n))}function SM(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new Ke(qt.fromString(e)),r=n.fc.next();n.cc.set(r,new eL(t)),n.uc=n.uc.insert(t,r),xD(n.remoteStore,new Uh(o(rg(t.path)),r,2,Ds.at))}}function Yl(n,e,t){return MM.apply(this,arguments)}function MM(){return MM=(0,Ee.Z)(function*(n,e,t){const r=Ze(n),i=[],u=[],l=[];var p;r.ic.isEmpty()||(r.ic.forEach((p,_)=>{l.push(r._c(_,e,t).then(b=>{if((b||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,b?.fromCache?"not-current":"current"),b){i.push(b);const C=kS.Ci(_.targetId,b);u.push(C)}}))}),yield Promise.all(l),r.sc.Wo(i),yield(p=(0,Ee.Z)(function*(_,b){const C=Ze(_);try{yield C.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>ae.forEach(b,V=>ae.forEach(V.Si,B=>C.persistence.referenceDelegate.addReference(x,V.targetId,B)).next(()=>ae.forEach(V.Di,B=>C.persistence.referenceDelegate.removeReference(x,V.targetId,B)))))}catch(x){if(!cc(x))throw x;ke("LocalStore","Failed to update sequence numbers: "+x)}for(const x of b){const V=x.targetId;if(!x.fromCache){const B=C.Ui.get(V),re=B.withLastLimboFreeSnapshotVersion(B.snapshotVersion);C.Ui=C.Ui.insert(V,re)}}}),function(_,b){return p.apply(this,arguments)})(r.localStore,u))}),MM.apply(this,arguments)}function lL(n,e){return xM.apply(this,arguments)}function xM(){return xM=(0,Ee.Z)(function*(n,e){const t=Ze(n);if(!t.currentUser.isEqual(e)){ke("SyncEngine","User change. New user:",e.toKey());const r=yield ZR(t.localStore,e);t.currentUser=e,(i=t).lc.forEach(l=>{l.forEach(p=>{p.reject(new Oe(he.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Yl(t,r.ji)}var i}),xM.apply(this,arguments)}function dL(n,e){const t=Ze(n),r=t.cc.get(e);if(r&&r.nc)return Yt().add(r.key);{let i=Yt();const u=t.rc.get(e);if(!u)return i;for(const l of u){const p=t.ic.get(l);i=i.unionWith(p.view.ju)}return i}}function hL(n,e){return NM.apply(this,arguments)}function NM(){return NM=(0,Ee.Z)(function*(n,e){const t=Ze(n),r=yield TD(t.localStore,e.query,!0),i=e.view.tc(r);return t.isPrimaryClient&&AM(t,e.targetId,i.Xu),i}),NM.apply(this,arguments)}function fL(n,e){return RM.apply(this,arguments)}function RM(){return RM=(0,Ee.Z)(function*(n,e){const t=Ze(n);return JR(t.localStore,e).then(r=>Yl(t,r))}),RM.apply(this,arguments)}function pL(n,e,t,r){return OM.apply(this,arguments)}function OM(){return OM=(0,Ee.Z)(function*(n,e,t,r){const i=Ze(n),u=yield function(l,p){const _=Ze(l),b=Ze(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",C=>b.Tn(C,p).next(x=>x?_.localDocuments.getDocuments(C,x):ae.resolve(null)))}(i.localStore,e);var p;null!==u?("pending"===t?yield Uy(i.remoteStore):"acknowledged"===t||"rejected"===t?(TM(i,e,r||null),CM(i,e),p=e,Ze(Ze(i.localStore).mutationQueue).An(p)):st(),yield Yl(i,u)):ke("SyncEngine","Cannot apply mutation batch with id: "+e)}),OM.apply(this,arguments)}function kM(){return kM=(0,Ee.Z)(function*(n,e){const t=Ze(n);if(VM(t),UM(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield wO(t,r.toArray());t.dc=!0,yield oM(t.remoteStore,!0);for(const u of i)xD(t.remoteStore,u)}else if(!1===e&&!1!==t.dc){const r=[];let i=Promise.resolve();t.rc.forEach((u,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(Gy(t,l),Ly(t.localStore,l,!0))),bE(t.remoteStore,l)}),yield i,yield wO(t,r),function(u){const l=Ze(u);l.cc.forEach((p,_)=>{bE(l.remoteStore,_)}),l.ac.fs(),l.cc=new Map,l.uc=new lr(Ke.comparator)}(t),t.dc=!1,yield oM(t.remoteStore,!1)}}),kM.apply(this,arguments)}function wO(n,e,t){return PM.apply(this,arguments)}function PM(){return PM=(0,Ee.Z)(function*(n,e,t){const r=Ze(n),i=[],u=[];for(const l of e){let p;const _=r.rc.get(l);if(_&&0!==_.length){p=yield Fy(r.localStore,o(_[0]));for(const b of _){const C=r.ic.get(b),x=yield hL(r,C);x.snapshot&&u.push(x.snapshot)}}else{const b=yield QR(r.localStore,l);p=yield Fy(r.localStore,b),yield mM(r,bO(b),l,!1,p.resumeToken)}i.push(p)}return r.sc.Wo(u),i}),PM.apply(this,arguments)}function bO(n){return mS(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function mL(n){const e=Ze(n);return Ze(Ze(e.localStore).persistence).vi()}function yL(n,e,t,r){return FM.apply(this,arguments)}function FM(){return FM=(0,Ee.Z)(function*(n,e,t,r){const i=Ze(n);if(i.dc)return void ke("SyncEngine","Ignoring unexpected query state notification.");const u=i.rc.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const l=yield JR(i.localStore,w(u[0])),p=oE.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,tr.EMPTY_BYTE_STRING);yield Yl(i,l,p);break}case"rejected":yield Ly(i.localStore,e,!0),Gy(i,e,r);break;default:st()}}),FM.apply(this,arguments)}function _L(n,e,t){return LM.apply(this,arguments)}function LM(){return LM=(0,Ee.Z)(function*(n,e,t){const r=VM(n);if(r.dc){for(const i of e){if(r.rc.has(i)){ke("SyncEngine","Adding an already active target "+i);continue}const u=yield QR(r.localStore,i),l=yield Fy(r.localStore,u);yield mM(r,bO(u),l.targetId,!1,l.resumeToken),xD(r.remoteStore,l)}for(const i of t)r.rc.has(i)&&(yield Ly(r.localStore,i,!1).then(()=>{bE(r.remoteStore,i),Gy(r,i)}).catch(nu))}}),LM.apply(this,arguments)}function VM(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=_O.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=sL.bind(null,e),e.sc.Wo=KF.bind(null,e.eventManager),e.sc.wc=YF.bind(null,e.eventManager),e}function UM(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=oL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=aL.bind(null,e),e}class IO{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ee.Z)(function*(){t.It=EE(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return WR(this.persistence,new qR,e.initialUser,this.It)}yc(e){return new GR(DD.Bs,this.It)}gc(e){return new nO}terminate(){var e=this;return(0,Ee.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class DO extends IO{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield UM(r.Ac.syncEngine),yield Uy(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return WR(this.persistence,new qR,e.initialUser,this.It)}Tc(e,t){return new uF(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new iD(t,this.persistence);return new eS(e.asyncQueue,r)}yc(e){const t=OS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?oo.withCacheSize(this.cacheSizeBytes):oo.DEFAULT;return new RS(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,iO(),MD(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new nO}}class EL extends DO{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield t().call(r,e);const i=r.Ac.syncEngine;r.sharedClientState instanceof HS&&(r.sharedClientState.syncEngine={Fr:pL.bind(null,i),$r:yL.bind(null,i),Br:_L.bind(null,i),vi:mL.bind(null,i),Mr:fL.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,Ee.Z)(function*(l){yield function gL(n,e){return kM.apply(this,arguments)}(r.Ac.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return u.apply(this,arguments)}}())})()}gc(e){const t=iO();if(!HS.C(t))throw new Oe(he.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=OS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new HS(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class BM{initialize(e,t){var r=this;return(0,Ee.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>vO(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=lL.bind(null,r.syncEngine),yield oM(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new ZF}createDatastore(e){const t=EE(e.databaseInfo.databaseId),r=new NF(e.databaseInfo);return new kF(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,u=p=>vO(this.syncEngine,p,0),l=rO.C()?new rO:new SF,new LF(t,r,i,u,l);var t,r,i,u,l}createSyncEngine(e,t){return function(r,i,u,l,p,_,b){const C=new tL(r,i,u,l,p,_);return b&&(C.dc=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ee.Z)(function*(t){const r=Ze(t);ke("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield Vy(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function jM(n,e,t){if(!t)throw new Oe(he.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function CO(n,e,t,r){if(!0===e&&!0===r)throw new Oe(he.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function TO(n){if(!Ke.isDocumentKey(n))throw new Oe(he.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function AO(n){if(Ke.isDocumentKey(n))throw new Oe(he.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function RD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":st()}function sn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Oe(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=RD(n);throw new Oe(he.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function SO(n,e){if(e<=0)throw new Oe(he.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const MO=new Map;class xO{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Oe(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Oe(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,CO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class IE{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xO({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Oe(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Oe(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xO(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new qA;switch(t.type){case"gapi":return new KA(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Oe(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=MO.get(e);t&&(ke("ComponentProvider","Removing Datastore"),MO.delete(e),t.terminate())}(this),Promise.resolve()}}class Wn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ec(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wn(this.firestore,e,this._key)}}class Xi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Xi(this.firestore,e,this._query)}}class Ec extends Xi{constructor(e,t,r){super(e,t,rg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wn(this.firestore,null,new Ke(e))}withConverter(e){return new Ec(this.firestore,e,this._path)}}function RO(n,e,...t){if(n=(0,on.m9)(n),jM("collection","path",e),n instanceof IE){const r=qt.fromString(e,...t);return AO(r),new Ec(n,null,r)}{if(!(n instanceof Wn||n instanceof Ec))throw new Oe(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(qt.fromString(e,...t));return AO(r),new Ec(n.firestore,null,r)}}function OD(n,e,...t){if(n=(0,on.m9)(n),1===arguments.length&&(e=eD.R()),jM("doc","path",e),n instanceof IE){const r=qt.fromString(e,...t);return TO(r),new Wn(n,null,new Ke(r))}{if(!(n instanceof Wn||n instanceof Ec))throw new Oe(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(qt.fromString(e,...t));return TO(r),new Wn(n.firestore,n instanceof Ec?n.converter:null,new Ke(r))}}function OO(n,e){return n=(0,on.m9)(n),e=(0,on.m9)(e),(n instanceof Wn||n instanceof Ec)&&(e instanceof Wn||e instanceof Ec)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function HM(n,e){return n=(0,on.m9)(n),e=(0,on.m9)(e),n instanceof Xi&&e instanceof Xi&&n.firestore===e.firestore&&c(n._query,e._query)&&n.converter===e.converter}function kO(n,e=10240){let t=0;return{read:()=>(0,Ee.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ee.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class kD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):vr("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class bL{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new Er,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,Ee.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,Ee.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),i=Number(r);isNaN(i)&&e.Dc(`length string (${r}) is not valid number`);const u=yield e.Cc(i);return new QF(JSON.parse(u),t.length+i)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,Ee.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,Ee.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class CL{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ee.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Oe(he.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Ee.Z)(function*(u,l){const p=Ze(u),_=lE(p.It)+"/documents",b={documents:l.map(B=>cE(p.It,B))},C=yield p._o("BatchGetDocuments",_,b,l.length),x=new Map;C.forEach(B=>{const G=function DP(n,e){return"found"in e?function(t,r){xt(!!r.found);const i=_c(t,r.found.name),u=Ti(r.found.updateTime),l=new li({mapValue:{fields:r.found.fields}});return Nn.newFoundDocument(i,u,l)}(n,e):"missing"in e?function(t,r){xt(!!r.missing),xt(!!r.readTime);const i=_c(t,r.missing),u=Ti(r.readTime);return Nn.newNoDocument(i,u)}(n,e):st()}(p.It,B);x.set(G.key.toString(),G)});const V=[];return l.forEach(B=>{const G=x.get(B.toString());xt(!!G),V.push(G)}),V}),function(u,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ny(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ee.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const u=Ke.fromPath(i);e.mutations.push(new _S(u,e.precondition(u)))}),yield(r=(0,Ee.Z)(function*(i,u){const l=Ze(i),p=lE(l.It)+"/documents",_={writes:u.map(b=>dE(l.It,b))};yield l.ao("Commit",p,_)}),function(i,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw st();t=Nt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Oe(he.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Nt.min())?Rn.exists(!1):Rn.updateTime(t):Rn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Nt.min()))throw new Oe(he.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Rn.updateTime(t)}return Rn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class TL{constructor(e,t,r,i,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=u,this.kc=r.maxAttempts,this.xo=new $S(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,Ee.Z)(function*(){const t=new CL(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(u=>{e.Fc(u)}))}).catch(i=>{e.Fc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!Jp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!KN(t)}return!1}}class AL{constructor(e,t,r,i){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ci.UNAUTHENTICATED,this.clientId=eD.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,Ee.Z)(function*(p){ke("FirestoreClient","Received user=",p.uid),yield u.authCredentialListener(p),u.user=p});return function(p){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(ke("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,Ee.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Oe(he.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Er;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=jy(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function PO(n,e){return $M.apply(this,arguments)}function $M(){return $M=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ke("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Ee.Z)(function*(u){r.isEqual(u)||(yield ZR(e.localStore,u),r=u)});return function(u){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),$M.apply(this,arguments)}function FO(n,e){return GM.apply(this,arguments)}function GM(){return GM=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield zM(n);ke("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>dO(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,u)=>dO(e.remoteStore,u)),n.onlineComponents=e}),GM.apply(this,arguments)}function zM(n){return qM.apply(this,arguments)}function qM(){return qM=(0,Ee.Z)(function*(n){return n.offlineComponents||(ke("FirestoreClient","Using default OfflineComponentProvider"),yield PO(n,new IO)),n.offlineComponents}),qM.apply(this,arguments)}function PD(n){return WM.apply(this,arguments)}function WM(){return WM=(0,Ee.Z)(function*(n){return n.onlineComponents||(ke("FirestoreClient","Using default OnlineComponentProvider"),yield FO(n,new BM)),n.onlineComponents}),WM.apply(this,arguments)}function LO(n){return zM(n).then(e=>e.persistence)}function FD(n){return zM(n).then(e=>e.localStore)}function ZM(n){return PD(n).then(e=>e.remoteStore)}function KM(n){return PD(n).then(e=>e.syncEngine)}function zy(n){return YM.apply(this,arguments)}function YM(){return YM=(0,Ee.Z)(function*(n){const e=yield PD(n),t=e.eventManager;return t.onListen=nL.bind(null,e.syncEngine),t.onUnlisten=rL.bind(null,e.syncEngine),t}),YM.apply(this,arguments)}function UO(n,e,t={}){const r=new Er;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(i,u,l,p,_){const b=new kD({next:x=>{u.enqueueAndForget(()=>dM(i,C));const V=x.docs.has(l);!V&&x.fromCache?_.reject(new Oe(he.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&x.fromCache&&p&&"server"===p.source?_.reject(new Oe(he.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(x)},error:x=>_.reject(x)}),C=new pM(rg(l.path),b,{includeMetadataChanges:!0,Nu:!0});return cM(i,C)}(yield zy(n),n.asyncQueue,e,t,r)})),r.promise}function BO(n,e,t={}){const r=new Er;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(i,u,l,p,_){const b=new kD({next:x=>{u.enqueueAndForget(()=>dM(i,C)),x.fromCache&&"server"===p.source?_.reject(new Oe(he.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(x)},error:x=>_.reject(x)}),C=new pM(l,b,{includeMetadataChanges:!0,Nu:!0});return cM(i,C)}(yield zy(n),n.asyncQueue,e,t,r)})),r.promise}class PL{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new $S(this,"async_queue_retry"),this.Wc=()=>{const t=MD();t&&ke("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=MD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=MD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new Er;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,Ee.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!cc(t))throw t;ke("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,vr("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=uM.createAndSchedule(this,e,t,r,u=>this.Yc(u));return this.qc.push(i),i}zc(){this.Kc&&st()}verifyOperationInProgress(){}Xc(){var e=this;return(0,Ee.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function QM(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class FL{constructor(){this._progressObserver={},this._taskCompletionResolver=new Er,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Zn extends IE{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new PL,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||jO(this),this._firestoreClient.terminate()}}function Rr(n){return n._firestoreClient||jO(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function jO(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new nS(n._databaseId,u,n._persistenceKey,(p=t).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,p.useFetchStreams));var u,p;n._firestoreClient=new AL(n._authCredentials,n._appCheckCredentials,n._queue,r)}function HO(n,e,t){const r=new Er;return n.asyncQueue.enqueue((0,Ee.Z)(function*(){try{yield PO(n,t),yield FO(n,e),r.resolve()}catch(i){const u=i;if(!("FirebaseError"===(l=u).name?l.code===he.FAILED_PRECONDITION||l.code===he.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw u;uc("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var l})).then(()=>r.promise)}function $O(n){if(n._initialized||n._terminated)throw new Oe(he.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class wc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wc(tr.fromBase64String(e))}catch(t){throw new Oe(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new wc(tr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ql{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Oe(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Hn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class pg{constructor(e){this._methodName=e}}class LD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Oe(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Oe(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return zt(this._lat,e._lat)||zt(this._long,e._long)}}const qL=/^__.*__$/;class WL{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Zl(e,this.data,this.fieldMask,t,this.fieldTransforms):new xy(e,this.data,t,this.fieldTransforms)}}class GO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Zl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function zO(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st()}}class VD{constructor(e,t,r,i,u,l){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=i,void 0===u&&this.na(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new VD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return jD(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(zO(this.sa)&&qL.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class ZL{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||EE(e)}da(e,t,r,i=!1){return new VD({sa:e,methodName:t,fa:r,path:Hn.emptyPath(),oa:!1,la:i},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function gg(n){const e=n._freezeSettings(),t=EE(n._databaseId);return new ZL(n._databaseId,!!e.ignoreUndefinedProperties,t)}function UD(n,e,t,r,i,u={}){const l=n.da(u.merge||u.mergeFields?2:0,e,t,i);tx("Data must be an object, but it was:",l,r);const p=ZO(r,l);let _,b;if(u.merge)_=new Ji(l.fieldMask),b=l.fieldTransforms;else if(u.mergeFields){const C=[];for(const x of u.mergeFields){const V=nx(e,x,t);if(!l.contains(V))throw new Oe(he.INVALID_ARGUMENT,`Field '${V}' is specified in your field mask but missing from your input data.`);YO(C,V)||C.push(V)}_=new Ji(C),b=l.fieldTransforms.filter(x=>_.covers(x.field))}else _=null,b=l.fieldTransforms;return new WL(new li(p),_,b)}class DE extends pg{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof DE}}function qO(n,e,t){return new VD({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class JM extends pg{_toFieldTransform(e){return new Wl(e.path,new Je)}isEqual(e){return e instanceof JM}}class KL extends pg{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=qO(this,e,!0),r=this._a.map(u=>mg(u,t)),i=new ht(r);return new Wl(e.path,i)}isEqual(e){return this===e}}class YL extends pg{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=qO(this,e,!0),r=this._a.map(u=>mg(u,t)),i=new It(r);return new Wl(e.path,i)}isEqual(e){return this===e}}class QL extends pg{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new mn(e.It,W(e.It,this.wa));return new Wl(e.path,t)}isEqual(e){return this===e}}function XM(n,e,t,r){const i=n.da(1,e,t);tx("Data must be an object, but it was:",i,r);const u=[],l=li.empty();jl(r,(_,b)=>{const C=BD(e,_,t);b=(0,on.m9)(b);const x=i.ca(C);if(b instanceof DE)u.push(C);else{const V=mg(b,x);null!=V&&(u.push(C),l.set(C,V))}});const p=new Ji(u);return new GO(l,p,i.fieldTransforms)}function ex(n,e,t,r,i,u){const l=n.da(1,e,t),p=[nx(e,r,t)],_=[i];if(u.length%2!=0)throw new Oe(he.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let V=0;V<u.length;V+=2)p.push(nx(e,u[V])),_.push(u[V+1]);const b=[],C=li.empty();for(let V=p.length-1;V>=0;--V)if(!YO(b,p[V])){const B=p[V];let G=_[V];G=(0,on.m9)(G);const re=l.ca(B);if(G instanceof DE)b.push(B);else{const ye=mg(G,re);null!=ye&&(b.push(B),C.set(B,ye))}}const x=new Ji(b);return new GO(C,x,l.fieldTransforms)}function WO(n,e,t,r=!1){return mg(t,n.da(r?4:3,e))}function mg(n,e){if(KO(n=(0,on.m9)(n)))return tx("Unsupported field value:",e,n),ZO(n,e);if(n instanceof pg)return function(t,r){if(!zO(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let u=0;for(const l of t){let p=mg(l,r.aa(u));null==p&&(p={nullValue:"NULL_VALUE"}),i.push(p),u++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,on.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return W(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Fn.fromDate(t);return{timestampValue:uE(r.It,i)}}if(t instanceof Fn){const i=new Fn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:uE(r.It,i)}}if(t instanceof LD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof wc)return{bytesValue:sR(r.It,t._byteString)};if(t instanceof Wn){const i=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(i))throw r.ha(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:vS(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${RD(t)}`)}(n,e)}function ZO(n,e){const t={};return K0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):jl(n,(r,i)=>{const u=mg(i,e.ra(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function KO(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Fn||n instanceof LD||n instanceof wc||n instanceof Wn||n instanceof pg)}function tx(n,e,t){if(!KO(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=RD(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function nx(n,e,t){if((e=(0,on.m9)(e))instanceof Ql)return e._internalPath;if("string"==typeof e)return BD(n,e);throw jD("Field path arguments must be of type string or ",n,!1,void 0,t)}const JL=new RegExp("[~\\*/\\[\\]]");function BD(n,e,t){if(e.search(JL)>=0)throw jD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ql(...e.split("."))._internalPath}catch{throw jD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function jD(n,e,t,r,i){const u=r&&!r.isEmpty(),l=void 0!==i;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let _="";return(u||l)&&(_+=" (found",u&&(_+=` in field ${r}`),l&&(_+=` in document ${i}`),_+=")"),new Oe(he.INVALID_ARGUMENT,p+n+_)}function YO(n,e){return n.some(t=>t.isEqual(e))}class CE{constructor(e,t,r,i,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Wn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new XL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(HD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class XL extends CE{data(){return super.data()}}function HD(n,e){return"string"==typeof e?BD(n,e):e instanceof Ql?e._internalPath:e._delegate._internalPath}function QO(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Oe(he.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class TE{}function $h(n,...e){for(const t of e)n=t._apply(n);return n}class eV extends TE{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=gg(e.firestore),r=function(i,u,l,p,_,b,C){let x;if(_.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Oe(he.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){r1(C,b);const B=[];for(const G of C)B.push(n1(p,i,G));x={arrayValue:{values:B}}}else x=n1(p,i,C)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||r1(C,b),x=WO(l,"where",C,"in"===b||"not-in"===b);const V=Yr.create(_,b,x);return function(B,G){if(G.dt()){const ye=hD(B);if(null!==ye&&!ye.isEqual(G.field))throw new Oe(he.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ye.toString()}' and '${G.field.toString()}'`);const je=dD(B);null!==je&&s1(0,G.field,je)}const re=function(ye,je){for(const nt of ye.filters)if(je.indexOf(nt.op)>=0)return nt.op;return null}(B,function(ye){switch(ye){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(G.op));if(null!==re)throw new Oe(he.INVALID_ARGUMENT,re===G.op?`Invalid query. You cannot use more than one '${G.op.toString()}' filter.`:`Invalid query. You cannot use '${G.op.toString()}' filters with '${re.toString()}' filters.`)}(i,V),V}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Xi(e.firestore,e.converter,function(i,u){const l=i.filters.concat([u]);return new iu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),l,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class nV extends TE{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,i,u){if(null!==r.startAt)throw new Oe(he.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Oe(he.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new ng(i,u);return function(p,_){if(null===dD(p)){const b=hD(p);null!==b&&s1(0,b,_.field)}}(r,l),l}(e._query,this.ma,this.pa);return new Xi(e.firestore,e.converter,function(r,i){const u=r.explicitOrderBy.concat([i]);return new iu(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class JO extends TE{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new Xi(e.firestore,e.converter,a(e._query,this.Ia,this.Ta))}}class XO extends TE{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=t1(e,this.type,this.Ea,this.Aa);return new Xi(e.firestore,e.converter,(i=t,new iu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class e1 extends TE{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=t1(e,this.type,this.Ea,this.Aa);return new Xi(e.firestore,e.converter,(i=t,new iu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function t1(n,e,t,r){if(t[0]=(0,on.m9)(t[0]),t[0]instanceof CE)return function(i,u,l,p,_){if(!p)throw new Oe(he.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const b=[];for(const C of s(i))if(C.field.isKeyField())b.push(pc(u,p.key));else{const x=p.data.field(C.field);if(oD(x))throw new Oe(he.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+C.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===x){const V=C.field.canonicalString();throw new Oe(he.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${V}' (used as the orderBy) does not exist.`)}b.push(x)}return new ql(b,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=gg(n.firestore);return function(u,l,p,_,b,C){const x=u.explicitOrderBy;if(b.length>x.length)throw new Oe(he.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const V=[];for(let B=0;B<b.length;B++){const G=b[B];if(x[B].field.isKeyField()){if("string"!=typeof G)throw new Oe(he.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof G}`);if(!fD(u)&&-1!==G.indexOf("/"))throw new Oe(he.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${G}' contains a slash.`);const re=u.path.child(qt.fromString(G));if(!Ke.isDocumentKey(re))throw new Oe(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${re}' is not because it contains an odd number of segments.`);const ye=new Ke(re);V.push(pc(l,ye))}else{const re=WO(p,_,G);V.push(re)}}return new ql(V,C)}(n._query,n.firestore._databaseId,i,e,t,r)}}function n1(n,e,t){if("string"==typeof(t=(0,on.m9)(t))){if(""===t)throw new Oe(he.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fD(e)&&-1!==t.indexOf("/"))throw new Oe(he.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(qt.fromString(t));if(!Ke.isDocumentKey(r))throw new Oe(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return pc(n,new Ke(r))}if(t instanceof Wn)return pc(n,t._key);throw new Oe(he.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${RD(t)}.`)}function r1(n,e){if(!Array.isArray(n)||0===n.length)throw new Oe(he.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Oe(he.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function s1(n,e,t){if(!t.isEqual(e))throw new Oe(he.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class rx{convertValue(e,t="none"){switch(kh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Rh(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw st()}}convertObject(e,t){const r={};return jl(e.fields,(i,u)=>{r[i]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new LD(nr(e.latitude),nr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=tS(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Oh(e));default:return null}}convertTimestamp(e){const t=lc(e);return new Fn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=qt.fromString(e);xt(pR(r));const i=new dc(r.get(1),r.get(3)),u=new Ke(r.popFirst(5));return i.isEqual(t)||vr(`Document ${u} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function $D(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class lV extends rx{constructor(e){super(),this.firestore=e}convertBytes(e){return new wc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wn(this.firestore,null,t)}}class yg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Jl extends CE{constructor(e,t,r,i,u,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new AE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(HD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class AE extends Jl{data(e={}){return super.data(e)}}class Gh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new yg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new AE(this._firestore,this._userDataWriter,r.key,r,new yg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Oe(he.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new AE(r._firestore,r._userDataWriter,l.doc.key,l.doc,new yg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const p=new AE(r._firestore,r._userDataWriter,l.doc.key,l.doc,new yg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,b=-1;return 0!==l.type&&(_=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),b=u.indexOf(l.doc.key)),{type:dV(l.type),doc:p,oldIndex:_,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function dV(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st()}}function o1(n,e){return n instanceof Jl&&e instanceof Jl?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Gh&&e instanceof Gh&&n._firestore===e._firestore&&HM(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class zh extends rx{constructor(e){super(),this.firestore=e}convertBytes(e){return new wc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wn(this.firestore,null,t)}}function a1(n,e,t){n=sn(n,Wn);const r=sn(n.firestore,Zn),i=$D(n.converter,e,t);return qy(r,[UD(gg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Rn.none())])}function u1(n,e,t,...r){n=sn(n,Wn);const i=sn(n.firestore,Zn),u=gg(i);let l;return l="string"==typeof(e=(0,on.m9)(e))||e instanceof Ql?ex(u,"updateDoc",n._key,e,t,r):XM(u,"updateDoc",n._key,e),qy(i,[l.toMutation(n._key,Rn.exists(!0))])}function c1(n,...e){var t,r,i;n=(0,on.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||QM(e[l])||(u=e[l],l++);const p={includeMetadataChanges:u.includeMetadataChanges};if(QM(e[l])){const x=e[l];e[l]=null===(t=x.next)||void 0===t?void 0:t.bind(x),e[l+1]=null===(r=x.error)||void 0===r?void 0:r.bind(x),e[l+2]=null===(i=x.complete)||void 0===i?void 0:i.bind(x)}let _,b,C;if(n instanceof Wn)b=sn(n.firestore,Zn),C=rg(n._key.path),_={next:x=>{e[l]&&e[l](ix(b,n,x))},error:e[l+1],complete:e[l+2]};else{const x=sn(n,Xi);b=sn(x.firestore,Zn),C=x._query;const V=new zh(b);_={next:B=>{e[l]&&e[l](new Gh(b,V,x,B))},error:e[l+1],complete:e[l+2]},QO(n._query)}return function(x,V,B,G){const re=new kD(G),ye=new pM(V,re,B);return x.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return cM(yield zy(x),ye)})),()=>{re.bc(),x.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return dM(yield zy(x),ye)}))}}(Rr(b),C,p,_)}function qy(n,e){return function(t,r){const i=new Er;return t.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function iL(n,e,t){return vM.apply(this,arguments)}(yield KM(t),r,i)})),i.promise}(Rr(n),e)}function ix(n,e,t){const r=t.docs.get(e._key),i=new zh(n);return new Jl(n,i,e._key,r,new yg(t.hasPendingWrites,t.fromCache),e.converter)}const wV={maxAttempts:5};class l1{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=gg(e)}set(e,t,r){this._verifyNotCommitted();const i=qh(e,this._firestore),u=$D(i.converter,t,r),l=UD(this._dataReader,"WriteBatch.set",i._key,u,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,Rn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const u=qh(e,this._firestore);let l;return l="string"==typeof(t=(0,on.m9)(t))||t instanceof Ql?ex(this._dataReader,"WriteBatch.update",u._key,t,r,i):XM(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(l.toMutation(u._key,Rn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=qh(e,this._firestore);return this._mutations=this._mutations.concat(new Ny(t._key,Rn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Oe(he.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function qh(n,e){if((n=(0,on.m9)(n)).firestore!==e)throw new Oe(he.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class bV extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=gg(e)}get(e){const t=qh(e,this._firestore),r=new lV(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return st();const u=i[0];if(u.isFoundDocument())return new CE(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new CE(this._firestore,r,t._key,null,t.converter);throw st()})}set(e,t,r){const i=qh(e,this._firestore),u=$D(i.converter,t,r),l=UD(this._dataReader,"Transaction.set",i._key,u,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const u=qh(e,this._firestore);let l;return l="string"==typeof(t=(0,on.m9)(t))||t instanceof Ql?ex(this._dataReader,"Transaction.update",u._key,t,r,i):XM(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,l),this}delete(e){const t=qh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=qh(e,this._firestore),r=new zh(this._firestore);return super.get(e).then(i=>new Jl(this._firestore,r,t._key,i._document,new yg(!1,!1),t.converter))}}function sx(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Oe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function h1(){if(typeof Uint8Array>"u")throw new Oe("unimplemented","Uint8Arrays are not available in this environment.")}function f1(){if(!function Iy(){return typeof atob<"u"}())throw new Oe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Yp=Ku.SDK_VERSION,(0,Ku._registerComponent)(new yh.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const u=t.getProvider("app").getImmediate(),l=new Zn(new ZA(t.getProvider("auth-internal")),new UN(t.getProvider("app-check-internal")),function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Oe(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new dc(p.options.projectId,_)}(u,r),u);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,Ku.registerVersion)(GA,"3.7.3",n),(0,Ku.registerVersion)(GA,"3.7.3","esm2017")}();class SE{constructor(e){this._delegate=e}static fromBase64String(e){return f1(),new SE(wc.fromBase64String(e))}static fromUint8Array(e){return h1(),new SE(wc.fromUint8Array(e))}toBase64(){return f1(),this._delegate.toBase64()}toUint8Array(){return h1(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function ox(n){return function NV(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class RV{enableIndexedDbPersistence(e,t){return function VL(n,e){$O(n=sn(n,Zn));const t=Rr(n),r=n._freezeSettings(),i=new BM;return HO(t,i,new DO(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function UL(n){$O(n=sn(n,Zn));const e=Rr(n),t=n._freezeSettings(),r=new BM;return HO(e,r,new EL(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function BL(n){if(n._initialized&&!n._terminated)throw new Oe(he.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Er;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{yield(t=(0,Ee.Z)(function*(r){if(!io.C())return Promise.resolve();const i=r+"main";yield io.delete(i)}),function(r){return t.apply(this,arguments)})(OS(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class p1{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof dc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&uc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function NO(n,e,t,r={}){var i;const u=(n=sn(n,IE))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&uc("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,p;if("string"==typeof r.mockUserToken)l=r.mockUserToken,p=ci.MOCK_USER;else{l=(0,on.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Oe(he.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new ci(_)}n._authCredentials=new WA(new zA(l,p))}}(this._delegate,e,t,r)}enableNetwork(){return function HL(n){return function SL(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield LO(n),t=yield ZM(n);return e.setNetworkEnabled(!0),function(r){const i=Ze(r);return i._u.delete(0),wE(i)}(t)}))}(Rr(n=sn(n,Zn)))}(this._delegate)}disableNetwork(){return function $L(n){return function ML(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield LO(n),t=yield ZM(n);return e.setNetworkEnabled(!1),(r=(0,Ee.Z)(function*(i){const u=Ze(i);u._u.add(0),yield Vy(u),u.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Rr(n=sn(n,Zn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,CO("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function jL(n){return function(e){const t=new Er;return e.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function uL(n,e){return DM.apply(this,arguments)}(yield KM(e),t)})),t.promise}(Rr(n=sn(n,Zn)))}(this._delegate)}onSnapshotsInSync(e){return function EV(n,e){return function RL(n,e){const t=new kD(e);return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield zy(n),i=t,Ze(r).Ru.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield zy(n),i=t,void Ze(r).Ru.delete(i);var r,i}))}}(Rr(n=sn(n,Zn)),QM(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Oe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Wy(this,RO(this._delegate,e))}catch(t){throw Ts(t,"collection()","Firestore.collection()")}}doc(e){try{return new la(this,OD(this._delegate,e))}catch(t){throw Ts(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new As(this,function wL(n,e){if(n=sn(n,IE),jM("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Oe(he.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Xi(n,null,(t=e,new iu(qt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ts(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function IV(n,e,t){n=sn(n,Zn);const r=Object.assign(Object.assign({},wV),t);return function(i){if(i.maxAttempts<1)throw new Oe(he.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,u,l){const p=new Er;return i.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){const _=yield function VO(n){return PD(n).then(e=>e.datastore)}(i);new TL(i.asyncQueue,_,l,u,p).run()})),p.promise}(Rr(n),i=>e(new bV(n,i)),r)}(this._delegate,t=>e(new g1(this,t)))}batch(){return Rr(this._delegate),new m1(new l1(this._delegate,e=>qy(this._delegate,e)))}loadBundle(e){return function GL(n,e){const t=Rr(n=sn(n,Zn)),r=new FL;return function OL(n,e,t,r){const i=function(u,l){let p;return p="string"==typeof u?(new TextEncoder).encode(u):u,_=function(_,b){if(_ instanceof Uint8Array)return kO(_,b);if(_ instanceof ArrayBuffer)return kO(new Uint8Array(_),b);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),new bL(_,l);var _}(t,EE(e));n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){!function vL(n,e,t){const r=Ze(n);var i;(i=(0,Ee.Z)(function*(u,l,p){try{const _=yield l.getMetadata();if(yield function(V,B){const G=Ze(V),re=Ti(B.createTime);return G.persistence.runTransaction("hasNewerBundle","readonly",ye=>G.Ns.getBundleMetadata(ye,B.id)).then(ye=>!!ye&&ye.createTime.compareTo(re)>=0)}(u.localStore,_))return yield l.close(),p._completeWith({taskState:"Success",documentsLoaded:(V=_).totalDocuments,bytesLoaded:V.totalBytes,totalDocuments:V.totalDocuments,totalBytes:V.totalBytes}),Promise.resolve(new Set);p._updateProgress(pO(_));const b=new JF(_,u.localStore,l.It);let C=yield l.mc();for(;C;){const V=yield b.Fu(C);V&&p._updateProgress(V),C=yield l.mc()}const x=yield b.complete();return yield Yl(u,x.Lu,void 0),yield function(V,B){const G=Ze(V);return G.persistence.runTransaction("Save bundle","readwrite",re=>G.Ns.saveBundleMetadata(re,B))}(u.localStore,_),p._completeWith(x.progress),Promise.resolve(x.Bu)}catch(_){return uc("SyncEngine",`Loading bundle failed with ${_}`),p._failWith(_),Promise.resolve(new Set)}var V}),function(u,l,p){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield KM(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function zL(n,e){return function kL(n,e){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){return function(t,r){const i=Ze(t);return i.persistence.runTransaction("Get named query","readonly",u=>i.Ns.getNamedQuery(u,r))}(yield FD(n),e)}))}(Rr(n=sn(n,Zn)),e).then(t=>t?new Xi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new As(this,t):null)}}class GD extends rx{constructor(e){super(),this.firestore=e}convertBytes(e){return new SE(new wc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return la.forKey(t,this.firestore,null)}}class g1{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new GD(e)}get(e){const t=vg(e);return this._delegate.get(t).then(r=>new ME(this._firestore,new Jl(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=vg(e);return r?(sx("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=vg(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=vg(e);return this._delegate.delete(t),this}}class m1{constructor(e){this._delegate=e}set(e,t,r){const i=vg(e);return r?(sx("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=vg(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=vg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class _g{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new AE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new xE(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=_g.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let u=i.get(t);return u||(u=new _g(e,new GD(e),t),i.set(t,u)),u}}_g.INSTANCES=new WeakMap;class la{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new GD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Oe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new la(t,new Wn(t._delegate,r,new Ke(e)))}static forKey(e,t,r){return new la(t,new Wn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Wy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Wy(this.firestore,RO(this._delegate,e))}catch(t){throw Ts(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,on.m9)(e))instanceof Wn&&OO(this._delegate,e)}set(e,t){t=sx("DocumentReference.set",t);try{return t?a1(this._delegate,e,t):a1(this._delegate,e)}catch(r){throw Ts(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?u1(this._delegate,e):u1(this._delegate,e,t,...r)}catch(i){throw Ts(i,"updateDoc()","DocumentReference.update()")}}delete(){return function _V(n){return qy(sn(n.firestore,Zn),[new Ny(n._key,Rn.none())])}(this._delegate)}onSnapshot(...e){const t=y1(e),r=_1(e,i=>new ME(this.firestore,new Jl(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return c1(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function fV(n){n=sn(n,Wn);const e=sn(n.firestore,Zn),t=Rr(e),r=new zh(e);return function xL(n,e){const t=new Er;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(i,u,l){try{const p=yield function(_,b){const C=Ze(_);return C.persistence.runTransaction("read document","readonly",x=>C.localDocuments.getDocument(x,b))}(i,u);p.isFoundDocument()?l.resolve(p):p.isNoDocument()?l.resolve(null):l.reject(new Oe(he.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const _=jy(p,`Failed to get document '${u} from cache`);l.reject(_)}}),function(i,u,l){return r.apply(this,arguments)})(yield FD(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Jl(e,r,n._key,i,new yg(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function pV(n){n=sn(n,Wn);const e=sn(n.firestore,Zn);return UO(Rr(e),n._key,{source:"server"}).then(t=>ix(e,n,t))}(this._delegate):function hV(n){n=sn(n,Wn);const e=sn(n.firestore,Zn);return UO(Rr(e),n._key).then(t=>ix(e,n,t))}(this._delegate),t.then(r=>new ME(this.firestore,new Jl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new la(this.firestore,this._delegate.withConverter(e?_g.getInstance(this.firestore,e):null))}}function Ts(n,e,t){return n.message=n.message.replace(e,t),n}function y1(n){for(const e of n)if("object"==typeof e&&!ox(e))return e;return{}}function _1(n,e){var t,r;let i;return i=ox(n[0])?n[0]:ox(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{i.next&&i.next(e(u))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class ME{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new la(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return o1(this._delegate,e._delegate)}}class xE extends ME{data(e){const t=this._delegate.data(e);return function VN(n,e){n||st()}(void 0!==t),t}}class As{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new GD(e)}where(e,t,r){try{return new As(this.firestore,$h(this._delegate,function tV(n,e,t){const r=e,i=HD("where",n);return new eV(i,r,t)}(e,t,r)))}catch(i){throw Ts(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new As(this.firestore,$h(this._delegate,function rV(n,e="asc"){const t=e,r=HD("orderBy",n);return new nV(r,t)}(e,t)))}catch(r){throw Ts(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new As(this.firestore,$h(this._delegate,function iV(n){return SO("limit",n),new JO("limit",n,"F")}(e)))}catch(t){throw Ts(t,"limit()","Query.limit()")}}limitToLast(e){try{return new As(this.firestore,$h(this._delegate,function sV(n){return SO("limitToLast",n),new JO("limitToLast",n,"L")}(e)))}catch(t){throw Ts(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new As(this.firestore,$h(this._delegate,function oV(...n){return new XO("startAt",n,!0)}(...e)))}catch(t){throw Ts(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new As(this.firestore,$h(this._delegate,function aV(...n){return new XO("startAfter",n,!1)}(...e)))}catch(t){throw Ts(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new As(this.firestore,$h(this._delegate,function uV(...n){return new e1("endBefore",n,!1)}(...e)))}catch(t){throw Ts(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new As(this.firestore,$h(this._delegate,function cV(...n){return new e1("endAt",n,!0)}(...e)))}catch(t){throw Ts(t,"endAt()","Query.endAt()")}}isEqual(e){return HM(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function mV(n){n=sn(n,Xi);const e=sn(n.firestore,Zn),t=Rr(e),r=new zh(e);return function NL(n,e){const t=new Er;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(i,u,l){try{const p=yield TD(i,u,!0),_=new yO(u,p.Hi),b=_.Wu(p.documents),C=_.applyChanges(b,!1);l.resolve(C.snapshot)}catch(p){const _=jy(p,`Failed to execute query '${u} against cache`);l.reject(_)}}),function(i,u,l){return r.apply(this,arguments)})(yield FD(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Gh(e,r,n,i))}(this._delegate):"server"===e?.source?function yV(n){n=sn(n,Xi);const e=sn(n.firestore,Zn),t=Rr(e),r=new zh(e);return BO(t,n._query,{source:"server"}).then(i=>new Gh(e,r,n,i))}(this._delegate):function gV(n){n=sn(n,Xi);const e=sn(n.firestore,Zn),t=Rr(e),r=new zh(e);return QO(n._query),BO(t,n._query).then(i=>new Gh(e,r,n,i))}(this._delegate),t.then(r=>new ax(this.firestore,new Gh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=y1(e),r=_1(e,i=>new ax(this.firestore,new Gh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return c1(this._delegate,t,r)}withConverter(e){return new As(this.firestore,this._delegate.withConverter(e?_g.getInstance(this.firestore,e):null))}}class kV{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new xE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class ax{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new As(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new xE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new kV(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new xE(this._firestore,r))})}isEqual(e){return o1(this._delegate,e._delegate)}}class Wy extends As{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new la(this.firestore,e):null}doc(e){try{return new la(this.firestore,void 0===e?OD(this._delegate):OD(this._delegate,e))}catch(t){throw Ts(t,"doc()","CollectionReference.doc()")}}add(e){return function vV(n,e){const t=sn(n.firestore,Zn),r=OD(n),i=$D(n.converter,e);return qy(t,[UD(gg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Rn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new la(this.firestore,t))}isEqual(e){return OO(this._delegate,e._delegate)}withConverter(e){return new Wy(this.firestore,this._delegate.withConverter(e?_g.getInstance(this.firestore,e):null))}}function vg(n){return sn(n,Wn)}class ux{constructor(...e){this._delegate=new Ql(...e)}static documentId(){return new ux(Hn.keyField().canonicalString())}isEqual(e){return(e=(0,on.m9)(e))instanceof Ql&&this._delegate._internalPath.isEqual(e._internalPath)}}class Eg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function CV(){return new JM("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Eg(e)}static delete(){const e=function DV(){return new DE("deleteField")}();return e._methodName="FieldValue.delete",new Eg(e)}static arrayUnion(...e){const t=function TV(...n){return new KL("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Eg(t)}static arrayRemove(...e){const t=function AV(...n){return new YL("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Eg(t)}static increment(e){const t=function SV(n){return new QL("increment",n)}(e);return t._methodName="FieldValue.increment",new Eg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const PV={Firestore:p1,GeoPoint:LD,Timestamp:Fn,Blob:SE,Transaction:g1,WriteBatch:m1,DocumentReference:la,DocumentSnapshot:ME,Query:As,QueryDocumentSnapshot:xE,QuerySnapshot:ax,CollectionReference:Wy,FieldPath:ux,FieldValue:Eg,setLogLevel:function OV(n){!function LN(n){Ll.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function v1(n,e){return function VV(n,e=fA.z){return new yi.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function cx(n,e){return v1(n,e).pipe((0,at.U)(t=>({payload:t,type:"query"})))}function zD(n,e){return cx(n,e).pipe(Ru(void 0),Gm(),(0,at.U)(([t,r])=>{const i=r.payload.docChanges(),u=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,p)=>{const _=i.find(C=>C.doc.ref.isEqual(l.ref)),b=t?.payload.docs.find(C=>C.ref.isEqual(l.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(l.metadata)||!_&&b&&JSON.stringify(b.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:p,newIndex:p,type:"modified",doc:l}})}),u}))}function E1(n,e,t){return zD(n,t).pipe(Rd((r,i)=>function BV(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function jV(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return lx(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return lx(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return lx(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(u=>u.payload),e),[]),function zb(n,e=Ks.y){return n=n??pA,(0,Bn.e)((t,r)=>{let i,u=!0;t.subscribe((0,L.x)(r,l=>{const p=e(l);(u||!n(i,p))&&(u=!1,i=p,r.next(l))}))})}(),(0,at.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function lx(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function w1(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function LV(n){(function FV(n,e){n.INTERNAL.registerComponent(new yh.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},PV)))})(n,(e,t)=>new p1(e,t,new RV)),n.registerVersion("@firebase/firestore-compat","0.2.3")}(qb.Z);class b1{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=zD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,at.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Ru(void 0),Gm(),_i(([r,i])=>i.length>0||!r),(0,at.U)(([r,i])=>i),xr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Rd((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=w1(e);return E1(this.query,t,this.afs.schedulers.outsideAngular).pipe(xr.iC)}valueChanges(e={}){return cx(this.query,this.afs.schedulers.outsideAngular).pipe((0,at.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),xr.iC)}get(e){return(0,vn.D)(this.query.get(e)).pipe(xr.iC)}add(e){return this.ref.add(e)}doc(e){return new I1(this.ref.doc(e),this.afs)}}class I1{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:u}=T1(r,t);return new b1(i,u,this.afs)}snapshotChanges(){return function UV(n,e){return v1(n,e).pipe(Ru(void 0),Gm(),(0,at.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(xr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,at.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,vn.D)(this.ref.get(e)).pipe(xr.iC)}}class HV{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?zD(this.query,this.afs.schedulers.outsideAngular).pipe((0,at.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),_i(t=>t.length>0),xr.iC):zD(this.query,this.afs.schedulers.outsideAngular).pipe(xr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Rd((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=w1(e);return E1(this.query,t,this.afs.schedulers.outsideAngular).pipe(xr.iC)}valueChanges(e={}){return cx(this.query,this.afs.schedulers.outsideAngular).pipe((0,at.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),xr.iC)}get(e){return(0,vn.D)(this.query.get(e)).pipe(xr.iC)}}const D1=new d.OlP("angularfire2.enableFirestorePersistence"),C1=new d.OlP("angularfire2.firestore.persistenceSettings"),$V=new d.OlP("angularfire2.firestore.settings"),GV=new d.OlP("angularfire2.firestore.use-emulator");function T1(n,e=(t=>t)){return{query:e(n),ref:n}}let A1=(()=>{class n{constructor(t,r,i,u,l,p,_,b,C,x,V,B,G,re,ye,je,nt){this.schedulers=_;const ft=(0,no.on)(t,p,r),ct=C;x&&Ap(ft,p,V,G,re,ye,B,je),[this.firestore,this.persistenceEnabled$]=(0,no.cc)(`${ft.name}.firestore`,"AngularFirestore",ft.name,()=>{const Rt=p.runOutsideAngular(()=>ft.firestore());if(u&&Rt.settings(u),ct&&Rt.useEmulator(...ct),i&&!Mc(l)){const Ft=()=>{try{return(0,vn.D)(Rt.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(an){return typeof console<"u"&&console.warn(an),Qe(!1)}};return[Rt,p.runOutsideAngular(Ft)]}return[Rt,Qe(!1)]},[u,ct,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=T1(i,r),p=this.schedulers.ngZone.run(()=>u);return new b1(p,l,this)}collectionGroup(t,r){const i=r||(l=>l),u=this.firestore.collectionGroup(t);return new HV(i(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new I1(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(no.Dh),d.LFG(no.xv,8),d.LFG(D1,8),d.LFG($V,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(xr.HU),d.LFG(C1,8),d.LFG(GV,8),d.LFG(Ju,8),d.LFG(At,8),d.LFG(jb,8),d.LFG(Hb,8),d.LFG($b,8),d.LFG(Ml,8),d.LFG(Gb,8),d.LFG(Hm,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),zV=(()=>{class n{constructor(){$v.Z.registerVersion("angularfire",xr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:D1,useValue:!0},{provide:C1,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[A1]}),n})();class S1{}class qV{}const Xl="*";function WV(n,e){return{type:7,name:n,definitions:e,options:{}}}function M1(n,e=null){return{type:4,styles:e,timings:n}}function x1(n,e=null){return{type:2,steps:n,options:e}}function NE(n){return{type:6,styles:n,offset:null}}function dx(n,e,t){return{type:0,name:n,styles:e,options:t}}function N1(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function R1(n){Promise.resolve().then(n)}class RE{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){R1(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class O1{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const u=this.players.length;0==u?R1(()=>this._onFinish()):this.players.forEach(l=>{l.onDone(()=>{++t==u&&this._onFinish()}),l.onDestroy(()=>{++r==u&&this._onDestroy()}),l.onStart(()=>{++i==u&&this._onStart()})}),this.totalTime=this.players.reduce((l,p)=>Math.max(l,p.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const k1=["toast-component",""];function ZV(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",5),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.remove())}),d.TgZ(1,"span",6),d._uU(2,"\xd7"),d.qZA()()}}function KV(n,e){if(1&n&&(d.ynx(0),d._uU(1),d.BQk()),2&n){const t=d.oxw(2);d.xp6(1),d.hij("[",t.duplicatesCount+1,"]")}}function YV(n,e){if(1&n&&(d.TgZ(0,"div"),d._uU(1),d.YNc(2,KV,2,1,"ng-container",4),d.qZA()),2&n){const t=d.oxw();d.Tol(t.options.titleClass),d.uIk("aria-label",t.title),d.xp6(1),d.hij(" ",t.title," "),d.xp6(1),d.Q6J("ngIf",t.duplicatesCount)}}function QV(n,e){if(1&n&&d._UZ(0,"div",7),2&n){const t=d.oxw();d.Tol(t.options.messageClass),d.Q6J("innerHTML",t.message,d.oJD)}}function JV(n,e){if(1&n&&(d.TgZ(0,"div",8),d._uU(1),d.qZA()),2&n){const t=d.oxw();d.Tol(t.options.messageClass),d.uIk("aria-label",t.message),d.xp6(1),d.hij(" ",t.message," ")}}function XV(n,e){if(1&n&&(d.TgZ(0,"div"),d._UZ(1,"div",9),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Udp("width",t.width+"%")}}class oU{constructor(e,t){this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){const e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class aU{attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}}class uU{constructor(e){this._overlayRef=e,this.duplicatesCount=0,this._afterClosed=new bn.x,this._activate=new bn.x,this._manualClose=new bn.x,this._resetTimeout=new bn.x,this._countDuplicate=new bn.x}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}}class qD{constructor(e,t,r,i,u,l){this.toastId=e,this.config=t,this.message=r,this.title=i,this.toastType=u,this.toastRef=l,this._onTap=new bn.x,this._onAction=new bn.x,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}}const F1=new d.OlP("ToastConfig");class cU extends aU{constructor(e,t,r){super(),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=r}attachComponentPortal(e,t){const r=this._componentFactoryResolver.resolveComponentFactory(e.component);let i;return i=r.create(e.injector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(i),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(i)),i}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}class lU{constructor(e){this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}}let dU=(()=>{class n{constructor(t){this._document=t}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),this._containerElement=t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ce))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),hU=(()=>{class n{constructor(t,r,i,u){this._overlayContainer=t,this._componentFactoryResolver=r,this._appRef=i,this._document=u,this._paneElements=new Map}create(t,r){return this._createOverlayRef(this.getPaneElement(t,r))}getPaneElement(t="",r){return this._paneElements.get(r)||this._paneElements.set(r,{}),this._paneElements.get(r)[t]||(this._paneElements.get(r)[t]=this._createPaneElement(t,r)),this._paneElements.get(r)[t]}_createPaneElement(t,r){const i=this._document.createElement("div");return i.id="toast-container",i.classList.add(t),i.classList.add("toast-container"),r?r.getContainerElement().appendChild(i):this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalHost(t){return new cU(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new lU(this._createPortalHost(t))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(dU),d.LFG(d._Vd),d.LFG(d.z2F),d.LFG(ce))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),OE=(()=>{class n{constructor(t,r,i,u,l){this.overlay=r,this._injector=i,this.sanitizer=u,this.ngZone=l,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig={...t.default,...t.config},t.config.iconClasses&&(this.toastrConfig.iconClasses={...t.default.iconClasses,...t.config.iconClasses})}show(t,r,i={},u=""){return this._preBuildNotification(u,t,r,this.applyConfig(i))}success(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,r,this.applyConfig(i))}error(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,r,this.applyConfig(i))}info(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,r,this.applyConfig(i))}warning(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,r,this.applyConfig(i))}clear(t){for(const r of this.toasts)if(void 0!==t){if(r.toastId===t)return void r.toastRef.manualClose()}else r.toastRef.manualClose()}remove(t){const r=this._findToast(t);if(!r||(r.activeToast.toastRef.close(),this.toasts.splice(r.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const i=this.toasts[this.currentlyActive].toastRef;i.isInactive()||(this.currentlyActive=this.currentlyActive+1,i.activate())}return!0}findDuplicate(t="",r="",i,u){const{includeTitleDuplicates:l}=this.toastrConfig;for(const p of this.toasts){const _=l&&p.title===t;if((!l||_)&&p.message===r)return p.toastRef.onDuplicate(i,u),p}return null}applyConfig(t={}){return{...this.toastrConfig,...t}}_findToast(t){for(let r=0;r<this.toasts.length;r++)if(this.toasts[r].toastId===t)return{index:r,activeToast:this.toasts[r]};return null}_preBuildNotification(t,r,i,u){return u.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,r,i,u)):this._buildNotification(t,r,i,u)}_buildNotification(t,r,i,u){if(!u.toastComponent)throw new Error("toastComponent required");const l=this.findDuplicate(i,r,this.toastrConfig.resetTimeoutOnDuplicate&&u.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&i||r)&&this.toastrConfig.preventDuplicates&&null!==l)return l;this.previousToastMessage=r;let p=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(p=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const _=this.overlay.create(u.positionClass,this.overlayContainer);this.index=this.index+1;let b=r;r&&u.enableHtml&&(b=this.sanitizer.sanitize(d.q3G.HTML,r));const C=new uU(_),x=new qD(this.index,u,b,i,t,C),B=d.zs3.create({providers:[{provide:qD,useValue:x}],parent:this._injector}),G=new oU(u.toastComponent,B),re=_.attach(G,u.newestOnTop);C.componentInstance=re.instance;const ye={toastId:this.index,title:i||"",message:r||"",toastRef:C,onShown:C.afterActivate(),onHidden:C.afterClosed(),onTap:x.onTap(),onAction:x.onAction(),portal:re};return p||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{ye.toastRef.activate()})),this.toasts.push(ye),ye}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(F1),d.LFG(hU),d.LFG(d.zs3),d.LFG(Jc),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const fU={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",payload:null,toastComponent:(()=>{class n{constructor(t,r,i){this.toastrService=t,this.toastPackage=r,this.ngZone=i,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(u=>{this.duplicatesCount=u})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state={...this.state,value:"active"},!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state={...this.state,value:"active"},this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state={...this.state,value:"removed"},this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&"extendedTimeOut"!==this.options.disableTimeOut&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),r)):this.timeout=setTimeout(()=>t(),r)}outsideInterval(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),r)):this.intervalId=setInterval(()=>t(),r)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(OE),d.Y36(qD),d.Y36(d.R0b))},n.\u0275cmp=d.Xpm({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(t,r){1&t&&d.NdJ("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),2&t&&(d.d8E("@flyInOut",r.state),d.Tol(r.toastClasses),d.Udp("display",r.displayStyle))},attrs:k1,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(t,r){1&t&&(d.YNc(0,ZV,3,0,"button",0),d.YNc(1,YV,3,5,"div",1),d.YNc(2,QV,1,3,"div",2),d.YNc(3,JV,2,4,"div",3),d.YNc(4,XV,2,2,"div",4)),2&t&&(d.Q6J("ngIf",r.options.closeButton),d.xp6(1),d.Q6J("ngIf",r.title),d.xp6(1),d.Q6J("ngIf",r.message&&r.options.enableHtml),d.xp6(1),d.Q6J("ngIf",r.message&&!r.options.enableHtml),d.xp6(1),d.Q6J("ngIf",r.options.progressBar))},dependencies:[cn],encapsulation:2,data:{animation:[WV("flyInOut",[dx("inactive",NE({opacity:0})),dx("active",NE({opacity:1})),dx("removed",NE({opacity:0})),N1("inactive => active",M1("{{ easeTime }}ms {{ easing }}")),N1("active => removed",M1("{{ easeTime }}ms {{ easing }}"))])]}}),n})()};let fx,pU=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[{provide:F1,useValue:{default:fU,config:t}}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[ri]}),n})();class wg{constructor(e,t){this.firestore=e,this.toastr=t}uploadClient(e){var t=this;return(0,Ee.Z)(function*(){let r={...e},i=t.firestore.createId();r.id=i,r.favorites=new Array,yield t.firestore.collection("users").doc(i).set(r)})()}createUsersObserver(e){return this.usersFirebase=this.firestore.collection("users",t=>t.where("id","==",e.id)),this.usersObservable=this.usersFirebase.valueChanges(),this.usersObservable}getUsers(){var e=this;return(0,Ee.Z)(function*(){let t;e.usersList=new Array,yield e.firestore.collection("users").ref.get().then(i=>i.forEach(u=>{t=u.data(),e.usersList.push(t)}))})()}getUserByMail(e){return this.firestore.collection("users",t=>t.where("email","==",e)).snapshotChanges()}addNewFavorite(e,t){e.favorites.findIndex(i=>i.id===t.id)<0?(e.favorites.push(t),this.firestore.collection("users").doc(e.id).update({favorites:e.favorites}).then(()=>{this.toastr.success(`${t.name} was added to favorites`,"Nice!")}).catch(u=>{console.log(u)})):this.toastr.error(`${t.name} is already in your favorites!`,"Error!")}delteFavorite(e,t){let r=e.favorites.findIndex(i=>i.id===t.id);r>-1?(e.favorites.splice(r,1),this.firestore.collection("users").doc(e.id).update({favorites:e.favorites}).then(()=>{this.toastr.success(`${t.name} was deleted of your favorites`,"Nice!")}).catch(u=>{console.log(u)})):this.toastr.error(`${t.name} is not in your favorites!`,"Error!")}static#e=this.\u0275fac=function(t){return new(t||wg)(d.LFG(A1),d.LFG(OE))};static#t=this.\u0275prov=d.Yz7({token:wg,factory:wg.\u0275fac,providedIn:"root"})}class ed{constructor(e,t,r,i,u){this.angularFireAuth=e,this.fireAuth=t,this.router=r,this.userService=i,this.toast=u,this.isLoggedIn=!1}createUser(e){return new Promise((t,r)=>{this.angularFireAuth.createUserWithEmailAndPassword(e.email,e.password).then(i=>{this.toast.success("Account successfully created!.","Welcome!",{positionClass:"toast-top-center"}),this.isLoggedIn=!0,this.router.navigateByUrl("weather"),this.userService.uploadClient(e),this.setLoggedInUser(e.email)},i=>r(i))})}signinUser(e){return this.fireAuth.signInWithEmailAndPassword(e.email,e.password).then(t=>{this.isLoggedIn=!0,this.router.navigateByUrl("weather"),this.setLoggedInUser(e.email)}).catch(t=>{this.toast.error("Incorrect email or password, try again.","ERROR",{positionClass:"toast-top-center"})})}signoutUser(){return new Promise((e,t)=>{this.angularFireAuth.signOut().then(()=>{this.router.navigateByUrl("login"),this.isLoggedIn=!1,this.userLoggedIn={}}).catch(()=>{t()})})}userDetails(){return this.angularFireAuth.user}setLoggedInUser(e){this.userService.getUsers().then(()=>{this.userService.usersList.forEach(t=>{t.email===e&&(this.userLoggedIn=t)}),console.log(this.userLoggedIn)})}static#e=this.\u0275fac=function(t){return new(t||ed)(d.LFG(Ju),d.LFG(Ju),d.LFG(_r),d.LFG(wg),d.LFG(OE))};static#t=this.\u0275prov=d.Yz7({token:ed,factory:ed.\u0275fac,providedIn:"root"})}try{fx=typeof Intl<"u"&&Intl.v8BreakIterator}catch{fx=!1}let L1=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function tf(n){return n===hd}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!fx)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.Lbi))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function mx(n,e=0){return function IU(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function U1(n){return Array.isArray(n)?n:[n]}var TU=P(5032);function AU(n){return(0,Bn.e)((e,t)=>{(0,dt.Xf)(n).subscribe((0,L.x)(t,()=>t.complete(),TU.Z)),!t.closed&&e.subscribe(t)})}const B1=new Set;let Ky,SU=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):xU}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function MU(n){if(!B1.has(n))try{Ky||(Ky=document.createElement("style"),Ky.setAttribute("type","text/css"),document.head.appendChild(Ky)),Ky.sheet&&(Ky.sheet.insertRule(`@media ${n} {body{ }}`,0),B1.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(L1))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function xU(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let NU=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new bn.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return j1(U1(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let u=se(j1(U1(t)).map(l=>this._registerQuery(l).observable));return u=St(u.pipe(vo(1)),u.pipe(function DU(n){return _i((e,t)=>n<=t)}(1),function CU(n,e=fA.z){return(0,Bn.e)((t,r)=>{let i=null,u=null,l=null;const p=()=>{if(i){i.unsubscribe(),i=null;const b=u;u=null,r.next(b)}};function _(){const b=l+n,C=e.now();if(C<b)return i=this.schedule(void 0,b-C),void r.add(i);p()}t.subscribe((0,L.x)(r,b=>{u=b,l=e.now(),i||(i=e.schedule(_,n),r.add(i))},()=>{p(),r.complete()},void 0,()=>{u=i=null}))})}(0))),u.pipe((0,at.U)(l=>{const p={matches:!1,breakpoints:{}};return l.forEach(({matches:_,query:b})=>{p.matches=p.matches||_,p.breakpoints[b]=_}),p}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),u={observable:new yi.y(l=>{const p=_=>this._zone.run(()=>l.next(_));return r.addListener(p),()=>{r.removeListener(p)}}).pipe(Ru(r),(0,at.U)(({matches:l})=>({query:t,matches:l})),AU(this._destroySubject)),mql:r};return this._queries.set(t,u),u}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(SU),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function j1(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}const z1="cdk-high-contrast-black-on-white",q1="cdk-high-contrast-white-on-black",yx="cdk-high-contrast-active";let BU=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=(0,d.f3M)(NU).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,u=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),u){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(yx,z1,q1),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(yx,z1):2===r&&t.add(yx,q1)}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(L1),d.LFG(ce))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),W1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const GU=new d.OlP("mat-sanity-checks",{providedIn:"root",factory:function $U(){return!0}});let zU=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!function yU(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(BU),d.LFG(GU,8),d.LFG(ce))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[W1,W1]}),n})();function qU(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}const QU=["determinateSpinner"];function JU(n,e){if(1&n&&(d.O4$(),d.TgZ(0,"svg",11),d._UZ(1,"circle",12),d.qZA()),2&n){const t=d.oxw();d.uIk("viewBox",t._viewBox()),d.xp6(1),d.Udp("stroke-dasharray",t._strokeCircumference(),"px")("stroke-dashoffset",t._strokeCircumference()/2,"px")("stroke-width",t._circleStrokeWidth(),"%"),d.uIk("r",t._circleRadius())}}const XU=qU(class{constructor(n){this._elementRef=n}},"primary"),e2=new d.OlP("mat-progress-spinner-default-options",{providedIn:"root",factory:function t2(){return{diameter:X1}}}),X1=100;let ek=(()=>{class n extends XU{constructor(t,r,i){super(t),this.mode="mat-spinner"===this._elementRef.nativeElement.nodeName.toLowerCase()?"indeterminate":"determinate",this._value=0,this._diameter=X1,this._noopAnimations="NoopAnimations"===r&&!!i&&!i._forceAnimations,i&&(i.color&&(this.color=this.defaultColor=i.color),i.diameter&&(this.diameter=i.diameter),i.strokeWidth&&(this.strokeWidth=i.strokeWidth))}get value(){return"determinate"===this.mode?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,mx(t)))}get diameter(){return this._diameter}set diameter(t){this._diameter=mx(t)}get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(t){this._strokeWidth=mx(t)}_circleRadius(){return(this.diameter-10)/2}_viewBox(){const t=2*this._circleRadius()+this.strokeWidth;return`0 0 ${t} ${t}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return"determinate"===this.mode?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.QbO,8),d.Y36(e2))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(t,r){if(1&t&&d.Gf(QU,5),2&t){let i;d.iGM(i=d.CRH())&&(r._determinateCircle=i.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:12,hostBindings:function(t,r){2&t&&(d.uIk("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow","determinate"===r.mode?r.value:null)("mode",r.mode),d.Udp("width",r.diameter,"px")("height",r.diameter,"px"),d.ekj("_mat-animation-noopable",r._noopAnimations)("mdc-circular-progress--indeterminate","indeterminate"===r.mode))},inputs:{color:"color",mode:"mode",value:"value",diameter:"diameter",strokeWidth:"strokeWidth"},exportAs:["matProgressSpinner"],features:[d.qOj],decls:14,vars:11,consts:[["circle",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["determinateSpinner",""],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(t,r){if(1&t&&(d.YNc(0,JU,2,8,"ng-template",null,0,d.W1O),d.TgZ(2,"div",1,2),d.O4$(),d.TgZ(4,"svg",3),d._UZ(5,"circle",4),d.qZA()(),d.kcU(),d.TgZ(6,"div",5)(7,"div",6)(8,"div",7),d.GkF(9,8),d.qZA(),d.TgZ(10,"div",9),d.GkF(11,8),d.qZA(),d.TgZ(12,"div",10),d.GkF(13,8),d.qZA()()()),2&t){const i=d.MAs(1);d.xp6(4),d.uIk("viewBox",r._viewBox()),d.xp6(1),d.Udp("stroke-dasharray",r._strokeCircumference(),"px")("stroke-dashoffset",r._strokeDashOffset(),"px")("stroke-width",r._circleStrokeWidth(),"%"),d.uIk("r",r._circleRadius()),d.xp6(4),d.Q6J("ngTemplateOutlet",i),d.xp6(2),d.Q6J("ngTemplateOutlet",i),d.xp6(2),d.Q6J("ngTemplateOutlet",i)}},dependencies:[Ur],styles:["@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-color-1-fade-in-out{from{opacity:.99}25%{opacity:.99}26%{opacity:0}89%{opacity:0}90%{opacity:.99}to{opacity:.99}}@keyframes mdc-circular-progress-color-2-fade-in-out{from{opacity:0}15%{opacity:0}25%{opacity:.99}50%{opacity:.99}51%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-3-fade-in-out{from{opacity:0}40%{opacity:0}50%{opacity:.99}75%{opacity:.99}76%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-4-fade-in-out{from{opacity:0}65%{opacity:0}75%{opacity:.99}90%{opacity:.99}to{opacity:0}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}.mdc-circular-progress{display:inline-flex;position:relative;direction:ltr;line-height:0;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-1{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-1-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-2{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-2-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-3{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-3-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-4{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-4-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--closed{opacity:0}.mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, transparent)}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-1 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-2 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-3 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-4 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}"],encapsulation:2,changeDetection:0}),n})(),r2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[ri,zU]}),n})();function i2(n,e){if(1&n&&(d.TgZ(0,"div",12),d._uU(1),d.qZA()),2&n){const t=d.oxw().$implicit;d.xp6(1),d.hij(" ",t.message," ")}}function s2(n,e){if(1&n&&(d.ynx(0),d.YNc(1,i2,2,1,"div",11),d.BQk()),2&n){const t=e.$implicit,r=d.oxw(2);d.xp6(1),d.Q6J("ngIf",r.loginForm.get("email").hasError(t.type)&&(r.loginForm.get("email").dirty||r.loginForm.get("email").touched))}}function o2(n,e){if(1&n&&(d.TgZ(0,"div",12),d._uU(1),d.qZA()),2&n){const t=d.oxw().$implicit;d.xp6(1),d.hij(" ",t.message," ")}}function a2(n,e){if(1&n&&(d.ynx(0),d.YNc(1,o2,2,1,"div",11),d.BQk()),2&n){const t=e.$implicit,r=d.oxw(2);d.xp6(1),d.Q6J("ngIf",r.loginForm.get("password").hasError(t.type)&&(r.loginForm.get("password").dirty||r.loginForm.get("password").touched))}}function u2(n,e){if(1&n&&d._UZ(0,"input",13),2&n){const t=d.oxw(2);d.s9C("value",t.submitMessage),d.Q6J("disabled",!t.loginForm.valid)}}function c2(n,e){1&n&&(d.TgZ(0,"div",14),d._UZ(1,"mat-spinner"),d.qZA())}function l2(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"a",15),d.NdJ("click",function(){d.CHM(t);const i=d.oxw(2);return d.KtG(i.changeFormState())}),d._uU(1,"Don't have an account? Register."),d.qZA()}}function d2(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"a",15),d.NdJ("click",function(){d.CHM(t);const i=d.oxw(2);return d.KtG(i.changeFormState())}),d._uU(1,"Already have an account? Login."),d.qZA()}}function h2(n,e){if(1&n&&(d.TgZ(0,"div")(1,"p",3)(2,"span",4),d._uU(3),d.qZA()(),d._UZ(4,"input",5),d.YNc(5,s2,2,1,"ng-container",6),d._UZ(6,"input",7),d.YNc(7,a2,2,1,"ng-container",6),d.YNc(8,u2,1,2,"input",8),d.YNc(9,c2,2,0,"div",9),d.YNc(10,l2,2,0,"a",10),d.YNc(11,d2,2,0,"a",10),d.qZA()),2&n){const t=d.oxw();d.xp6(3),d.hij(" ",t.title,""),d.xp6(2),d.Q6J("ngForOf",t.error_msg.email),d.xp6(2),d.Q6J("ngForOf",t.error_msg.password),d.xp6(1),d.Q6J("ngIf",!t.loading),d.xp6(1),d.Q6J("ngIf",t.loading),d.xp6(1),d.Q6J("ngIf",!t.loading&&!t.isSignUp),d.xp6(1),d.Q6J("ngIf",!t.loading&&t.isSignUp)}}function f2(n,e){1&n&&(d.TgZ(0,"div",16),d._UZ(1,"mat-spinner"),d.qZA())}class ZD{constructor(e,t,r){this.authService=e,this.router=t,this.formBuilder=r,this.loading=!1,this.isSignUp=!1,this.title="Sign In",this.submitMessage="Login",this.error_msg={email:[{type:"required",message:"Email is required."},{type:"pattern",message:"Invalid email."}],password:[{type:"required",message:"Password is required."},{type:"minlength",message:"Minimun of 6 characters."}]}}ngOnInit(){this.loginForm=this.formBuilder.group({email:new Za("",Ei.compose([Ei.required,Ei.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")])),password:new Za("",Ei.compose([Ei.minLength(6),Ei.required]))})}formSubmit(e){this.loading=!0,setTimeout(()=>{this.isSignUp?this.authService.createUser(e).then(t=>{},t=>{console.log(t)}):this.subscription=this.authService.signinUser(e).then(t=>{this.loading=!1})},2e3)}changeFormState(){this.loading=!0,setTimeout(()=>{this.isSignUp=!this.isSignUp,this.title="Sign In"===this.title?"Sing Up":"Sign In",this.submitMessage="Sign In"===this.title?"Login":"Register",this.loading=!1},500)}test(){this.loginForm.setValue({email:"test@mail.com",password:"123456"})}static#e=this.\u0275fac=function(t){return new(t||ZD)(d.Y36(ed),d.Y36(_r),d.Y36(Al))};static#t=this.\u0275cmp=d.Xpm({type:ZD,selectors:[["app-login"]],decls:3,vars:3,consts:[[1,"login-form",3,"formGroup","ngSubmit"],[4,"ngIf"],["class","form-spinner w-100",4,"ngIf"],[1,"login-panel-title"],[1,"font-weight-bold"],["formControlName","email","type","email","required","true","placeholder","Email","name","ec",1,"login-panel-input"],[4,"ngFor","ngForOf"],["formControlName","password","type","password","required","true","placeholder","Password","name","pc",1,"login-panel-input"],["type","submit","expand","block","name","Login","class","btn btn-login-submit",3,"disabled","value",4,"ngIf"],["class","login-form-spinner",4,"ngIf"],["class","form-login-register-link",3,"click",4,"ngIf"],["class","login-form-validation-error",4,"ngIf"],[1,"login-form-validation-error"],["type","submit","expand","block","name","Login",1,"btn","btn-login-submit",3,"disabled","value"],[1,"login-form-spinner"],[1,"form-login-register-link",3,"click"],[1,"form-spinner","w-100"]],template:function(t,r){1&t&&(d.TgZ(0,"form",0),d.NdJ("ngSubmit",function(){return r.formSubmit(r.loginForm.value)}),d.YNc(1,h2,12,7,"div",1),d.YNc(2,f2,2,0,"div",2),d.qZA()),2&t&&(d.Q6J("formGroup",r.loginForm),d.xp6(1),d.Q6J("ngIf",!r.loading),d.xp6(1),d.Q6J("ngIf",r.loading))},dependencies:[hi,cn,lp,uh,z_,np,dv,hp,Dm,ek],styles:[".login-form-validation-error[_ngcontent-%COMP%]{color:red;font-weight:700;border:2px solid red;background-color:#fff;width:calc(100% - 2rem);margin:1rem;text-align:center}.form-login-register-link[_ngcontent-%COMP%]{text-decoration:underline!important;text-align:center;display:block;color:#007bff!important}.form-login-register-link[_ngcontent-%COMP%]:hover{cursor:pointer}.login-form[_ngcontent-%COMP%]{box-shadow:0 0 1rem #000;min-height:10rem;margin:2rem auto;padding:.5rem;border:8px solid black;border-radius:6%;background-color:#fcd462;overflow-x:hidden;overflow-y:auto;width:30rem}.btn[_ngcontent-%COMP%]{text-align:center;border:2px solid black;border-radius:2rem;font-weight:700;box-shadow:0 8px 15px #0000001a;transition:all .3s ease 0s}.btn-login-submit[_ngcontent-%COMP%]{display:block;margin:1rem auto;min-width:1px;padding:.5rem;cursor:pointer}.btn-login-submit[_ngcontent-%COMP%]:hover:hover{transform:translateY(+7px);box-shadow:0 15px 20px #2ee59d66}.login-submit[_ngcontent-%COMP%]:focus{background:white;color:#000;transition:.25s background ease-in}.login-form-input[_ngcontent-%COMP%]{border:0 solid;border-bottom:1px solid rgba(white,.5);color:#000;display:block;margin:1rem;padding:.5rem;transition:.25s background ease-in;width:calc(100% - 2rem)}.login-form-input[_ngcontent-%COMP%]:focus{background:white;color:#000;transition:.25s background ease-in}.login-form-title[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;margin:0 auto;max-width:50%;padding:.5rem;text-align:center}.login-form-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:2rem}.mat-mdc-progress-spinner[_ngcontent-%COMP%]{--mdc-circular-progress-active-indicator-color: black}.login-panel-title[_ngcontent-%COMP%]{margin:2rem auto;text-align:center;box-shadow:0 0 1rem #000;padding:.5rem;border:2px solid black;border-radius:2rem;background-color:#fff;width:50%}.login-panel-input[_ngcontent-%COMP%]{width:60%;border:2px solid black;padding:.375rem .75rem;transition:.25s background ease-in;width:calc(100% - 2rem);margin:1rem auto;display:block}.form-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:2rem}"]})}function p2(n,e){1&n&&(d.TgZ(0,"p",3),d._uU(1,"Favorites \u{1f320}"),d.qZA())}function g2(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",6)(1,"div",7)(2,"div",8),d._uU(3),d.qZA(),d.TgZ(4,"div",9),d._UZ(5,"hr"),d.qZA(),d.TgZ(6,"div",10)(7,"button",11),d.NdJ("click",function(){const u=d.CHM(t).$implicit,l=d.oxw(2);return d.KtG(l.checkCurrentWeather(u))}),d._uU(8," Check current weather \u{1f50e} "),d.qZA(),d.TgZ(9,"button",12),d._uU(10,"Create checker \u{1f514}"),d.qZA(),d.TgZ(11,"button",13),d.NdJ("click",function(){const u=d.CHM(t).$implicit,l=d.oxw(2);return d.KtG(l.delete(u))}),d._uU(12," Delete \u{1f5d1}\ufe0f "),d.qZA()()()()}if(2&n){const t=e.$implicit;d.xp6(3),d.AsE(" City ",t.name,", Country: ",t.sys.country," ")}}function m2(n,e){if(1&n&&(d.TgZ(0,"div",4),d.YNc(1,g2,13,2,"div",5),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngForOf",t.user.favorites)}}function y2(n,e){1&n&&(d.TgZ(0,"div",9)(1,"div",7)(2,"div",14),d._uU(3," \xa1You don't have favorites, try to add one! "),d.qZA()()())}class FE{constructor(e,t){this.usersService=e,this.authService=t,this.checkCurrentEvent=new d.vpe,this.generateInitialData()}checkFavorites(){this.subscription=this.usersService.createUsersObserver(this.authService.userLoggedIn).subscribe({next:e=>{let t;this.generateInitialData(),t=e.map(function(r,i){return r}),t[0].favorites.forEach(r=>{this.user.favorites.push(r)}),this.deleteRepetadFavorites()},error:e=>{console.log(e)}})}stopSubscription(){null!=this.subscription&&this.subscription.unsubscribe()}generateInitialData(){this.user={},this.user.favorites=new Array,this.user.favorites.push({name:"",sys:{country:""}})}deleteRepetadFavorites(){this.user.favorites=this.user.favorites.filter(e=>{if(""!==e.name)return e}),this.user.favorites=this.user.favorites.filter((e,t,r)=>t===r.findIndex(i=>i.id===e.id))}checkCurrentWeather(e){let t={lat:0,lon:0};t.lat=e.coord.lat,t.lon=e.coord.lon,this.checkCurrentEvent.emit(t)}delete(e){this.usersService.delteFavorite(this.authService.userLoggedIn,e)}static#e=this.\u0275fac=function(t){return new(t||FE)(d.Y36(wg),d.Y36(ed))};static#t=this.\u0275cmp=d.Xpm({type:FE,selectors:[["app-favorites"]],inputs:{visible:"visible"},outputs:{checkCurrentEvent:"checkCurrentEvent"},decls:3,vars:3,consts:[["class","search-panel-text w-100",4,"ngIf"],["class","search-results",4,"ngIf"],["class","row",4,"ngIf"],[1,"search-panel-text","w-100"],[1,"search-results"],["class","row favorite-card",4,"ngFor","ngForOf"],[1,"row","favorite-card"],[1,"col-12"],[1,"row","font-weight-bold","justify-content-center","text-size-large"],[1,"row"],[1,"row","justify-content-between"],[1,"btn","btn-search-again",3,"click"],[1,"btn","btn-checker"],[1,"btn","btn-delete",3,"click"],[1,"row","no-favorites"]],template:function(t,r){1&t&&(d.YNc(0,p2,2,0,"p",0),d.YNc(1,m2,2,1,"div",1),d.YNc(2,y2,4,0,"div",2)),2&t&&(d.Q6J("ngIf",r.visible),d.xp6(1),d.Q6J("ngIf",r.visible&&r.user.favorites.length>0),d.xp6(1),d.Q6J("ngIf",0===r.user.favorites.length))},dependencies:[hi,cn],styles:[".search-panel-text[_ngcontent-%COMP%]{font-size:large;font-weight:700;margin-bottom:.2rem}.btn[_ngcontent-%COMP%]{text-align:center;border:2px solid black;border-radius:2rem;font-weight:700;box-shadow:0 8px 15px #0000001a;transition:all .3s ease 0s}.btn-search-again[_ngcontent-%COMP%]{background-color:#fff;transition:.4s background ease-in}.btn-search-again[_ngcontent-%COMP%]:hover{transform:translateY(-7px);box-shadow:0 15px 20px #2ee59d66;background-color:#90ee90}.btn-delete[_ngcontent-%COMP%]{background-color:#fff;transition:.4s background ease-in}.btn-delete[_ngcontent-%COMP%]:hover{transform:translateY(-7px);box-shadow:0 15px 20px #e1151566;background-color:#f08080}.btn-checker[_ngcontent-%COMP%]{background-color:#fff;transition:.4s background ease-in}.btn-checker[_ngcontent-%COMP%]:hover{transform:translateY(-7px);box-shadow:0 15px 20px #d0d92866;background-color:#ffffe0}.favorite-card[_ngcontent-%COMP%]{background-color:#fff;border:2px solid #242424;margin-bottom:1rem;padding:.5rem}.search-results[_ngcontent-%COMP%]{height:20rem}.text-size-large[_ngcontent-%COMP%]{font-size:large}hr[_ngcontent-%COMP%]{width:100%;border-top:2px solid #242424}.no-favorites[_ngcontent-%COMP%]{font-size:large;font-weight:700;margin-bottom:.2rem;border:2px solid #242424;border-radius:2rem;text-align:center;background-color:#fff}"]})}class KD{constructor(){this.newLocationInformationEvent=new d.vpe}selectedItem(e){this.newLocationInformationEvent.emit(e)}static#e=this.\u0275fac=function(t){return new(t||KD)};static#t=this.\u0275cmp=d.Xpm({type:KD,selectors:[["app-location-detail"]],inputs:{locationInformation:"locationInformation"},outputs:{newLocationInformationEvent:"newLocationInformationEvent"},decls:12,vars:4,consts:[[1,"card","card-size"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"btn","btn-success",3,"click"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),d._uU(3),d.qZA(),d.TgZ(4,"p",3),d._uU(5),d.qZA(),d.TgZ(6,"p",3),d._uU(7),d.qZA(),d.TgZ(8,"p",3),d._uU(9),d.qZA(),d.TgZ(10,"button",4),d.NdJ("click",function(){return r.selectedItem(r.locationInformation)}),d._uU(11," Select "),d.qZA()()()),2&t&&(d.xp6(3),d.hij("Name: ",r.locationInformation.name,""),d.xp6(2),d.hij("Lat: ",r.locationInformation.lat,""),d.xp6(2),d.hij("Lon: ",r.locationInformation.lon,""),d.xp6(2),d.hij("Country: ",r.locationInformation.country,""))},styles:[".card-size[_ngcontent-%COMP%]{width:20rem}"]})}const _2_firebaseConfig={apiKey:"AIzaSyDHtq5VHCMNCg13BusG7NUXH8HxNxkTmiw",authDomain:"weather-app-726d1.firebaseapp.com",projectId:"weather-app-726d1",storageBucket:"weather-app-726d1.appspot.com",messagingSenderId:"1086258121958",appId:"1:1086258121958:web:e07f4f7527afc0f9013f27"};class YD{}class vx{}class td{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),u=i.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(i,u),this.headers.has(u)?this.headers.get(u).push(l):this.headers.set(u,[l])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof td?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new td;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof td?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const u=e.value;if(u){let l=this.headers.get(t);if(!l)return;l=l.filter(p=>-1===u.indexOf(p)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class E2{encodeKey(e){return tk(e)}encodeValue(e){return tk(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const b2=/%(\d[a-f0-9])/gi,I2={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function tk(n){return encodeURIComponent(n).replace(b2,(e,t)=>I2[t]??e)}function QD(n){return`${n}`}class Wh{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new E2,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function w2(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const u=i.indexOf("="),[l,p]=-1==u?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,u)),e.decodeValue(i.slice(u+1))],_=t.get(l)||[];_.push(p),t.set(l,_)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(QD):[QD(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(u=>{t.push({param:r,value:u,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Wh({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(QD(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(QD(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class D2{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function nk(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function rk(n){return typeof Blob<"u"&&n instanceof Blob}function ik(n){return typeof FormData<"u"&&n instanceof FormData}class LE{constructor(e,t,r,i){let u;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function C2(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,u=i):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params)),this.headers||(this.headers=new td),this.context||(this.context=new D2),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const p=t.indexOf("?");this.urlWithParams=t+(-1===p?"?":p<t.length-1?"&":"")+l}}else this.params=new Wh,this.urlWithParams=t}serializeBody(){return null===this.body?null:nk(this.body)||rk(this.body)||ik(this.body)||function T2(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Wh?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||ik(this.body)?null:rk(this.body)?this.body.type||null:nk(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Wh?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,u=void 0!==e.body?e.body:this.body,l=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,p=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let _=e.headers||this.headers,b=e.params||this.params;const C=e.context??this.context;return void 0!==e.setHeaders&&(_=Object.keys(e.setHeaders).reduce((x,V)=>x.set(V,e.setHeaders[V]),_)),e.setParams&&(b=Object.keys(e.setParams).reduce((x,V)=>x.set(V,e.setParams[V]),b)),new LE(t,r,u,{params:b,headers:_,context:C,reportProgress:p,responseType:i,withCredentials:l})}}var Jr=(()=>((Jr=Jr||{})[Jr.Sent=0]="Sent",Jr[Jr.UploadProgress=1]="UploadProgress",Jr[Jr.ResponseHeader=2]="ResponseHeader",Jr[Jr.DownloadProgress=3]="DownloadProgress",Jr[Jr.Response=4]="Response",Jr[Jr.User=5]="User",Jr))();class Ex{constructor(e,t=200,r="OK"){this.headers=e.headers||new td,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class wx extends Ex{constructor(e={}){super(e),this.type=Jr.ResponseHeader}clone(e={}){return new wx({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class JD extends Ex{constructor(e={}){super(e),this.type=Jr.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new JD({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class sk extends Ex{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function bx(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let ok=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let u;if(t instanceof LE)u=t;else{let _,b;_=i.headers instanceof td?i.headers:new td(i.headers),i.params&&(b=i.params instanceof Wh?i.params:new Wh({fromObject:i.params})),u=new LE(t,r,void 0!==i.body?i.body:null,{headers:_,context:i.context,params:b,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const l=Qe(u).pipe(ps(_=>this.handler.handle(_)));if(t instanceof LE||"events"===i.observe)return l;const p=l.pipe(_i(_=>_ instanceof JD));switch(i.observe||"body"){case"body":switch(u.responseType){case"arraybuffer":return p.pipe((0,at.U)(_=>{if(null!==_.body&&!(_.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return _.body}));case"blob":return p.pipe((0,at.U)(_=>{if(null!==_.body&&!(_.body instanceof Blob))throw new Error("Response is not a Blob.");return _.body}));case"text":return p.pipe((0,at.U)(_=>{if(null!==_.body&&"string"!=typeof _.body)throw new Error("Response is not a string.");return _.body}));default:return p.pipe((0,at.U)(_=>_.body))}case"response":return p;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Wh).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,bx(i,r))}post(t,r,i={}){return this.request("POST",t,bx(i,r))}put(t,r,i={}){return this.request("PUT",t,bx(i,r))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(YD))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function ak(n,e){return e(n)}function A2(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const M2=new d.OlP("HTTP_INTERCEPTORS"),VE=new d.OlP("HTTP_INTERCEPTOR_FNS");function x2(){let n=null;return(e,t)=>(null===n&&(n=((0,d.f3M)(M2,{optional:!0})??[]).reduceRight(A2,ak)),n(e,t))}let uk=(()=>{class n extends YD{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=Array.from(new Set(this.injector.get(VE)));this.chain=r.reduceRight((i,u)=>function S2(n,e,t){return(r,i)=>t.runInContext(()=>e(r,u=>n(u,i)))}(i,u,this.injector),ak)}return this.chain(t,r=>this.backend.handle(r))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(vx),d.LFG(d.lqb))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const k2=/^\)\]\}',?\n/;let lk=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new yi.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((B,G)=>i.setRequestHeader(B,G.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const B=t.detectContentTypeHeader();null!==B&&i.setRequestHeader("Content-Type",B)}if(t.responseType){const B=t.responseType.toLowerCase();i.responseType="json"!==B?B:"text"}const u=t.serializeBody();let l=null;const p=()=>{if(null!==l)return l;const B=i.statusText||"OK",G=new td(i.getAllResponseHeaders()),re=function P2(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return l=new wx({headers:G,status:i.status,statusText:B,url:re}),l},_=()=>{let{headers:B,status:G,statusText:re,url:ye}=p(),je=null;204!==G&&(je=typeof i.response>"u"?i.responseText:i.response),0===G&&(G=je?200:0);let nt=G>=200&&G<300;if("json"===t.responseType&&"string"==typeof je){const ft=je;je=je.replace(k2,"");try{je=""!==je?JSON.parse(je):null}catch(ct){je=ft,nt&&(nt=!1,je={error:ct,text:je})}}nt?(r.next(new JD({body:je,headers:B,status:G,statusText:re,url:ye||void 0})),r.complete()):r.error(new sk({error:je,headers:B,status:G,statusText:re,url:ye||void 0}))},b=B=>{const{url:G}=p(),re=new sk({error:B,status:i.status||0,statusText:i.statusText||"Unknown Error",url:G||void 0});r.error(re)};let C=!1;const x=B=>{C||(r.next(p()),C=!0);let G={type:Jr.DownloadProgress,loaded:B.loaded};B.lengthComputable&&(G.total=B.total),"text"===t.responseType&&!!i.responseText&&(G.partialText=i.responseText),r.next(G)},V=B=>{let G={type:Jr.UploadProgress,loaded:B.loaded};B.lengthComputable&&(G.total=B.total),r.next(G)};return i.addEventListener("load",_),i.addEventListener("error",b),i.addEventListener("timeout",b),i.addEventListener("abort",b),t.reportProgress&&(i.addEventListener("progress",x),null!==u&&i.upload&&i.upload.addEventListener("progress",V)),i.send(u),r.next({type:Jr.Sent}),()=>{i.removeEventListener("error",b),i.removeEventListener("abort",b),i.removeEventListener("load",_),i.removeEventListener("timeout",b),t.reportProgress&&(i.removeEventListener("progress",x),null!==u&&i.upload&&i.upload.removeEventListener("progress",V)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ks))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Ix=new d.OlP("XSRF_ENABLED"),dk="XSRF-TOKEN",hk=new d.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>dk}),fk="X-XSRF-TOKEN",pk=new d.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>fk});class gk{}let F2=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=hr(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ce),d.LFG(d.Lbi),d.LFG(hk))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function L2(n,e){const t=n.url.toLowerCase();if(!(0,d.f3M)(Ix)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=(0,d.f3M)(gk).getToken(),i=(0,d.f3M)(pk);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var Or=(()=>((Or=Or||{})[Or.Interceptors=0]="Interceptors",Or[Or.LegacyInterceptors=1]="LegacyInterceptors",Or[Or.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",Or[Or.NoXsrfProtection=3]="NoXsrfProtection",Or[Or.JsonpSupport=4]="JsonpSupport",Or[Or.RequestsMadeViaParent=5]="RequestsMadeViaParent",Or))();function Yy(n,e){return{\u0275kind:n,\u0275providers:e}}function V2(...n){const e=[ok,lk,uk,{provide:YD,useExisting:uk},{provide:vx,useExisting:lk},{provide:VE,useValue:L2,multi:!0},{provide:Ix,useValue:!0},{provide:gk,useClass:F2}];for(const t of n)e.push(...t.\u0275providers);return(0,d.MR2)(e)}const mk=new d.OlP("LEGACY_INTERCEPTOR_FN");function B2({cookieName:n,headerName:e}){const t=[];return void 0!==n&&t.push({provide:hk,useValue:n}),void 0!==e&&t.push({provide:pk,useValue:e}),Yy(Or.CustomXsrfConfiguration,t)}let j2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[V2(Yy(Or.LegacyInterceptors,[{provide:mk,useFactory:x2},{provide:VE,useExisting:mk,multi:!0}]),B2({cookieName:dk,headerName:fk}))]}),n})();class Qy{constructor(e){this.httpClient=e,this.apiKey="bc391b1c779143d522b496dca2e29d5f",this.geoCodingURIByName=`https://api.openweathermap.org/geo/1.0/direct?appid=${this.apiKey}&limit=4`,this.geoCodingURIByZipCode=`https://api.openweathermap.org/geo/1.0/zip?appid=${this.apiKey}`,this.weatherURI=`https://api.openweathermap.org/data/2.5/weather?appid=${this.apiKey}`}getLatLonByName(e){return this.httpClient.get(`${this.geoCodingURIByName}&q=${e}`)}getLatLonByZipCode(e,t){return this.httpClient.get(`${this.geoCodingURIByZipCode}&zip=${e},${t}`)}getWeatherByLatLon(e,t){return this.httpClient.get(`${this.weatherURI}&lat=${e.toString()}&lon=${t.toString()}`)}static#e=this.\u0275fac=function(t){return new(t||Qy)(d.LFG(ok))};static#t=this.\u0275prov=d.Yz7({token:Qy,factory:Qy.\u0275fac,providedIn:"root"})}function H2(n,e){1&n&&(d.TgZ(0,"div",7),d._UZ(1,"mat-spinner"),d.qZA())}function $2(n,e){1&n&&d._UZ(0,"input",17)}function G2(n,e){if(1&n&&(d.TgZ(0,"div",19),d._uU(1),d.qZA()),2&n){const t=d.oxw().$implicit;d.xp6(1),d.hij(" ",t.message," ")}}function z2(n,e){if(1&n&&(d.ynx(0),d.YNc(1,G2,2,1,"div",18),d.BQk()),2&n){const t=e.$implicit,r=d.oxw(2);d.xp6(1),d.Q6J("ngIf",r.searchForm.get("name").hasError(t.type)&&(r.searchForm.get("name").dirty||r.searchForm.get("name").touched))}}function q2(n,e){1&n&&d._UZ(0,"input",20)}function W2(n,e){if(1&n&&(d.TgZ(0,"div",19),d._uU(1),d.qZA()),2&n){const t=d.oxw().$implicit;d.xp6(1),d.hij(" ",t.message," ")}}function Z2(n,e){if(1&n&&(d.ynx(0),d.YNc(1,W2,2,1,"div",18),d.BQk()),2&n){const t=e.$implicit,r=d.oxw(2);d.xp6(1),d.Q6J("ngIf",r.searchForm.get("zipAndCountry").hasError(t.type)&&(r.searchForm.get("zipAndCountry").dirty||r.searchForm.get("zipAndCountry").touched))}}function K2(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",8)(1,"form",9),d.NdJ("ngSubmit",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.formSubmit(i.searchForm.value))}),d.TgZ(2,"div",10)(3,"div",11),d.YNc(4,$2,1,0,"input",12),d.YNc(5,z2,2,1,"ng-container",13),d.YNc(6,q2,1,0,"input",14),d.YNc(7,Z2,2,1,"ng-container",13),d.qZA(),d.TgZ(8,"div",15)(9,"button",16),d._uU(10," \u{1f50e} "),d.qZA()()()()()}if(2&n){const t=d.oxw();d.xp6(1),d.Q6J("formGroup",t.searchForm),d.xp6(3),d.Q6J("ngIf",t.isSearchingByName),d.xp6(1),d.Q6J("ngForOf",t.error_msg.name),d.xp6(1),d.Q6J("ngIf",!t.isSearchingByName),d.xp6(1),d.Q6J("ngForOf",t.error_msg.zipAndCountry),d.xp6(2),d.Q6J("disabled",!t.searchForm.valid)}}class XD{constructor(e,t){this.formBuilder=e,this.weatherService=t,this.isSearchingByName=!0,this.loading=!1,this.responseApiEvent=new d.vpe,this.newSearchStateEvent=new d.vpe,this.error_msg={name:[{type:"required",message:"Name of location is required."},{type:"minLength",message:"Please enter at least 2 characters."}],zipAndCountry:[{type:"required",message:"Zip code and country code separated by coma are required."},{type:"minLength",message:"Please enter at least 2 characters."}]}}ngOnInit(){this.searchForm=this.formBuilder.group({name:new Za("",Ei.compose([Ei.required,Ei.minLength(2)])),zipAndCountry:new Za("",Ei.compose([Ei.required,Ei.minLength(2)]))}),this.switchValidationInputs()}switchSearchState(e){this.isSearchingByName=!!e,this.switchValidationInputs()}switchValidationInputs(){this.isSearchingByName?(this.searchForm.get("zipAndCountry").setErrors(null),this.searchForm.get("zipAndCountry").clearValidators(),this.searchForm.get("zipAndCountry").updateValueAndValidity(),this.searchForm.get("name").addValidators([Ei.required,Ei.minLength(2)]),this.searchForm.get("name").updateValueAndValidity()):(this.searchForm.get("name").setErrors(null),this.searchForm.get("name").clearValidators(),this.searchForm.get("name").updateValueAndValidity(),this.searchForm.get("zipAndCountry").addValidators([Ei.required,Ei.minLength(2)]),this.searchForm.get("zipAndCountry").updateValueAndValidity())}formSubmit(e){if(this.loading=!0,this.isSearchingByName)this.weatherService.getLatLonByName(e.name).subscribe({next:t=>{this.results=t,this.responseApiEvent.emit(this.results),0===this.results.length&&this.newSearchStateEvent.emit("\xa1No location found for your search, please try again!")},error:t=>{this.loading=!1,console.log(t),this.results=[],this.responseApiEvent.emit(this.results),this.newSearchStateEvent.emit("\xa1No location found for your search, please try again!")},complete:()=>{this.loading=!1}});else{let t=e.zipAndCountry.split(",");this.weatherService.getLatLonByZipCode(t[0],t[1]).subscribe({next:r=>{this.results=new Array,this.results.push(r),this.responseApiEvent.emit(this.results)},error:r=>{this.loading=!1,console.log(r),this.results=new Array,this.responseApiEvent.emit(this.results),this.newSearchStateEvent.emit("\xa1No location found for your search, please try again!")},complete:()=>{this.loading=!1}})}this.searchForm.reset()}static#e=this.\u0275fac=function(t){return new(t||XD)(d.Y36(Al),d.Y36(Qy))};static#t=this.\u0275cmp=d.Xpm({type:XD,selectors:[["app-search"]],outputs:{responseApiEvent:"responseApiEvent",newSearchStateEvent:"newSearchStateEvent"},decls:11,vars:2,consts:[[1,"row"],[1,"search-panel-text","w-100"],[1,"btn","btn-name",3,"click"],[1,"search-panel-divisor-text","ml-2"],[1,"btn","btn-zipcode","ml-2",3,"click"],["class","form-spinner w-100",4,"ngIf"],["class","row mt-4",4,"ngIf"],[1,"form-spinner","w-100"],[1,"row","mt-4"],[1,"w-100",3,"formGroup","ngSubmit"],[1,"row","w-100"],[1,"col-10"],["type","text","placeholder","Search by name. E.g: London","class","search-panel-input","formControlName","name",4,"ngIf"],[4,"ngFor","ngForOf"],["type","text","placeholder","Search by zip code and country code. E.g: E14,GB","class","search-panel-input","formControlName","zipAndCountry",4,"ngIf"],[1,"col-2"],["type","submit",1,"btn","search-panel-submit",3,"disabled"],["type","text","placeholder","Search by name. E.g: London","formControlName","name",1,"search-panel-input"],["class","search-panel-form-validation-error",4,"ngIf"],[1,"search-panel-form-validation-error"],["type","text","placeholder","Search by zip code and country code. E.g: E14,GB","formControlName","zipAndCountry",1,"search-panel-input"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"p",1),d._uU(2,"You can search by:"),d.qZA(),d.TgZ(3,"button",2),d.NdJ("click",function(){return r.switchSearchState(!0)}),d._uU(4,"Name"),d.qZA(),d.TgZ(5,"p",3),d._uU(6,"OR"),d.qZA(),d.TgZ(7,"button",4),d.NdJ("click",function(){return r.switchSearchState(!1)}),d._uU(8," Zip code and country code "),d.qZA()(),d.YNc(9,H2,2,0,"div",5),d.YNc(10,K2,11,6,"div",6)),2&t&&(d.xp6(9),d.Q6J("ngIf",r.loading),d.xp6(1),d.Q6J("ngIf",!r.loading))},dependencies:[hi,cn,lp,uh,z_,np,hp,Dm,ek],styles:[".btn-name[_ngcontent-%COMP%]{background-color:#fff;transition:.4s background ease-in}.btn-name[_ngcontent-%COMP%]:hover{background-color:#90ee90}.btn-zipcode[_ngcontent-%COMP%]{background-color:#fff;transition:.4s background ease-in}.btn-zipcode[_ngcontent-%COMP%]:hover{background-color:#90ee90}.search-panel-input[_ngcontent-%COMP%]{width:100%;border:2px solid black;padding:.375rem .75rem}.search-panel-submit[_ngcontent-%COMP%]{width:4rem;border:2px solid black;border-radius:2rem;background-color:#fff;transition:.4s background ease-in}.search-panel-submit[_ngcontent-%COMP%]:hover{background-color:#90ee90}.search-panel-form-validation-error[_ngcontent-%COMP%]{color:red;font-weight:700;border:2px solid red;background-color:#fff;width:calc(100% - 2rem);margin:1rem;text-align:center}.search-panel-text[_ngcontent-%COMP%]{font-size:large;font-weight:700;margin-bottom:.2rem}.search-panel-divisor-text[_ngcontent-%COMP%]{font:bold large;font-weight:700;margin:0;display:table-cell;vertical-align:middle;padding:10px}.btn[_ngcontent-%COMP%]{text-align:center;border:2px solid black;border-radius:2rem;font-weight:700;box-shadow:0 8px 15px #0000001a;transition:all .3s ease 0s}.btn[_ngcontent-%COMP%]:hover{transform:translateY(-7px);box-shadow:0 15px 20px #2ee59d66}.form-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:2rem}"]})}class eC{transform(e,...t){return parseFloat((1.8*(e-273.15)+32).toFixed(2))}static#e=this.\u0275fac=function(t){return new(t||eC)};static#t=this.\u0275pipe=d.Yjl({name:"temperature",type:eC,pure:!0})}class tC{constructor(e,t,r){this.weatherService=e,this.usersService=t,this.authService=r,this.searchAgainEvent=new d.vpe,this.locationWeather={weather:[{main:"",description:""}],main:{temp:0,temp_min:0,temp_max:0},sys:{country:""},name:""}}ngOnChanges(){null!=this.locationInformation&&this.weatherService.getWeatherByLatLon(this.locationInformation.lat,this.locationInformation.lon).subscribe({next:e=>{this.locationWeather=e,console.log(this.locationWeather)},error:e=>{console.log(e)}})}searchAgain(){this.searchAgainEvent.emit(void 0)}addFavorites(e){this.usersService.addNewFavorite(this.authService.userLoggedIn,e)}static#e=this.\u0275fac=function(t){return new(t||tC)(d.Y36(Qy),d.Y36(wg),d.Y36(ed))};static#t=this.\u0275cmp=d.Xpm({type:tC,selectors:[["app-weather-detail"]],inputs:{locationInformation:"locationInformation"},outputs:{searchAgainEvent:"searchAgainEvent"},features:[d.TTD],decls:46,vars:13,consts:[[1,"row"],[1,"col-2"],[1,"col-8"],[1,"weather-card"],[1,"col-6","divider-line"],[1,"row","mt-4","weather-card__current-temp"],[1,"row","font-weight-bold"],[1,"col-6"],[1,"row","weather-card__city-info","mt-4"],[1,"row","weather-card__city-info"],[1,"col-12"],[1,"row","text-capitalize","font-weight-bold"],[1,"btn","btn-back",3,"click"],[1,"btn","btn-favorite","ml-2",3,"click"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d._UZ(1,"div",1),d.TgZ(2,"div",2)(3,"div",3)(4,"div",0)(5,"div",4)(6,"div",5),d._uU(7),d.ALo(8,"temperature"),d.qZA(),d.TgZ(9,"div",0),d._UZ(10,"hr"),d.qZA(),d.TgZ(11,"div",6),d._uU(12),d.ALo(13,"temperature"),d.qZA(),d.TgZ(14,"div",6),d._uU(15),d.ALo(16,"temperature"),d.qZA(),d.TgZ(17,"div",0),d._UZ(18,"hr"),d.qZA()(),d.TgZ(19,"div",7)(20,"div",5),d._uU(21,"\u{1f3d9}\ufe0f Location"),d.qZA(),d.TgZ(22,"div",8),d._uU(23),d.qZA(),d.TgZ(24,"div",9),d._uU(25),d.qZA(),d.TgZ(26,"div",0),d._UZ(27,"hr"),d.qZA()()(),d.TgZ(28,"div",0),d._UZ(29,"hr"),d.qZA(),d.TgZ(30,"div",0)(31,"div",10)(32,"div",6),d._uU(33,"\u{1f4c5} Additional information:"),d.qZA(),d.TgZ(34,"div",6),d._uU(35),d.qZA(),d.TgZ(36,"div",11),d._uU(37),d.qZA()()(),d.TgZ(38,"div",0),d._UZ(39,"hr"),d.qZA(),d.TgZ(40,"div",0)(41,"button",12),d.NdJ("click",function(){return r.searchAgain()}),d._uU(42,"Go back \u{1f519}"),d.qZA(),d.TgZ(43,"button",13),d.NdJ("click",function(){return r.addFavorites(r.locationWeather)}),d._uU(44," Add to favorites \u{1f31f} "),d.qZA()()()(),d._UZ(45,"div",1),d.qZA()),2&t&&(d.xp6(7),d.hij(" \u{1f321}\ufe0f ",d.lcZ(8,7,r.locationWeather.main.temp)," \xbaF "),d.xp6(5),d.hij(" \u2744\ufe0f Min: ",d.lcZ(13,9,r.locationWeather.main.temp_min)," \xbaF "),d.xp6(3),d.hij(" \u{1f525} Max: ",d.lcZ(16,11,r.locationWeather.main.temp_max)," \xbaF "),d.xp6(8),d.hij(" City: ",r.locationWeather.name,", "),d.xp6(2),d.hij(" Country code: ",r.locationWeather.sys.country," "),d.xp6(10),d.hij(" ",r.locationWeather.weather[0].main," "),d.xp6(2),d.hij(" ",r.locationWeather.weather[0].description," "))},dependencies:[eC],styles:[".row[_ngcontent-%COMP%]{justify-content:center}.weather-card[_ngcontent-%COMP%]{background-color:#fff;padding:.5rem;border:2px solid#242424}hr[_ngcontent-%COMP%]{width:50%;border-top:2px solid #242424}.divider-line[_ngcontent-%COMP%]{border-right:2px solid #242424}.weather-card__current-temp[_ngcontent-%COMP%]{font-size:x-large;font-weight:700}.weather-card__city-info[_ngcontent-%COMP%]{font-weight:700;font-size:large}.btn[_ngcontent-%COMP%]{text-align:center;border:2px solid black;border-radius:2rem;font-weight:700}.btn-back[_ngcontent-%COMP%]{transition:.4s background ease-in}.btn-back[_ngcontent-%COMP%]:hover{background-color:#ffa07a}.btn-favorite[_ngcontent-%COMP%]{transition:.4s background ease-in}.btn-favorite[_ngcontent-%COMP%]:hover{background-color:#90ee90}"]})}function Y2(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",15)(1,"app-location-detail",16),d.NdJ("newLocationInformationEvent",function(i){d.CHM(t);const u=d.oxw(2);return d.KtG(u.itemSelected(i))}),d.qZA()()}if(2&n){const t=e.$implicit;d.xp6(1),d.Q6J("locationInformation",t)}}function Q2(n,e){if(1&n&&(d.TgZ(0,"div",13),d.YNc(1,Y2,2,1,"div",14),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngForOf",t.results)}}function J2(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div")(1,"app-weather-detail",17),d.NdJ("searchAgainEvent",function(i){d.CHM(t);const u=d.oxw();return d.KtG(u.searchAgain(i))}),d.qZA()()}if(2&n){const t=d.oxw();d.xp6(1),d.Q6J("locationInformation",t.locationInformation)}}function X2(n,e){if(1&n&&(d.TgZ(0,"div")(1,"p",18),d._uU(2),d.qZA()()),2&n){const t=d.oxw();d.xp6(2),d.Oqu(t.searchState)}}function eB(n,e){1&n&&(d.TgZ(0,"div",1),d._UZ(1,"hr"),d.qZA())}function tB(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",19),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.check())}),d._uU(1," Click here to show my favorites \u2b50 "),d.qZA()}}class nC{constructor(e){this.authService=e,this.loading=!1,this.searchState="\xa1Try searching something!",this.showFavorites=!1,this.results=new Array}check(){this.favoritesComponent.checkFavorites(),this.showFavorites=!this.showFavorites}logout(){this.authService.signoutUser(),this.favoritesComponent.stopSubscription()}itemSelected(e){this.locationInformation=e}searchAgain(e){this.locationInformation=e}searchResult(e){this.results=[...e],this.locationInformation=void 0}searchStateChanged(e){this.searchState=e}searchFavoriteAgain(e){this.locationInformation=e}static#e=this.\u0275fac=function(t){return new(t||nC)(d.Y36(ed))};static#t=this.\u0275cmp=d.Xpm({type:nC,selectors:[["app-weather"]],viewQuery:function(t,r){if(1&t&&d.Gf(FE,5),2&t){let i;d.iGM(i=d.CRH())&&(r.favoritesComponent=i.first)}},decls:19,vars:6,consts:[[1,"container","mt-4","search-panel"],[1,"row"],[1,"col-2"],[1,"btn","btn-logout",3,"click"],[1,"col-8"],[1,"search-panel-title"],[3,"responseApiEvent","newSearchStateEvent"],["class","row w-100 justify-content-center mt-4 search-results d-grid",4,"ngIf"],[4,"ngIf"],["class","row",4,"ngIf"],[1,"row","justify-content-center"],["class","btn btn-favorites",3,"click",4,"ngIf"],[3,"visible","checkCurrentEvent"],[1,"row","w-100","justify-content-center","mt-4","search-results","d-grid"],["class","mt-2",4,"ngFor","ngForOf"],[1,"mt-2"],[3,"locationInformation","newLocationInformationEvent"],[3,"locationInformation","searchAgainEvent"],[1,"search-result-state"],[1,"btn","btn-favorites",3,"click"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),d.NdJ("click",function(){return r.logout()}),d._uU(4,"Logout \u{1f519}"),d.qZA()(),d.TgZ(5,"div",4)(6,"h2",5),d._uU(7,"\xa1Welcome to the WeatherApp! \u{1f31e}\u26c5\u{1f324}\ufe0f\u{1f325}\ufe0f\u{1f326}\ufe0f"),d.qZA(),d.TgZ(8,"app-search",6),d.NdJ("responseApiEvent",function(u){return r.searchResult(u)})("newSearchStateEvent",function(u){return r.searchStateChanged(u)}),d.qZA(),d.TgZ(9,"div",1),d._UZ(10,"hr"),d.qZA(),d.YNc(11,Q2,2,1,"div",7),d.YNc(12,J2,2,1,"div",8),d.YNc(13,X2,3,1,"div",8),d.YNc(14,eB,2,0,"div",9),d.TgZ(15,"div",10),d.YNc(16,tB,2,0,"button",11),d.TgZ(17,"app-favorites",12),d.NdJ("checkCurrentEvent",function(u){return r.searchFavoriteAgain(u)}),d.qZA()()(),d._UZ(18,"div",2),d.qZA()()),2&t&&(d.xp6(11),d.Q6J("ngIf",r.results.length>0&&void 0===r.locationInformation),d.xp6(1),d.Q6J("ngIf",r.locationInformation),d.xp6(1),d.Q6J("ngIf",0===r.results.length),d.xp6(1),d.Q6J("ngIf",r.results),d.xp6(2),d.Q6J("ngIf",!r.showFavorites),d.xp6(1),d.Q6J("visible",r.showFavorites))},dependencies:[hi,cn,KD,XD,tC,FE],styles:[".search-panel-body[_ngcontent-%COMP%]{background-color:#242424}.search-panel-title[_ngcontent-%COMP%]{margin:2rem auto;text-align:center;box-shadow:0 0 1rem #000;padding:.5rem;border:2px solid black;border-radius:2rem;overflow-x:hidden;overflow-y:auto;background-color:#fff}.search-panel[_ngcontent-%COMP%]{margin:2rem auto;box-shadow:0 0 1rem #000;padding:.5rem;border:2px solid black;border-radius:2rem;overflow-x:hidden;overflow-y:auto;width:60%;background:#FCD462}.btn[_ngcontent-%COMP%]{text-align:center;border:2px solid black;border-radius:2rem;font-weight:700;box-shadow:0 8px 15px #0000001a;transition:all .3s ease 0s}hr[_ngcontent-%COMP%]{width:100%;border-top:2px solid #242424}.search-results[_ngcontent-%COMP%]{height:20rem;overflow-y:auto;overflow-x:hidden}.search-result-state[_ngcontent-%COMP%]{font-size:large;font-weight:700;margin-bottom:.2rem;border:2px solid #242424;border-radius:2rem;text-align:center;background-color:#fff}.d-grid[_ngcontent-%COMP%]{display:grid}.btn-logout[_ngcontent-%COMP%]{background-color:#e11515}.btn-logout[_ngcontent-%COMP%]:hover{transform:translateY(+7px);box-shadow:0 15px 20px #e1151566}.btn-favorites[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 15px 20px #5c5e0b66}"]})}class UE{constructor(e,t,r){this.authService=e,this.router=t,this.toastr=r}canActivate(e,t){return!!this.authService.isLoggedIn||(this.router.navigate(["login"]),this.toastr.error("You must be logged in to access weather app!","ERROR",{positionClass:"toast-top-center"}),!1)}static#e=this.\u0275fac=function(t){return new(t||UE)(d.LFG(ed),d.LFG(_r),d.LFG(OE))};static#t=this.\u0275prov=d.Yz7({token:UE,factory:UE.\u0275fac,providedIn:"root"})}const nB=[{path:"",pathMatch:"full",redirectTo:"login"},{path:"login",component:ZD},{path:"weather",component:nC,canActivate:[UE]}];class rC{static#e=this.\u0275fac=function(t){return new(t||rC)};static#t=this.\u0275mod=d.oAB({type:rC});static#n=this.\u0275inj=d.cJS({imports:[rT.forRoot(nB),rT]})}class iC{constructor(){this.title="weather-app"}static#e=this.\u0275fac=function(t){return new(t||iC)};static#t=this.\u0275cmp=d.Xpm({type:iC,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},dependencies:[Jd]})}function yk(n){return new d.vHH(3e3,!1)}function LB(){return typeof window<"u"&&typeof window.document<"u"}function Dx(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Zh(n){switch(n.length){case 0:return new RE;case 1:return n[0];default:return new O1(n)}}function _k(n,e,t,r,i=new Map,u=new Map){const l=[],p=[];let _=-1,b=null;if(r.forEach(C=>{const x=C.get("offset"),V=x==_,B=V&&b||new Map;C.forEach((G,re)=>{let ye=re,je=G;if("offset"!==re)switch(ye=e.normalizePropertyName(ye,l),je){case"!":je=i.get(re);break;case Xl:je=u.get(re);break;default:je=e.normalizeStyleValue(re,ye,je,l)}B.set(ye,je)}),V||p.push(B),b=B,_=x}),l.length)throw function CB(n){return new d.vHH(3502,!1)}();return p}function Cx(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&Tx(t,"start",n)));break;case"done":n.onDone(()=>r(t&&Tx(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&Tx(t,"destroy",n)))}}function Tx(n,e,t){const u=Ax(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),l=n._data;return null!=l&&(u._data=l),u}function Ax(n,e,t,r,i="",u=0,l){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:u,disabled:!!l}}function Po(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function vk(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let Sx=(n,e)=>!1,Ek=(n,e,t)=>[],wk=null;function Mx(n){const e=n.parentNode||n.host;return e===wk?null:e}(Dx()||typeof Element<"u")&&(LB()?(wk=(()=>document.documentElement)(),Sx=(n,e)=>{for(;e;){if(e===n)return!0;e=Mx(e)}return!1}):Sx=(n,e)=>n.contains(e),Ek=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Ig=null,bk=!1;const Ik=Sx,Dk=Ek;let Ck=(()=>{class n{validateStyleProperty(t){return function UB(n){Ig||(Ig=function BB(){return typeof document<"u"?document.body:null}()||{},bk=!!Ig.style&&"WebkitAppearance"in Ig.style);let e=!0;return Ig.style&&!function VB(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Ig.style,!e&&bk&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Ig.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return Ik(t,r)}getParentElement(t){return Mx(t)}query(t,r,i){return Dk(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,u,l,p=[],_){return new RE(i,u)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),xx=(()=>{class n{}return n.NOOP=new Ck,n})();const Nx="ng-enter",sC="ng-leave",oC="ng-trigger",aC=".ng-trigger",Ak="ng-animating",Rx=".ng-animating";function nd(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Ox(parseFloat(e[1]),e[2])}function Ox(n,e){return"s"===e?1e3*n:n}function uC(n,e,t){return n.hasOwnProperty("duration")?n:function $B(n,e,t){let i,u=0,l="";if("string"==typeof n){const p=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===p)return e.push(yk()),{duration:0,delay:0,easing:""};i=Ox(parseFloat(p[1]),p[2]);const _=p[3];null!=_&&(u=Ox(parseFloat(_),p[4]));const b=p[5];b&&(l=b)}else i=n;if(!t){let p=!1,_=e.length;i<0&&(e.push(function rB(){return new d.vHH(3100,!1)}()),p=!0),u<0&&(e.push(function iB(){return new d.vHH(3101,!1)}()),p=!0),p&&e.splice(_,0,yk())}return{duration:i,delay:u,easing:l}}(n,e,t)}function BE(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function Sk(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function Kh(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function xk(n,e,t){return t?e+":"+t+";":""}function Nk(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=xk(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=xk(0,WB(t),n.style[t]));n.setAttribute("style",e)}function bc(n,e,t){n.style&&(e.forEach((r,i)=>{const u=Px(i);t&&!t.has(i)&&t.set(i,n.style[u]),n.style[u]=r}),Dx()&&Nk(n))}function Dg(n,e){n.style&&(e.forEach((t,r)=>{const i=Px(r);n.style[i]=""}),Dx()&&Nk(n))}function jE(n){return Array.isArray(n)?1==n.length?n[0]:x1(n):n}const kx=new RegExp("{{\\s*(.+?)\\s*}}","g");function Rk(n){let e=[];if("string"==typeof n){let t;for(;t=kx.exec(n);)e.push(t[1]);kx.lastIndex=0}return e}function HE(n,e,t){const r=n.toString(),i=r.replace(kx,(u,l)=>{let p=e[l];return null==p&&(t.push(function oB(n){return new d.vHH(3003,!1)}()),p=""),p.toString()});return i==r?n:i}function cC(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const qB=/-+([a-z0-9])/g;function Px(n){return n.replace(qB,(...e)=>e[1].toUpperCase())}function WB(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Fo(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function aB(n){return new d.vHH(3004,!1)}()}}function Ok(n,e){return window.getComputedStyle(n)[e]}function XB(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function ej(n,e,t){if(":"==n[0]){const _=function tj(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function wB(n){return new d.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof _)return void e.push(_);n=_}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function EB(n){return new d.vHH(3015,!1)}()),e;const i=r[1],u=r[2],l=r[3];e.push(kk(i,l));"<"==u[0]&&!("*"==i&&"*"==l)&&e.push(kk(l,i))}(r,t,e)):t.push(n),t}const fC=new Set(["true","1"]),pC=new Set(["false","0"]);function kk(n,e){const t=fC.has(n)||pC.has(n),r=fC.has(e)||pC.has(e);return(i,u)=>{let l="*"==n||n==i,p="*"==e||e==u;return!l&&t&&"boolean"==typeof i&&(l=i?fC.has(n):pC.has(n)),!p&&r&&"boolean"==typeof u&&(p=u?fC.has(e):pC.has(e)),l&&p}}const nj=new RegExp("s*:selfs*,?","g");function Fx(n,e,t,r){return new rj(n).build(e,t,r)}class rj{constructor(e){this._driver=e}build(e,t,r){const i=new oj(t);return this._resetContextStyleTimingState(i),Fo(this,jE(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const u=[],l=[];return"@"==e.name.charAt(0)&&t.errors.push(function cB(){return new d.vHH(3006,!1)}()),e.definitions.forEach(p=>{if(this._resetContextStyleTimingState(t),0==p.type){const _=p,b=_.name;b.toString().split(/\s*,\s*/).forEach(C=>{_.name=C,u.push(this.visitState(_,t))}),_.name=b}else if(1==p.type){const _=this.visitTransition(p,t);r+=_.queryCount,i+=_.depCount,l.push(_)}else t.errors.push(function lB(){return new d.vHH(3007,!1)}())}),{type:7,name:e.name,states:u,transitions:l,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const u=new Set,l=i||{};r.styles.forEach(p=>{p instanceof Map&&p.forEach(_=>{Rk(_).forEach(b=>{l.hasOwnProperty(b)||u.add(b)})})}),u.size&&(cC(u.values()),t.errors.push(function dB(n,e){return new d.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Fo(this,jE(e.animation),t);return{type:1,matchers:XB(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Cg(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Fo(this,r,t)),options:Cg(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const u=e.steps.map(l=>{t.currentTime=r;const p=Fo(this,l,t);return i=Math.max(i,t.currentTime),p});return t.currentTime=i,{type:3,steps:u,options:Cg(e.options)}}visitAnimate(e,t){const r=function uj(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return Lx(uC(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(u=>"{"==u.charAt(0)&&"{"==u.charAt(1))){const u=Lx(0,0,"");return u.dynamic=!0,u.strValue=t,u}const i=uC(t,e);return Lx(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,u=e.styles?e.styles:NE({});if(5==u.type)i=this.visitKeyframes(u,t);else{let l=e.styles,p=!1;if(!l){p=!0;const b={};r.easing&&(b.easing=r.easing),l=NE(b)}t.currentTime+=r.duration+r.delay;const _=this.visitStyle(l,t);_.isEmptyStep=p,i=_}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let p of i)"string"==typeof p?p===Xl?r.push(p):t.errors.push(new d.vHH(3002,!1)):r.push(Sk(p));let u=!1,l=null;return r.forEach(p=>{if(p instanceof Map&&(p.has("easing")&&(l=p.get("easing"),p.delete("easing")),!u))for(let _ of p.values())if(_.toString().indexOf("{{")>=0){u=!0;break}}),{type:6,styles:r,easing:l,offset:e.offset,containsDynamicStyles:u,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,u=t.currentTime;r&&u>0&&(u-=r.duration+r.delay),e.styles.forEach(l=>{"string"!=typeof l&&l.forEach((p,_)=>{const b=t.collectedStyles.get(t.currentQuerySelector),C=b.get(_);let x=!0;C&&(u!=i&&u>=C.startTime&&i<=C.endTime&&(t.errors.push(function fB(n,e,t,r,i){return new d.vHH(3010,!1)}()),x=!1),u=C.startTime),x&&b.set(_,{startTime:u,endTime:i}),t.options&&function zB(n,e,t){const r=e.params||{},i=Rk(n);i.length&&i.forEach(u=>{r.hasOwnProperty(u)||t.push(function sB(n){return new d.vHH(3001,!1)}())})}(p,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function pB(){return new d.vHH(3011,!1)}()),r;let u=0;const l=[];let p=!1,_=!1,b=0;const C=e.steps.map(je=>{const nt=this._makeStyleAst(je,t);let ft=null!=nt.offset?nt.offset:function aj(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(nt.styles),ct=0;return null!=ft&&(u++,ct=nt.offset=ft),_=_||ct<0||ct>1,p=p||ct<b,b=ct,l.push(ct),nt});_&&t.errors.push(function gB(){return new d.vHH(3012,!1)}()),p&&t.errors.push(function mB(){return new d.vHH(3200,!1)}());const x=e.steps.length;let V=0;u>0&&u<x?t.errors.push(function yB(){return new d.vHH(3202,!1)}()):0==u&&(V=1/(x-1));const B=x-1,G=t.currentTime,re=t.currentAnimateTimings,ye=re.duration;return C.forEach((je,nt)=>{const ft=V>0?nt==B?1:V*nt:l[nt],ct=ft*ye;t.currentTime=G+re.delay+ct,re.duration=ct,this._validateStyleAst(je,t),je.offset=ft,r.styles.push(je)}),r}visitReference(e,t){return{type:8,animation:Fo(this,jE(e.animation),t),options:Cg(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Cg(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Cg(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[u,l]=function ij(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(nj,"")),n=n.replace(/@\*/g,aC).replace(/@\w+/g,t=>aC+"-"+t.slice(1)).replace(/:animating/g,Rx),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+u:u,Po(t.collectedStyles,t.currentQuerySelector,new Map);const p=Fo(this,jE(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:u,limit:i.limit||0,optional:!!i.optional,includeSelf:l,animation:p,originalSelector:e.selector,options:Cg(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function _B(){return new d.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:uC(e.timings,t.errors,!0);return{type:12,animation:Fo(this,jE(e.animation),t),timings:r,options:null}}}class oj{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Cg(n){return n?(n=BE(n)).params&&(n.params=function sj(n){return n?BE(n):null}(n.params)):n={},n}function Lx(n,e,t){return{duration:n,delay:e,easing:t}}function Vx(n,e,t,r,i,u,l=null,p=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:u,totalTime:i+u,easing:l,subTimeline:p}}class gC{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const dj=new RegExp(":enter","g"),fj=new RegExp(":leave","g");function Ux(n,e,t,r,i,u=new Map,l=new Map,p,_,b=[]){return(new pj).buildKeyframes(n,e,t,r,i,u,l,p,_,b)}class pj{buildKeyframes(e,t,r,i,u,l,p,_,b,C=[]){b=b||new gC;const x=new Bx(e,t,b,i,u,C,[]);x.options=_;const V=_.delay?nd(_.delay):0;x.currentTimeline.delayNextStep(V),x.currentTimeline.setStyles([l],null,x.errors,_),Fo(this,r,x);const B=x.timelines.filter(G=>G.containsAnimation());if(B.length&&p.size){let G;for(let re=B.length-1;re>=0;re--){const ye=B[re];if(ye.element===t){G=ye;break}}G&&!G.allowOnlyTimelineStyles()&&G.setStyles([p],null,x.errors,_)}return B.length?B.map(G=>G.buildKeyframes()):[Vx(t,[],[],[],0,V,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),u=t.currentTimeline.currentTime,l=this._visitSubInstructions(r,i,i.options);u!=l&&t.transformIntoNewTimeline(l)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const u=i?.delay;if(u){const l="number"==typeof u?u:nd(HE(u,i?.params??{},t.errors));r.delayNextStep(l)}}}_visitSubInstructions(e,t,r){let u=t.currentTimeline.currentTime;const l=null!=r.duration?nd(r.duration):null,p=null!=r.delay?nd(r.delay):null;return 0!==l&&e.forEach(_=>{const b=t.appendInstructionToTimeline(_,l,p);u=Math.max(u,b.duration+b.delay)}),u}visitReference(e,t){t.updateOptions(e.options,!0),Fo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const u=e.options;if(u&&(u.params||u.delay)&&(i=t.createSubContext(u),i.transformIntoNewTimeline(),null!=u.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=mC);const l=nd(u.delay);i.delayNextStep(l)}e.steps.length&&(e.steps.forEach(l=>Fo(this,l,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const u=e.options&&e.options.delay?nd(e.options.delay):0;e.steps.forEach(l=>{const p=t.createSubContext(e.options);u&&p.delayNextStep(u),Fo(this,l,p),i=Math.max(i,p.currentTimeline.currentTime),r.push(p.currentTimeline)}),r.forEach(l=>t.currentTimeline.mergeTimelineCollectedStyles(l)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return uC(t.params?HE(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const u=e.style;5==u.type?this.visitKeyframes(u,t):(t.incrementTime(r.duration),this.visitStyle(u,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const u=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(u):r.setStyles(e.styles,u,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,u=r.duration,p=t.createSubContext().currentTimeline;p.easing=r.easing,e.styles.forEach(_=>{p.forwardTime((_.offset||0)*u),p.setStyles(_.styles,_.easing,t.errors,t.options),p.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(p),t.transformIntoNewTimeline(i+u),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},u=i.delay?nd(i.delay):0;u&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=mC);let l=r;const p=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=p.length;let _=null;p.forEach((b,C)=>{t.currentQueryIndex=C;const x=t.createSubContext(e.options,b);u&&x.delayNextStep(u),b===t.element&&(_=x.currentTimeline),Fo(this,e.animation,x),x.currentTimeline.applyStylesToKeyframe(),l=Math.max(l,x.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(l),_&&(t.currentTimeline.mergeTimelineCollectedStyles(_),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,u=e.timings,l=Math.abs(u.duration),p=l*(t.currentQueryTotal-1);let _=l*t.currentQueryIndex;switch(u.duration<0?"reverse":u.easing){case"reverse":_=p-_;break;case"full":_=r.currentStaggerTime}const C=t.currentTimeline;_&&C.delayNextStep(_);const x=C.currentTime;Fo(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-x+(i.startTime-r.currentTimeline.startTime)}}const mC={};class Bx{constructor(e,t,r,i,u,l,p,_){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=u,this.errors=l,this.timelines=p,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=mC,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=_||new yC(this._driver,t,0),p.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=nd(r.duration)),null!=r.delay&&(i.delay=nd(r.delay));const u=r.params;if(u){let l=i.params;l||(l=this.options.params={}),Object.keys(u).forEach(p=>{(!t||!l.hasOwnProperty(p))&&(l[p]=HE(u[p],l,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,u=new Bx(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return u.previousNode=this.previousNode,u.currentAnimateTimings=this.currentAnimateTimings,u.options=this._copyOptions(),u.updateOptions(e),u.currentQueryIndex=this.currentQueryIndex,u.currentQueryTotal=this.currentQueryTotal,u.parentContext=this,this.subContextCount++,u}transformIntoNewTimeline(e){return this.previousNode=mC,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},u=new gj(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(u),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,u,l){let p=[];if(i&&p.push(this.element),e.length>0){e=(e=e.replace(dj,"."+this._enterClassName)).replace(fj,"."+this._leaveClassName);let b=this._driver.query(this.element,e,1!=r);0!==r&&(b=r<0?b.slice(b.length+r,b.length):b.slice(0,r)),p.push(...b)}return!u&&0==p.length&&l.push(function vB(n){return new d.vHH(3014,!1)}()),p}}class yC{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new yC(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Xl),this._currentKeyframe.set(t,Xl);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const u=i&&i.params||{},l=function mj(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let u of r)t.set(u,Xl)}else Kh(i,t)}),t}(e,this._globalTimelineStyles);for(let[p,_]of l){const b=HE(_,u,r);this._pendingStyles.set(p,b),this._localTimelineStyles.has(p)||this._backFill.set(p,this._globalTimelineStyles.get(p)??Xl),this._updateStyle(p,b)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((p,_)=>{const b=Kh(p,new Map,this._backFill);b.forEach((C,x)=>{"!"===C?e.add(x):C===Xl&&t.add(x)}),r||b.set("offset",_/this.duration),i.push(b)});const u=e.size?cC(e.values()):[],l=t.size?cC(t.values()):[];if(r){const p=i[0],_=new Map(p);p.set("offset",0),_.set("offset",1),i=[p,_]}return Vx(this.element,i,u,l,this.duration,this.startTime,this.easing,!1)}}class gj extends yC{constructor(e,t,r,i,u,l,p=!1){super(e,t,l.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=u,this._stretchStartingKeyframe=p,this.timings={duration:l.duration,delay:l.delay,easing:l.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const u=[],l=r+t,p=t/l,_=Kh(e[0]);_.set("offset",0),u.push(_);const b=Kh(e[0]);b.set("offset",Lk(p)),u.push(b);const C=e.length-1;for(let x=1;x<=C;x++){let V=Kh(e[x]);const B=V.get("offset");V.set("offset",Lk((t+B*r)/l)),u.push(V)}r=l,t=0,i="",e=u}return Vx(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function Lk(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class jx{}const yj=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class _j extends jx{normalizePropertyName(e,t){return Px(e)}normalizeStyleValue(e,t,r,i){let u="";const l=r.toString().trim();if(yj.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)u="px";else{const p=r.match(/^[+-]?[\d\.]+([a-z]*)$/);p&&0==p[1].length&&i.push(function uB(n,e){return new d.vHH(3005,!1)}())}return l+u}}function Vk(n,e,t,r,i,u,l,p,_,b,C,x,V){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:u,toState:r,toStyles:l,timelines:p,queriedElements:_,preStyleProps:b,postStyleProps:C,totalTime:x,errors:V}}const Hx={};class Uk{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function vj(n,e,t,r,i){return n.some(u=>u(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,u,l,p,_,b,C){const x=[],V=this.ast.options&&this.ast.options.params||Hx,G=this.buildStyles(r,p&&p.params||Hx,x),re=_&&_.params||Hx,ye=this.buildStyles(i,re,x),je=new Set,nt=new Map,ft=new Map,ct="void"===i,Rt={params:Ej(re,V),delay:this.ast.options?.delay},Ft=C?[]:Ux(e,t,this.ast.animation,u,l,G,ye,Rt,b,x);let an=0;if(Ft.forEach(rd=>{an=Math.max(rd.duration+rd.delay,an)}),x.length)return Vk(t,this._triggerName,r,i,ct,G,ye,[],[],nt,ft,an,x);Ft.forEach(rd=>{const id=rd.element,eP=Po(nt,id,new Set);rd.preStyleProps.forEach(Tg=>eP.add(Tg));const GE=Po(ft,id,new Set);rd.postStyleProps.forEach(Tg=>GE.add(Tg)),id!==t&&je.add(id)});const Ss=cC(je.values());return Vk(t,this._triggerName,r,i,ct,G,ye,Ft,Ss,nt,ft,an)}}function Ej(n,e){const t=BE(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class wj{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=BE(this.defaultParams);return Object.keys(e).forEach(u=>{const l=e[u];null!==l&&(i[u]=l)}),this.styles.styles.forEach(u=>{"string"!=typeof u&&u.forEach((l,p)=>{l&&(l=HE(l,i,t));const _=this.normalizer.normalizePropertyName(p,t);l=this.normalizer.normalizeStyleValue(p,_,l,t),r.set(_,l)})}),r}}class Ij{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new wj(i.style,i.options&&i.options.params||{},r))}),Bk(this.states,"true","1"),Bk(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new Uk(e,i,this.states))}),this.fallbackTransition=function Dj(n,e,t){return new Uk(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(l,p)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(l=>l.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function Bk(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const Cj=new gC;class Tj{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],u=Fx(this._driver,t,r,[]);if(r.length)throw function TB(n){return new d.vHH(3503,!1)}();this._animations.set(e,u)}_buildPlayer(e,t,r){const i=e.element,u=_k(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,u,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],u=this._animations.get(e);let l;const p=new Map;if(u?(l=Ux(this._driver,t,u,Nx,sC,new Map,new Map,r,Cj,i),l.forEach(C=>{const x=Po(p,C.element,new Map);C.postStyleProps.forEach(V=>x.set(V,null))})):(i.push(function AB(){return new d.vHH(3300,!1)}()),l=[]),i.length)throw function SB(n){return new d.vHH(3504,!1)}();p.forEach((C,x)=>{C.forEach((V,B)=>{C.set(B,this._driver.computeStyle(x,B,Xl))})});const b=Zh(l.map(C=>{const x=p.get(C.element);return this._buildPlayer(C,new Map,x)}));return this._playersById.set(e,b),b.onDestroy(()=>this.destroy(e)),this.players.push(b),b}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function MB(n){return new d.vHH(3301,!1)}();return t}listen(e,t,r,i){const u=Ax(t,"","","");return Cx(this._getPlayer(e),r,u,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const u=this._getPlayer(e);switch(r){case"play":u.play();break;case"pause":u.pause();break;case"reset":u.reset();break;case"restart":u.restart();break;case"finish":u.finish();break;case"init":u.init();break;case"setPosition":u.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const jk="ng-animate-queued",$x="ng-animate-disabled",Nj=[],Hk={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Rj={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},da="__ng_removed";class Gx{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function Fj(n){return n??null}(r?e.value:e),r){const u=BE(e);delete u.value,this.options=u}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const $E="void",zx=new Gx($E);class Oj{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,ha(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function xB(n,e){return new d.vHH(3302,!1)}();if(null==r||0==r.length)throw function NB(n){return new d.vHH(3303,!1)}();if(!function Lj(n){return"start"==n||"done"==n}(r))throw function RB(n,e){return new d.vHH(3400,!1)}();const u=Po(this._elementListeners,e,[]),l={name:t,phase:r,callback:i};u.push(l);const p=Po(this._engine.statesByElement,e,new Map);return p.has(t)||(ha(e,oC),ha(e,oC+"-"+t),p.set(t,zx)),()=>{this._engine.afterFlush(()=>{const _=u.indexOf(l);_>=0&&u.splice(_,1),this._triggers.has(t)||p.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function OB(n){return new d.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const u=this._getTrigger(t),l=new qx(this.id,t,e);let p=this._engine.statesByElement.get(e);p||(ha(e,oC),ha(e,oC+"-"+t),this._engine.statesByElement.set(e,p=new Map));let _=p.get(t);const b=new Gx(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&_&&b.absorbOptions(_.options),p.set(t,b),_||(_=zx),b.value!==$E&&_.value===b.value){if(!function Bj(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const u=t[i];if(!e.hasOwnProperty(u)||n[u]!==e[u])return!1}return!0}(_.params,b.params)){const re=[],ye=u.matchStyles(_.value,_.params,re),je=u.matchStyles(b.value,b.params,re);re.length?this._engine.reportError(re):this._engine.afterFlush(()=>{Dg(e,ye),bc(e,je)})}return}const V=Po(this._engine.playersByElement,e,[]);V.forEach(re=>{re.namespaceId==this.id&&re.triggerName==t&&re.queued&&re.destroy()});let B=u.matchTransition(_.value,b.value,e,b.params),G=!1;if(!B){if(!i)return;B=u.fallbackTransition,G=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:B,fromState:_,toState:b,player:l,isFallbackTransition:G}),G||(ha(e,jk),l.onStart(()=>{Jy(e,jk)})),l.onDone(()=>{let re=this.players.indexOf(l);re>=0&&this.players.splice(re,1);const ye=this._engine.playersByElement.get(e);if(ye){let je=ye.indexOf(l);je>=0&&ye.splice(je,1)}}),this.players.push(l),V.push(l),l}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,aC,!0);r.forEach(i=>{if(i[da])return;const u=this._engine.fetchNamespacesByElement(i);u.size?u.forEach(l=>l.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const u=this._engine.statesByElement.get(e),l=new Map;if(u){const p=[];if(u.forEach((_,b)=>{if(l.set(b,_.value),this._triggers.has(b)){const C=this.trigger(e,b,$E,i);C&&p.push(C)}}),p.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,l),r&&Zh(p).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(u=>{const l=u.name;if(i.has(l))return;i.add(l);const _=this._triggers.get(l).fallbackTransition,b=r.get(l)||zx,C=new Gx($E),x=new qx(this.id,l,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:l,transition:_,fromState:b,toState:C,player:x,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const u=r.players.length?r.playersByQueriedElement.get(e):[];if(u&&u.length)i=!0;else{let l=e;for(;l=l.parentNode;)if(r.statesByElement.get(l)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const u=e[da];(!u||u===Hk)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){ha(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const u=r.element,l=this._elementListeners.get(u);l&&l.forEach(p=>{if(p.name==r.triggerName){const _=Ax(u,r.triggerName,r.fromState.value,r.toState.value);_._data=e,Cx(r.player,p.phase,_,p.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const u=r.transition.ast.depCount,l=i.transition.ast.depCount;return 0==u||0==l?u-l:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class kj{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,u)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new Oj(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let l=!1,p=this.driver.getParentElement(t);for(;p;){const _=i.get(p);if(_){const b=r.indexOf(_);r.splice(b+1,0,e),l=!0;break}p=this.driver.getParentElement(p)}l||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const u=this._fetchNamespace(i.namespaceId);u&&t.add(u)}return t}trigger(e,t,r,i){if(_C(t)){const u=this._fetchNamespace(e);if(u)return u.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!_C(t))return;const u=t[da];if(u&&u.setForRemoval){u.setForRemoval=!1,u.setForMove=!0;const l=this.collectedLeaveElements.indexOf(t);l>=0&&this.collectedLeaveElements.splice(l,1)}if(e){const l=this._fetchNamespace(e);l&&l.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),ha(e,$x)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Jy(e,$x))}removeNode(e,t,r,i){if(_C(t)){const u=e?this._fetchNamespace(e):null;if(u?u.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const l=this.namespacesByHostElement.get(t);l&&l.id!==e&&l.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,u){this.collectedLeaveElements.push(t),t[da]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:u}}listen(e,t,r,i,u){return _C(t)?this._fetchNamespace(e).listen(t,r,i,u):()=>{}}_buildInstruction(e,t,r,i,u){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,u)}destroyInnerAnimations(e){let t=this.driver.query(e,aC,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,Rx,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Zh(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[da];if(t&&t.setForRemoval){if(e[da]=Hk,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains($x)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)ha(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Zh(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function kB(n){return new d.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new gC,i=[],u=new Map,l=[],p=new Map,_=new Map,b=new Map,C=new Set;this.disabledNodes.forEach(mt=>{C.add(mt);const Ot=this.driver.query(mt,".ng-animate-queued",!0);for(let Ut=0;Ut<Ot.length;Ut++)C.add(Ot[Ut])});const x=this.bodyNode,V=Array.from(this.statesByElement.keys()),B=zk(V,this.collectedEnterElements),G=new Map;let re=0;B.forEach((mt,Ot)=>{const Ut=Nx+re++;G.set(Ot,Ut),mt.forEach(pn=>ha(pn,Ut))});const ye=[],je=new Set,nt=new Set;for(let mt=0;mt<this.collectedLeaveElements.length;mt++){const Ot=this.collectedLeaveElements[mt],Ut=Ot[da];Ut&&Ut.setForRemoval&&(ye.push(Ot),je.add(Ot),Ut.hasAnimation?this.driver.query(Ot,".ng-star-inserted",!0).forEach(pn=>je.add(pn)):nt.add(Ot))}const ft=new Map,ct=zk(V,Array.from(je));ct.forEach((mt,Ot)=>{const Ut=sC+re++;ft.set(Ot,Ut),mt.forEach(pn=>ha(pn,Ut))}),e.push(()=>{B.forEach((mt,Ot)=>{const Ut=G.get(Ot);mt.forEach(pn=>Jy(pn,Ut))}),ct.forEach((mt,Ot)=>{const Ut=ft.get(Ot);mt.forEach(pn=>Jy(pn,Ut))}),ye.forEach(mt=>{this.processLeaveNode(mt)})});const Rt=[],Ft=[];for(let mt=this._namespaceList.length-1;mt>=0;mt--)this._namespaceList[mt].drainQueuedTransitions(t).forEach(Ut=>{const pn=Ut.player,Mi=Ut.element;if(Rt.push(pn),this.collectedEnterElements.length){const es=Mi[da];if(es&&es.setForMove){if(es.previousTriggersValues&&es.previousTriggersValues.has(Ut.triggerName)){const Ag=es.previousTriggersValues.get(Ut.triggerName),fa=this.statesByElement.get(Ut.element);if(fa&&fa.has(Ut.triggerName)){const bC=fa.get(Ut.triggerName);bC.value=Ag,fa.set(Ut.triggerName,bC)}}return void pn.destroy()}}const Ic=!x||!this.driver.containsElement(x,Mi),Lo=ft.get(Mi),Yh=G.get(Mi),dr=this._buildInstruction(Ut,r,Yh,Lo,Ic);if(dr.errors&&dr.errors.length)return void Ft.push(dr);if(Ic)return pn.onStart(()=>Dg(Mi,dr.fromStyles)),pn.onDestroy(()=>bc(Mi,dr.toStyles)),void i.push(pn);if(Ut.isFallbackTransition)return pn.onStart(()=>Dg(Mi,dr.fromStyles)),pn.onDestroy(()=>bc(Mi,dr.toStyles)),void i.push(pn);const rP=[];dr.timelines.forEach(es=>{es.stretchStartingKeyframe=!0,this.disabledNodes.has(es.element)||rP.push(es)}),dr.timelines=rP,r.append(Mi,dr.timelines),l.push({instruction:dr,player:pn,element:Mi}),dr.queriedElements.forEach(es=>Po(p,es,[]).push(pn)),dr.preStyleProps.forEach((es,Ag)=>{if(es.size){let fa=_.get(Ag);fa||_.set(Ag,fa=new Set),es.forEach((bC,Kx)=>fa.add(Kx))}}),dr.postStyleProps.forEach((es,Ag)=>{let fa=b.get(Ag);fa||b.set(Ag,fa=new Set),es.forEach((bC,Kx)=>fa.add(Kx))})});if(Ft.length){const mt=[];Ft.forEach(Ot=>{mt.push(function PB(n,e){return new d.vHH(3505,!1)}())}),Rt.forEach(Ot=>Ot.destroy()),this.reportError(mt)}const an=new Map,Ss=new Map;l.forEach(mt=>{const Ot=mt.element;r.has(Ot)&&(Ss.set(Ot,Ot),this._beforeAnimationBuild(mt.player.namespaceId,mt.instruction,an))}),i.forEach(mt=>{const Ot=mt.element;this._getPreviousPlayers(Ot,!1,mt.namespaceId,mt.triggerName,null).forEach(pn=>{Po(an,Ot,[]).push(pn),pn.destroy()})});const rd=ye.filter(mt=>Wk(mt,_,b)),id=new Map;Gk(id,this.driver,nt,b,Xl).forEach(mt=>{Wk(mt,_,b)&&rd.push(mt)});const GE=new Map;B.forEach((mt,Ot)=>{Gk(GE,this.driver,new Set(mt),_,"!")}),rd.forEach(mt=>{const Ot=id.get(mt),Ut=GE.get(mt);id.set(mt,new Map([...Array.from(Ot?.entries()??[]),...Array.from(Ut?.entries()??[])]))});const Tg=[],tP=[],nP={};l.forEach(mt=>{const{element:Ot,player:Ut,instruction:pn}=mt;if(r.has(Ot)){if(C.has(Ot))return Ut.onDestroy(()=>bc(Ot,pn.toStyles)),Ut.disabled=!0,Ut.overrideTotalTime(pn.totalTime),void i.push(Ut);let Mi=nP;if(Ss.size>1){let Lo=Ot;const Yh=[];for(;Lo=Lo.parentNode;){const dr=Ss.get(Lo);if(dr){Mi=dr;break}Yh.push(Lo)}Yh.forEach(dr=>Ss.set(dr,Mi))}const Ic=this._buildAnimation(Ut.namespaceId,pn,an,u,GE,id);if(Ut.setRealPlayer(Ic),Mi===nP)Tg.push(Ut);else{const Lo=this.playersByElement.get(Mi);Lo&&Lo.length&&(Ut.parentPlayer=Zh(Lo)),i.push(Ut)}}else Dg(Ot,pn.fromStyles),Ut.onDestroy(()=>bc(Ot,pn.toStyles)),tP.push(Ut),C.has(Ot)&&i.push(Ut)}),tP.forEach(mt=>{const Ot=u.get(mt.element);if(Ot&&Ot.length){const Ut=Zh(Ot);mt.setRealPlayer(Ut)}}),i.forEach(mt=>{mt.parentPlayer?mt.syncPlayerEvents(mt.parentPlayer):mt.destroy()});for(let mt=0;mt<ye.length;mt++){const Ot=ye[mt],Ut=Ot[da];if(Jy(Ot,sC),Ut&&Ut.hasAnimation)continue;let pn=[];if(p.size){let Ic=p.get(Ot);Ic&&Ic.length&&pn.push(...Ic);let Lo=this.driver.query(Ot,Rx,!0);for(let Yh=0;Yh<Lo.length;Yh++){let dr=p.get(Lo[Yh]);dr&&dr.length&&pn.push(...dr)}}const Mi=pn.filter(Ic=>!Ic.destroyed);Mi.length?Vj(this,Ot,Mi):this.processLeaveNode(Ot)}return ye.length=0,Tg.forEach(mt=>{this.players.push(mt),mt.onDone(()=>{mt.destroy();const Ot=this.players.indexOf(mt);this.players.splice(Ot,1)}),mt.play()}),Tg}elementContainsData(e,t){let r=!1;const i=t[da];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,u){let l=[];if(t){const p=this.playersByQueriedElement.get(e);p&&(l=p)}else{const p=this.playersByElement.get(e);if(p){const _=!u||u==$E;p.forEach(b=>{b.queued||!_&&b.triggerName!=i||l.push(b)})}}return(r||i)&&(l=l.filter(p=>!(r&&r!=p.namespaceId||i&&i!=p.triggerName))),l}_beforeAnimationBuild(e,t,r){const u=t.element,l=t.isRemovalTransition?void 0:e,p=t.isRemovalTransition?void 0:t.triggerName;for(const _ of t.timelines){const b=_.element,C=b!==u,x=Po(r,b,[]);this._getPreviousPlayers(b,C,l,p,t.toState).forEach(B=>{const G=B.getRealPlayer();G.beforeDestroy&&G.beforeDestroy(),B.destroy(),x.push(B)})}Dg(u,t.fromStyles)}_buildAnimation(e,t,r,i,u,l){const p=t.triggerName,_=t.element,b=[],C=new Set,x=new Set,V=t.timelines.map(G=>{const re=G.element;C.add(re);const ye=re[da];if(ye&&ye.removedBeforeQueried)return new RE(G.duration,G.delay);const je=re!==_,nt=function Uj(n){const e=[];return qk(n,e),e}((r.get(re)||Nj).map(an=>an.getRealPlayer())).filter(an=>!!an.element&&an.element===re),ft=u.get(re),ct=l.get(re),Rt=_k(0,this._normalizer,0,G.keyframes,ft,ct),Ft=this._buildPlayer(G,Rt,nt);if(G.subTimeline&&i&&x.add(re),je){const an=new qx(e,p,re);an.setRealPlayer(Ft),b.push(an)}return Ft});b.forEach(G=>{Po(this.playersByQueriedElement,G.element,[]).push(G),G.onDone(()=>function Pj(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,G.element,G))}),C.forEach(G=>ha(G,Ak));const B=Zh(V);return B.onDestroy(()=>{C.forEach(G=>Jy(G,Ak)),bc(_,t.toStyles)}),x.forEach(G=>{Po(i,G,[]).push(B)}),B}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new RE(e.duration,e.delay)}}class qx{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new RE,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>Cx(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Po(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function _C(n){return n&&1===n.nodeType}function $k(n,e){const t=n.style.display;return n.style.display=e??"none",t}function Gk(n,e,t,r,i){const u=[];t.forEach(_=>u.push($k(_)));const l=[];r.forEach((_,b)=>{const C=new Map;_.forEach(x=>{const V=e.computeStyle(b,x,i);C.set(x,V),(!V||0==V.length)&&(b[da]=Rj,l.push(b))}),n.set(b,C)});let p=0;return t.forEach(_=>$k(_,u[p++])),l}function zk(n,e){const t=new Map;if(n.forEach(p=>t.set(p,[])),0==e.length)return t;const i=new Set(e),u=new Map;function l(p){if(!p)return 1;let _=u.get(p);if(_)return _;const b=p.parentNode;return _=t.has(b)?b:i.has(b)?1:l(b),u.set(p,_),_}return e.forEach(p=>{const _=l(p);1!==_&&t.get(_).push(p)}),t}function ha(n,e){n.classList?.add(e)}function Jy(n,e){n.classList?.remove(e)}function Vj(n,e,t){Zh(t).onDone(()=>n.processLeaveNode(e))}function qk(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof O1?qk(r.players,e):e.push(r)}}function Wk(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(u=>i.add(u)):e.set(n,r),t.delete(n),!0}class vC{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,u)=>{},this._transitionEngine=new kj(e,t,r),this._timelineEngine=new Tj(e,t,r),this._transitionEngine.onRemovalComplete=(i,u)=>this.onRemovalComplete(i,u)}registerTrigger(e,t,r,i,u){const l=e+"-"+i;let p=this._triggerCache[l];if(!p){const _=[],C=Fx(this._driver,u,_,[]);if(_.length)throw function DB(n,e){return new d.vHH(3404,!1)}();p=function bj(n,e,t){return new Ij(n,e,t)}(i,C,this._normalizer),this._triggerCache[l]=p}this._transitionEngine.registerTrigger(t,i,p)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[u,l]=vk(r);this._timelineEngine.command(u,t,l,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,u){if("@"==r.charAt(0)){const[l,p]=vk(r);return this._timelineEngine.listen(l,t,p,u)}return this._transitionEngine.listen(e,t,r,i,u)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Hj=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let u=n.initialStylesByElement.get(t);u||n.initialStylesByElement.set(t,u=new Map),this._initialStyles=u}start(){this._state<1&&(this._startStyles&&bc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(bc(this._element,this._initialStyles),this._endStyles&&(bc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Dg(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Dg(this._element,this._endStyles),this._endStyles=null),bc(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function Wx(n){let e=null;return n.forEach((t,r)=>{(function $j(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class Zk{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:Ok(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Gj{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return Ik(e,t)}getParentElement(e){return Mx(e)}query(e,t,r){return Dk(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,u,l=[]){const _={duration:r,delay:i,fill:0==i?"both":"forwards"};u&&(_.easing=u);const b=new Map,C=l.filter(B=>B instanceof Zk);(function ZB(n,e){return 0===n||0===e})(r,i)&&C.forEach(B=>{B.currentSnapshot.forEach((G,re)=>b.set(re,G))});let x=function GB(n){return n.length?n[0]instanceof Map?n:n.map(e=>Sk(e)):[]}(t).map(B=>Kh(B));x=function KB(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((u,l)=>{r.has(l)||i.push(l),r.set(l,u)}),i.length)for(let u=1;u<e.length;u++){let l=e[u];i.forEach(p=>l.set(p,Ok(n,p)))}}return e}(e,x,b);const V=function jj(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=Wx(e[0]),e.length>1&&(r=Wx(e[e.length-1]))):e instanceof Map&&(t=Wx(e)),t||r?new Hj(n,t,r):null}(e,x);return new Zk(e,x,_,V)}}let zj=(()=>{class n extends S1{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:d.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?x1(t):t;return Kk(this._renderer,null,r,"register",[i]),new qj(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.FYo),d.LFG(ce))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class qj extends qV{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Wj(this._id,e,t||{},this._renderer)}}class Wj{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return Kk(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function Kk(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const Yk="@.disabled";let Zj=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(u,l)=>{const p=l?.parentNode(u);p&&l.removeChild(p,u)}}createRenderer(t,r){const u=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let C=this._rendererCache.get(u);return C||(C=new Qk("",u,this.engine,()=>this._rendererCache.delete(u)),this._rendererCache.set(u,C)),C}const l=r.id,p=r.id+"-"+this._currentId;this._currentId++,this.engine.register(p,t);const _=C=>{Array.isArray(C)?C.forEach(_):this.engine.registerTrigger(l,p,t,C.name,C)};return r.data.animation.forEach(_),new Kj(this,p,u,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(u=>{const[l,p]=u;l(p)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.FYo),d.LFG(vC),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Qk{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.destroyNode=this.delegate.destroyNode?u=>t.destroyNode(u):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==Yk?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Kj extends Qk{constructor(e,t,r,i,u){super(t,r,i,u),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==Yk?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function Yj(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let u=t.slice(1),l="";return"@"!=u.charAt(0)&&([u,l]=function Qj(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(u)),this.engine.listen(this.namespaceId,i,u,l,p=>{this.factory.scheduleListenerCallback(p._data||-1,r,p)})}return this.delegate.listen(e,t,r)}}let Jj=(()=>{class n extends vC{constructor(t,r,i,u){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ce),d.LFG(xx),d.LFG(jx),d.LFG(d.z2F))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Jk=[{provide:S1,useClass:zj},{provide:jx,useFactory:function Xj(){return new _j}},{provide:vC,useClass:Jj},{provide:d.FYo,useFactory:function eH(n,e,t){return new Zj(n,e,t)},deps:[qi,vC,d.R0b]}],Zx=[{provide:xx,useFactory:()=>new Gj},{provide:d.QbO,useValue:"BrowserAnimations"},...Jk],Xk=[{provide:xx,useClass:Ck},{provide:d.QbO,useValue:"NoopAnimations"},...Jk];let tH=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?Xk:Zx}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:Zx,imports:[Dd]}),n})();class wC{static#e=this.\u0275fac=function(t){return new(t||wC)};static#t=this.\u0275mod=d.oAB({type:wC,bootstrap:[iC]});static#n=this.\u0275inj=d.cJS({imports:[Dd,rC,er,no.hO.initializeApp(_2_firebaseConfig),zV,vs,Am,tH,r2,pU.forRoot(),j2]})}Wc().bootstrapModule(wC).catch(n=>console.error(n))},5867:(lt,Ie,P)=>{P.d(Ie,{C6:()=>d.getApps,Mq:()=>d.getApp});var d=P(9681);(0,d.registerVersion)("firebase","9.14.0","app")},127:(lt,Ie,P)=>{P.d(Ie,{Z:()=>d.Z});var d=P(3942);d.Z.registerVersion("firebase","9.14.0","app-compat")},1277:(lt,Ie,P)=>{P.r(Ie);var d=P(5861),te=P(3942),k=P(2090),le=P(9681),ue=P(1877),fe=P(655),ce=P(4859);const Ye=function He(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},rt=function Ae(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ge=new k.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ce=new ue.Yd("@firebase/auth");function Ve(v,...f){Ce.logLevel<=ue.in.ERROR&&Ce.error(`Auth (${le.SDK_VERSION}): ${v}`,...f)}function xe(v,...f){throw Pe(v,...f)}function be(v,...f){return Pe(v,...f)}function Re(v,f,m){const E=Object.assign(Object.assign({},rt()),{[f]:m});return new k.LL("auth","Firebase",E).create(f,{appName:v.name})}function $e(v,f,m){if(!(f instanceof m))throw m.name!==f.constructor.name&&xe(v,"argument-error"),Re(v,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Pe(v,...f){if("string"!=typeof v){const m=f[0],E=[...f.slice(1)];return E[0]&&(E[0].appName=v.name),v._errorFactory.create(m,...E)}return ge.create(v,...f)}function j(v,f,...m){if(!v)throw Pe(f,...m)}function we(v){const f="INTERNAL ASSERTION FAILED: "+v;throw Ve(f),new Error(f)}function K(v,f){v||we(f)}const X=new Map;function oe(v){K(v instanceof Function,"Expected a class definition");let f=X.get(v);return f?(K(f instanceof v,"Instance stored in cache mismatched with class"),f):(f=new v,X.set(v,f),f)}function Fe(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function pt(){return"http:"===nn()||"https:"===nn()}function nn(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class Ht{constructor(f,m){this.shortDelay=f,this.longDelay=m,K(m>f,"Short delay should be less than long delay!"),this.isMobile=(0,k.uI)()||(0,k.b$)()}get(){return function gn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(pt()||(0,k.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function yt(v,f){K(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return f?`${m}${f.startsWith("/")?f.slice(1):f}`:m}class tn{static initialize(f,m,E){this.fetchImpl=f,m&&(this.headersImpl=m),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void we("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void we("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void we("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const wr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},kr=new Ht(3e4,6e4);function Et(v,f){return v.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:v.tenantId}):f}function In(v,f,m,E){return di.apply(this,arguments)}function di(){return(di=(0,d.Z)(function*(v,f,m,E,M={}){return Xr(v,M,(0,d.Z)(function*(){let O={},q={};E&&("GET"===f?q=E:O={body:JSON.stringify(E)});const de=(0,k.xO)(Object.assign({key:v.config.apiKey},q)).slice(1),Be=yield v._getAdditionalHeaders();return Be["Content-Type"]="application/json",v.languageCode&&(Be["X-Firebase-Locale"]=v.languageCode),tn.fetch()(Ms(v,v.config.apiHost,m,de),Object.assign({method:f,headers:Be,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function Xr(v,f,m){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,d.Z)(function*(v,f,m){v._canInitEmulator=!1;const E=Object.assign(Object.assign({},wr),f);try{const M=new xi(v),O=yield Promise.race([m(),M.promise]);M.clearNetworkTimeout();const q=yield O.json();if("needConfirmation"in q)throw Lr(v,"account-exists-with-different-credential",q);if(O.ok&&!("errorMessage"in q))return q;{const de=O.ok?q.errorMessage:q.error.message,[Be,Xe]=de.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Be)throw Lr(v,"credential-already-in-use",q);if("EMAIL_EXISTS"===Be)throw Lr(v,"email-already-in-use",q);if("USER_DISABLED"===Be)throw Lr(v,"user-disabled",q);const vt=E[Be]||Be.toLowerCase().replace(/[_\s]+/g,"-");if(Xe)throw Re(v,vt,Xe);xe(v,vt)}}catch(M){if(M instanceof k.ZR)throw M;xe(v,"network-request-failed")}})).apply(this,arguments)}function Fr(v,f,m,E){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,d.Z)(function*(v,f,m,E,M={}){const O=yield In(v,f,m,E,M);return"mfaPendingCredential"in O&&xe(v,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function Ms(v,f,m,E){const M=`${f}${m}?${E}`;return v.config.emulator?yt(v.config,M):`${v.config.apiScheme}://${M}`}class xi{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((m,E)=>{this.timer=setTimeout(()=>E(be(this.auth,"network-request-failed")),kr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Lr(v,f,m){const E={appName:v.name};m.email&&(E.email=m.email),m.phoneNumber&&(E.phoneNumber=m.phoneNumber);const M=be(v,f,E);return M.customData._tokenResponse=m,M}function yn(){return(yn=(0,d.Z)(function*(v,f){return In(v,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function ei(v,f){return _t.apply(this,arguments)}function _t(){return(_t=(0,d.Z)(function*(v,f){return In(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function ts(v,f){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,d.Z)(function*(v,f){return In(v,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function Cn(v){if(v)try{const f=new Date(Number(v));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function kt(){return(kt=(0,d.Z)(function*(v,f=!1){const m=(0,k.m9)(v),E=yield m.getIdToken(f),M=Tt(E);j(M&&M.exp&&M.auth_time&&M.iat,m.auth,"internal-error");const O="object"==typeof M.firebase?M.firebase:void 0,q=O?.sign_in_provider;return{claims:M,token:E,authTime:Cn(wt(M.auth_time)),issuedAtTime:Cn(wt(M.iat)),expirationTime:Cn(wt(M.exp)),signInProvider:q||null,signInSecondFactor:O?.sign_in_second_factor||null}})).apply(this,arguments)}function wt(v){return 1e3*Number(v)}function Tt(v){var f;const[m,E,M]=v.split(".");if(void 0===m||void 0===E||void 0===M)return Ve("JWT malformed, contained fewer than 3 sections"),null;try{const O=(0,k.tV)(E);return O?JSON.parse(O):(Ve("Failed to decode base64 JWT payload"),null)}catch(O){return Ve("Caught error parsing JWT payload as JSON",null===(f=O)||void 0===f?void 0:f.toString()),null}}function On(v,f){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,d.Z)(function*(v,f,m=!1){if(m)return f;try{return yield f}catch(E){throw E instanceof k.ZR&&Ri(E)&&v.auth.currentUser===v&&(yield v.auth.signOut()),E}})).apply(this,arguments)}function Ri({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class br{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var m;if(f){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const M=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(f=!1){var m=this;if(!this.isRunning)return;const E=this.getInterval(f);this.timerId=setTimeout((0,d.Z)(function*(){yield m.iteration()}),E)}iteration(){var f=this;return(0,d.Z)(function*(){var m;try{yield f.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===(null===(m=E)||void 0===m?void 0:m.code)&&f.schedule(!0))}f.schedule()})()}}class pa{constructor(f,m){this.createdAt=f,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cn(this.lastLoginAt),this.creationTime=Cn(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function un(v){return rs.apply(this,arguments)}function rs(){return(rs=(0,d.Z)(function*(v){var f;const m=v.auth,E=yield v.getIdToken(),M=yield On(v,ts(m,{idToken:E}));j(M?.users.length,m,"internal-error");const O=M.users[0];v._notifyReloadListener(O);const q=null!==(f=O.providerUserInfo)&&void 0!==f&&f.length?Ge(O.providerUserInfo):[],de=Hi(v.providerData,q),vt=!!v.isAnonymous&&!(v.email&&O.passwordHash||de?.length),ut={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:de,metadata:new pa(O.createdAt,O.lastLoginAt),isAnonymous:vt};Object.assign(v,ut)})).apply(this,arguments)}function Ir(){return(Ir=(0,d.Z)(function*(v){const f=(0,k.m9)(v);yield un(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Hi(v,f){return[...v.filter(E=>!f.some(M=>M.providerId===E.providerId)),...f]}function Ge(v){return v.map(f=>{var{providerId:m}=f,E=(0,fe._T)(f,["providerId"]);return{providerId:m,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function et(){return(et=(0,d.Z)(function*(v,f){const m=yield Xr(v,{},(0,d.Z)(function*(){const E=(0,k.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:M,apiKey:O}=v.config,q=Ms(v,M,"/v1/token",`key=${O}`),de=yield v._getAdditionalHeaders();return de["Content-Type"]="application/x-www-form-urlencoded",tn.fetch()(q,{method:"POST",headers:de,body:E})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Dt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){j(f.idToken,"internal-error"),j(typeof f.idToken<"u","internal-error"),j(typeof f.refreshToken<"u","internal-error");const m="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function ns(v){const f=Tt(v);return j(f,"internal-error"),j(typeof f.exp<"u","internal-error"),j(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,m)}getToken(f,m=!1){var E=this;return(0,d.Z)(function*(){return j(!E.accessToken||E.refreshToken,f,"user-token-expired"),m||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(f,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,m){var E=this;return(0,d.Z)(function*(){const{accessToken:M,refreshToken:O,expiresIn:q}=yield function Te(v,f){return et.apply(this,arguments)}(f,m);E.updateTokensAndExpiration(M,O,Number(q))})()}updateTokensAndExpiration(f,m,E){this.refreshToken=m||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(f,m){const{refreshToken:E,accessToken:M,expirationTime:O}=m,q=new Dt;return E&&(j("string"==typeof E,"internal-error",{appName:f}),q.refreshToken=E),M&&(j("string"==typeof M,"internal-error",{appName:f}),q.accessToken=M),O&&(j("number"==typeof O,"internal-error",{appName:f}),q.expirationTime=O),q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new Dt,this.toJSON())}_performRefresh(){return we("not implemented")}}function Ct(v,f){j("string"==typeof v||typeof v>"u","internal-error",{appName:f})}class jt{constructor(f){var{uid:m,auth:E,stsTokenManager:M}=f,O=(0,fe._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new br(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=E,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new pa(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(f){var m=this;return(0,d.Z)(function*(){const E=yield On(m,m.stsTokenManager.getToken(m.auth,f));return j(E,m.auth,"internal-error"),m.accessToken!==E&&(m.accessToken=E,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),E})()}getIdTokenResult(f){return function xs(v){return kt.apply(this,arguments)}(this,f)}reload(){return function Xt(v){return Ir.apply(this,arguments)}(this)}_assign(f){this!==f&&(j(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(m=>Object.assign({},m)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new jt(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){j(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,m=!1){var E=this;return(0,d.Z)(function*(){let M=!1;f.idToken&&f.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(f),M=!0),m&&(yield un(E)),yield E.auth._persistUserIfCurrent(E),M&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var f=this;return(0,d.Z)(function*(){const m=yield f.getIdToken();return yield On(f,function ao(v,f){return yn.apply(this,arguments)}(f.auth,{idToken:m})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,m){var E,M,O,q,de,Be,Xe,vt;const ut=null!==(E=m.displayName)&&void 0!==E?E:void 0,or=null!==(M=m.email)&&void 0!==M?M:void 0,Bi=null!==(O=m.phoneNumber)&&void 0!==O?O:void 0,dl=null!==(q=m.photoURL)&&void 0!==q?q:void 0,jf=null!==(de=m.tenantId)&&void 0!==de?de:void 0,Qd=null!==(Be=m._redirectEventId)&&void 0!==Be?Be:void 0,ms=null!==(Xe=m.createdAt)&&void 0!==Xe?Xe:void 0,Ha=null!==(vt=m.lastLoginAt)&&void 0!==vt?vt:void 0,{uid:$a,emailVerified:hl,isAnonymous:Jd,providerData:Hf,stsTokenManager:Kg}=m;j($a&&Kg,f,"internal-error");const $f=Dt.fromJSON(this.name,Kg);j("string"==typeof $a,f,"internal-error"),Ct(ut,f.name),Ct(or,f.name),j("boolean"==typeof hl,f,"internal-error"),j("boolean"==typeof Jd,f,"internal-error"),Ct(Bi,f.name),Ct(dl,f.name),Ct(jf,f.name),Ct(Qd,f.name),Ct(ms,f.name),Ct(Ha,f.name);const fl=new jt({uid:$a,auth:f,email:or,emailVerified:hl,displayName:ut,isAnonymous:Jd,photoURL:dl,phoneNumber:Bi,tenantId:jf,stsTokenManager:$f,createdAt:ms,lastLoginAt:Ha});return Hf&&Array.isArray(Hf)&&(fl.providerData=Hf.map(ZE=>Object.assign({},ZE))),Qd&&(fl._redirectEventId=Qd),fl}static _fromIdTokenResponse(f,m,E=!1){return(0,d.Z)(function*(){const M=new Dt;M.updateFromServerResponse(m);const O=new jt({uid:m.localId,auth:f,stsTokenManager:M,isAnonymous:E});return yield un(O),O})()}}const U=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(m,E){var M=this;return(0,d.Z)(function*(){M.storage[m]=E})()}_get(m){var E=this;return(0,d.Z)(function*(){const M=E.storage[m];return void 0===M?null:M})()}_remove(m){var E=this;return(0,d.Z)(function*(){delete E.storage[m]})()}_addListener(m,E){}_removeListener(m,E){}}return v.type="NONE",v})();function Y(v,f,m){return`firebase:${v}:${f}:${m}`}class _e{constructor(f,m,E){this.persistence=f,this.auth=m,this.userKey=E;const{config:M,name:O}=this.auth;this.fullUserKey=Y(this.userKey,M.apiKey,O),this.fullPersistenceKey=Y("persistence",M.apiKey,O),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,d.Z)(function*(){const m=yield f.persistence._get(f.fullUserKey);return m?jt._fromJSON(f.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var m=this;return(0,d.Z)(function*(){if(m.persistence===f)return;const E=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=f,E?m.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,m,E="authUser"){return(0,d.Z)(function*(){if(!m.length)return new _e(oe(U),f,E);const M=(yield Promise.all(m.map(function(){var Xe=(0,d.Z)(function*(vt){if(yield vt._isAvailable())return vt});return function(vt){return Xe.apply(this,arguments)}}()))).filter(Xe=>Xe);let O=M[0]||oe(U);const q=Y(E,f.config.apiKey,f.name);let de=null;for(const Xe of m)try{const vt=yield Xe._get(q);if(vt){const ut=jt._fromJSON(f,vt);Xe!==O&&(de=ut),O=Xe;break}}catch{}const Be=M.filter(Xe=>Xe._shouldAllowMigration);return O._shouldAllowMigration&&Be.length?(O=Be[0],de&&(yield O._set(q,de.toJSON())),yield Promise.all(m.map(function(){var Xe=(0,d.Z)(function*(vt){if(vt!==O)try{yield vt._remove(q)}catch{}});return function(vt){return Xe.apply(this,arguments)}}())),new _e(O,f,E)):new _e(O,f,E)})()}}function ne(v){const f=v.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(An(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(it(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(rr(f))return"Blackberry";if(Wt(f))return"Webos";if($t(f))return"Safari";if((f.includes("chrome/")||Qt(f))&&!f.includes("edge/"))return"Chrome";if(bt(f))return"Android";{const E=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function it(v=(0,k.z$)()){return/firefox\//i.test(v)}function $t(v=(0,k.z$)()){const f=v.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Qt(v=(0,k.z$)()){return/crios\//i.test(v)}function An(v=(0,k.z$)()){return/iemobile/i.test(v)}function bt(v=(0,k.z$)()){return/android/i.test(v)}function rr(v=(0,k.z$)()){return/blackberry/i.test(v)}function Wt(v=(0,k.z$)()){return/webos/i.test(v)}function Kn(v=(0,k.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function Qh(v=(0,k.z$)()){return Kn(v)||bt(v)||Wt(v)||rr(v)||/windows phone/i.test(v)||An(v)}function su(v,f=[]){let m;switch(v){case"Browser":m=ne((0,k.z$)());break;case"Worker":m=`${ne((0,k.z$)())}-${v}`;break;default:m=v}const E=f.length?f.join(","):"FirebaseCore-web";return`${m}/JsCore/${le.SDK_VERSION}/${E}`}class Dc{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,m){const E=O=>new Promise((q,de)=>{try{q(f(O))}catch(Be){de(Be)}});E.onAbort=m,this.queue.push(E);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(f){var m=this;return(0,d.Z)(function*(){var E;if(m.auth.currentUser===f)return;const M=[];try{for(const O of m.queue)yield O(f),O.onAbort&&M.push(O.onAbort)}catch(O){M.reverse();for(const q of M)try{q()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:null===(E=O)||void 0===E?void 0:E.message})}})()}}class sd{constructor(f,m,E){this.app=f,this.heartbeatServiceProvider=m,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new od(this),this.idTokenSubscription=new od(this),this.beforeStateQueue=new Dc(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ge,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(f,m){var E=this;return m&&(this._popupRedirectResolver=oe(m)),this._initializationPromise=this.queue((0,d.Z)(function*(){var M,O;if(!E._deleted&&(E.persistenceManager=yield _e.create(E,f),!E._deleted)){if(null!==(M=E._popupRedirectResolver)&&void 0!==M&&M._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(m),E.lastNotifiedUid=(null===(O=E.currentUser)||void 0===O?void 0:O.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,d.Z)(function*(){if(f._deleted)return;const m=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||m){if(f.currentUser&&m&&f.currentUser.uid===m.uid)return f._currentUser._assign(m),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(m,!0)}})()}initializeCurrentUser(f){var m=this;return(0,d.Z)(function*(){var E;const M=yield m.assertedPersistence.getCurrentUser();let O=M,q=!1;if(f&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const de=null===(E=m.redirectUser)||void 0===E?void 0:E._redirectEventId,Be=O?._redirectEventId,Xe=yield m.tryRedirectSignIn(f);(!de||de===Be)&&Xe?.user&&(O=Xe.user,q=!0)}if(!O)return m.directlySetCurrentUser(null);if(!O._redirectEventId){if(q)try{yield m.beforeStateQueue.runMiddleware(O)}catch(de){O=M,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(de))}return O?m.reloadAndSetCurrentUserOrClear(O):m.directlySetCurrentUser(null)}return j(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===O._redirectEventId?m.directlySetCurrentUser(O):m.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(f){var m=this;return(0,d.Z)(function*(){let E=null;try{E=yield m._popupRedirectResolver._completeRedirectFn(m,f,!0)}catch{yield m._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(f){var m=this;return(0,d.Z)(function*(){var E;try{yield un(f)}catch(M){if("auth/network-request-failed"!==(null===(E=M)||void 0===E?void 0:E.code))return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function Bt(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var f=this;return(0,d.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var m=this;return(0,d.Z)(function*(){const E=f?(0,k.m9)(f):null;return E&&j(E.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(E&&E._clone(m))})()}_updateCurrentUser(f,m=!1){var E=this;return(0,d.Z)(function*(){if(!E._deleted)return f&&j(E.tenantId===f.tenantId,E,"tenant-id-mismatch"),m||(yield E.beforeStateQueue.runMiddleware(f)),E.queue((0,d.Z)(function*(){yield E.directlySetCurrentUser(f),E.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,d.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var m=this;return this.queue((0,d.Z)(function*(){yield m.assertedPersistence.setPersistence(oe(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new k.LL("auth","Firebase",f())}onAuthStateChanged(f,m,E){return this.registerStateListener(this.authStateSubscription,f,m,E)}beforeAuthStateChanged(f,m){return this.beforeStateQueue.pushCallback(f,m)}onIdTokenChanged(f,m,E){return this.registerStateListener(this.idTokenSubscription,f,m,E)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,m){var E=this;return(0,d.Z)(function*(){const M=yield E.getOrInitRedirectPersistenceManager(m);return null===f?M.removeCurrentUser():M.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var m=this;return(0,d.Z)(function*(){if(!m.redirectPersistenceManager){const E=f&&oe(f)||m._popupRedirectResolver;j(E,m,"argument-error"),m.redirectPersistenceManager=yield _e.create(m,[oe(E._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(f){var m=this;return(0,d.Z)(function*(){var E,M;return m._isInitialized&&(yield m.queue((0,d.Z)(function*(){}))),(null===(E=m._currentUser)||void 0===E?void 0:E._redirectEventId)===f?m._currentUser:(null===(M=m.redirectUser)||void 0===M?void 0:M._redirectEventId)===f?m.redirectUser:null})()}_persistUserIfCurrent(f){var m=this;return(0,d.Z)(function*(){if(f===m.currentUser)return m.queue((0,d.Z)(function*(){return m.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(m=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,m,E,M){if(this._deleted)return()=>{};const O="function"==typeof m?m:m.next.bind(m),q=this._isInitialized?Promise.resolve():this._initializationPromise;return j(q,this,"internal-error"),q.then(()=>O(this.currentUser)),"function"==typeof m?f.addObserver(m,E,M):f.addObserver(m)}directlySetCurrentUser(f){var m=this;return(0,d.Z)(function*(){m.currentUser&&m.currentUser!==f&&m._currentUser._stopProactiveRefresh(),f&&m.isProactiveRefreshEnabled&&f._startProactiveRefresh(),m.currentUser=f,f?yield m.assertedPersistence.setCurrentUser(f):yield m.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return j(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=su(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,d.Z)(function*(){var m;const E={"X-Client-Version":f.clientVersion};f.app.options.appId&&(E["X-Firebase-gmpid"]=f.app.options.appId);const M=yield null===(m=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return M&&(E["X-Firebase-Client"]=M),E})()}}function Sn(v){return(0,k.m9)(v)}class od{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,k.ne)(m=>this.observer=m)}get next(){return j(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ya(v){const f=v.indexOf(":");return f<0?"":v.substr(0,f+1)}function en(v){if(!v)return null;const f=Number(v);return isNaN(f)?null:f}class Ln{constructor(f,m){this.providerId=f,this.signInMethod=m}toJSON(){return we("not implemented")}_getIdTokenResponse(f){return we("not implemented")}_linkToIdToken(f,m){return we("not implemented")}_getReauthenticationResolver(f){return we("not implemented")}}function $n(v,f){return hr.apply(this,arguments)}function hr(){return(hr=(0,d.Z)(function*(v,f){return In(v,"POST","/v1/accounts:resetPassword",Et(v,f))})).apply(this,arguments)}function ti(v,f){return We.apply(this,arguments)}function We(){return(We=(0,d.Z)(function*(v,f){return In(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Lt(v,f){return hn.apply(this,arguments)}function hn(){return(hn=(0,d.Z)(function*(v,f){return In(v,"POST","/v1/accounts:update",Et(v,f))})).apply(this,arguments)}function hi(){return(hi=(0,d.Z)(function*(v,f){return Fr(v,"POST","/v1/accounts:signInWithPassword",Et(v,f))})).apply(this,arguments)}function Mn(v,f){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,d.Z)(function*(v,f){return In(v,"POST","/v1/accounts:sendOobCode",Et(v,f))})).apply(this,arguments)}function cn(v,f){return uo.apply(this,arguments)}function uo(){return(uo=(0,d.Z)(function*(v,f){return Mn(v,f)})).apply(this,arguments)}function Ns(v,f){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,d.Z)(function*(v,f){return Mn(v,f)})).apply(this,arguments)}function va(v,f){return co.apply(this,arguments)}function co(){return(co=(0,d.Z)(function*(v,f){return Mn(v,f)})).apply(this,arguments)}function ad(v,f){return ki.apply(this,arguments)}function ki(){return(ki=(0,d.Z)(function*(v,f){return Mn(v,f)})).apply(this,arguments)}function lo(){return(lo=(0,d.Z)(function*(v,f){return Fr(v,"POST","/v1/accounts:signInWithEmailLink",Et(v,f))})).apply(this,arguments)}function Ur(){return(Ur=(0,d.Z)(function*(v,f){return Fr(v,"POST","/v1/accounts:signInWithEmailLink",Et(v,f))})).apply(this,arguments)}class is extends Ln{constructor(f,m,E,M=null){super("password",E),this._email=f,this._password=m,this._tenantId=M}static _fromEmailAndPassword(f,m){return new is(f,m,"password")}static _fromEmailAndCode(f,m,E=null){return new is(f,m,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(f){var m=this;return(0,d.Z)(function*(){switch(m.signInMethod){case"password":return function Cr(v,f){return hi.apply(this,arguments)}(f,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function fr(v,f){return lo.apply(this,arguments)}(f,{email:m._email,oobCode:m._password});default:xe(f,"internal-error")}})()}_linkToIdToken(f,m){var E=this;return(0,d.Z)(function*(){switch(E.signInMethod){case"password":return ti(f,{idToken:m,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Bo(v,f){return Ur.apply(this,arguments)}(f,{idToken:m,email:E._email,oobCode:E._password});default:xe(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Vn(v,f){return ln.apply(this,arguments)}function ln(){return(ln=(0,d.Z)(function*(v,f){return Fr(v,"POST","/v1/accounts:signInWithIdp",Et(v,f))})).apply(this,arguments)}class $i extends Ln{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const m=new $i(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(m.idToken=f.idToken),f.accessToken&&(m.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(m.nonce=f.nonce),f.pendingToken&&(m.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(m.accessToken=f.oauthToken,m.secret=f.oauthTokenSecret):xe("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:M}=m,O=(0,fe._T)(m,["providerId","signInMethod"]);if(!E||!M)return null;const q=new $i(E,M);return q.idToken=O.idToken||void 0,q.accessToken=O.accessToken||void 0,q.secret=O.secret,q.nonce=O.nonce,q.pendingToken=O.pendingToken||null,q}_getIdTokenResponse(f){return Vn(f,this.buildRequest())}_linkToIdToken(f,m){const E=this.buildRequest();return E.idToken=m,Vn(f,E)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,Vn(f,m)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),f.postBody=(0,k.xO)(m)}return f}}function ou(v,f){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,d.Z)(function*(v,f){return In(v,"POST","/v1/accounts:sendVerificationCode",Et(v,f))})).apply(this,arguments)}function fi(){return(fi=(0,d.Z)(function*(v,f){return Fr(v,"POST","/v1/accounts:signInWithPhoneNumber",Et(v,f))})).apply(this,arguments)}function Qn(){return(Qn=(0,d.Z)(function*(v,f){const m=yield Fr(v,"POST","/v1/accounts:signInWithPhoneNumber",Et(v,f));if(m.temporaryProof)throw Lr(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Xh={USER_NOT_FOUND:"user-not-found"};function ni(){return(ni=(0,d.Z)(function*(v,f){return Fr(v,"POST","/v1/accounts:signInWithPhoneNumber",Et(v,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Xh)})).apply(this,arguments)}class ss extends Ln{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,m){return new ss({verificationId:f,verificationCode:m})}static _fromTokenResponse(f,m){return new ss({phoneNumber:f,temporaryProof:m})}_getIdTokenResponse(f){return function Rs(v,f){return fi.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,m){return function ho(v,f){return Qn.apply(this,arguments)}(f,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Br(v,f){return ni.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:m,verificationId:E,verificationCode:M}=this.params;return f&&m?{temporaryProof:f,phoneNumber:m}:{sessionInfo:E,code:M}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:m,verificationCode:E,phoneNumber:M,temporaryProof:O}=f;return E||m||M||O?new ss({verificationId:m,verificationCode:E,phoneNumber:M,temporaryProof:O}):null}}class Tr{constructor(f){var m,E,M,O,q,de;const Be=(0,k.zd)((0,k.pd)(f)),Xe=null!==(m=Be.apiKey)&&void 0!==m?m:null,vt=null!==(E=Be.oobCode)&&void 0!==E?E:null,ut=function Tc(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=Be.mode)&&void 0!==M?M:null);j(Xe&&vt&&ut,"argument-error"),this.apiKey=Xe,this.operation=ut,this.code=vt,this.continueUrl=null!==(O=Be.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(q=Be.languageCode)&&void 0!==q?q:null,this.tenantId=null!==(de=Be.tenantId)&&void 0!==de?de:null}static parseLink(f){const m=function jo(v){const f=(0,k.zd)((0,k.pd)(v)).link,m=f?(0,k.zd)((0,k.pd)(f)).deep_link_id:null,E=(0,k.zd)((0,k.pd)(v)).deep_link_id;return(E?(0,k.zd)((0,k.pd)(E)).link:null)||E||m||f||v}(f);try{return new Tr(m)}catch{return null}}}let cd=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,E){return is._fromEmailAndPassword(m,E)}static credentialWithLink(m,E){const M=Tr.parseLink(E);return j(M,"argument-error"),is._fromEmailAndCode(m,M.code,M.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class os{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class Os extends os{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class wa extends Os{static credentialFromJSON(f){const m="string"==typeof f?JSON.parse(f):f;return j("providerId"in m&&"signInMethod"in m,"argument-error"),$i._fromParams(m)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return j(f.idToken||f.accessToken,"argument-error"),$i._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return wa.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return wa.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:m,oauthAccessToken:E,oauthTokenSecret:M,pendingToken:O,nonce:q,providerId:de}=f;if(!E&&!M&&!m&&!O||!de)return null;try{return new wa(de)._credential({idToken:m,accessToken:E,nonce:q,pendingToken:O})}catch{return null}}}let ld=(()=>{class v extends Os{constructor(){super("facebook.com")}static credential(m){return $i._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),ef=(()=>{class v extends Os{constructor(){super("google.com"),this.addScope("profile")}static credential(m,E){return $i._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:E})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:E,oauthAccessToken:M}=m;if(!E&&!M)return null;try{return v.credential(E,M)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Ac=(()=>{class v extends Os{constructor(){super("github.com")}static credential(m){return $i._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class au extends Ln{constructor(f,m){super(f,f),this.pendingToken=m}_getIdTokenResponse(f){return Vn(f,this.buildRequest())}_linkToIdToken(f,m){const E=this.buildRequest();return E.idToken=m,Vn(f,E)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,Vn(f,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:M,pendingToken:O}=m;return E&&M&&O&&E===M?new au(E,O):null}static _create(f,m){return new au(f,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ri extends os{constructor(f){j(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return ri.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return ri.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const m=au.fromJSON(f);return j(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:m,providerId:E}=f;if(!m||!E)return null;try{return au._create(E,m)}catch{return null}}}let hd=(()=>{class v extends Os{constructor(){super("twitter.com")}static credential(m,E){return $i._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:E})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:E,oauthTokenSecret:M}=m;if(!E||!M)return null;try{return v.credential(E,M)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Sc(v,f){return fd.apply(this,arguments)}function fd(){return(fd=(0,d.Z)(function*(v,f){return Fr(v,"POST","/v1/accounts:signUp",Et(v,f))})).apply(this,arguments)}class pi{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,m,E,M=!1){return(0,d.Z)(function*(){const O=yield jt._fromIdTokenResponse(f,E,M),q=tf(E);return new pi({user:O,providerId:q,_tokenResponse:E,operationType:m})})()}static _forOperation(f,m,E){return(0,d.Z)(function*(){yield f._updateTokensIfNecessary(E,!0);const M=tf(E);return new pi({user:f,providerId:M,_tokenResponse:E,operationType:m})})()}}function tf(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function xc(){return(xc=(0,d.Z)(function*(v){var f;const m=Sn(v);if(yield m._initializationPromise,null!==(f=m.currentUser)&&void 0!==f&&f.isAnonymous)return new pi({user:m.currentUser,providerId:null,operationType:"signIn"});const E=yield Sc(m,{returnSecureToken:!0}),M=yield pi._fromIdTokenResponse(m,"signIn",E,!0);return yield m._updateCurrentUser(M.user),M})).apply(this,arguments)}class ba extends k.ZR{constructor(f,m,E,M){var O;super(m.code,m.message),this.operationType=E,this.user=M,Object.setPrototypeOf(this,ba.prototype),this.customData={appName:f.name,tenantId:null!==(O=f.tenantId)&&void 0!==O?O:void 0,_serverResponse:m.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(f,m,E,M){return new ba(f,m,E,M)}}function Sg(v,f,m,E){return("reauthenticate"===f?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?ba._fromErrorAndOperation(v,O,f,E):O})}function fo(v){return new Set(v.map(({providerId:f})=>f).filter(f=>!!f))}function gi(){return(gi=(0,d.Z)(function*(v,f){const m=(0,k.m9)(v);yield ks(!0,m,f);const{providerUserInfo:E}=yield ei(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[f]}),M=fo(E||[]);return m.providerData=m.providerData.filter(O=>M.has(O.providerId)),M.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function cu(v,f){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,d.Z)(function*(v,f,m=!1){const E=yield On(v,f._linkToIdToken(v.auth,yield v.getIdToken()),m);return pi._forOperation(v,"link",E)})).apply(this,arguments)}function ks(v,f,m){return lu.apply(this,arguments)}function lu(){return(lu=(0,d.Z)(function*(v,f,m){yield un(f);const M=!1===v?"provider-already-linked":"no-such-provider";j(fo(f.providerData).has(m)===v,f.auth,M)})).apply(this,arguments)}function du(v,f){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,d.Z)(function*(v,f,m=!1){var E;const{auth:M}=v,O="reauthenticate";try{const q=yield On(v,Sg(M,O,f,v),m);j(q.idToken,M,"internal-error");const de=Tt(q.idToken);j(de,M,"internal-error");const{sub:Be}=de;return j(v.uid===Be,M,"user-mismatch"),pi._forOperation(v,O,q)}catch(q){throw"auth/user-not-found"===(null===(E=q)||void 0===E?void 0:E.code)&&xe(M,"user-mismatch"),q}})).apply(this,arguments)}function Da(v,f){return Nc.apply(this,arguments)}function Nc(){return(Nc=(0,d.Z)(function*(v,f,m=!1){const E="signIn",M=yield Sg(v,E,f),O=yield pi._fromIdTokenResponse(v,E,M);return m||(yield v._updateCurrentUser(O.user)),O})).apply(this,arguments)}function xn(v,f){return hu.apply(this,arguments)}function hu(){return(hu=(0,d.Z)(function*(v,f){return Da(Sn(v),f)})).apply(this,arguments)}function Ar(v,f){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,d.Z)(function*(v,f){const m=(0,k.m9)(v);return yield ks(!1,m,f.providerId),cu(m,f)})).apply(this,arguments)}function fu(v,f){return $o.apply(this,arguments)}function $o(){return($o=(0,d.Z)(function*(v,f){return du((0,k.m9)(v),f)})).apply(this,arguments)}function gd(v,f){return pu.apply(this,arguments)}function pu(){return(pu=(0,d.Z)(function*(v,f){return Fr(v,"POST","/v1/accounts:signInWithCustomToken",Et(v,f))})).apply(this,arguments)}function Ca(){return(Ca=(0,d.Z)(function*(v,f){const m=Sn(v),E=yield gd(m,{token:f,returnSecureToken:!0}),M=yield pi._fromIdTokenResponse(m,"signIn",E);return yield m._updateCurrentUser(M.user),M})).apply(this,arguments)}class gu{constructor(f,m){this.factorId=f,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(f,m){return"phoneInfo"in m?Ta._fromServerResponse(f,m):xe(f,"internal-error")}}class Ta extends gu{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,m){return new Ta(m)}}function pr(v,f,m){var E;j((null===(E=m.url)||void 0===E?void 0:E.length)>0,v,"invalid-continue-uri"),j(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),f.continueUrl=m.url,f.dynamicLinkDomain=m.dynamicLinkDomain,f.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(j(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),f.iOSBundleId=m.iOS.bundleId),m.android&&(j(m.android.packageName.length>0,v,"missing-android-pkg-name"),f.androidInstallApp=m.android.installApp,f.androidMinimumVersionCode=m.android.minimumVersion,f.androidPackageName=m.android.packageName)}function Go(){return(Go=(0,d.Z)(function*(v,f,m){const E=(0,k.m9)(v),M={requestType:"PASSWORD_RESET",email:f};m&&pr(E,M,m),yield Ns(E,M)})).apply(this,arguments)}function jr(){return(jr=(0,d.Z)(function*(v,f,m){yield $n((0,k.m9)(v),{oobCode:f,newPassword:m})})).apply(this,arguments)}function po(){return(po=(0,d.Z)(function*(v,f){yield Lt((0,k.m9)(v),{oobCode:f})})).apply(this,arguments)}function mu(v,f){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,d.Z)(function*(v,f){const m=(0,k.m9)(v),E=yield $n(m,{oobCode:f}),M=E.requestType;switch(j(M,m,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":j(E.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":j(E.mfaInfo,m,"internal-error");default:j(E.email,m,"internal-error")}let O=null;return E.mfaInfo&&(O=gu._fromServerResponse(Sn(m),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:O},operation:M}})).apply(this,arguments)}function Aa(){return(Aa=(0,d.Z)(function*(v,f){const{data:m}=yield mu((0,k.m9)(v),f);return m.email})).apply(this,arguments)}function Pc(){return(Pc=(0,d.Z)(function*(v,f,m){const E=Sn(v),M=yield Sc(E,{returnSecureToken:!0,email:f,password:m}),O=yield pi._fromIdTokenResponse(E,"signIn",M);return yield E._updateCurrentUser(O.user),O})).apply(this,arguments)}function md(){return(md=(0,d.Z)(function*(v,f,m){const E=(0,k.m9)(v),M={requestType:"EMAIL_SIGNIN",email:f};j(m.handleCodeInApp,E,"argument-error"),m&&pr(E,M,m),yield va(E,M)})).apply(this,arguments)}function Sa(){return(Sa=(0,d.Z)(function*(v,f,m){const E=(0,k.m9)(v),M=cd.credentialWithLink(f,m||Fe());return j(M._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),xn(E,M)})).apply(this,arguments)}function xg(v,f){return De.apply(this,arguments)}function De(){return(De=(0,d.Z)(function*(v,f){return In(v,"POST","/v1/accounts:createAuthUri",Et(v,f))})).apply(this,arguments)}function Ma(){return(Ma=(0,d.Z)(function*(v,f){const E={identifier:f,continueUri:pt()?Fe():"http://localhost"},{signinMethods:M}=yield xg((0,k.m9)(v),E);return M||[]})).apply(this,arguments)}function Gn(){return(Gn=(0,d.Z)(function*(v,f){const m=(0,k.m9)(v),M={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};f&&pr(m.auth,M,f);const{email:O}=yield cn(m.auth,M);O!==v.email&&(yield v.reload())})).apply(this,arguments)}function mi(){return(mi=(0,d.Z)(function*(v,f,m){const E=(0,k.m9)(v),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:f};m&&pr(E.auth,O,m);const{email:q}=yield ad(E.auth,O);q!==v.email&&(yield v.reload())})).apply(this,arguments)}function Pi(v,f){return _u.apply(this,arguments)}function _u(){return(_u=(0,d.Z)(function*(v,f){return In(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Fc(){return(Fc=(0,d.Z)(function*(v,{displayName:f,photoURL:m}){if(void 0===f&&void 0===m)return;const E=(0,k.m9)(v),O={idToken:yield E.getIdToken(),displayName:f,photoUrl:m,returnSecureToken:!0},q=yield On(E,Pi(E.auth,O));E.displayName=q.displayName||null,E.photoURL=q.photoUrl||null;const de=E.providerData.find(({providerId:Be})=>"password"===Be);de&&(de.displayName=E.displayName,de.photoURL=E.photoURL),yield E._updateTokensIfNecessary(q)})).apply(this,arguments)}function Vc(v,f,m){return ir.apply(this,arguments)}function ir(){return(ir=(0,d.Z)(function*(v,f,m){const{auth:E}=v,O={idToken:yield v.getIdToken(),returnSecureToken:!0};f&&(O.email=f),m&&(O.password=m);const q=yield On(v,ti(E,O));yield v._updateTokensIfNecessary(q,!0)})).apply(this,arguments)}class Wo{constructor(f,m,E={}){this.isNewUser=f,this.providerId=m,this.profile=E}}class Zo extends Wo{constructor(f,m,E,M){super(f,m,E),this.username=M}}class as extends Wo{constructor(f,m){super(f,"facebook.com",m)}}class yd extends Zo{constructor(f,m){super(f,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class af extends Wo{constructor(f,m){super(f,"google.com",m)}}class _d extends Zo{constructor(f,m,E){super(f,"twitter.com",m,E)}}function Ng(v){const{user:f,_tokenResponse:m}=v;return f.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function Ls(v){var f,m;if(!v)return null;const{providerId:E}=v,M=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},O=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!E&&v?.idToken){const q=null===(m=null===(f=Tt(v.idToken))||void 0===f?void 0:f.firebase)||void 0===m?void 0:m.sign_in_provider;if(q)return new Wo(O,"anonymous"!==q&&"custom"!==q?q:null)}if(!E)return null;switch(E){case"facebook.com":return new as(O,M);case"github.com":return new yd(O,M);case"google.com":return new af(O,M);case"twitter.com":return new _d(O,M,v.screenName||null);case"custom":case"anonymous":return new Wo(O,null);default:return new Wo(O,E,M)}}(m)}class go{constructor(f,m,E){this.type=f,this.credential=m,this.auth=E}static _fromIdtoken(f,m){return new go("enroll",f,m)}static _fromMfaPendingCredential(f){return new go("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var m,E;if(f?.multiFactorSession){if(null!==(m=f.multiFactorSession)&&void 0!==m&&m.pendingCredential)return go._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(E=f.multiFactorSession)&&void 0!==E&&E.idToken)return go._fromIdtoken(f.multiFactorSession.idToken)}return null}}class Eu{constructor(f,m,E){this.session=f,this.hints=m,this.signInResolver=E}static _fromError(f,m){const E=Sn(f),M=m.customData._serverResponse,O=(M.mfaInfo||[]).map(de=>gu._fromServerResponse(E,de));j(M.mfaPendingCredential,E,"internal-error");const q=go._fromMfaPendingCredential(M.mfaPendingCredential);return new Eu(q,O,function(){var de=(0,d.Z)(function*(Be){const Xe=yield Be._process(E,q);delete M.mfaInfo,delete M.mfaPendingCredential;const vt=Object.assign(Object.assign({},M),{idToken:Xe.idToken,refreshToken:Xe.refreshToken});switch(m.operationType){case"signIn":const ut=yield pi._fromIdTokenResponse(E,m.operationType,vt);return yield E._updateCurrentUser(ut.user),ut;case"reauthenticate":return j(m.user,E,"internal-error"),pi._forOperation(m.user,m.operationType,vt);default:xe(E,"internal-error")}});return function(Be){return de.apply(this,arguments)}}())}resolveSignIn(f){var m=this;return(0,d.Z)(function*(){return m.signInResolver(f)})()}}function vd(v,f){return In(v,"POST","/v2/accounts/mfaEnrollment:start",Et(v,f))}class us{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(E=>gu._fromServerResponse(f.auth,E)))})}static _fromUser(f){return new us(f)}getSession(){var f=this;return(0,d.Z)(function*(){return go._fromIdtoken(yield f.user.getIdToken(),f.user.auth)})()}enroll(f,m){var E=this;return(0,d.Z)(function*(){const M=f,O=yield E.getSession(),q=yield On(E.user,M._process(E.user.auth,O,m));return yield E.user._updateTokensIfNecessary(q),E.user.reload()})()}unenroll(f){var m=this;return(0,d.Z)(function*(){var E;const M="string"==typeof f?f:f.uid,O=yield m.user.getIdToken(),q=yield On(m.user,function zn(v,f){return In(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Et(v,f))}(m.user.auth,{idToken:O,mfaEnrollmentId:M}));m.enrolledFactors=m.enrolledFactors.filter(({uid:de})=>de!==M),yield m.user._updateTokensIfNecessary(q);try{yield m.user.reload()}catch(de){if("auth/user-token-expired"!==(null===(E=de)||void 0===E?void 0:E.code))throw de}})()}}const rn=new WeakMap,mo="__sak";class Hc{constructor(f,m){this.storageRetriever=f,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(mo,"1"),this.storage.removeItem(mo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,m){return this.storage.setItem(f,JSON.stringify(m)),Promise.resolve()}_get(f){const m=this.storage.getItem(f);return Promise.resolve(m?JSON.parse(m):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const zi=(()=>{class v extends Hc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,E)=>this.onStorageEvent(m,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function hf(){const v=(0,k.z$)();return $t(v)||Kn(v)}()&&function ma(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Qh(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const E of Object.keys(this.listeners)){const M=this.storage.getItem(E),O=this.localCache[E];M!==O&&m(E,O,M)}}onStorageEvent(m,E=!1){if(!m.key)return void this.forAllChangedKeys((de,Be,Xe)=>{this.notifyListeners(de,Xe)});const M=m.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const de=this.storage.getItem(M);if(m.newValue!==de)null!==m.newValue?this.storage.setItem(M,m.newValue):this.storage.removeItem(M);else if(this.localCache[M]===m.newValue&&!E)return}const O=()=>{const de=this.storage.getItem(M);!E&&this.localCache[M]===de||this.notifyListeners(M,de)},q=this.storage.getItem(M);!function ga(){return(0,k.w1)()&&10===document.documentMode}()||q===m.newValue||m.newValue===m.oldValue?O():setTimeout(O,10)}notifyListeners(m,E){this.localCache[m]=E;const M=this.listeners[m];if(M)for(const O of Array.from(M))O(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,E,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:E,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,E){var M=()=>super._set,O=this;return(0,d.Z)(function*(){yield M().call(O,m,E),O.localCache[m]=JSON.stringify(E)})()}_get(m){var E=()=>super._get,M=this;return(0,d.Z)(function*(){const O=yield E().call(M,m);return M.localCache[m]=JSON.stringify(O),O})()}_remove(m){var E=()=>super._remove,M=this;return(0,d.Z)(function*(){yield E().call(M,m),delete M.localCache[m]})()}}return v.type="LOCAL",v})(),Fi=(()=>{class v extends Hc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,E){}_removeListener(m,E){}}return v.type="SESSION",v})();let wd=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const E=this.receivers.find(O=>O.isListeningto(m));if(E)return E;const M=new v(m);return this.receivers.push(M),M}isListeningto(m){return this.eventTarget===m}handleEvent(m){var E=this;return(0,d.Z)(function*(){const M=m,{eventId:O,eventType:q,data:de}=M.data,Be=E.handlersMap[q];if(!Be?.size)return;M.ports[0].postMessage({status:"ack",eventId:O,eventType:q});const Xe=Array.from(Be).map(function(){var ut=(0,d.Z)(function*(or){return or(M.origin,de)});return function(or){return ut.apply(this,arguments)}}()),vt=yield function yo(v){return Promise.all(v.map(function(){var f=(0,d.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(E){return{fulfilled:!1,reason:E}}});return function(m){return f.apply(this,arguments)}}()))}(Xe);M.ports[0].postMessage({status:"done",eventId:O,eventType:q,response:vt})})()}_subscribe(m,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(E)}_unsubscribe(m,E){this.handlersMap[m]&&E&&this.handlersMap[m].delete(E),(!E||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Hr(v="",f=10){let m="";for(let E=0;E<f;E++)m+=Math.floor(10*Math.random());return v+m}class cs{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,m,E=50){var M=this;return(0,d.Z)(function*(){const O=typeof MessageChannel<"u"?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let q,de;return new Promise((Be,Xe)=>{const vt=Hr("",20);O.port1.start();const ut=setTimeout(()=>{Xe(new Error("unsupported_event"))},E);de={messageChannel:O,onMessage(or){const Bi=or;if(Bi.data.eventId===vt)switch(Bi.data.status){case"ack":clearTimeout(ut),q=setTimeout(()=>{Xe(new Error("timeout"))},3e3);break;case"done":clearTimeout(q),Be(Bi.data.response);break;default:clearTimeout(ut),clearTimeout(q),Xe(new Error("invalid_response"))}}},M.handlers.add(de),O.port1.addEventListener("message",de.onMessage),M.target.postMessage({eventType:f,eventId:vt,data:m},[O.port2])}).finally(()=>{de&&M.removeMessageHandler(de)})})()}}function Un(){return window}function Vs(){return typeof Un().WorkerGlobalScope<"u"&&"function"==typeof Un().importScripts}function $c(){return($c=(0,d.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Iu="firebaseLocalStorageDb",qi="firebaseLocalStorage",Na="fbase_key";class Li{constructor(f){this.request=f}toPromise(){return new Promise((f,m)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function Ko(v,f){return v.transaction([qi],f?"readwrite":"readonly").objectStore(qi)}function Us(){const v=indexedDB.open(Iu,1);return new Promise((f,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const E=v.result;try{E.createObjectStore(qi,{keyPath:Na})}catch(M){m(M)}}),v.addEventListener("success",(0,d.Z)(function*(){const E=v.result;E.objectStoreNames.contains(qi)?f(E):(E.close(),yield function Ra(){const v=indexedDB.deleteDatabase(Iu);return new Li(v).toPromise()}(),f(yield Us()))}))})}function Du(v,f,m){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,d.Z)(function*(v,f,m){const E=Ko(v,!0).put({[Na]:f,value:m});return new Li(E).toPromise()})).apply(this,arguments)}function js(){return(js=(0,d.Z)(function*(v,f){const m=Ko(v,!1).get(f),E=yield new Li(m).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Id(v,f){const m=Ko(v,!0).delete(f);return new Li(m).toPromise()}const $r=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,d.Z)(function*(){return m.db||(m.db=yield Us()),m.db})()}_withRetries(m){var E=this;return(0,d.Z)(function*(){let M=0;for(;;)try{const O=yield E._openDb();return yield m(O)}catch(O){if(M++>3)throw O;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,d.Z)(function*(){return Vs()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,d.Z)(function*(){m.receiver=wd._getInstance(function Gc(){return Vs()?self:null}()),m.receiver._subscribe("keyChanged",function(){var E=(0,d.Z)(function*(M,O){return{keyProcessed:(yield m._poll()).includes(O.key)}});return function(M,O){return E.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var E=(0,d.Z)(function*(M,O){return["keyChanged"]});return function(M,O){return E.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,d.Z)(function*(){var E,M;if(m.activeServiceWorker=yield function xa(){return $c.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new cs(m.activeServiceWorker);const O=yield m.sender._send("ping",{},800);!O||(null===(E=O[0])||void 0===E?void 0:E.fulfilled)&&(null===(M=O[0])||void 0===M?void 0:M.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var E=this;return(0,d.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function gf(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:m},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Us();return yield Du(m,mo,"1"),yield Id(m,mo),!0}catch{}return!1})()}_withPendingWrite(m){var E=this;return(0,d.Z)(function*(){E.pendingWrites++;try{yield m()}finally{E.pendingWrites--}})()}_set(m,E){var M=this;return(0,d.Z)(function*(){return M._withPendingWrite((0,d.Z)(function*(){return yield M._withRetries(O=>Du(O,m,E)),M.localCache[m]=E,M.notifyServiceWorker(m)}))})()}_get(m){var E=this;return(0,d.Z)(function*(){const M=yield E._withRetries(O=>function Yo(v,f){return js.apply(this,arguments)}(O,m));return E.localCache[m]=M,M})()}_remove(m){var E=this;return(0,d.Z)(function*(){return E._withPendingWrite((0,d.Z)(function*(){return yield E._withRetries(M=>Id(M,m)),delete E.localCache[m],E.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,d.Z)(function*(){const E=yield m._withRetries(q=>{const de=Ko(q,!1).getAll();return new Li(de).toPromise()});if(!E)return[];if(0!==m.pendingWrites)return[];const M=[],O=new Set;for(const{fbase_key:q,value:de}of E)O.add(q),JSON.stringify(m.localCache[q])!==JSON.stringify(de)&&(m.notifyListeners(q,de),M.push(q));for(const q of Object.keys(m.localCache))m.localCache[q]&&!O.has(q)&&(m.notifyListeners(q,null),M.push(q));return M})()}notifyListeners(m,E){this.localCache[m]=E;const M=this.listeners[m];if(M)for(const O of Array.from(M))O(E)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function Tu(v,f){return In(v,"POST","/v2/accounts/mfaSignIn:start",Et(v,f))}function Qo(){return(Qo=(0,d.Z)(function*(v){return(yield In(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Hs(v){return new Promise((f,m)=>{const E=document.createElement("script");E.setAttribute("src",v),E.onload=f,E.onerror=M=>{const O=be("internal-error");O.customData=M,m(O)},E.type="text/javascript",E.charset="UTF-8",function Oa(){var v,f;return null!==(f=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==f?f:document}().appendChild(E)})}function Wc(v){return`__${v}${Math.floor(1e6*Math.random())}`}const $s=1e12;class Dd{constructor(f){this.auth=f,this.counter=$s,this._widgets=new Map}render(f,m){const E=this.counter;return this._widgets.set(E,new Og(f,this.auth.name,m||{})),this.counter++,E}reset(f){var m;const E=f||$s;null===(m=this._widgets.get(E))||void 0===m||m.delete(),this._widgets.delete(E)}getResponse(f){var m;return(null===(m=this._widgets.get(f||$s))||void 0===m?void 0:m.getResponse())||""}execute(f){var m=this;return(0,d.Z)(function*(){var E;return null===(E=m._widgets.get(f||$s))||void 0===E||E.execute(),""})()}}class Og{constructor(f,m,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof f?document.getElementById(f):f;j(M,"argument-error",{appName:m}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Su(v){const f=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<v;E++)f.push(m.charAt(Math.floor(Math.random()*m.length)));return f.join("")}(50);const{callback:f,"expired-callback":m}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Jo=Wc("rcb"),yf=new Ht(3e4,6e4);class Mu{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=Un().grecaptcha)||void 0===f||!f.render)}load(f,m=""){return j(function ka(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(m),f,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(Un().grecaptcha):new Promise((E,M)=>{const O=Un().setTimeout(()=>{M(be(f,"network-request-failed"))},yf.get());Un()[Jo]=()=>{Un().clearTimeout(O),delete Un()[Jo];const de=Un().grecaptcha;if(!de)return void M(be(f,"internal-error"));const Be=de.render;de.render=(Xe,vt)=>{const ut=Be(Xe,vt);return this.counter++,ut},this.hostLanguage=m,E(de)},Hs(`https://www.google.com/recaptcha/api.js??${(0,k.xO)({onload:Jo,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(O),M(be(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var m;return!(null===(m=Un().grecaptcha)||void 0===m||!m.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class e_{load(f){return(0,d.Z)(function*(){return new Dd(f)})()}clearedOneInstance(){}}const _f="recaptcha",Kc={theme:"light",type:"image"};class _o{constructor(f,m=Object.assign({},Kc),E){this.parameters=m,this.type=_f,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Sn(E),this.isInvisible="invisible"===this.parameters.size,j(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof f?document.getElementById(f):f;j(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new e_:new Mu,this.validateStartingState()}verify(){var f=this;return(0,d.Z)(function*(){f.assertNotDestroyed();const m=yield f.render(),E=f.getAssertedRecaptcha();return E.getResponse(m)||new Promise(O=>{const q=de=>{!de||(f.tokenChangeListeners.delete(q),O(de))};f.tokenChangeListeners.add(q),f.isInvisible&&E.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){j(!this.parameters.sitekey,this.auth,"argument-error"),j(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),j(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return m=>{if(this.tokenChangeListeners.forEach(E=>E(m)),"function"==typeof f)f(m);else if("string"==typeof f){const E=Un()[f];"function"==typeof E&&E(m)}}}assertNotDestroyed(){j(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,d.Z)(function*(){if(yield f.init(),!f.widgetId){let m=f.container;if(!f.isInvisible){const E=document.createElement("div");m.appendChild(E),m=E}f.widgetId=f.getAssertedRecaptcha().render(m,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,d.Z)(function*(){j(pt()&&!Vs(),f.auth,"internal-error"),yield function Cd(){let v=null;return new Promise(f=>{"complete"!==document.readyState?(v=()=>f(),window.addEventListener("load",v)):f()}).catch(f=>{throw v&&window.removeEventListener("load",v),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const m=yield function Vi(v){return Qo.apply(this,arguments)}(f.auth);j(m,f.auth,"internal-error"),f.parameters.sitekey=m})()}getAssertedRecaptcha(){return j(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class xu{constructor(f,m){this.verificationId=f,this.onConfirmation=m}confirm(f){const m=ss._fromVerification(this.verificationId,f);return this.onConfirmation(m)}}function Wi(){return(Wi=(0,d.Z)(function*(v,f,m){const E=Sn(v),M=yield Ad(E,f,(0,k.m9)(m));return new xu(M,O=>xn(E,O))})).apply(this,arguments)}function Yc(){return(Yc=(0,d.Z)(function*(v,f,m){const E=(0,k.m9)(v);yield ks(!1,E,"phone");const M=yield Ad(E.auth,f,(0,k.m9)(m));return new xu(M,O=>Ar(E,O))})).apply(this,arguments)}function Gs(){return(Gs=(0,d.Z)(function*(v,f,m){const E=(0,k.m9)(v),M=yield Ad(E.auth,f,(0,k.m9)(m));return new xu(M,O=>fu(E,O))})).apply(this,arguments)}function Ad(v,f,m){return Sd.apply(this,arguments)}function Sd(){return(Sd=(0,d.Z)(function*(v,f,m){var E;const M=yield m.verify();try{let O;if(j("string"==typeof M,v,"argument-error"),j(m.type===_f,v,"argument-error"),O="string"==typeof f?{phoneNumber:f}:f,"session"in O){const q=O.session;if("phoneNumber"in O)return j("enroll"===q.type,v,"internal-error"),(yield vd(v,{idToken:q.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{j("signin"===q.type,v,"internal-error");const de=(null===(E=O.multiFactorHint)||void 0===E?void 0:E.uid)||O.multiFactorUid;return j(de,v,"missing-multi-factor-info"),(yield Tu(v,{mfaPendingCredential:q.credential,mfaEnrollmentId:de,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:q}=yield ou(v,{phoneNumber:O.phoneNumber,recaptchaToken:M});return q}}finally{m._reset()}})).apply(this,arguments)}function vf(){return(vf=(0,d.Z)(function*(v,f){yield cu((0,k.m9)(v),f)})).apply(this,arguments)}let Qc=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=Sn(m)}verifyPhoneNumber(m,E){return Ad(this.auth,m,(0,k.m9)(E))}static credential(m,E){return ss._fromVerification(m,E)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:E,temporaryProof:M}=m;return E&&M?ss._fromTokenResponse(E,M):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Xo(v,f){return f?oe(f):(j(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Ef extends Ln{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Vn(f,this._buildIdpRequest())}_linkToIdToken(f,m){return Vn(f,this._buildIdpRequest(m))}_getReauthenticationResolver(f){return Vn(f,this._buildIdpRequest())}_buildIdpRequest(f){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(m.idToken=f),m}}function t_(v){return Da(v.auth,new Ef(v),v.bypassAuthState)}function wf(v){const{auth:f,user:m}=v;return j(m,f,"internal-error"),du(m,new Ef(v),v.bypassAuthState)}function bf(v){return zs.apply(this,arguments)}function zs(){return(zs=(0,d.Z)(function*(v){const{auth:f,user:m}=v;return j(m,f,"internal-error"),cu(m,new Ef(v),v.bypassAuthState)})).apply(this,arguments)}class Md{constructor(f,m,E,M,O=!1){this.auth=f,this.resolver=E,this.user=M,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var f=this;return new Promise(function(){var m=(0,d.Z)(function*(E,M){f.pendingPromise={resolve:E,reject:M};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(O){f.reject(O)}});return function(E,M){return m.apply(this,arguments)}}())}onAuthEvent(f){var m=this;return(0,d.Z)(function*(){const{urlResponse:E,sessionId:M,postBody:O,tenantId:q,error:de,type:Be}=f;if(de)return void m.reject(de);const Xe={auth:m.auth,requestUri:E,sessionId:M,tenantId:q||void 0,postBody:O||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Be)(Xe))}catch(vt){m.reject(vt)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return t_;case"linkViaPopup":case"linkViaRedirect":return bf;case"reauthViaPopup":case"reauthViaRedirect":return wf;default:xe(this.auth,"internal-error")}}resolve(f){K(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){K(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Jc=new Ht(2e3,1e4);function qs(){return(qs=(0,d.Z)(function*(v,f,m){const E=Sn(v);$e(v,f,os);const M=Xo(E,m);return new bn(E,"signInViaPopup",f,M).executeNotNull()})).apply(this,arguments)}function vn(){return(vn=(0,d.Z)(function*(v,f,m){const E=(0,k.m9)(v);$e(E.auth,f,os);const M=Xo(E.auth,m);return new bn(E.auth,"reauthViaPopup",f,M,E).executeNotNull()})).apply(this,arguments)}function Qe(){return(Qe=(0,d.Z)(function*(v,f,m){const E=(0,k.m9)(v);$e(E.auth,f,os);const M=Xo(E.auth,m);return new bn(E.auth,"linkViaPopup",f,M,E).executeNotNull()})).apply(this,arguments)}let bn=(()=>{class v extends Md{constructor(m,E,M,O,q){super(m,E,O,q),this.provider=M,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,d.Z)(function*(){const E=yield m.execute();return j(E,m.auth,"internal-error"),E})()}onExecution(){var m=this;return(0,d.Z)(function*(){K(1===m.filter.length,"Popup operations only handle one event");const E=Hr();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],E),m.authWindow.associatedEvent=E,m.resolver._originValidation(m.auth).catch(M=>{m.reject(M)}),m.resolver._isIframeWebStorageSupported(m.auth,M=>{M||m.reject(be(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(be(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var E,M;this.pollId=null!==(M=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==M&&M.closed?window.setTimeout(()=>{this.pollId=null,this.reject(be(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,Jc.get())};m()}}return v.currentPopupAction=null,v})();const ds=new Map;class Ws extends Md{constructor(f,m,E=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,E),this.eventId=null}execute(){var f=()=>super.execute,m=this;return(0,d.Z)(function*(){let E=ds.get(m.auth._key());if(!E){try{const O=(yield function yi(v,f){return hs.apply(this,arguments)}(m.resolver,m.auth))?yield f().call(m):null;E=()=>Promise.resolve(O)}catch(M){E=()=>Promise.reject(M)}ds.set(m.auth._key(),E)}return m.bypassAuthState||ds.set(m.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(f){var m=()=>super.onAuthEvent,E=this;return(0,d.Z)(function*(){if("signInViaRedirect"===f.type)return m().call(E,f);if("unknown"!==f.type){if(f.eventId){const M=yield E.auth._redirectUserForId(f.eventId);if(M)return E.user=M,m().call(E,f);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function hs(){return(hs=(0,d.Z)(function*(v,f){const m=Ks(f),E=Sr(v);if(!(yield E._isAvailable()))return!1;const M="true"===(yield E._get(m));return yield E._remove(m),M})).apply(this,arguments)}function el(v,f){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,d.Z)(function*(v,f){return Sr(v)._set(Ks(f),"true")})).apply(this,arguments)}function Nu(v,f){ds.set(v._key(),f)}function Sr(v){return oe(v._redirectPersistence)}function Ks(v){return Y("pendingRedirect",v.config.apiKey,v.name)}function D(){return(D=(0,d.Z)(function*(v,f,m){const E=Sn(v);$e(v,f,os);const M=Xo(E,m);return yield el(M,E),M._openRedirect(E,f,"signInViaRedirect")})).apply(this,arguments)}function L(){return(L=(0,d.Z)(function*(v,f,m){const E=(0,k.m9)(v);$e(E.auth,f,os);const M=Xo(E.auth,m);yield el(M,E.auth);const O=yield dt(E);return M._openRedirect(E.auth,f,"reauthViaRedirect",O)})).apply(this,arguments)}function Se(){return(Se=(0,d.Z)(function*(v,f,m){const E=(0,k.m9)(v);$e(E.auth,f,os);const M=Xo(E.auth,m);yield ks(!1,E,f.providerId),yield el(M,E.auth);const O=yield dt(E);return M._openRedirect(E.auth,f,"linkViaRedirect",O)})).apply(this,arguments)}function ot(){return(ot=(0,d.Z)(function*(v,f){return yield Sn(v)._initializationPromise,Mt(v,f,!1)})).apply(this,arguments)}function Mt(v,f){return St.apply(this,arguments)}function St(){return(St=(0,d.Z)(function*(v,f,m=!1){const E=Sn(v),M=Xo(E,f),q=yield new Ws(E,M,m).execute();return q&&!m&&(delete q.user._redirectEventId,yield E._persistUserIfCurrent(q.user),yield E._setRedirectUser(null,f)),q})).apply(this,arguments)}function dt(v){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,d.Z)(function*(v){const f=Hr(`${v.uid}:::`);return v._redirectEventId=f,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),f})).apply(this,arguments)}class Ys{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let m=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(f,E)&&(m=!0,this.sendToConsumer(f,E),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function tl(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gr(v);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=f,m=!0)),m}sendToConsumer(f,m){var E;if(f.error&&!gr(f)){const M=(null===(E=f.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";m.onError(be(this.auth,M))}else m.onAuthEvent(f)}isEventForConsumer(f,m){const E=null===m.eventId||!!f.eventId&&f.eventId===m.eventId;return m.filter.includes(f.type)&&E}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Gr(f))}saveEventToCache(f){this.cachedEventUids.add(Gr(f)),this.lastProcessedEventTime=Date.now()}}function Gr(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(f=>f).join("-")}function gr({type:v,error:f}){return"unknown"===v&&"auth/no-auth-event"===f?.code}function Bn(v){return fs.apply(this,arguments)}function fs(){return(fs=(0,d.Z)(function*(v,f={}){return In(v,"GET","/v1/projects",f)})).apply(this,arguments)}const si=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fn=/^https?/;function Ru(){return(Ru=(0,d.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:f}=yield Bn(v);for(const m of f)try{if(_i(m))return}catch{}xe(v,"unauthorized-domain")})).apply(this,arguments)}function _i(v){const f=Fe(),{protocol:m,hostname:E}=new URL(f);if(v.startsWith("chrome-extension://")){const q=new URL(v);return""===q.hostname&&""===E?"chrome-extension:"===m&&v.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===m&&q.hostname===E}if(!fn.test(m))return!1;if(si.test(v))return E===v;const M=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(E)}const oi=new Ht(3e4,6e4);function xd(){const v=Un().___jsl;if(v?.H)for(const f of Object.keys(v.H))if(v.H[f].r=v.H[f].r||[],v.H[f].L=v.H[f].L||[],v.H[f].r=[...v.H[f].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let Nd=null;function Eo(v){return Nd=Nd||function kg(v){return new Promise((f,m)=>{var E,M,O;function q(){xd(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{xd(),m(be(v,"network-request-failed"))},timeout:oi.get()})}if(null!==(M=null===(E=Un().gapi)||void 0===E?void 0:E.iframes)&&void 0!==M&&M.Iframe)f(gapi.iframes.getContext());else{if(null===(O=Un().gapi)||void 0===O||!O.load){const de=Wc("iframefcb");return Un()[de]=()=>{gapi.load?q():m(be(v,"network-request-failed"))},Hs(`https://apis.google.com/js/api.js?onload=${de}`).catch(Be=>m(Be))}q()}}).catch(f=>{throw Nd=null,f})}(v),Nd}const ps=new Ht(5e3,15e3),Pg={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Rd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Od(v){const f=v.config;j(f.authDomain,v,"auth-domain-config-required");const m=f.emulator?yt(f,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,E={apiKey:f.apiKey,appName:v.name,v:le.SDK_VERSION},M=Rd.get(v.config.apiHost);M&&(E.eid=M);const O=v._getFrameworks();return O.length&&(E.fw=O.join(",")),`${m}?${(0,k.xO)(E).slice(1)}`}function If(){return If=(0,d.Z)(function*(v){const f=yield Eo(v),m=Un().gapi;return j(m,v,"internal-error"),f.open({where:document.body,url:Od(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Pg,dontclear:!0},E=>new Promise(function(){var M=(0,d.Z)(function*(O,q){yield E.restyle({setHideOnLeave:!1});const de=be(v,"network-request-failed"),Be=Un().setTimeout(()=>{q(de)},ps.get());function Xe(){Un().clearTimeout(Be),O(E)}E.ping(Xe).then(Xe,()=>{q(de)})});return function(O,q){return M.apply(this,arguments)}}()))}),If.apply(this,arguments)}const s_={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ou{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Pd(v,f,m,E,M,O){j(v.config.authDomain,v,"auth-domain-config-required"),j(v.config.apiKey,v,"invalid-api-key");const q={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:E,v:le.SDK_VERSION,eventId:M};if(f instanceof os){f.setDefaultLanguage(v.languageCode),q.providerId=f.providerId||"",(0,k.xb)(f.getCustomParameters())||(q.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Be,Xe]of Object.entries(O||{}))q[Be]=Xe}if(f instanceof Os){const Be=f.getScopes().filter(Xe=>""!==Xe);Be.length>0&&(q.scopes=Be.join(","))}v.tenantId&&(q.tid=v.tenantId);const de=q;for(const Be of Object.keys(de))void 0===de[Be]&&delete de[Be];return`${function Cf({config:v}){return v.emulator?yt(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,k.xO)(de).slice(1)}`}const Fd="webStorageSupport",Qs=class mr{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Fi,this._completeRedirectFn=Mt,this._overrideRedirectResult=Nu}_openPopup(f,m,E,M){var O=this;return(0,d.Z)(function*(){var q;K(null===(q=O.eventManagers[f._key()])||void 0===q?void 0:q.manager,"_initialize() not called before _openPopup()");const de=Pd(f,m,E,Fe(),M);return function qE(v,f,m,E=500,M=600){const O=Math.max((window.screen.availHeight-M)/2,0).toString(),q=Math.max((window.screen.availWidth-E)/2,0).toString();let de="";const Be=Object.assign(Object.assign({},s_),{width:E.toString(),height:M.toString(),top:O,left:q}),Xe=(0,k.z$)().toLowerCase();m&&(de=Qt(Xe)?"_blank":m),it(Xe)&&(f=f||"http://localhost",Be.scrollbars="yes");const vt=Object.entries(Be).reduce((or,[Bi,dl])=>`${or}${Bi}=${dl},`,"");if(function Dr(v=(0,k.z$)()){var f;return Kn(v)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(Xe)&&"_self"!==de)return function WE(v,f){const m=document.createElement("a");m.href=v,m.target=f;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(E)}(f||"",de),new Ou(null);const ut=window.open(f||"",de,vt);j(ut,v,"popup-blocked");try{ut.focus()}catch{}return new Ou(ut)}(f,de,Hr())})()}_openRedirect(f,m,E,M){var O=this;return(0,d.Z)(function*(){return yield O._originValidation(f),function bu(v){Un().location.href=v}(Pd(f,m,E,Fe(),M)),new Promise(()=>{})})()}_initialize(f){const m=f._key();if(this.eventManagers[m]){const{manager:M,promise:O}=this.eventManagers[m];return M?Promise.resolve(M):(K(O,"If manager is not set, promise should be"),O)}const E=this.initAndGetManager(f);return this.eventManagers[m]={promise:E},E.catch(()=>{delete this.eventManagers[m]}),E}initAndGetManager(f){var m=this;return(0,d.Z)(function*(){const E=yield function i_(v){return If.apply(this,arguments)}(f),M=new Ys(f);return E.register("authEvent",O=>(j(O?.authEvent,f,"invalid-auth-event"),{status:M.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[f._key()]={manager:M},m.iframes[f._key()]=E,M})()}_isIframeWebStorageSupported(f,m){this.iframes[f._key()].send(Fd,{type:Fd},M=>{var O;const q=null===(O=M?.[0])||void 0===O?void 0:O[Fd];void 0!==q&&m(!!q),xe(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function vo(v){return Ru.apply(this,arguments)}(f)),this.originValidationPromises[m]}get _shouldInitProactively(){return Qh()||$t()||Kn()}};class rl{constructor(f){this.factorId=f}_process(f,m,E){switch(m.type){case"enroll":return this._finalizeEnroll(f,m.credential,E);case"signin":return this._finalizeSignIn(f,m.credential);default:return we("unexpected MultiFactorSessionType")}}}class Zi extends rl{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new Zi(f)}_finalizeEnroll(f,m,E){return function jc(v,f){return In(v,"POST","/v2/accounts/mfaEnrollment:finalize",Et(v,f))}(f,{idToken:m,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,m){return function qc(v,f){return In(v,"POST","/v2/accounts/mfaSignIn:finalize",Et(v,f))}(f,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Fg=(()=>{class v{constructor(){}static assertion(m){return Zi._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var Tf="@firebase/auth",Lg="0.20.11";class Af{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var m=this;return(0,d.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const m=this.auth.onIdTokenChanged(E=>{var M;f((null===(M=E)||void 0===M?void 0:M.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,m),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const m=this.internalListeners.get(f);!m||(this.internalListeners.delete(f),m(),this.updateProactiveRefresh())}assertAuthConfigured(){j(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function qn(){return window}function ku(){return(ku=(0,d.Z)(function*(v,f,m){var E;const{BuildInfo:M}=qn();K(f.sessionId,"AuthEvent did not contain a session ID");const O=yield a_(f.sessionId),q={};return Kn()?q.ibi=M.packageName:bt()?q.apn=M.packageName:xe(v,"operation-not-supported-in-this-environment"),M.displayName&&(q.appDisplayName=M.displayName),q.sessionId=O,Pd(v,m,f.type,void 0,null!==(E=f.eventId)&&void 0!==E?E:void 0,q)})).apply(this,arguments)}function La(){return(La=(0,d.Z)(function*(v){const{BuildInfo:f}=qn(),m={};Kn()?m.iosBundleId=f.packageName:bt()?m.androidPackageName=f.packageName:xe(v,"operation-not-supported-in-this-environment"),yield Bn(v,m)})).apply(this,arguments)}function Ud(){return(Ud=(0,d.Z)(function*(v,f,m){const{cordova:E}=qn();let M=()=>{};try{yield new Promise((O,q)=>{let de=null;function Be(){var ut;O();const or=null===(ut=E.plugins.browsertab)||void 0===ut?void 0:ut.close;"function"==typeof or&&or(),"function"==typeof m?.close&&m.close()}function Xe(){de||(de=window.setTimeout(()=>{q(be(v,"redirect-cancelled-by-user"))},2e3))}function vt(){"visible"===document?.visibilityState&&Xe()}f.addPassiveListener(Be),document.addEventListener("resume",Xe,!1),bt()&&document.addEventListener("visibilitychange",vt,!1),M=()=>{f.removePassiveListener(Be),document.removeEventListener("resume",Xe,!1),document.removeEventListener("visibilitychange",vt,!1),de&&window.clearTimeout(de)}})}finally{M()}})).apply(this,arguments)}function a_(v){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,d.Z)(function*(v){const f=Bd(v),m=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(m)).map(M=>M.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Bd(v){if(K(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const f=new ArrayBuffer(v.length),m=new Uint8Array(f);for(let E=0;E<v.length;E++)m[E]=v.charCodeAt(E);return m}(0,k.Pz)("authIdTokenMaxAge"),function Vg(v){(0,le._registerComponent)(new ce.wA("auth",(f,{options:m})=>{const E=f.getProvider("app").getImmediate(),M=f.getProvider("heartbeat"),{apiKey:O,authDomain:q}=E.options;return((de,Be)=>{j(O&&!O.includes(":"),"invalid-api-key",{appName:de.name}),j(!q?.includes(":"),"argument-error",{appName:de.name});const Xe={apiKey:O,authDomain:q,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:su(v)},vt=new sd(de,Be,Xe);return function Ue(v,f){const m=f?.persistence||[],E=(Array.isArray(m)?m:[m]).map(oe);f?.errorMap&&v._updateErrorMap(f.errorMap),v._initializeWithPersistence(E,f?.popupRedirectResolver)}(vt,m),vt})(E,M)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,m,E)=>{f.getProvider("auth-internal").initialize()})),(0,le._registerComponent)(new ce.wA("auth-internal",f=>{const m=Sn(f.getProvider("auth").getImmediate());return new Af(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,le.registerVersion)(Tf,Lg,function Sf(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,le.registerVersion)(Tf,Lg,"esm2017")}("Browser");class jg extends Ys{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(f)),super.onEvent(f)}initialized(){var f=this;return(0,d.Z)(function*(){yield f.initPromise})()}}function jd(v){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,d.Z)(function*(v){const f=yield Va()._get(Nf(v));return f&&(yield Va()._remove(Nf(v))),f})).apply(this,arguments)}function c_(){const v=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const E=Math.floor(Math.random()*f.length);v.push(f.charAt(E))}return v.join("")}function Va(){return oe(zi)}function Nf(v){return Y("authEvent",v.config.apiKey,v.name)}function Do(v){if(!v?.includes("?"))return{};const[f,...m]=v.split("?");return(0,k.zd)(m.join("?"))}const ta=class Vu{constructor(){this._redirectPersistence=Fi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Mt,this._overrideRedirectResult=Nu}_initialize(f){var m=this;return(0,d.Z)(function*(){const E=f._key();let M=m.eventManagers.get(E);return M||(M=new jg(f),m.eventManagers.set(E,M),m.attachCallbackListeners(f,M)),M})()}_openPopup(f){xe(f,"operation-not-supported-in-this-environment")}_openRedirect(f,m,E,M){var O=this;return(0,d.Z)(function*(){!function sl(v){var f,m,E,M,O,q,de,Be,Xe,vt;const ut=qn();j("function"==typeof(null===(f=ut?.universalLinks)||void 0===f?void 0:f.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),j(typeof(null===(m=ut?.BuildInfo)||void 0===m?void 0:m.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),j("function"==typeof(null===(O=null===(M=null===(E=ut?.cordova)||void 0===E?void 0:E.plugins)||void 0===M?void 0:M.browsertab)||void 0===O?void 0:O.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),j("function"==typeof(null===(Be=null===(de=null===(q=ut?.cordova)||void 0===q?void 0:q.plugins)||void 0===de?void 0:de.browsertab)||void 0===Be?void 0:Be.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),j("function"==typeof(null===(vt=null===(Xe=ut?.cordova)||void 0===Xe?void 0:Xe.InAppBrowser)||void 0===vt?void 0:vt.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const q=yield O._initialize(f);yield q.initialized(),q.resetRedirect(),function n_(){ds.clear()}(),yield O._originValidation(f);const de=function u_(v,f,m=null){return{type:f,eventId:m,urlResponse:null,sessionId:c_(),postBody:null,tenantId:v.tenantId,error:be(v,"no-auth-event")}}(f,E,M);yield function xf(v,f){return Va()._set(Nf(v),f)}(f,de);const Be=yield function Bg(v,f,m){return ku.apply(this,arguments)}(f,de,m),Xe=yield function il(v){const{cordova:f}=qn();return new Promise(m=>{f.plugins.browsertab.isAvailable(E=>{let M=null;E?f.plugins.browsertab.openUrl(v):M=f.InAppBrowser.open(v,function Uo(v=(0,k.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),m(M)})})}(Be);return function Pu(v,f,m){return Ud.apply(this,arguments)}(f,q,Xe)})()}_isIframeWebStorageSupported(f,m){throw new Error("Method not implemented.")}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function yr(v){return La.apply(this,arguments)}(f)),this.originValidationPromises[m]}attachCallbackListeners(f,m){const{universalLinks:E,handleOpenURL:M,BuildInfo:O}=qn(),q=setTimeout((0,d.Z)(function*(){yield jd(f),m.onEvent(Rf())}),500),de=function(){var vt=(0,d.Z)(function*(ut){clearTimeout(q);const or=yield jd(f);let Bi=null;or&&ut?.url&&(Bi=function Hg(v,f){var m,E;const M=function ol(v){const f=Do(v),m=f.link?decodeURIComponent(f.link):void 0,E=Do(m).link,M=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return Do(M).link||M||E||m||v}(f);if(M.includes("/__/auth/callback")){const O=Do(M),q=O.firebaseError?function l_(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(O.firebaseError)):null,de=null===(E=null===(m=q?.code)||void 0===m?void 0:m.split("auth/"))||void 0===E?void 0:E[1],Be=de?be(de):null;return Be?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:Be,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:M,postBody:null}}return null}(or,ut.url)),m.onEvent(Bi||Rf())});return function(or){return vt.apply(this,arguments)}}();typeof E<"u"&&"function"==typeof E.subscribe&&E.subscribe(null,de);const Be=M,Xe=`${O.packageName.toLowerCase()}://`;qn().handleOpenURL=function(){var vt=(0,d.Z)(function*(ut){if(ut.toLowerCase().startsWith(Xe)&&de({url:ut}),"function"==typeof Be)try{Be(ut)}catch(or){console.error(or)}});return function(ut){return vt.apply(this,arguments)}}()}};function Rf(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:be("no-auth-event")}}function Co(){var v;return(null===(v=self?.location)||void 0===v?void 0:v.protocol)||null}function kf(v=(0,k.z$)()){return!("file:"!==Co()&&"ionic:"!==Co()&&"capacitor:"!==Co()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ff(){try{const v=self.localStorage,f=Hr();if(v)return v.setItem(f,"1"),v.removeItem(f),!function Pf(v=(0,k.z$)()){return function qg(){return(0,k.w1)()&&11===document?.documentMode}()||function Ua(v=(0,k.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,k.hl)()}catch{return Bu()&&(0,k.hl)()}return!1}function Bu(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Lf(){return(function Uu(){return"http:"===Co()||"https:"===Co()}()||(0,k.ru)()||kf())&&!function zg(){return(0,k.b$)()||(0,k.UG)()}()&&Ff()&&!Bu()}function Hd(){return kf()&&typeof document<"u"}function $d(){return($d=(0,d.Z)(function*(){return!!Hd()&&new Promise(v=>{const f=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),v(!0)})})})).apply(this,arguments)}const vi={LOCAL:"local",NONE:"none",SESSION:"session"},Ba=j,Vf="persistence";function ra(v){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,d.Z)(function*(v){yield v._initializationPromise;const f=Gd(),m=Y(Vf,v.config.apiKey,v.name);f&&f.setItem(m,v._getPersistence())})).apply(this,arguments)}function Gd(){var v;try{return(null===(v=function To(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const Wg=j;class Js{constructor(){this.browserResolver=oe(Qs),this.cordovaResolver=oe(ta),this.underlyingResolver=null,this._redirectPersistence=Fi,this._completeRedirectFn=Mt,this._overrideRedirectResult=Nu}_initialize(f){var m=this;return(0,d.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,m,E,M){var O=this;return(0,d.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openPopup(f,m,E,M)})()}_openRedirect(f,m,E,M){var O=this;return(0,d.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openRedirect(f,m,E,M)})()}_isIframeWebStorageSupported(f,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,m)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Hd()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Wg(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,d.Z)(function*(){if(f.underlyingResolver)return;const m=yield function ju(){return $d.apply(this,arguments)}();f.underlyingResolver=m?f.cordovaResolver:f.browserResolver})()}}function Uf(v){return v.unwrap()}function qd(v){return Wd(v)}function Wd(v){const{_tokenResponse:f}=v instanceof k.ZR?v.customData:v;if(!f)return null;if(!(v instanceof k.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return Qc.credentialFromResult(v);const m=f.providerId;if(!m||"password"===m)return null;let E;switch(m){case"google.com":E=ef;break;case"facebook.com":E=ld;break;case"github.com":E=Ac;break;case"twitter.com":E=hd;break;default:const{oauthIdToken:M,oauthAccessToken:O,oauthTokenSecret:q,pendingToken:de,nonce:Be}=f;return O||q||M||de?de?m.startsWith("saml.")?au._create(m,de):$i._fromParams({providerId:m,signInMethod:m,pendingToken:de,idToken:M,accessToken:O}):new wa(m).credential({idToken:M,accessToken:O,rawNonce:Be}):null}return v instanceof k.ZR?E.credentialFromError(v):E.credentialFromResult(v)}function zr(v,f){return f.catch(m=>{throw m instanceof k.ZR&&function Zg(v,f){var m,E;const M=null===(m=f.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===(null===(E=f)||void 0===E?void 0:E.code))f.resolver=new h_(v,function Jn(v,f){var m;const E=(0,k.m9)(v),M=f;return j(f.customData.operationType,E,"argument-error"),j(null===(m=M.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,E,"argument-error"),Eu._fromError(E,M)}(v,f));else if(M){const O=Wd(f),q=f;O&&(q.credential=O,q.tenantId=M.tenantId||void 0,q.email=M.email||void 0,q.phoneNumber=M.phoneNumber||void 0)}}(v,m),m}).then(m=>{const M=m.user;return{operationType:m.operationType,credential:qd(m),additionalUserInfo:Ng(m),user:gs.getOrCreate(M)}})}function cl(v,f){return ja.apply(this,arguments)}function ja(){return(ja=(0,d.Z)(function*(v,f){const m=yield f;return{verificationId:m.verificationId,confirm:E=>zr(v,m.confirm(E))}})).apply(this,arguments)}class h_{constructor(f,m){this.resolver=m,this.auth=function zd(v){return v.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return zr(Uf(this.auth),this.resolver.resolveSignIn(f))}}class gs{constructor(f){this._delegate=f,this.multiFactor=function Ed(v){const f=(0,k.m9)(v);return rn.has(f)||rn.set(f,us._fromUser(f)),rn.get(f)}(f)}static getOrCreate(f){return gs.USER_MAP.has(f)||gs.USER_MAP.set(f,new gs(f)),gs.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var m=this;return(0,d.Z)(function*(){return zr(m.auth,Ar(m._delegate,f))})()}linkWithPhoneNumber(f,m){var E=this;return(0,d.Z)(function*(){return cl(E.auth,function Pa(v,f,m){return Yc.apply(this,arguments)}(E._delegate,f,m))})()}linkWithPopup(f){var m=this;return(0,d.Z)(function*(){return zr(m.auth,function Fa(v,f,m){return Qe.apply(this,arguments)}(m._delegate,f,Js))})()}linkWithRedirect(f){var m=this;return(0,d.Z)(function*(){return yield ra(Sn(m.auth)),function J(v,f,m){return function se(v,f,m){return Se.apply(this,arguments)}(v,f,m)}(m._delegate,f,Js)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var m=this;return(0,d.Z)(function*(){return zr(m.auth,fu(m._delegate,f))})()}reauthenticateWithPhoneNumber(f,m){return cl(this.auth,function Td(v,f,m){return Gs.apply(this,arguments)}(this._delegate,f,m))}reauthenticateWithPopup(f){return zr(this.auth,function Xc(v,f,m){return vn.apply(this,arguments)}(this._delegate,f,Js))}reauthenticateWithRedirect(f){var m=this;return(0,d.Z)(function*(){return yield ra(Sn(m.auth)),function T(v,f,m){return function N(v,f,m){return L.apply(this,arguments)}(v,f,m)}(m._delegate,f,Js)})()}sendEmailVerification(f){return function yu(v,f){return Gn.apply(this,arguments)}(this._delegate,f)}unlink(f){var m=this;return(0,d.Z)(function*(){return yield function pd(v,f){return gi.apply(this,arguments)}(m._delegate,f),m})()}updateEmail(f){return function sf(v,f){return Vc((0,k.m9)(v),f,null)}(this._delegate,f)}updatePassword(f){return function Lc(v,f){return Vc((0,k.m9)(v),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function _n(v,f){return vf.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function qo(v,f){return Fc.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,m){return function zo(v,f,m){return mi.apply(this,arguments)}(this._delegate,f,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}gs.USER_MAP=new WeakMap;const ll=j;let Bf=(()=>{class v{constructor(m,E){if(this.app=m,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:M}=m.options;ll(M,"invalid-api-key",{appName:m.name}),ll(M,"invalid-api-key",{appName:m.name});const O=typeof window<"u"?Js:void 0;this._delegate=E.initialize({options:{persistence:Kd(M,m.name),popupRedirectResolver:O}}),this._delegate._updateErrorMap(Ye),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?gs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,E){!function Cc(v,f,m){const E=Sn(v);j(E._canInitEmulator,E,"emulator-config-failed"),j(/^https?:\/\//.test(f),E,"invalid-emulator-scheme");const M=!!m?.disableWarnings,O=ya(f),{host:q,port:de}=function _a(v){const f=ya(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(f.length));if(!m)return{host:"",port:null};const E=m[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(E);if(M){const O=M[1];return{host:O,port:en(E.substr(O.length+1))}}{const[O,q]=E.split(":");return{host:O,port:en(q)}}}(f);E.config.emulator={url:`${O}//${q}${null===de?"":`:${de}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:q,port:de,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function Yn(){function v(){const f=document.createElement("p"),m=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,m,E)}applyActionCode(m){return function Oc(v,f){return po.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return mu(this._delegate,m)}confirmPasswordReset(m,E){return function Fs(v,f,m){return jr.apply(this,arguments)}(this._delegate,m,E)}createUserWithEmailAndPassword(m,E){var M=this;return(0,d.Z)(function*(){return zr(M._delegate,function tt(v,f,m){return Pc.apply(this,arguments)}(M._delegate,m,E))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function Jt(v,f){return Ma.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function nf(v,f){return"EMAIL_SIGNIN"===Tr.parseLink(f)?.operation}(0,m)}getRedirectResult(){var m=this;return(0,d.Z)(function*(){ll(Lf(),m._delegate,"operation-not-supported-in-this-environment");const E=yield function ze(v,f){return ot.apply(this,arguments)}(m._delegate,Js);return E?zr(m._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function Gg(v,f){Sn(v)._logFramework(f)}(this._delegate,m)}onAuthStateChanged(m,E,M){const{next:O,error:q,complete:de}=Zd(m,E,M);return this._delegate.onAuthStateChanged(O,q,de)}onIdTokenChanged(m,E,M){const{next:O,error:q,complete:de}=Zd(m,E,M);return this._delegate.onIdTokenChanged(O,q,de)}sendSignInLinkToEmail(m,E){return function Mg(v,f,m){return md.apply(this,arguments)}(this._delegate,m,E)}sendPasswordResetEmail(m,E){return function Rc(v,f,m){return Go.apply(this,arguments)}(this._delegate,m,E||void 0)}setPersistence(m){var E=this;return(0,d.Z)(function*(){let M;switch(function na(v,f){Ba(Object.values(vi).includes(f),v,"invalid-persistence-type"),(0,k.b$)()?Ba(f!==vi.SESSION,v,"unsupported-persistence-type"):(0,k.UG)()?Ba(f===vi.NONE,v,"unsupported-persistence-type"):Bu()?Ba(f===vi.NONE||f===vi.LOCAL&&(0,k.hl)(),v,"unsupported-persistence-type"):Ba(f===vi.NONE||Ff(),v,"unsupported-persistence-type")}(E._delegate,m),m){case vi.SESSION:M=Fi;break;case vi.LOCAL:M=(yield oe($r)._isAvailable())?$r:zi;break;case vi.NONE:M=U;break;default:return xe("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(M)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return zr(this._delegate,function Mc(v){return xc.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return zr(this._delegate,xn(this._delegate,m))}signInWithCustomToken(m){return zr(this._delegate,function kn(v,f){return Ca.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,E){return zr(this._delegate,function Xy(v,f,m){return xn((0,k.m9)(v),cd.credential(f,m))}(this._delegate,m,E))}signInWithEmailLink(m,E){return zr(this._delegate,function rf(v,f,m){return Sa.apply(this,arguments)}(this._delegate,m,E))}signInWithPhoneNumber(m,E){return cl(this._delegate,function ls(v,f,m){return Wi.apply(this,arguments)}(this._delegate,m,E))}signInWithPopup(m){var E=this;return(0,d.Z)(function*(){return ll(Lf(),E._delegate,"operation-not-supported-in-this-environment"),zr(E._delegate,function Pn(v,f,m){return qs.apply(this,arguments)}(E._delegate,m,Js))})()}signInWithRedirect(m){var E=this;return(0,d.Z)(function*(){return ll(Lf(),E._delegate,"operation-not-supported-in-this-environment"),yield ra(E._delegate),function at(v,f,m){return function r_(v,f,m){return D.apply(this,arguments)}(v,f,m)}(E._delegate,m,Js)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function kc(v,f){return Aa.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=vi,v})();function Zd(v,f,m){let E=v;"function"!=typeof v&&({next:E,error:f,complete:m}=v);const M=E;return{next:q=>M(q&&gs.getOrCreate(q)),error:f,complete:m}}function Kd(v,f){const m=function ul(v,f){const m=Gd();if(!m)return[];const E=Y(Vf,v,f);switch(m.getItem(E)){case vi.NONE:return[U];case vi.LOCAL:return[$r,Fi];case vi.SESSION:return[Fi];default:return[]}}(v,f);if(typeof self<"u"&&!m.includes($r)&&m.push($r),typeof window<"u")for(const E of[zi,Fi])m.includes(E)||m.push(E);return m.includes(U)||m.push(U),m}class Ki{constructor(){this.providerId="phone",this._delegate=new Qc(Uf(te.Z.auth()))}static credential(f,m){return Qc.credential(f,m)}verifyPhoneNumber(f,m){return this._delegate.verifyPhoneNumber(f,m)}unwrap(){return this._delegate}}Ki.PHONE_SIGN_IN_METHOD=Qc.PHONE_SIGN_IN_METHOD,Ki.PROVIDER_ID=Qc.PROVIDER_ID;const So=j;class Yd{constructor(f,m,E=te.Z.app()){var M;So(null===(M=E.options)||void 0===M?void 0:M.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new _o(f,m,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function f_(v){v.INTERNAL.registerComponent(new ce.wA("auth-compat",f=>{const m=f.getProvider("app-compat").getImmediate(),E=f.getProvider("auth");return new Bf(m,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:cd,FacebookAuthProvider:ld,GithubAuthProvider:Ac,GoogleAuthProvider:ef,OAuthProvider:wa,SAMLAuthProvider:ri,PhoneAuthProvider:Ki,PhoneMultiFactorGenerator:Fg,RecaptchaVerifier:Yd,TwitterAuthProvider:hd,Auth:Bf,AuthCredential:Ln,Error:k.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.2.24")}(te.Z)},9751:(lt,Ie,P)=>{P.d(Ie,{y:()=>pe});var d=P(930),te=P(727),k=P(8822),le=P(9635),ue=P(2416),fe=P(576),ce=P(2806);let pe=(()=>{class Q{constructor(Ae){Ae&&(this._subscribe=Ae)}lift(Ae){const Ye=new Q;return Ye.source=this,Ye.operator=Ae,Ye}subscribe(Ae,Ye,rt){const ge=function $(Q){return Q&&Q instanceof d.Lv||function H(Q){return Q&&(0,fe.m)(Q.next)&&(0,fe.m)(Q.error)&&(0,fe.m)(Q.complete)}(Q)&&(0,te.Nn)(Q)}(Ae)?Ae:new d.Hp(Ae,Ye,rt);return(0,ce.x)(()=>{const{operator:Me,source:Ce}=this;ge.add(Me?Me.call(ge,Ce):Ce?this._subscribe(ge):this._trySubscribe(ge))}),ge}_trySubscribe(Ae){try{return this._subscribe(Ae)}catch(Ye){Ae.error(Ye)}}forEach(Ae,Ye){return new(Ye=me(Ye))((rt,ge)=>{const Me=new d.Hp({next:Ce=>{try{Ae(Ce)}catch(Ve){ge(Ve),Me.unsubscribe()}},error:ge,complete:rt});this.subscribe(Me)})}_subscribe(Ae){var Ye;return null===(Ye=this.source)||void 0===Ye?void 0:Ye.subscribe(Ae)}[k.L](){return this}pipe(...Ae){return(0,le.U)(Ae)(this)}toPromise(Ae){return new(Ae=me(Ae))((Ye,rt)=>{let ge;this.subscribe(Me=>ge=Me,Me=>rt(Me),()=>Ye(ge))})}}return Q.create=He=>new Q(He),Q})();function me(Q){var He;return null!==(He=Q??ue.v.Promise)&&void 0!==He?He:Promise}},7579:(lt,Ie,P)=>{P.d(Ie,{x:()=>ce});var d=P(9751),te=P(727);const le=(0,P(3888).d)(me=>function(){me(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ue=P(8737),fe=P(2806);let ce=(()=>{class me extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift($){const Q=new pe(this,this);return Q.operator=$,Q}_throwIfClosed(){if(this.closed)throw new le}next($){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Q of this.currentObservers)Q.next($)}})}error($){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=$;const{observers:Q}=this;for(;Q.length;)Q.shift().error($)}})}complete(){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:$}=this;for(;$.length;)$.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var $;return(null===($=this.observers)||void 0===$?void 0:$.length)>0}_trySubscribe($){return this._throwIfClosed(),super._trySubscribe($)}_subscribe($){return this._throwIfClosed(),this._checkFinalizedStatuses($),this._innerSubscribe($)}_innerSubscribe($){const{hasError:Q,isStopped:He,observers:Ae}=this;return Q||He?te.Lc:(this.currentObservers=null,Ae.push($),new te.w0(()=>{this.currentObservers=null,(0,ue.P)(Ae,$)}))}_checkFinalizedStatuses($){const{hasError:Q,thrownError:He,isStopped:Ae}=this;Q?$.error(He):Ae&&$.complete()}asObservable(){const $=new d.y;return $.source=this,$}}return me.create=(H,$)=>new pe(H,$),me})();class pe extends ce{constructor(H,$){super(),this.destination=H,this.source=$}next(H){var $,Q;null===(Q=null===($=this.destination)||void 0===$?void 0:$.next)||void 0===Q||Q.call($,H)}error(H){var $,Q;null===(Q=null===($=this.destination)||void 0===$?void 0:$.error)||void 0===Q||Q.call($,H)}complete(){var H,$;null===($=null===(H=this.destination)||void 0===H?void 0:H.complete)||void 0===$||$.call(H)}_subscribe(H){var $,Q;return null!==(Q=null===($=this.source)||void 0===$?void 0:$.subscribe(H))&&void 0!==Q?Q:te.Lc}}},930:(lt,Ie,P)=>{P.d(Ie,{Hp:()=>rt,Lv:()=>Q});var d=P(576),te=P(727),k=P(2416),le=P(7849),ue=P(5032);const fe=me("C",void 0,void 0);function me(xe,be,Re){return{kind:xe,value:be,error:Re}}var H=P(3410),$=P(2806);class Q extends te.w0{constructor(be){super(),this.isStopped=!1,be?(this.destination=be,(0,te.Nn)(be)&&be.add(this)):this.destination=Ve}static create(be,Re,$e){return new rt(be,Re,$e)}next(be){this.isStopped?Ce(function pe(xe){return me("N",xe,void 0)}(be),this):this._next(be)}error(be){this.isStopped?Ce(function ce(xe){return me("E",void 0,xe)}(be),this):(this.isStopped=!0,this._error(be))}complete(){this.isStopped?Ce(fe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(be){this.destination.next(be)}_error(be){try{this.destination.error(be)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const He=Function.prototype.bind;function Ae(xe,be){return He.call(xe,be)}class Ye{constructor(be){this.partialObserver=be}next(be){const{partialObserver:Re}=this;if(Re.next)try{Re.next(be)}catch($e){ge($e)}}error(be){const{partialObserver:Re}=this;if(Re.error)try{Re.error(be)}catch($e){ge($e)}else ge(be)}complete(){const{partialObserver:be}=this;if(be.complete)try{be.complete()}catch(Re){ge(Re)}}}class rt extends Q{constructor(be,Re,$e){let Pe;if(super(),(0,d.m)(be)||!be)Pe={next:be??void 0,error:Re??void 0,complete:$e??void 0};else{let j;this&&k.v.useDeprecatedNextContext?(j=Object.create(be),j.unsubscribe=()=>this.unsubscribe(),Pe={next:be.next&&Ae(be.next,j),error:be.error&&Ae(be.error,j),complete:be.complete&&Ae(be.complete,j)}):Pe=be}this.destination=new Ye(Pe)}}function ge(xe){k.v.useDeprecatedSynchronousErrorHandling?(0,$.O)(xe):(0,le.h)(xe)}function Ce(xe,be){const{onStoppedNotification:Re}=k.v;Re&&H.z.setTimeout(()=>Re(xe,be))}const Ve={closed:!0,next:ue.Z,error:function Me(xe){throw xe},complete:ue.Z}},727:(lt,Ie,P)=>{P.d(Ie,{Lc:()=>fe,w0:()=>ue,Nn:()=>ce});var d=P(576);const k=(0,P(3888).d)(me=>function($){me(this),this.message=$?`${$.length} errors occurred during unsubscription:\n${$.map((Q,He)=>`${He+1}) ${Q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=$});var le=P(8737);class ue{constructor(H){this.initialTeardown=H,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let H;if(!this.closed){this.closed=!0;const{_parentage:$}=this;if($)if(this._parentage=null,Array.isArray($))for(const Ae of $)Ae.remove(this);else $.remove(this);const{initialTeardown:Q}=this;if((0,d.m)(Q))try{Q()}catch(Ae){H=Ae instanceof k?Ae.errors:[Ae]}const{_finalizers:He}=this;if(He){this._finalizers=null;for(const Ae of He)try{pe(Ae)}catch(Ye){H=H??[],Ye instanceof k?H=[...H,...Ye.errors]:H.push(Ye)}}if(H)throw new k(H)}}add(H){var $;if(H&&H!==this)if(this.closed)pe(H);else{if(H instanceof ue){if(H.closed||H._hasParent(this))return;H._addParent(this)}(this._finalizers=null!==($=this._finalizers)&&void 0!==$?$:[]).push(H)}}_hasParent(H){const{_parentage:$}=this;return $===H||Array.isArray($)&&$.includes(H)}_addParent(H){const{_parentage:$}=this;this._parentage=Array.isArray($)?($.push(H),$):$?[$,H]:H}_removeParent(H){const{_parentage:$}=this;$===H?this._parentage=null:Array.isArray($)&&(0,le.P)($,H)}remove(H){const{_finalizers:$}=this;$&&(0,le.P)($,H),H instanceof ue&&H._removeParent(this)}}ue.EMPTY=(()=>{const me=new ue;return me.closed=!0,me})();const fe=ue.EMPTY;function ce(me){return me instanceof ue||me&&"closed"in me&&(0,d.m)(me.remove)&&(0,d.m)(me.add)&&(0,d.m)(me.unsubscribe)}function pe(me){(0,d.m)(me)?me():me.unsubscribe()}},2416:(lt,Ie,P)=>{P.d(Ie,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(lt,Ie,P)=>{P.d(Ie,{E:()=>te});const te=new(P(9751).y)(ue=>ue.complete())},8996:(lt,Ie,P)=>{P.d(Ie,{D:()=>be});var d=P(8421),te=P(5363),k=P(9468),fe=P(9751),pe=P(2202),me=P(576),H=P(9672);function Q(Re,$e){if(!Re)throw new Error("Iterable cannot be null");return new fe.y(Pe=>{(0,H.f)(Pe,$e,()=>{const j=Re[Symbol.asyncIterator]();(0,H.f)(Pe,$e,()=>{j.next().then(we=>{we.done?Pe.complete():Pe.next(we.value)})},0,!0)})})}var He=P(3670),Ae=P(8239),Ye=P(1144),rt=P(6495),ge=P(2206),Me=P(4532),Ce=P(3260);function be(Re,$e){return $e?function xe(Re,$e){if(null!=Re){if((0,He.c)(Re))return function le(Re,$e){return(0,d.Xf)(Re).pipe((0,k.R)($e),(0,te.Q)($e))}(Re,$e);if((0,Ye.z)(Re))return function ce(Re,$e){return new fe.y(Pe=>{let j=0;return $e.schedule(function(){j===Re.length?Pe.complete():(Pe.next(Re[j++]),Pe.closed||this.schedule())})})}(Re,$e);if((0,Ae.t)(Re))return function ue(Re,$e){return(0,d.Xf)(Re).pipe((0,k.R)($e),(0,te.Q)($e))}(Re,$e);if((0,ge.D)(Re))return Q(Re,$e);if((0,rt.T)(Re))return function $(Re,$e){return new fe.y(Pe=>{let j;return(0,H.f)(Pe,$e,()=>{j=Re[pe.h](),(0,H.f)(Pe,$e,()=>{let we,K;try{({value:we,done:K}=j.next())}catch(X){return void Pe.error(X)}K?Pe.complete():Pe.next(we)},0,!0)}),()=>(0,me.m)(j?.return)&&j.return()})}(Re,$e);if((0,Ce.L)(Re))return function Ve(Re,$e){return Q((0,Ce.Q)(Re),$e)}(Re,$e)}throw(0,Me.z)(Re)}(Re,$e):(0,d.Xf)(Re)}},8421:(lt,Ie,P)=>{P.d(Ie,{Xf:()=>He});var d=P(655),te=P(1144),k=P(8239),le=P(9751),ue=P(3670),fe=P(2206),ce=P(4532),pe=P(6495),me=P(3260),H=P(576),$=P(7849),Q=P(8822);function He(xe){if(xe instanceof le.y)return xe;if(null!=xe){if((0,ue.c)(xe))return function Ae(xe){return new le.y(be=>{const Re=xe[Q.L]();if((0,H.m)(Re.subscribe))return Re.subscribe(be);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(xe);if((0,te.z)(xe))return function Ye(xe){return new le.y(be=>{for(let Re=0;Re<xe.length&&!be.closed;Re++)be.next(xe[Re]);be.complete()})}(xe);if((0,k.t)(xe))return function rt(xe){return new le.y(be=>{xe.then(Re=>{be.closed||(be.next(Re),be.complete())},Re=>be.error(Re)).then(null,$.h)})}(xe);if((0,fe.D)(xe))return Me(xe);if((0,pe.T)(xe))return function ge(xe){return new le.y(be=>{for(const Re of xe)if(be.next(Re),be.closed)return;be.complete()})}(xe);if((0,me.L)(xe))return function Ce(xe){return Me((0,me.Q)(xe))}(xe)}throw(0,ce.z)(xe)}function Me(xe){return new le.y(be=>{(function Ve(xe,be){var Re,$e,Pe,j;return(0,d.mG)(this,void 0,void 0,function*(){try{for(Re=(0,d.KL)(xe);!($e=yield Re.next()).done;)if(be.next($e.value),be.closed)return}catch(we){Pe={error:we}}finally{try{$e&&!$e.done&&(j=Re.return)&&(yield j.call(Re))}finally{if(Pe)throw Pe.error}}be.complete()})})(xe,be).catch(Re=>be.error(Re))})}},6451:(lt,Ie,P)=>{P.d(Ie,{T:()=>fe});var d=P(8189),te=P(8421),k=P(515),le=P(7669),ue=P(8996);function fe(...ce){const pe=(0,le.yG)(ce),me=(0,le._6)(ce,1/0),H=ce;return H.length?1===H.length?(0,te.Xf)(H[0]):(0,d.J)(me)((0,ue.D)(H,pe)):k.E}},5403:(lt,Ie,P)=>{P.d(Ie,{x:()=>te});var d=P(930);function te(le,ue,fe,ce,pe){return new k(le,ue,fe,ce,pe)}class k extends d.Lv{constructor(ue,fe,ce,pe,me,H){super(ue),this.onFinalize=me,this.shouldUnsubscribe=H,this._next=fe?function($){try{fe($)}catch(Q){ue.error(Q)}}:super._next,this._error=pe?function($){try{pe($)}catch(Q){ue.error(Q)}finally{this.unsubscribe()}}:super._error,this._complete=ce?function(){try{ce()}catch($){ue.error($)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ue;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:fe}=this;super.unsubscribe(),!fe&&(null===(ue=this.onFinalize)||void 0===ue||ue.call(this))}}}},4004:(lt,Ie,P)=>{P.d(Ie,{U:()=>k});var d=P(4482),te=P(5403);function k(le,ue){return(0,d.e)((fe,ce)=>{let pe=0;fe.subscribe((0,te.x)(ce,me=>{ce.next(le.call(ue,me,pe++))}))})}},8189:(lt,Ie,P)=>{P.d(Ie,{J:()=>k});var d=P(5577),te=P(4671);function k(le=1/0){return(0,d.z)(te.y,le)}},5577:(lt,Ie,P)=>{P.d(Ie,{z:()=>pe});var d=P(4004),te=P(8421),k=P(4482),le=P(9672),ue=P(5403),ce=P(576);function pe(me,H,$=1/0){return(0,ce.m)(H)?pe((Q,He)=>(0,d.U)((Ae,Ye)=>H(Q,Ae,He,Ye))((0,te.Xf)(me(Q,He))),$):("number"==typeof H&&($=H),(0,k.e)((Q,He)=>function fe(me,H,$,Q,He,Ae,Ye,rt){const ge=[];let Me=0,Ce=0,Ve=!1;const xe=()=>{Ve&&!ge.length&&!Me&&H.complete()},be=$e=>Me<Q?Re($e):ge.push($e),Re=$e=>{Ae&&H.next($e),Me++;let Pe=!1;(0,te.Xf)($($e,Ce++)).subscribe((0,ue.x)(H,j=>{He?.(j),Ae?be(j):H.next(j)},()=>{Pe=!0},void 0,()=>{if(Pe)try{for(Me--;ge.length&&Me<Q;){const j=ge.shift();Ye?(0,le.f)(H,Ye,()=>Re(j)):Re(j)}xe()}catch(j){H.error(j)}}))};return me.subscribe((0,ue.x)(H,be,()=>{Ve=!0,xe()})),()=>{rt?.()}}(Q,He,me,$)))}},5363:(lt,Ie,P)=>{P.d(Ie,{Q:()=>le});var d=P(9672),te=P(4482),k=P(5403);function le(ue,fe=0){return(0,te.e)((ce,pe)=>{ce.subscribe((0,k.x)(pe,me=>(0,d.f)(pe,ue,()=>pe.next(me),fe),()=>(0,d.f)(pe,ue,()=>pe.complete(),fe),me=>(0,d.f)(pe,ue,()=>pe.error(me),fe)))})}},3099:(lt,Ie,P)=>{P.d(Ie,{B:()=>ue});var d=P(8421),te=P(7579),k=P(930),le=P(4482);function ue(ce={}){const{connector:pe=(()=>new te.x),resetOnError:me=!0,resetOnComplete:H=!0,resetOnRefCountZero:$=!0}=ce;return Q=>{let He,Ae,Ye,rt=0,ge=!1,Me=!1;const Ce=()=>{Ae?.unsubscribe(),Ae=void 0},Ve=()=>{Ce(),He=Ye=void 0,ge=Me=!1},xe=()=>{const be=He;Ve(),be?.unsubscribe()};return(0,le.e)((be,Re)=>{rt++,!Me&&!ge&&Ce();const $e=Ye=Ye??pe();Re.add(()=>{rt--,0===rt&&!Me&&!ge&&(Ae=fe(xe,$))}),$e.subscribe(Re),!He&&rt>0&&(He=new k.Hp({next:Pe=>$e.next(Pe),error:Pe=>{Me=!0,Ce(),Ae=fe(Ve,me,Pe),$e.error(Pe)},complete:()=>{ge=!0,Ce(),Ae=fe(Ve,H),$e.complete()}}),(0,d.Xf)(be).subscribe(He))})(Q)}}function fe(ce,pe,...me){if(!0===pe)return void ce();if(!1===pe)return;const H=new k.Hp({next:()=>{H.unsubscribe(),ce()}});return pe(...me).subscribe(H)}},9468:(lt,Ie,P)=>{P.d(Ie,{R:()=>te});var d=P(4482);function te(k,le=0){return(0,d.e)((ue,fe)=>{fe.add(k.schedule(()=>ue.subscribe(fe),le))})}},8505:(lt,Ie,P)=>{P.d(Ie,{b:()=>ue});var d=P(576),te=P(4482),k=P(5403),le=P(4671);function ue(fe,ce,pe){const me=(0,d.m)(fe)||ce||pe?{next:fe,error:ce,complete:pe}:fe;return me?(0,te.e)((H,$)=>{var Q;null===(Q=me.subscribe)||void 0===Q||Q.call(me);let He=!0;H.subscribe((0,k.x)($,Ae=>{var Ye;null===(Ye=me.next)||void 0===Ye||Ye.call(me,Ae),$.next(Ae)},()=>{var Ae;He=!1,null===(Ae=me.complete)||void 0===Ae||Ae.call(me),$.complete()},Ae=>{var Ye;He=!1,null===(Ye=me.error)||void 0===Ye||Ye.call(me,Ae),$.error(Ae)},()=>{var Ae,Ye;He&&(null===(Ae=me.unsubscribe)||void 0===Ae||Ae.call(me)),null===(Ye=me.finalize)||void 0===Ye||Ye.call(me)}))}):le.y}},4408:(lt,Ie,P)=>{P.d(Ie,{o:()=>ue});var d=P(727);class te extends d.w0{constructor(ce,pe){super()}schedule(ce,pe=0){return this}}const k={setInterval(fe,ce,...pe){const{delegate:me}=k;return me?.setInterval?me.setInterval(fe,ce,...pe):setInterval(fe,ce,...pe)},clearInterval(fe){const{delegate:ce}=k;return(ce?.clearInterval||clearInterval)(fe)},delegate:void 0};var le=P(8737);class ue extends te{constructor(ce,pe){super(ce,pe),this.scheduler=ce,this.work=pe,this.pending=!1}schedule(ce,pe=0){var me;if(this.closed)return this;this.state=ce;const H=this.id,$=this.scheduler;return null!=H&&(this.id=this.recycleAsyncId($,H,pe)),this.pending=!0,this.delay=pe,this.id=null!==(me=this.id)&&void 0!==me?me:this.requestAsyncId($,this.id,pe),this}requestAsyncId(ce,pe,me=0){return k.setInterval(ce.flush.bind(ce,this),me)}recycleAsyncId(ce,pe,me=0){if(null!=me&&this.delay===me&&!1===this.pending)return pe;null!=pe&&k.clearInterval(pe)}execute(ce,pe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const me=this._execute(ce,pe);if(me)return me;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ce,pe){let H,me=!1;try{this.work(ce)}catch($){me=!0,H=$||new Error("Scheduled action threw falsy error")}if(me)return this.unsubscribe(),H}unsubscribe(){if(!this.closed){const{id:ce,scheduler:pe}=this,{actions:me}=pe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,le.P)(me,this),null!=ce&&(this.id=this.recycleAsyncId(pe,ce,null)),this.delay=null,super.unsubscribe()}}}},7565:(lt,Ie,P)=>{P.d(Ie,{v:()=>k});var d=P(6063);class te{constructor(ue,fe=te.now){this.schedulerActionCtor=ue,this.now=fe}schedule(ue,fe=0,ce){return new this.schedulerActionCtor(this,ue).schedule(ce,fe)}}te.now=d.l.now;class k extends te{constructor(ue,fe=te.now){super(ue,fe),this.actions=[],this._active=!1}flush(ue){const{actions:fe}=this;if(this._active)return void fe.push(ue);let ce;this._active=!0;do{if(ce=ue.execute(ue.state,ue.delay))break}while(ue=fe.shift());if(this._active=!1,ce){for(;ue=fe.shift();)ue.unsubscribe();throw ce}}}},4986:(lt,Ie,P)=>{P.d(Ie,{z:()=>k});var d=P(4408);const k=new(P(7565).v)(d.o)},6063:(lt,Ie,P)=>{P.d(Ie,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(lt,Ie,P)=>{P.d(Ie,{z:()=>d});const d={setTimeout(te,k,...le){const{delegate:ue}=d;return ue?.setTimeout?ue.setTimeout(te,k,...le):setTimeout(te,k,...le)},clearTimeout(te){const{delegate:k}=d;return(k?.clearTimeout||clearTimeout)(te)},delegate:void 0}},2202:(lt,Ie,P)=>{P.d(Ie,{h:()=>te});const te=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(lt,Ie,P)=>{P.d(Ie,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(lt,Ie,P)=>{P.d(Ie,{_6:()=>fe,jO:()=>le,yG:()=>ue});var d=P(576);function k(ce){return ce[ce.length-1]}function le(ce){return(0,d.m)(k(ce))?ce.pop():void 0}function ue(ce){return function te(ce){return ce&&(0,d.m)(ce.schedule)}(k(ce))?ce.pop():void 0}function fe(ce,pe){return"number"==typeof k(ce)?ce.pop():pe}},8737:(lt,Ie,P)=>{function d(te,k){if(te){const le=te.indexOf(k);0<=le&&te.splice(le,1)}}P.d(Ie,{P:()=>d})},3888:(lt,Ie,P)=>{function d(te){const le=te(ue=>{Error.call(ue),ue.stack=(new Error).stack});return le.prototype=Object.create(Error.prototype),le.prototype.constructor=le,le}P.d(Ie,{d:()=>d})},2806:(lt,Ie,P)=>{P.d(Ie,{O:()=>le,x:()=>k});var d=P(2416);let te=null;function k(ue){if(d.v.useDeprecatedSynchronousErrorHandling){const fe=!te;if(fe&&(te={errorThrown:!1,error:null}),ue(),fe){const{errorThrown:ce,error:pe}=te;if(te=null,ce)throw pe}}else ue()}function le(ue){d.v.useDeprecatedSynchronousErrorHandling&&te&&(te.errorThrown=!0,te.error=ue)}},9672:(lt,Ie,P)=>{function d(te,k,le,ue=0,fe=!1){const ce=k.schedule(function(){le(),fe?te.add(this.schedule(null,ue)):this.unsubscribe()},ue);if(te.add(ce),!fe)return ce}P.d(Ie,{f:()=>d})},4671:(lt,Ie,P)=>{function d(te){return te}P.d(Ie,{y:()=>d})},1144:(lt,Ie,P)=>{P.d(Ie,{z:()=>d});const d=te=>te&&"number"==typeof te.length&&"function"!=typeof te},2206:(lt,Ie,P)=>{P.d(Ie,{D:()=>te});var d=P(576);function te(k){return Symbol.asyncIterator&&(0,d.m)(k?.[Symbol.asyncIterator])}},576:(lt,Ie,P)=>{function d(te){return"function"==typeof te}P.d(Ie,{m:()=>d})},3670:(lt,Ie,P)=>{P.d(Ie,{c:()=>k});var d=P(8822),te=P(576);function k(le){return(0,te.m)(le[d.L])}},6495:(lt,Ie,P)=>{P.d(Ie,{T:()=>k});var d=P(2202),te=P(576);function k(le){return(0,te.m)(le?.[d.h])}},8239:(lt,Ie,P)=>{P.d(Ie,{t:()=>te});var d=P(576);function te(k){return(0,d.m)(k?.then)}},3260:(lt,Ie,P)=>{P.d(Ie,{L:()=>le,Q:()=>k});var d=P(655),te=P(576);function k(ue){return(0,d.FC)(this,arguments,function*(){const ce=ue.getReader();try{for(;;){const{value:pe,done:me}=yield(0,d.qq)(ce.read());if(me)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(pe)}}finally{ce.releaseLock()}})}function le(ue){return(0,te.m)(ue?.getReader)}},4482:(lt,Ie,P)=>{P.d(Ie,{A:()=>te,e:()=>k});var d=P(576);function te(le){return(0,d.m)(le?.lift)}function k(le){return ue=>{if(te(ue))return ue.lift(function(fe){try{return le(fe,this)}catch(ce){this.error(ce)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(lt,Ie,P)=>{function d(){}P.d(Ie,{Z:()=>d})},9635:(lt,Ie,P)=>{P.d(Ie,{U:()=>k,z:()=>te});var d=P(4671);function te(...le){return k(le)}function k(le){return 0===le.length?d.y:1===le.length?le[0]:function(fe){return le.reduce((ce,pe)=>pe(ce),fe)}}},7849:(lt,Ie,P)=>{P.d(Ie,{h:()=>k});var d=P(2416),te=P(3410);function k(le){te.z.setTimeout(()=>{const{onUnhandledError:ue}=d.v;if(!ue)throw le;ue(le)})}},4532:(lt,Ie,P)=>{function d(te){return new TypeError(`You provided ${null!==te&&"object"==typeof te?"an invalid object":`'${te}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(Ie,{z:()=>d})},655:(lt,Ie,P)=>{function le(K,X){var oe={};for(var ie in K)Object.prototype.hasOwnProperty.call(K,ie)&&X.indexOf(ie)<0&&(oe[ie]=K[ie]);if(null!=K&&"function"==typeof Object.getOwnPropertySymbols){var Ue=0;for(ie=Object.getOwnPropertySymbols(K);Ue<ie.length;Ue++)X.indexOf(ie[Ue])<0&&Object.prototype.propertyIsEnumerable.call(K,ie[Ue])&&(oe[ie[Ue]]=K[ie[Ue]])}return oe}function pe(K,X,oe,ie){return new(oe||(oe=Promise))(function(Fe,pt){function nn(Ht){try{Bt(ie.next(Ht))}catch(yt){pt(yt)}}function gn(Ht){try{Bt(ie.throw(Ht))}catch(yt){pt(yt)}}function Bt(Ht){Ht.done?Fe(Ht.value):function Ue(Fe){return Fe instanceof oe?Fe:new oe(function(pt){pt(Fe)})}(Ht.value).then(nn,gn)}Bt((ie=ie.apply(K,X||[])).next())})}function ge(K){return this instanceof ge?(this.v=K,this):new ge(K)}function Me(K,X,oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ue,ie=oe.apply(K,X||[]),Fe=[];return Ue={},pt("next"),pt("throw"),pt("return"),Ue[Symbol.asyncIterator]=function(){return this},Ue;function pt(tn){ie[tn]&&(Ue[tn]=function(wr){return new Promise(function(kr,Et){Fe.push([tn,wr,kr,Et])>1||nn(tn,wr)})})}function nn(tn,wr){try{!function gn(tn){tn.value instanceof ge?Promise.resolve(tn.value.v).then(Bt,Ht):yt(Fe[0][2],tn)}(ie[tn](wr))}catch(kr){yt(Fe[0][3],kr)}}function Bt(tn){nn("next",tn)}function Ht(tn){nn("throw",tn)}function yt(tn,wr){tn(wr),Fe.shift(),Fe.length&&nn(Fe[0][0],Fe[0][1])}}function Ve(K){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var oe,X=K[Symbol.asyncIterator];return X?X.call(K):(K=function Q(K){var X="function"==typeof Symbol&&Symbol.iterator,oe=X&&K[X],ie=0;if(oe)return oe.call(K);if(K&&"number"==typeof K.length)return{next:function(){return K&&ie>=K.length&&(K=void 0),{value:K&&K[ie++],done:!K}}};throw new TypeError(X?"Object is not iterable.":"Symbol.iterator is not defined.")}(K),oe={},ie("next"),ie("throw"),ie("return"),oe[Symbol.asyncIterator]=function(){return this},oe);function ie(Fe){oe[Fe]=K[Fe]&&function(pt){return new Promise(function(nn,gn){!function Ue(Fe,pt,nn,gn){Promise.resolve(gn).then(function(Bt){Fe({value:Bt,done:nn})},pt)}(nn,gn,(pt=K[Fe](pt)).done,pt.value)})}}}P.d(Ie,{FC:()=>Me,KL:()=>Ve,_T:()=>le,mG:()=>pe,qq:()=>ge})},4650:(lt,Ie,P)=>{P.d(Ie,{$8M:()=>xu,$Z:()=>V_,AFp:()=>st,ALo:()=>Ch,AaK:()=>pe,AsE:()=>Lv,BQk:()=>vv,CHM:()=>Ma,CRH:()=>FI,CZH:()=>xh,CqO:()=>Ku,D6c:()=>fS,EJc:()=>KA,EiD:()=>QE,EpF:()=>WT,F4k:()=>Ee,FYo:()=>pw,FiY:()=>St,Gf:()=>x0,GfV:()=>nm,GkF:()=>cb,Gpc:()=>$,JOm:()=>Zi,JVY:()=>hl,JZr:()=>rt,KtG:()=>yu,L6k:()=>Jd,LAX:()=>Kg,LFG:()=>Ge,Lbi:()=>Oe,Lck:()=>h0,MAs:()=>Nm,MMx:()=>ty,MR2:()=>iw,NdJ:()=>yh,O4$:()=>Ed,OlP:()=>_n,Oqu:()=>Fv,P3R:()=>ew,PXZ:()=>rD,Q6J:()=>ob,QGY:()=>lb,QP$:()=>$n,QbO:()=>qA,Qsj:()=>BC,R0b:()=>Qi,RDi:()=>M,Rgc:()=>rc,SBq:()=>Yf,Sil:()=>eD,Suo:()=>cy,TTD:()=>Ho,TgZ:()=>Rm,Tol:()=>wb,Udp:()=>Lm,W1O:()=>ly,X6Q:()=>nr,XFs:()=>_t,Xpm:()=>ma,Xts:()=>__,Y36:()=>El,YKP:()=>ey,YNc:()=>GT,Yjl:()=>_a,Yz7:()=>Et,Z0I:()=>Pr,ZZ4:()=>Ay,_Bn:()=>hI,_UZ:()=>ub,_Vd:()=>tm,_c5:()=>dS,_uU:()=>Db,aQg:()=>eE,c2e:()=>WA,cJS:()=>di,cg1:()=>Bb,d8E:()=>Hv,dDg:()=>nD,dqk:()=>kt,eBb:()=>Hf,eFA:()=>Z0,ekj:()=>bp,eoX:()=>nu,f3M:()=>et,g9A:()=>he,h0i:()=>Xa,hGG:()=>hS,hij:()=>Bm,iGM:()=>M0,ifc:()=>Qt,ip1:()=>uc,jDz:()=>Pp,kL8:()=>hA,kcU:()=>Hc,lG2:()=>ya,lcZ:()=>Th,lqb:()=>ml,lri:()=>by,mCW:()=>Xd,n5z:()=>_f,oAB:()=>Sn,oJD:()=>JE,oxw:()=>Wr,pB0:()=>$f,q3G:()=>ar,q4F:()=>T_,qLn:()=>Qf,qOj:()=>cv,qZA:()=>yv,qzn:()=>Ha,rWj:()=>G0,s9C:()=>bv,sBO:()=>nS,sIi:()=>gh,s_b:()=>sc,soG:()=>vy,tb:()=>Er,tp0:()=>Dn,uIk:()=>Sm,vHH:()=>ge,vpe:()=>Di,wAp:()=>At,xp6:()=>sm,ynx:()=>_v,z2F:()=>Iy,z3N:()=>ms,zSh:()=>rh,zs3:()=>xo});var d=P(7579),te=P(727),k=P(9751),le=P(6451),ue=P(3099);function fe(s){for(let o in s)if(s[o]===fe)return o;throw Error("Could not find renamed property on target object.")}function ce(s,o){for(const a in o)o.hasOwnProperty(a)&&!s.hasOwnProperty(a)&&(s[a]=o[a])}function pe(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(pe).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function me(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const H=fe({__forward_ref__:fe});function $(s){return s.__forward_ref__=$,s.toString=function(){return pe(this())},s}function Q(s){return He(s)?s():s}function He(s){return"function"==typeof s&&s.hasOwnProperty(H)&&s.__forward_ref__===$}function Ae(s){return s&&!!s.\u0275providers}const rt="https://g.co/ng/security#xss";class ge extends Error{constructor(o,a){super(function Me(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,a)),this.code=o}}function Ce(s){return"string"==typeof s?s:null==s?"":String(s)}function $e(s,o){throw new ge(-201,!1)}function Ht(s,o){null==s&&function yt(s,o,a,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${a} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function Et(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function di(s){return{providers:s.providers||[],imports:s.imports||[]}}function Xr(s){return Fr(s,Lr)||Fr(s,yn)}function Pr(s){return null!==Xr(s)}function Fr(s,o){return s.hasOwnProperty(o)?s[o]:null}function xi(s){return s&&(s.hasOwnProperty(ao)||s.hasOwnProperty(ei))?s[ao]:null}const Lr=fe({\u0275prov:fe}),ao=fe({\u0275inj:fe}),yn=fe({ngInjectableDef:fe}),ei=fe({ngInjectorDef:fe});var _t=(()=>((_t=_t||{})[_t.Default=0]="Default",_t[_t.Host=1]="Host",_t[_t.Self=2]="Self",_t[_t.SkipSelf=4]="SkipSelf",_t[_t.Optional=8]="Optional",_t))();let ts;function Cn(s){const o=ts;return ts=s,o}function Vr(s,o,a){const c=Xr(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&_t.Optional?null:void 0!==o?o:void $e(pe(s))}const kt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),On={},Tn="__NG_DI_FLAG__",Ri="ngTempTokenPath",pa=/\n/gm,rs="__source";let Xt;function Ir(s){const o=Xt;return Xt=s,o}function Hi(s,o=_t.Default){if(void 0===Xt)throw new ge(-203,!1);return null===Xt?Vr(s,void 0,o):Xt.get(s,o&_t.Optional?null:void 0,o)}function Ge(s,o=_t.Default){return(function Ni(){return ts}()||Hi)(Q(s),o)}function et(s,o=_t.Default){return Ge(s,Dt(o))}function Dt(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function Ct(s){const o=[];for(let a=0;a<s.length;a++){const c=Q(s[a]);if(Array.isArray(c)){if(0===c.length)throw new ge(900,!1);let h,g=_t.Default;for(let y=0;y<c.length;y++){const w=c[y],I=z(w);"number"==typeof I?-1===I?h=w.token:g|=I:h=w}o.push(Ge(h,g))}else o.push(Ge(c))}return o}function jt(s,o){return s[Tn]=o,s.prototype[Tn]=o,s}function z(s){return s[Tn]}function _e(s){return{toString:s}.toString()}var ne=(()=>((ne=ne||{})[ne.OnPush=0]="OnPush",ne[ne.Default=1]="Default",ne))(),Qt=(()=>{return(s=Qt||(Qt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Qt;var s})();const An={},bt=[],rr=fe({\u0275cmp:fe}),Wt=fe({\u0275dir:fe}),Kn=fe({\u0275pipe:fe}),Uo=fe({\u0275mod:fe}),Dr=fe({\u0275fac:fe}),ga=fe({__NG_ELEMENT_ID__:fe});let Qh=0;function ma(s){return _e(()=>{const a=!0===s.standalone,c={},h={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===ne.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||bt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Qt.Emulated,id:"c"+Qh++,styles:s.styles||bt,_:null,setInput:null,schemas:s.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},g=s.dependencies,y=s.features;return h.inputs=Cc(s.inputs,c),h.outputs=Cc(s.outputs),y&&y.forEach(w=>w(h)),h.directiveDefs=g?()=>("function"==typeof g?g():g).map(Dc).filter(sd):null,h.pipeDefs=g?()=>("function"==typeof g?g():g).map(Ln).filter(sd):null,h})}function Dc(s){return en(s)||Yn(s)}function sd(s){return null!==s}function Sn(s){return _e(()=>({type:s.type,bootstrap:s.bootstrap||bt,declarations:s.declarations||bt,imports:s.imports||bt,exports:s.exports||bt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function Cc(s,o){if(null==s)return An;const a={};for(const c in s)if(s.hasOwnProperty(c)){let h=s[c],g=h;Array.isArray(h)&&(g=h[1],h=h[0]),a[h]=c,o&&(o[h]=g)}return a}const ya=ma;function _a(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function en(s){return s[rr]||null}function Yn(s){return s[Wt]||null}function Ln(s){return s[Kn]||null}function $n(s){const o=en(s)||Yn(s)||Ln(s);return null!==o&&o.standalone}function hr(s,o){const a=s[Uo]||null;if(!a&&!0===o)throw new Error(`Type ${pe(s)} does not have '\u0275mod' property.`);return a}function Br(s){return Array.isArray(s)&&"object"==typeof s[1]}function ni(s){return Array.isArray(s)&&!0===s[1]}function ss(s){return 0!=(4&s.flags)}function Tc(s){return s.componentOffset>-1}function jo(s){return 1==(1&s.flags)}function Tr(s){return null!==s.template}function ud(s){return 0!=(256&s[2])}function gi(s,o){return s.hasOwnProperty(Dr)?s[Dr]:null}class cu{constructor(o,a,c){this.previousValue=o,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function Ho(){return ks}function ks(s){return s.type.prototype.ngOnChanges&&(s.setInput=du),lu}function lu(){const s=Da(this),o=s?.current;if(o){const a=s.previous;if(a===An)s.previous=o;else for(let c in o)a[c]=o[c];s.current=null,this.ngOnChanges(o)}}function du(s,o,a,c){const h=this.declaredInputs[a],g=Da(s)||function Nc(s,o){return s[Ia]=o}(s,{previous:An,current:null}),y=g.current||(g.current={}),w=g.previous,I=w[h];y[h]=new cu(I&&I.currentValue,o,w===An),s[c]=o}Ho.ngInherit=!0;const Ia="__ngSimpleChanges__";function Da(s){return s[Ia]||null}function kn(s){for(;Array.isArray(s);)s=s[0];return s}function Ta(s,o){return kn(o[s])}function pr(s,o){return kn(o[s.index])}function Go(s,o){return s.data[o]}function Fs(s,o){return s[o]}function jr(s,o){const a=o[s];return Br(a)?a:a[0]}function po(s){return 64==(64&s[2])}function Gi(s,o){return null==o?null:s[o]}function kc(s){s[18]=0}function Aa(s,o){s[5]+=o;let a=s,c=s[3];for(;null!==c&&(1===o&&1===a[5]||-1===o&&0===a[5]);)c[5]+=o,a=c,c=c[3]}const tt={lFrame:Bc(null),bindingsEnabled:!0};function rf(){return tt.bindingsEnabled}function De(){return tt.lFrame.lView}function Jt(){return tt.lFrame.tView}function Ma(s){return tt.lFrame.contextLView=s,s[8]}function yu(s){return tt.lFrame.contextLView=null,s}function Gn(){let s=zo();for(;null!==s&&64===s.type;)s=s.parent;return s}function zo(){return tt.lFrame.currentTNode}function Pi(s,o){const a=tt.lFrame;a.currentTNode=s,a.isParent=o}function _u(){return tt.lFrame.isParent}function qo(){tt.lFrame.isParent=!1}function Zo(){return tt.lFrame.bindingIndex++}function as(s){const o=tt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,a}function _d(s,o){const a=tt.lFrame;a.bindingIndex=a.bindingRootIndex=s,uf(o)}function uf(s){tt.lFrame.currentDirectiveIndex=s}function cf(s){const o=tt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}function vu(){return tt.lFrame.currentQueryIndex}function lf(s){tt.lFrame.currentQueryIndex=s}function zE(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Uc(s,o,a){if(a&_t.SkipSelf){let h=o,g=s;for(;!(h=h.parent,null!==h||a&_t.Host||(h=zE(g),null===h||(g=g[15],10&h.type))););if(null===h)return!1;o=h,s=g}const c=tt.lFrame=Rg();return c.currentTNode=o,c.lView=s,!0}function df(s){const o=Rg(),a=s[1];tt.lFrame=o,o.currentTNode=a.firstChild,o.lView=s,o.tView=a,o.contextLView=s,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function Rg(){const s=tt.lFrame,o=null===s?null:s.child;return null===o?Bc(s):o}function Bc(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function go(){const s=tt.lFrame;return tt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Eu=go;function Jn(){const s=go();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function zn(){return tt.lFrame.selectedIndex}function us(s){tt.lFrame.selectedIndex=s}function rn(){const s=tt.lFrame;return Go(s.tView,s.selectedIndex)}function Ed(){tt.lFrame.currentNamespace="svg"}function Hc(){!function hf(){tt.lFrame.currentNamespace=null}()}function Xn(s,o){for(let a=o.directiveStart,c=o.directiveEnd;a<c;a++){const g=s.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:w,ngAfterViewInit:I,ngAfterViewChecked:S,ngOnDestroy:R}=g;y&&(s.contentHooks||(s.contentHooks=[])).push(-a,y),w&&((s.contentHooks||(s.contentHooks=[])).push(a,w),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(a,w)),I&&(s.viewHooks||(s.viewHooks=[])).push(-a,I),S&&((s.viewHooks||(s.viewHooks=[])).push(a,S),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(a,S)),null!=R&&(s.destroyHooks||(s.destroyHooks=[])).push(a,R)}}function zi(s,o,a){yo(s,o,3,a)}function wu(s,o,a,c){(3&s[2])===a&&yo(s,o,a,c)}function Fi(s,o){let a=s[2];(3&a)===o&&(a&=2047,a+=1,s[2]=a)}function yo(s,o,a,c){const g=c??-1,y=o.length-1;let w=0;for(let I=void 0!==c?65535&s[18]:0;I<y;I++)if("number"==typeof o[I+1]){if(w=o[I],null!=c&&w>=c)break}else o[I]<0&&(s[18]+=65536),(w<g||-1==g)&&(wd(s,a,o,I),s[18]=(4294901760&s[18])+I+2),I++}function wd(s,o,a,c){const h=a[c]<0,g=a[c+1],w=s[h?-a[c]:a[c]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{g.call(w)}finally{}}}else try{g.call(w)}finally{}}class cs{constructor(o,a,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function bd(s,o,a){let c=0;for(;c<a.length;){const h=a[c];if("number"==typeof h){if(0!==h)break;c++;const g=a[c++],y=a[c++],w=a[c++];s.setAttribute(o,y,w,g)}else{const g=h,y=a[++c];Na(g)?s.setProperty(o,g,y):s.setAttribute(o,g,y),c++}}return c}function qi(s){return 3===s||4===s||6===s}function Na(s){return 64===s.charCodeAt(0)}function Li(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let a=-1;for(let c=0;c<o.length;c++){const h=o[c];"number"==typeof h?a=h:0===a||Ko(s,a,h,null,-1===a||2===a?o[++c]:null)}}return s}function Ko(s,o,a,c,h){let g=0,y=s.length;if(-1===o)y=-1;else for(;g<s.length;){const w=s[g++];if("number"==typeof w){if(w===o){y=-1;break}if(w>o){y=g-1;break}}}for(;g<s.length;){const w=s[g];if("number"==typeof w)break;if(w===a){if(null===c)return void(null!==h&&(s[g+1]=h));if(c===s[g+1])return void(s[g+2]=h)}g++,null!==c&&g++,null!==h&&g++}-1!==y&&(s.splice(y,0,o),g=y+1),s.splice(g++,0,a),null!==c&&s.splice(g++,0,c),null!==h&&s.splice(g++,0,h)}function Ra(s){return-1!==s}function Us(s){return 32767&s}function Bs(s,o){let a=function Du(s){return s>>16}(s),c=o;for(;a>0;)c=c[15],a--;return c}let Yo=!0;function js(s){const o=Yo;return Yo=s,o}let mf=0;const $r={};function qc(s,o){const a=Qo(s,o);if(-1!==a)return a;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,Vi(c.data,s),Vi(o,null),Vi(c.blueprint,null));const h=Oa(s,o),g=s.injectorIndex;if(Ra(h)){const y=Us(h),w=Bs(h,o),I=w[1].data;for(let S=0;S<8;S++)o[g+S]=w[y+S]|I[y+S]}return o[g+8]=h,g}function Vi(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Qo(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Oa(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let a=0,c=null,h=o;for(;null!==h;){if(c=Cd(h),null===c)return-1;if(a++,h=h[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function Hs(s,o,a){!function Tu(s,o,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(ga)&&(c=a[ga]),null==c&&(c=a[ga]=mf++);const h=255&c;o.data[s+(h>>5)]|=1<<h}(s,o,a)}function Au(s,o,a){if(a&_t.Optional||void 0!==s)return s;$e()}function Ui(s,o,a,c){if(a&_t.Optional&&void 0===c&&(c=null),0==(a&(_t.Self|_t.Host))){const h=s[9],g=Cn(void 0);try{return h?h.get(o,c,a&_t.Optional):Vr(o,c,a&_t.Optional)}finally{Cn(g)}}return Au(c,0,a)}function $s(s,o,a,c=_t.Default,h){if(null!==s){if(1024&o[2]){const y=function _o(s,o,a,c,h){let g=s,y=o;for(;null!==g&&null!==y&&1024&y[2]&&!(256&y[2]);){const w=Dd(g,y,a,c|_t.Self,$r);if(w!==$r)return w;let I=g.parent;if(!I){const S=y[21];if(S){const R=S.get(a,$r,c);if(R!==$r)return R}I=Cd(y),y=y[15]}g=I}return h}(s,o,a,c,$r);if(y!==$r)return y}const g=Dd(s,o,a,c,$r);if(g!==$r)return g}return Ui(o,a,c,h)}function Dd(s,o,a,c,h){const g=function yf(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(ga)?s[ga]:void 0;return"number"==typeof o?o>=0?255&o:e_:o}(a);if("function"==typeof g){if(!Uc(o,s,c))return c&_t.Host?Au(h,0,c):Ui(o,a,c,h);try{const y=g(c);if(null!=y||c&_t.Optional)return y;$e()}finally{Eu()}}else if("number"==typeof g){let y=null,w=Qo(s,o),I=-1,S=c&_t.Host?o[16][6]:null;for((-1===w||c&_t.SkipSelf)&&(I=-1===w?Oa(s,o):o[w+8],-1!==I&&Mu(c,!1)?(y=o[1],w=Us(I),o=Bs(I,o)):w=-1);-1!==w;){const R=o[1];if(Zc(g,w,R.data)){const F=Og(w,o,a,y,c,S);if(F!==$r)return F}I=o[w+8],-1!==I&&Mu(c,o[1].data[w+8]===S)&&Zc(g,w,o)?(y=R,w=Us(I),o=Bs(I,o)):w=-1}}return h}function Og(s,o,a,c,h,g){const y=o[1],w=y.data[s+8],R=Su(w,y,a,null==c?Tc(w)&&Yo:c!=y&&0!=(3&w.type),h&_t.Host&&g===w);return null!==R?Jo(o,y,R,w):$r}function Su(s,o,a,c,h){const g=s.providerIndexes,y=o.data,w=1048575&g,I=s.directiveStart,R=g>>20,W=h?w+R:s.directiveEnd;for(let ee=c?w:w+R;ee<W;ee++){const ve=y[ee];if(ee<I&&a===ve||ee>=I&&ve.type===a)return ee}if(h){const ee=y[I];if(ee&&Tr(ee)&&ee.type===a)return I}return null}function Jo(s,o,a,c){let h=s[a];const g=o.data;if(function Un(s){return s instanceof cs}(h)){const y=h;y.resolving&&function xe(s,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new ge(-200,`Circular dependency in DI detected for ${s}${a}`)}(function Ve(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Ce(s)}(g[a]));const w=js(y.canSeeViewProviders);y.resolving=!0;const I=y.injectImpl?Cn(y.injectImpl):null;Uc(s,c,_t.Default);try{h=s[a]=y.factory(void 0,g,s,c),o.firstCreatePass&&a>=c.directiveStart&&function pf(s,o,a){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:g}=o.type.prototype;if(c){const y=ks(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(s,y),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,y)}h&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-s,h),g&&((a.preOrderHooks||(a.preOrderHooks=[])).push(s,g),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,g))}(a,g[a],o)}finally{null!==I&&Cn(I),js(w),y.resolving=!1,Eu()}}return h}function Zc(s,o,a){return!!(a[o+(s>>5)]&1<<s)}function Mu(s,o){return!(s&_t.Self||s&_t.Host&&o)}class ka{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,c){return $s(this._tNode,this._lView,o,Dt(c),a)}}function e_(){return new ka(Gn(),De())}function _f(s){return _e(()=>{const o=s.prototype.constructor,a=o[Dr]||Kc(o),c=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==c;){const g=h[Dr]||Kc(h);if(g&&g!==a)return g;h=Object.getPrototypeOf(h)}return g=>new g})}function Kc(s){return He(s)?()=>{const o=Kc(Q(s));return o&&o()}:gi(s)}function Cd(s){const o=s[1],a=o.type;return 2===a?o.declTNode:1===a?s[6]:null}function xu(s){return function Wc(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const a=s.attrs;if(a){const c=a.length;let h=0;for(;h<c;){const g=a[h];if(qi(g))break;if(0===g)h+=2;else if("number"==typeof g)for(h++;h<c&&"string"==typeof a[h];)h++;else{if(g===o)return a[h+1];h+=2}}}return null}(Gn(),s)}const Wi="__parameters__";function Gs(s,o,a){return _e(()=>{const c=function Td(s){return function(...a){if(s){const c=s(...a);for(const h in c)this[h]=c[h]}}}(o);function h(...g){if(this instanceof h)return c.apply(this,g),this;const y=new h(...g);return w.annotation=y,w;function w(I,S,R){const F=I.hasOwnProperty(Wi)?I[Wi]:Object.defineProperty(I,Wi,{value:[]})[Wi];for(;F.length<=R;)F.push(null);return(F[R]=F[R]||[]).push(y),I}}return a&&(h.prototype=Object.create(a.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class _n{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Et({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Qe(s,o){void 0===o&&(o=s);for(let a=0;a<s.length;a++){let c=s[a];Array.isArray(c)?(o===s&&(o=s.slice(0,a)),Qe(c,o)):o!==s&&o.push(c)}return o}function bn(s,o){s.forEach(a=>Array.isArray(a)?bn(a,o):o(a))}function sr(s,o,a){o>=s.length?s.push(a):s.splice(o,0,a)}function ds(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Sr(s,o,a){let c=at(s,o);return c>=0?s[1|c]=a:(c=~c,function el(s,o,a,c){let h=s.length;if(h==o)s.push(a,c);else if(1===h)s.push(c,s[0]),s[0]=a;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=a,s[o+1]=c}}(s,c,o,a)),c}function Ks(s,o){const a=at(s,o);if(a>=0)return s[1|a]}function at(s,o){return function D(s,o,a){let c=0,h=s.length>>a;for(;h!==c;){const g=c+(h-c>>1),y=s[g<<a];if(o===y)return g<<a;y>o?h=g:c=g+1}return~(h<<a)}(s,o,1)}const St=jt(Gs("Optional"),8),Dn=jt(Gs("SkipSelf"),4);var Zi=(()=>((Zi=Zi||{})[Zi.Important=1]="Important",Zi[Zi.DashCase=2]="DashCase",Zi))();const Sf=new Map;let Vg=0;const ku="__ngContext__";function yr(s,o){Br(o)?(s[ku]=o[20],function Ld(s){Sf.set(s[20],s)}(o)):s[ku]=o}function jd(s,o){return undefined(s,o)}function Va(s){const o=s[3];return ni(o)?o[3]:o}function ol(s){return $g(s[13])}function Do(s){return $g(s[4])}function $g(s){for(;null!==s&&!ni(s);)s=s[4];return s}function ta(s,o,a,c,h){if(null!=c){let g,y=!1;ni(c)?g=c:Br(c)&&(y=!0,c=c[0]);const w=kn(c);0===s&&null!==a?null==h?vi(o,a,w):To(o,a,w,h||null,!0):1===s&&null!==a?To(o,a,w,h||null,!0):2===s?function zr(s,o,a){const c=ra(s,o);c&&function Vf(s,o,a,c){s.removeChild(o,a,c)}(s,c,o,a)}(o,w,y):3===s&&o.destroyNode(w),null!=g&&function ll(s,o,a,c,h){const g=a[7];g!==kn(a)&&ta(o,s,c,g,h);for(let w=10;w<a.length;w++){const I=a[w];ja(I[1],I,s,o,c,g)}}(o,s,g,a,h)}}function Of(s,o,a){return s.createElement(o,a)}function Ua(s,o){const a=s[9],c=a.indexOf(o),h=o[3];512&o[2]&&(o[2]&=-513,Aa(h,-1)),a.splice(c,1)}function Pf(s,o){if(s.length<=10)return;const a=10+o,c=s[a];if(c){const h=c[17];null!==h&&h!==s&&Ua(h,c),o>0&&(s[a-1][4]=c[4]);const g=ds(s,10+o);!function al(s,o){ja(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const y=g[19];null!==y&&y.detachView(g[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function Ff(s,o){if(!(128&o[2])){const a=o[11];a.destroyNode&&ja(s,o,a,3,null,null),function kf(s){let o=s[13];if(!o)return Bu(s[1],s);for(;o;){let a=null;if(Br(o))a=o[13];else{const c=o[10];c&&(a=c)}if(!a){for(;o&&!o[4]&&o!==s;)Br(o)&&Bu(o[1],o),o=o[3];null===o&&(o=s),Br(o)&&Bu(o[1],o),a=o&&o[4]}o=a}}(o)}}function Bu(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function Hd(s,o){let a;if(null!=s&&null!=(a=s.destroyHooks))for(let c=0;c<a.length;c+=2){const h=o[a[c]];if(!(h instanceof cs)){const g=a[c+1];if(Array.isArray(g))for(let y=0;y<g.length;y+=2){const w=h[g[y]],I=g[y+1];try{I.call(w)}finally{}}else try{g.call(h)}finally{}}}}(s,o),function Lf(s,o){const a=s.cleanup,c=o[7];let h=-1;if(null!==a)for(let g=0;g<a.length-1;g+=2)if("string"==typeof a[g]){const y=a[g+3];y>=0?c[h=y]():c[h=-y].unsubscribe(),g+=2}else{const y=c[h=a[g+1]];a[g].call(y)}if(null!==c){for(let g=h+1;g<c.length;g++)(0,c[g])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const a=o[17];if(null!==a&&ni(o[3])){a!==o[3]&&Ua(a,o);const c=o[19];null!==c&&c.detachView(s)}!function Kt(s){Sf.delete(s[20])}(o)}}function ju(s,o,a){return function $d(s,o,a){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return a[0];{const{componentOffset:h}=c;if(h>-1){const{encapsulation:g}=s.data[c.directiveStart+h];if(g===Qt.None||g===Qt.Emulated)return null}return pr(c,a)}}(s,o.parent,a)}function To(s,o,a,c,h){s.insertBefore(o,a,c,h)}function vi(s,o,a){s.appendChild(o,a)}function Ba(s,o,a,c,h){null!==c?To(s,o,a,c,h):vi(s,o,a)}function ra(s,o){return s.parentNode(o)}let So,E,q,Wg=function Gd(s,o,a){return 40&s.type?pr(s,a):null};function zd(s,o,a,c){const h=ju(s,c,o),g=o[11],w=function ul(s,o,a){return Wg(s,o,a)}(c.parent||o[6],c,o);if(null!=h)if(Array.isArray(a))for(let I=0;I<a.length;I++)Ba(g,h,a[I],w,!1);else Ba(g,h,a,w,!1)}function qd(s,o){if(null!==o){const a=o.type;if(3&a)return pr(o,s);if(4&a)return Wd(-1,s[o.index]);if(8&a){const c=o.child;if(null!==c)return qd(s,c);{const h=s[o.index];return ni(h)?Wd(-1,h):kn(h)}}if(32&a)return jd(o,s)()||kn(s[o.index]);{const c=Zg(s,o);return null!==c?Array.isArray(c)?c[0]:qd(Va(s[16]),c):qd(s,o.next)}}return null}function Zg(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Wd(s,o){const a=10+s+1;if(a<o.length){const c=o[a],h=c[1].firstChild;if(null!==h)return qd(c,h)}return o[7]}function cl(s,o,a,c,h,g,y){for(;null!=a;){const w=c[a.index],I=a.type;if(y&&0===o&&(w&&yr(kn(w),c),a.flags|=2),32!=(32&a.flags))if(8&I)cl(s,o,a.child,c,h,g,!1),ta(o,s,h,w,g);else if(32&I){const S=jd(a,c);let R;for(;R=S();)ta(o,s,h,R,g);ta(o,s,h,w,g)}else 16&I?gs(s,o,c,a,h,g):ta(o,s,h,w,g);a=y?a.projectionNext:a.next}}function ja(s,o,a,c,h,g){cl(a,c,s.firstChild,o,h,g,!1)}function gs(s,o,a,c,h,g){const y=a[16],I=y[6].projection[c.projection];if(Array.isArray(I))for(let S=0;S<I.length;S++)ta(o,s,h,I[S],g);else cl(s,o,I,y[3],h,g,!0)}function Kd(s,o,a){""===a?s.removeAttribute(o,"class"):s.setAttribute(o,"class",a)}function Ki(s,o,a){const{mergedAttrs:c,classes:h,styles:g}=a;null!==c&&bd(s,o,c),null!==h&&Kd(s,o,h),null!==g&&function Zd(s,o,a){s.setAttribute(o,"style",a)}(s,o,g)}function ia(s){return function Yd(){if(void 0===So&&(So=null,kt.trustedTypes))try{So=kt.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return So}()?.createHTML(s)||s}function M(s){E=s}function de(){if(void 0===q&&(q=null,kt.trustedTypes))try{q=kt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return q}function Be(s){return de()?.createHTML(s)||s}function vt(s){return de()?.createScriptURL(s)||s}class ut{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${rt})`}}class or extends ut{getTypeName(){return"HTML"}}class Bi extends ut{getTypeName(){return"Style"}}class dl extends ut{getTypeName(){return"Script"}}class jf extends ut{getTypeName(){return"URL"}}class Qd extends ut{getTypeName(){return"ResourceURL"}}function ms(s){return s instanceof ut?s.changingThisBreaksApplicationSecurity:s}function Ha(s,o){const a=function $a(s){return s instanceof ut&&s.getTypeName()||null}(s);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see ${rt})`)}return a===o}function hl(s){return new or(s)}function Jd(s){return new Bi(s)}function Hf(s){return new dl(s)}function Kg(s){return new jf(s)}function $f(s){return new Qd(s)}class ZE{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const a=(new window.DOMParser).parseFromString(ia(o),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(o):(a.removeChild(a.firstChild),a)}catch{return null}}}class Yx{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const a=this.inertDocument.createElement("html");this.inertDocument.appendChild(a);const c=this.inertDocument.createElement("body");a.appendChild(c)}}getInertBodyElement(o){const a=this.inertDocument.createElement("template");if("content"in a)return a.innerHTML=ia(o),a;const c=this.inertDocument.createElement("body");return c.innerHTML=ia(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(c),c}stripCustomNsAttrs(o){const a=o.attributes;for(let h=a.length-1;0<h;h--){const y=a.item(h).name;("xmlns:ns1"===y||0===y.indexOf("ns1:"))&&o.removeAttribute(y)}let c=o.firstChild;for(;c;)c.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(c),c=c.nextSibling}}const Jx=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function Xd(s){return(s=String(s)).match(Jx)?s:"unsafe:"+s}function Ga(s){const o={};for(const a of s.split(","))o[a]=!0;return o}function Gf(...s){const o={};for(const a of s)for(const c in a)a.hasOwnProperty(c)&&(o[c]=!0);return o}const KE=Ga("area,br,col,hr,img,wbr"),Yg=Ga("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ys=Ga("rp,rt"),p_=Gf(KE,Gf(Yg,Ga("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Gf(ys,Ga("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Gf(ys,Yg)),Jg=Ga("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),YE=Gf(Jg,Ga("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ga("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),eh=Ga("script,style,template");class zf{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let a=o.firstChild,c=!0;for(;a;)if(a.nodeType===Node.ELEMENT_NODE?c=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,c&&a.firstChild)a=a.firstChild;else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let h=this.checkClobberedElement(a,a.nextSibling);if(h){a=h;break}a=this.checkClobberedElement(a,a.parentNode)}return this.buf.join("")}startElement(o){const a=o.nodeName.toLowerCase();if(!p_.hasOwnProperty(a))return this.sanitizedSomething=!0,!eh.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const c=o.attributes;for(let h=0;h<c.length;h++){const g=c.item(h),y=g.name,w=y.toLowerCase();if(!YE.hasOwnProperty(w)){this.sanitizedSomething=!0;continue}let I=g.value;Jg[w]&&(I=Xd(I)),this.buf.push(" ",y,'="',th(I),'"')}return this.buf.push(">"),!0}endElement(o){const a=o.nodeName.toLowerCase();p_.hasOwnProperty(a)&&!KE.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(o){this.buf.push(th(o))}checkClobberedElement(o,a){if(a&&(o.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return a}}const DC=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,CC=/([^\#-~ |!])/g;function th(s){return s.replace(/&/g,"&amp;").replace(DC,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(CC,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Hu;function QE(s,o){let a=null;try{Hu=Hu||function fl(s){const o=new Yx(s);return function Qx(){try{return!!(new window.DOMParser).parseFromString(ia(""),"text/html")}catch{return!1}}()?new ZE(o):o}(s);let c=o?String(o):"";a=Hu.getInertBodyElement(c);let h=5,g=c;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,c=g,g=a.innerHTML,a=Hu.getInertBodyElement(c)}while(c!==g);return ia((new zf).sanitizeChildren(m_(a)||a))}finally{if(a){const c=m_(a)||a;for(;c.firstChild;)c.removeChild(c.firstChild)}}}function m_(s){return"content"in s&&function TC(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var ar=(()=>((ar=ar||{})[ar.NONE=0]="NONE",ar[ar.HTML=1]="HTML",ar[ar.STYLE=2]="STYLE",ar[ar.SCRIPT=3]="SCRIPT",ar[ar.URL=4]="URL",ar[ar.RESOURCE_URL=5]="RESOURCE_URL",ar))();function JE(s){const o=qf();return o?Be(o.sanitize(ar.HTML,s)||""):Ha(s,"HTML")?Be(ms(s)):QE(function O(){return void 0!==E?E:typeof document<"u"?document:void 0}(),Ce(s))}function SC(s){const o=qf();return o?o.sanitize(ar.URL,s)||"":Ha(s,"URL")?ms(s):Xd(Ce(s))}function XE(s){const o=qf();if(o)return vt(o.sanitize(ar.RESOURCE_URL,s)||"");if(Ha(s,"ResourceURL"))return vt(ms(s));throw new ge(904,!1)}function ew(s,o,a){return function MC(s,o){return"src"===o&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===o&&("base"===s||"link"===s)?XE:SC}(o,a)(s)}function qf(){const s=De();return s&&s[12]}const __=new _n("ENVIRONMENT_INITIALIZER"),tw=new _n("INJECTOR",-1),nw=new _n("INJECTOR_DEF_TYPES");class rw{get(o,a=On){if(a===On){const c=new Error(`NullInjectorError: No provider for ${pe(o)}!`);throw c.name="NullInjectorError",c}return a}}function iw(s){return{\u0275providers:s}}function xC(...s){return{\u0275providers:em(0,s),\u0275fromNgModule:!0}}function em(s,...o){const a=[],c=new Set;let h;return bn(o,g=>{const y=g;Wf(y,a,[],c)&&(h||(h=[]),h.push(y))}),void 0!==h&&v_(h,a),a}function v_(s,o){for(let a=0;a<s.length;a++){const{providers:h}=s[a];w_(h,g=>{o.push(g)})}}function Wf(s,o,a,c){if(!(s=Q(s)))return!1;let h=null,g=xi(s);const y=!g&&en(s);if(g||y){if(y&&!y.standalone)return!1;h=s}else{const I=s.ngModule;if(g=xi(I),!g)return!1;h=I}const w=c.has(h);if(y){if(w)return!1;if(c.add(h),y.dependencies){const I="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const S of I)Wf(S,o,a,c)}}else{if(!g)return!1;{if(null!=g.imports&&!w){let S;c.add(h);try{bn(g.imports,R=>{Wf(R,o,a,c)&&(S||(S=[]),S.push(R))})}finally{}void 0!==S&&v_(S,o)}if(!w){const S=gi(h)||(()=>new h);o.push({provide:h,useFactory:S,deps:bt},{provide:nw,useValue:h,multi:!0},{provide:__,useValue:()=>Ge(h),multi:!0})}const I=g.providers;null==I||w||w_(I,R=>{o.push(R)})}}return h!==s&&void 0!==s.providers}function w_(s,o){for(let a of s)Ae(a)&&(a=a.\u0275providers),Array.isArray(a)?w_(a,o):o(a)}const NC=fe({provide:String,useValue:fe});function b_(s){return null!==s&&"object"==typeof s&&NC in s}function $u(s){return"function"==typeof s}const rh=new _n("Set Injector scope."),pl={},aw={};let gl;function Kf(){return void 0===gl&&(gl=new rw),gl}class ml{}class uw extends ml{constructor(o,a,c,h){super(),this.parent=a,this.source=c,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,C_(o,y=>this.processProvider(y)),this.records.set(tw,ih(void 0,this)),h.has("environment")&&this.records.set(ml,ih(void 0,this));const g=this.records.get(rh);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(nw.multi,bt,_t.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const a=Ir(this),c=Cn(void 0);try{return o()}finally{Ir(a),Cn(c)}}get(o,a=On,c=_t.Default){this.assertNotDestroyed(),c=Dt(c);const h=Ir(this),g=Cn(void 0);try{if(!(c&_t.SkipSelf)){let w=this.records.get(o);if(void 0===w){const I=function FC(s){return"function"==typeof s||"object"==typeof s&&s instanceof _n}(o)&&Xr(o);w=I&&this.injectableDefInScope(I)?ih(I_(o),pl):null,this.records.set(o,w)}if(null!=w)return this.hydrate(o,w)}return(c&_t.Self?Kf():this.parent).get(o,a=c&_t.Optional&&a===On?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[Ri]=y[Ri]||[]).unshift(pe(o)),h)throw y;return function U(s,o,a,c){const h=s[Ri];throw o[rs]&&h.unshift(o[rs]),s.message=function Y(s,o,a,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let h=pe(o);if(Array.isArray(o))h=o.map(pe).join(" -> ");else if("object"==typeof o){let g=[];for(let y in o)if(o.hasOwnProperty(y)){let w=o[y];g.push(y+":"+("string"==typeof w?JSON.stringify(w):pe(w)))}h=`{${g.join(", ")}}`}return`${a}${c?"("+c+")":""}[${h}]: ${s.replace(pa,"\n  ")}`}("\n"+s.message,h,a,c),s.ngTokenPath=h,s[Ri]=null,s}(y,o,"R3InjectorError",this.source)}throw y}finally{Cn(g),Ir(h)}}resolveInjectorInitializers(){const o=Ir(this),a=Cn(void 0);try{const c=this.get(__.multi,bt,_t.Self);for(const h of c)h()}finally{Ir(o),Cn(a)}}toString(){const o=[],a=this.records;for(const c of a.keys())o.push(pe(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ge(205,!1)}processProvider(o){let a=$u(o=Q(o))?o:Q(o&&o.provide);const c=function OC(s){return b_(s)?ih(void 0,s.useValue):ih(D_(s),pl)}(o);if($u(o)||!0!==o.multi)this.records.get(a);else{let h=this.records.get(a);h||(h=ih(void 0,pl,!0),h.factory=()=>Ct(h.multi),this.records.set(a,h)),a=o,h.multi.push(o)}this.records.set(a,c)}hydrate(o,a){return a.value===pl&&(a.value=aw,a.value=a.factory()),"object"==typeof a.value&&a.value&&function PC(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=Q(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function I_(s){const o=Xr(s),a=null!==o?o.factory:gi(s);if(null!==a)return a;if(s instanceof _n)throw new ge(204,!1);if(s instanceof Function)return function RC(s){const o=s.length;if(o>0)throw function Ws(s,o){const a=[];for(let c=0;c<s;c++)a.push(o);return a}(o,"?"),new ge(204,!1);const a=function Vo(s){const o=s&&(s[Lr]||s[yn]);if(o){const a=function Ms(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(s);return null!==a?()=>a.factory(s):()=>new s}(s);throw new ge(204,!1)}function D_(s,o,a){let c;if($u(s)){const h=Q(s);return gi(h)||I_(h)}if(b_(s))c=()=>Q(s.useValue);else if(function Zf(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...Ct(s.deps||[]));else if(function sw(s){return!(!s||!s.useExisting)}(s))c=()=>Ge(Q(s.useExisting));else{const h=Q(s&&(s.useClass||s.provide));if(!function kC(s){return!!s.deps}(s))return gi(h)||I_(h);c=()=>new h(...Ct(s.deps))}return c}function ih(s,o,a=!1){return{factory:s,value:o,multi:a?[]:void 0}}function C_(s,o){for(const a of s)Array.isArray(a)?C_(a,o):a&&Ae(a)?C_(a.\u0275providers,o):o(a)}class LC{}class cw{}class hw{resolveComponentFactory(o){throw function lw(s){const o=Error(`No component factory found for ${pe(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let tm=(()=>{class s{}return s.NULL=new hw,s})();function fw(){return yl(Gn(),De())}function yl(s,o){return new Yf(pr(s,o))}let Yf=(()=>{class s{constructor(a){this.nativeElement=a}}return s.__NG_ELEMENT_ID__=fw,s})();function UC(s){return s instanceof Yf?s.nativeElement:s}class pw{}let BC=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function jC(){const s=De(),a=jr(Gn().index,s);return(Br(a)?a:s)[11]}(),s})(),gw=(()=>{class s{}return s.\u0275prov=Et({token:s,providedIn:"root",factory:()=>null}),s})();class nm{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const T_=new nm("15.0.1"),A_={};function S_(s){return s.ngOriginalError}class Qf{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&S_(o);for(;a&&S_(a);)a=S_(a);return a||null}}function za(s){return s instanceof Function?s():s}function Ew(s,o,a){let c=s.length;for(;;){const h=s.indexOf(o,a);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const g=o.length;if(h+g===c||s.charCodeAt(h+g)<=32)return h}a=h+1}}const ww="ng-template";function bw(s,o,a){let c=0;for(;c<s.length;){let h=s[c++];if(a&&"class"===h){if(h=s[c],-1!==Ew(h.toLowerCase(),o,0))return!0}else if(1===h){for(;c<s.length&&"string"==typeof(h=s[c++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function _r(s){return 4===s.type&&s.value!==ww}function ZC(s,o,a){return o===(4!==s.type||a?s.value:ww)}function M_(s,o,a){let c=4;const h=s.attrs||[],g=function uN(s){for(let o=0;o<s.length;o++)if(qi(s[o]))return o;return s.length}(h);let y=!1;for(let w=0;w<o.length;w++){const I=o[w];if("number"!=typeof I){if(!y)if(4&c){if(c=2|1&c,""!==I&&!ZC(s,I,a)||""===I&&1===o.length){if(Mo(c))return!1;y=!0}}else{const S=8&c?I:o[++w];if(8&c&&null!==s.attrs){if(!bw(s.attrs,S,a)){if(Mo(c))return!1;y=!0}continue}const F=KC(8&c?"class":I,h,_r(s),a);if(-1===F){if(Mo(c))return!1;y=!0;continue}if(""!==S){let W;W=F>g?"":h[F+1].toLowerCase();const ee=8&c?W:null;if(ee&&-1!==Ew(ee,S,0)||2&c&&S!==W){if(Mo(c))return!1;y=!0}}}}else{if(!y&&!Mo(c)&&!Mo(I))return!1;if(y&&Mo(I))continue;y=!1,c=I|1&c}}return Mo(c)||y}function Mo(s){return 0==(1&s)}function KC(s,o,a,c){if(null===o)return-1;let h=0;if(c||!a){let g=!1;for(;h<o.length;){const y=o[h];if(y===s)return h;if(3===y||6===y)g=!0;else{if(1===y||2===y){let w=o[++h];for(;"string"==typeof w;)w=o[++h];continue}if(4===y)break;if(0===y){h+=4;continue}}h+=g?1:2}return-1}return function YC(s,o){let a=s.indexOf(4);if(a>-1)for(a++;a<s.length;){const c=s[a];if("number"==typeof c)return-1;if(c===o)return a;a++}return-1}(o,s)}function x_(s,o,a=!1){for(let c=0;c<o.length;c++)if(M_(s,o[c],a))return!0;return!1}function R_(s,o){return s?":not("+o.trim()+")":o}function oh(s){let o=s[0],a=1,c=2,h="",g=!1;for(;a<s.length;){let y=s[a];if("string"==typeof y)if(2&c){const w=s[++a];h+="["+y+(w.length>0?'="'+w+'"':"")+"]"}else 8&c?h+="."+y:4&c&&(h+=" "+y);else""!==h&&!Mo(y)&&(o+=R_(g,h),h=""),c=y,g=g||!Mo(c);a++}return""!==h&&(o+=R_(g,h)),o}const Pt={};function sm(s){Dw(Jt(),De(),zn()+s,!1)}function Dw(s,o,a,c){if(!c)if(3==(3&o[2])){const g=s.preOrderCheckHooks;null!==g&&zi(o,g,a)}else{const g=s.preOrderHooks;null!==g&&wu(o,g,0,a)}us(a)}function Aw(s,o=null,a=null,c){const h=tT(s,o,a,c);return h.resolveInjectorInitializers(),h}function tT(s,o=null,a=null,c,h=new Set){const g=[a||bt,xC(s)];return c=c||("object"==typeof s?void 0:pe(s)),new uw(g,o||Kf(),c||null,h)}let xo=(()=>{class s{static create(a,c){if(Array.isArray(a))return Aw({name:""},c,a,"");{const h=a.name??"";return Aw({name:h},a.parent,a.providers,h)}}}return s.THROW_IF_NOT_FOUND=On,s.NULL=new rw,s.\u0275prov=Et({token:s,providedIn:"any",factory:()=>Ge(tw)}),s.__NG_ELEMENT_ID__=-1,s})();function El(s,o=_t.Default){const a=De();return null===a?Ge(s,o):$s(Gn(),a,Q(s),o)}function V_(){throw new Error("invalid")}function Xf(s,o){return s<<17|o<<2}function Xs(s){return s>>17&32767}function ch(s){return 2|s}function sa(s){return(131068&s)>>2}function am(s,o){return-131069&s|o<<2}function um(s){return 1|s}function hm(s,o){const a=s.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const h=a[c],g=a[c+1];if(-1!==g){const y=s.data[g];lf(h),y.contentQueries(2,o[g],g)}}}function fm(s,o,a,c,h,g,y,w,I,S,R){const F=o.blueprint.slice();return F[0]=h,F[2]=76|c,(null!==R||s&&1024&s[2])&&(F[2]|=1024),kc(F),F[3]=F[15]=s,F[8]=a,F[10]=y||s&&s[10],F[11]=w||s&&s[11],F[12]=I||s&&s[12]||null,F[9]=S||s&&s[9]||null,F[6]=g,F[20]=function Ug(){return Vg++}(),F[21]=R,F[16]=2==o.type?s[16]:F,F}function Wa(s,o,a,c,h){let g=s.data[o];if(null===g)g=function pm(s,o,a,c,h){const g=zo(),y=_u(),I=s.data[o]=function ym(s,o,a,c,h,g){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?g:g&&g.parent,a,o,c,h);return null===s.firstChild&&(s.firstChild=I),null!==g&&(y?null==g.child&&null!==I.parent&&(g.child=I):null===g.next&&(g.next=I)),I}(s,o,a,c,h),function yd(){return tt.lFrame.inI18n}()&&(g.flags|=32);else if(64&g.type){g.type=a,g.value=c,g.attrs=h;const y=function mi(){const s=tt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();g.injectorIndex=null===y?-1:y.injectorIndex}return Pi(g,!0),g}function hh(s,o,a,c){if(0===a)return-1;const h=o.length;for(let g=0;g<a;g++)o.push(c),s.blueprint.push(c),s.data.push(null);return h}function fh(s,o,a){df(o);try{const c=s.viewQuery;null!==c&&lp(1,c,a);const h=s.template;null!==h&&_T(s,o,h,1,a),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&hm(s,o),s.staticViewQueries&&lp(2,s.viewQuery,a);const g=s.components;null!==g&&function Q_(s,o){for(let a=0;a<o.length;a++)IN(s,o[a])}(o,g)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,Jn()}}function qu(s,o,a,c){const h=o[2];if(128!=(128&h)){df(o);try{kc(o),function Wo(s){return tt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==a&&_T(s,o,a,2,c);const y=3==(3&h);if(y){const S=s.preOrderCheckHooks;null!==S&&zi(o,S,null)}else{const S=s.preOrderHooks;null!==S&&wu(o,S,0,null),Fi(o,0)}if(function wN(s){for(let o=ol(s);null!==o;o=Do(o)){if(!o[2])continue;const a=o[9];for(let c=0;c<a.length;c++){const h=a[c],g=h[3];0==(512&h[2])&&Aa(g,1),h[2]|=512}}}(o),function Gw(s){for(let o=ol(s);null!==o;o=Do(o))for(let a=10;a<o.length;a++){const c=o[a],h=c[1];po(c)&&qu(h,c,h.template,c[8])}}(o),null!==s.contentQueries&&hm(s,o),y){const S=s.contentCheckHooks;null!==S&&zi(o,S)}else{const S=s.contentHooks;null!==S&&wu(o,S,1),Fi(o,1)}!function ip(s,o){const a=s.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const h=a[c];if(h<0)us(~h);else{const g=h,y=a[++c],w=a[++c];_d(y,g),w(2,o[g])}}}finally{us(-1)}}(s,o);const w=s.components;null!==w&&function yT(s,o){for(let a=0;a<o.length;a++)bN(s,o[a])}(o,w);const I=s.viewQuery;if(null!==I&&lp(2,I,c),y){const S=s.viewCheckHooks;null!==S&&zi(o,S)}else{const S=s.viewHooks;null!==S&&wu(o,S,2),Fi(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,Aa(o[3],-1))}finally{Jn()}}}function _T(s,o,a,c,h){const g=zn(),y=2&c;try{us(-1),y&&o.length>22&&Dw(s,o,22,!1),a(c,h)}finally{us(g)}}function Uw(s,o,a){if(ss(o)){const h=o.directiveEnd;for(let g=o.directiveStart;g<h;g++){const y=s.data[g];y.contentQueries&&y.contentQueries(1,a[g],g)}}}function gm(s,o,a){!rf()||(function vN(s,o,a,c){const h=a.directiveStart,g=a.directiveEnd;s.firstCreatePass||qc(a,o),yr(c,o);const y=a.initialInputs;for(let w=h;w<g;w++){const I=s.data[w],S=Tr(I);S&&ap(o,a,I);const R=Jo(o,s,w,a);yr(R,o),null!==y&&Hw(0,w-h,R,I,0,y),S&&(jr(a.index,o)[8]=R)}}(s,o,a,pr(a,o)),64==(64&a.flags)&&DT(s,o,a))}function Bw(s,o,a=pr){const c=o.localNames;if(null!==c){let h=o.index+1;for(let g=0;g<c.length;g+=2){const y=c[g+1],w=-1===y?a(o,s):s[y];s[h++]=w}}}function bl(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=ph(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function ph(s,o,a,c,h,g,y,w,I,S){const R=22+c,F=R+h,W=function mm(s,o){const a=[];for(let c=0;c<o;c++)a.push(c<s?null:Pt);return a}(R,F),ee="function"==typeof S?S():S;return W[1]={type:s,blueprint:W,template:a,queries:null,viewQuery:w,declTNode:o,data:W.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:I,consts:ee,incompleteFirstPass:!1}}function op(s,o,a,c){const h=iv(o);null===a?h.push(c):(h.push(a),s.firstCreatePass&&qw(s).push(c,h.length-1))}function jw(s,o,a,c){for(let h in s)if(s.hasOwnProperty(h)){a=null===a?{}:a;const g=s[h];null===c?_m(a,o,h,g):c.hasOwnProperty(h)&&_m(a,o,c[h],g)}return a}function _m(s,o,a,c){s.hasOwnProperty(a)?s[a].push(o,c):s[a]=[o,c]}function _s(s,o,a,c,h,g,y,w){const I=pr(o,a);let R,S=o.inputs;!w&&null!=S&&(R=S[c])?(ov(s,a,R,c,h),Tc(o)&&J_(a,o.index)):3&o.type&&(c=function vT(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),h=null!=y?y(h,o.value||"",c):h,g.setProperty(I,c,h))}function J_(s,o){const a=jr(o,s);16&a[2]||(a[2]|=32)}function X_(s,o,a,c){let h=!1;if(rf()){const g=null===c?null:{"":-1},y=function CT(s,o){const a=s.directiveRegistry;let c=null,h=null;if(a)for(let g=0;g<a.length;g++){const y=a[g];if(x_(o,y.selectors,!1))if(c||(c=[]),Tr(y))if(null!==y.findHostDirectiveDefs){const w=[];h=h||new Map,y.findHostDirectiveDefs(y,w,h),c.unshift(...w,y),Em(s,o,w.length)}else c.unshift(y),Em(s,o,0);else h=h||new Map,y.findHostDirectiveDefs?.(y,c,h),c.push(y)}return null===c?null:[c,h]}(s,a);let w,I;null===y?w=I=null:[w,I]=y,null!==w&&(h=!0,bT(s,o,a,w,g,I)),g&&function nv(s,o,a){if(o){const c=s.localNames=[];for(let h=0;h<o.length;h+=2){const g=a[o[h+1]];if(null==g)throw new ge(-301,!1);c.push(o[h],g)}}}(a,c,g)}return a.mergedAttrs=Li(a.mergedAttrs,a.attrs),h}function bT(s,o,a,c,h,g){for(let S=0;S<c.length;S++)Hs(qc(a,o),s,c[S].type);!function EN(s,o,a){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+a,s.providerIndexes=o}(a,s.data.length,c.length);for(let S=0;S<c.length;S++){const R=c[S];R.providersResolver&&R.providersResolver(R)}let y=!1,w=!1,I=hh(s,o,c.length,null);for(let S=0;S<c.length;S++){const R=c[S];a.mergedAttrs=Li(a.mergedAttrs,R.hostAttrs),AT(s,a,o,I,R),TT(I,R,h),null!==R.contentQueries&&(a.flags|=4),(null!==R.hostBindings||null!==R.hostAttrs||0!==R.hostVars)&&(a.flags|=64);const F=R.type.prototype;!y&&(F.ngOnChanges||F.ngOnInit||F.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(a.index),y=!0),!w&&(F.ngOnChanges||F.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(a.index),w=!0),I++}!function vm(s,o,a){const h=o.directiveEnd,g=s.data,y=o.attrs,w=[];let I=null,S=null;for(let R=o.directiveStart;R<h;R++){const F=g[R],W=a?a.get(F):null,ve=W?W.outputs:null;I=jw(F.inputs,R,I,W?W.inputs:null),S=jw(F.outputs,R,S,ve);const Le=null===I||null===y||_r(o)?null:Za(I,R,y);w.push(Le)}null!==I&&(I.hasOwnProperty("class")&&(o.flags|=8),I.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=w,o.inputs=I,o.outputs=S}(s,a,g)}function DT(s,o,a){const c=a.directiveStart,h=a.directiveEnd,g=a.index,y=function Ng(){return tt.lFrame.currentDirectiveIndex}();try{us(g);for(let w=c;w<h;w++){const I=s.data[w],S=o[w];uf(w),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&tv(I,S)}}finally{us(-1),uf(y)}}function tv(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Em(s,o,a){o.componentOffset=a,(s.components||(s.components=[])).push(o.index)}function TT(s,o,a){if(a){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)a[o.exportAs[c]]=s;Tr(o)&&(a[""]=s)}}function AT(s,o,a,c,h){s.data[c]=h;const g=h.factory||(h.factory=gi(h.type)),y=new cs(g,Tr(h),El);s.blueprint[c]=y,a[c]=y,function IT(s,o,a,c,h){const g=h.hostBindings;if(g){let y=s.hostBindingOpCodes;null===y&&(y=s.hostBindingOpCodes=[]);const w=~o.index;(function ev(s){let o=s.length;for(;o>0;){const a=s[--o];if("number"==typeof a&&a<0)return a}return 0})(y)!=w&&y.push(w),y.push(a,c,g)}}(s,o,c,hh(s,a,h.hostVars,Pt),h)}function ap(s,o,a){const c=pr(o,s),h=bl(a),g=s[10],y=up(s,fm(s,h,null,a.onPush?32:16,c,o,g,g.createRenderer(c,a),null,null,null));s[o.index]=y}function to(s,o,a,c,h,g){const y=pr(s,o);!function wm(s,o,a,c,h,g,y){if(null==g)s.removeAttribute(o,h,a);else{const w=null==y?Ce(g):y(g,c||"",h);s.setAttribute(o,h,w,a)}}(o[11],y,g,s.value,a,c,h)}function Hw(s,o,a,c,h,g){const y=g[o];if(null!==y){const w=c.setInput;for(let I=0;I<y.length;){const S=y[I++],R=y[I++],F=y[I++];null!==w?c.setInput(a,F,S,R):a[R]=F}}}function Za(s,o,a){let c=null,h=0;for(;h<a.length;){const g=a[h];if(0!==g)if(5!==g){if("number"==typeof g)break;if(s.hasOwnProperty(g)){null===c&&(c=[]);const y=s[g];for(let w=0;w<y.length;w+=2)if(y[w]===o){c.push(g,y[w+1],a[h+1]);break}}h+=2}else h+=2;else h+=4}return c}function $w(s,o,a,c){return new Array(s,!0,!1,o,null,0,c,a,null,null)}function bN(s,o){const a=jr(o,s);if(po(a)){const c=a[1];48&a[2]?qu(c,a,c.template,a[8]):a[5]>0&&zw(a)}}function zw(s){for(let c=ol(s);null!==c;c=Do(c))for(let h=10;h<c.length;h++){const g=c[h];if(po(g))if(512&g[2]){const y=g[1];qu(y,g,y.template,g[8])}else g[5]>0&&zw(g)}const a=s[1].components;if(null!==a)for(let c=0;c<a.length;c++){const h=jr(a[c],s);po(h)&&h[5]>0&&zw(h)}}function IN(s,o){const a=jr(o,s),c=a[1];(function ST(s,o){for(let a=o.length;a<s.blueprint.length;a++)o.push(s.blueprint[a])})(c,a),fh(c,a,a[8])}function up(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function rv(s){for(;s;){s[2]|=32;const o=Va(s);if(ud(s)&&!o)return s;s=o}return null}function cp(s,o,a,c=!0){const h=o[10];h.begin&&h.begin();try{qu(s,o,s.template,a)}catch(y){throw c&&sv(o,y),y}finally{h.end&&h.end()}}function lp(s,o,a){lf(0),o(s,a)}function iv(s){return s[7]||(s[7]=[])}function qw(s){return s.cleanup||(s.cleanup=[])}function sv(s,o){const a=s[9],c=a?a.get(Qf,null):null;c&&c.handleError(o)}function ov(s,o,a,c,h){for(let g=0;g<a.length;){const y=a[g++],w=a[g++],I=o[y],S=s.data[y];null!==S.setInput?S.setInput(I,h,c,w):I[w]=h}}function oa(s,o,a){const c=Ta(o,s);!function Gg(s,o,a){s.setValue(o,a)}(s[11],c,a)}function bm(s,o,a){let c=a?s.styles:null,h=a?s.classes:null,g=0;if(null!==o)for(let y=0;y<o.length;y++){const w=o[y];"number"==typeof w?g=w:1==g?h=me(h,w):2==g&&(c=me(c,w+": "+o[++y]+";"))}a?s.styles=c:s.stylesWithoutHost=c,a?s.classes=h:s.classesWithoutHost=h}function dp(s,o,a,c,h=!1){for(;null!==a;){const g=o[a.index];if(null!==g&&c.push(kn(g)),ni(g))for(let w=10;w<g.length;w++){const I=g[w],S=I[1].firstChild;null!==S&&dp(I[1],I,S,c)}const y=a.type;if(8&y)dp(s,o,a.child,c);else if(32&y){const w=jd(a,o);let I;for(;I=w();)c.push(I)}else if(16&y){const w=Zg(o,a);if(Array.isArray(w))c.push(...w);else{const I=Va(o[16]);dp(I[1],I,w,c,!0)}}a=h?a.projectionNext:a.next}return c}class Il{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return dp(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(ni(o)){const a=o[8],c=a?a.indexOf(this):-1;c>-1&&(Pf(o,c),ds(a,c))}this._attachedToViewContainer=!1}Ff(this._lView[1],this._lView)}onDestroy(o){op(this._lView[1],this._lView,null,o)}markForCheck(){rv(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){cp(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ge(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Uu(s,o){ja(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new ge(902,!1);this._appRef=o}}class NT extends Il{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;cp(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class Im extends tm{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=en(o);return new Dl(a,this.ngModule)}}function Ww(s){const o=[];for(let a in s)s.hasOwnProperty(a)&&o.push({propName:s[a],templateName:a});return o}class RT{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,c){c=Dt(c);const h=this.injector.get(o,A_,c);return h!==A_||a===A_?h:this.parentInjector.get(o,a,c)}}class Dl extends cw{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function cN(s){return s.map(oh).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Ww(this.componentDef.inputs)}get outputs(){return Ww(this.componentDef.outputs)}create(o,a,c,h){let g=(h=h||this.ngModule)instanceof ml?h:h?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const y=g?new RT(o,g):o,w=y.get(pw,null);if(null===w)throw new ge(407,!1);const I=y.get(gw,null),S=w.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",F=c?function sp(s,o,a){return s.selectRootElement(o,a===Qt.ShadowDom)}(S,c,this.componentDef.encapsulation):Of(S,R,function hp(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(R)),W=this.componentDef.onPush?288:272,ee=ph(0,null,null,1,0,null,null,null,null,null),ve=fm(null,ee,null,W,null,null,w,S,I,y,null);let Le,qe;df(ve);try{const Je=this.componentDef;let ht,Ne=null;Je.findHostDirectiveDefs?(ht=[],Ne=new Map,Je.findHostDirectiveDefs(Je,ht,Ne),ht.push(Je)):ht=[Je];const It=function Dm(s,o){const a=s[1];return s[22]=o,Wa(a,22,2,"#host",null)}(ve,F),wn=function kT(s,o,a,c,h,g,y,w){const I=h[1];!function Yw(s,o,a,c){for(const h of s)o.mergedAttrs=Li(o.mergedAttrs,h.hostAttrs);null!==o.mergedAttrs&&(bm(o,o.mergedAttrs,!0),null!==a&&Ki(c,a,o))}(c,s,o,y);const S=g.createRenderer(o,a),R=fm(h,bl(a),null,a.onPush?32:16,h[s.index],s,g,S,w||null,null,null);return I.firstCreatePass&&Em(I,s,c.length-1),up(h,R),h[s.index]=R}(It,F,Je,ht,ve,w,S);qe=Go(ee,22),F&&function av(s,o,a,c){if(c)bd(s,a,["ng-version",T_.full]);else{const{attrs:h,classes:g}=function Iw(s){const o=[],a=[];let c=1,h=2;for(;c<s.length;){let g=s[c];if("string"==typeof g)2===h?""!==g&&o.push(g,s[++c]):8===h&&a.push(g);else{if(!Mo(h))break;h=g}c++}return{attrs:o,classes:a}}(o.selectors[0]);h&&bd(s,a,h),g&&g.length>0&&Kd(s,a,g.join(" "))}}(S,Je,F,c),void 0!==a&&function FT(s,o,a){const c=s.projection=[];for(let h=0;h<o.length;h++){const g=a[h];c.push(null!=g?Array.from(g):null)}}(qe,this.ngContentSelectors,a),Le=function PT(s,o,a,c,h,g){const y=Gn(),w=h[1],I=pr(y,h);bT(w,h,y,a,null,c);for(let R=0;R<a.length;R++)yr(Jo(h,w,y.directiveStart+R,y),h);DT(w,h,y),I&&yr(I,h);const S=Jo(h,w,y.directiveStart+y.componentOffset,y);if(s[8]=h[8]=S,null!==g)for(const R of g)R(S,o);return Uw(w,y,s),S}(wn,Je,ht,Ne,ve,[LT]),fh(ee,ve,null)}finally{Jn()}return new Kw(this.componentType,Le,yl(qe,ve),ve,qe)}}class Kw extends LC{constructor(o,a,c,h,g){super(),this.location=c,this._rootLView=h,this._tNode=g,this.instance=a,this.hostView=this.changeDetectorRef=new NT(h),this.componentType=o}setInput(o,a){const c=this._tNode.inputs;let h;if(null!==c&&(h=c[o])){const g=this._rootLView;ov(g[1],g,h,o,a),J_(g,this._tNode.index)}}get injector(){return new ka(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function LT(){const s=Gn();Xn(De()[1],s)}function cv(s){let o=function uv(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),a=!0;const c=[s];for(;o;){let h;if(Tr(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new ge(903,!1);h=o.\u0275dir}if(h){if(a){c.push(h);const y=s;y.inputs=fp(s.inputs),y.declaredInputs=fp(s.declaredInputs),y.outputs=fp(s.outputs);const w=h.hostBindings;w&&Jw(s,w);const I=h.viewQuery,S=h.contentQueries;if(I&&VT(s,I),S&&Qw(s,S),ce(s.inputs,h.inputs),ce(s.declaredInputs,h.declaredInputs),ce(s.outputs,h.outputs),Tr(h)&&h.data.animation){const R=s.data;R.animation=(R.animation||[]).concat(h.data.animation)}}const g=h.features;if(g)for(let y=0;y<g.length;y++){const w=g[y];w&&w.ngInherit&&w(s),w===cv&&(a=!1)}}o=Object.getPrototypeOf(o)}!function TN(s){let o=0,a=null;for(let c=s.length-1;c>=0;c--){const h=s[c];h.hostVars=o+=h.hostVars,h.hostAttrs=Li(h.hostAttrs,a=Li(a,h.hostAttrs))}}(c)}function fp(s){return s===An?{}:s===bt?[]:s}function VT(s,o){const a=s.viewQuery;s.viewQuery=a?(c,h)=>{o(c,h),a(c,h)}:o}function Qw(s,o){const a=s.contentQueries;s.contentQueries=a?(c,h,g)=>{o(c,h,g),a(c,h,g)}:o}function Jw(s,o){const a=s.hostBindings;s.hostBindings=a?(c,h)=>{o(c,h),a(c,h)}:o}let Cm=null;function Wu(){if(!Cm){const s=kt.Symbol;if(s&&s.iterator)Cm=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const c=o[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Cm=c)}}}return Cm}function gh(s){return!!fv(s)&&(Array.isArray(s)||!(s instanceof Map)&&Wu()in s)}function fv(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function ji(s,o,a){return!Object.is(s[o],a)&&(s[o]=a,!0)}function Sm(s,o,a,c){const h=De();return ji(h,Zo(),o)&&(Jt(),to(rn(),h,s,o,a,c)),Sm}function gp(s,o,a,c){return ji(s,Zo(),a)?o+Ce(a)+c:Pt}function Tl(s,o,a,c,h,g){const w=function Zu(s,o,a,c){const h=ji(s,o,a);return ji(s,o+1,c)||h}(s,function Ls(){return tt.lFrame.bindingIndex}(),a,h);return as(2),w?o+Ce(a)+c+Ce(h)+g:Pt}function GT(s,o,a,c,h,g,y,w){const I=De(),S=Jt(),R=s+22,F=S.firstCreatePass?function $T(s,o,a,c,h,g,y,w,I){const S=o.consts,R=Wa(o,s,4,y||null,Gi(S,w));X_(o,a,R,Gi(S,I)),Xn(o,R);const F=R.tViews=ph(2,R,c,h,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,S);return null!==o.queries&&(o.queries.template(o,R),F.queries=o.queries.embeddedTView(R)),R}(R,S,I,o,a,c,h,g,y):S.data[R];Pi(F,!1);const W=I[11].createComment("");zd(S,I,W,F),yr(W,I),up(I,I[R]=$w(W,I,W,F)),jo(F)&&gm(S,I,F),null!=y&&Bw(I,F,w)}function Nm(s){return Fs(function sf(){return tt.lFrame.contextLView}(),22+s)}function ob(s,o,a){const c=De();return ji(c,Zo(),o)&&_s(Jt(),rn(),c,s,o,c[11],a,!1),ob}function ab(s,o,a,c,h){const y=h?"class":"style";ov(s,a,o.inputs[y],y,c)}function Rm(s,o,a,c){const h=De(),g=Jt(),y=22+s,w=h[11],I=h[y]=Of(w,o,function ff(){return tt.lFrame.currentNamespace}()),S=g.firstCreatePass?function qT(s,o,a,c,h,g,y){const w=o.consts,S=Wa(o,s,2,h,Gi(w,g));return X_(o,a,S,Gi(w,y)),null!==S.attrs&&bm(S,S.attrs,!1),null!==S.mergedAttrs&&bm(S,S.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,S),S}(y,g,h,0,o,a,c):g.data[y];return Pi(S,!0),Ki(w,I,S),32!=(32&S.flags)&&zd(g,h,I,S),0===function Mg(){return tt.lFrame.elementDepthCount}()&&yr(I,h),function md(){tt.lFrame.elementDepthCount++}(),jo(S)&&(gm(g,h,S),Uw(g,S,h)),null!==c&&Bw(h,S),Rm}function yv(){let s=Gn();_u()?qo():(s=s.parent,Pi(s,!1));const o=s;!function nf(){tt.lFrame.elementDepthCount--}();const a=Jt();return a.firstCreatePass&&(Xn(a,s),ss(s)&&a.queries.elementEnd(s)),null!=o.classesWithoutHost&&function $c(s){return 0!=(8&s.flags)}(o)&&ab(a,o,De(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function gf(s){return 0!=(16&s.flags)}(o)&&ab(a,o,De(),o.stylesWithoutHost,!1),yv}function ub(s,o,a,c){return Rm(s,o,a,c),yv(),ub}function _v(s,o,a){const c=De(),h=Jt(),g=s+22,y=h.firstCreatePass?function SN(s,o,a,c,h){const g=o.consts,y=Gi(g,c),w=Wa(o,s,8,"ng-container",y);return null!==y&&bm(w,y,!0),X_(o,a,w,Gi(g,h)),null!==o.queries&&o.queries.elementStart(o,w),w}(g,h,c,o,a):h.data[g];Pi(y,!0);const w=c[g]=c[11].createComment("");return zd(h,c,w,y),yr(w,c),jo(y)&&(gm(h,c,y),Uw(h,y,c)),null!=a&&Bw(c,y),_v}function vv(){let s=Gn();const o=Jt();return _u()?qo():(s=s.parent,Pi(s,!1)),o.firstCreatePass&&(Xn(o,s),ss(s)&&o.queries.elementEnd(s)),vv}function cb(s,o,a){return _v(s,o,a),vv(),cb}function WT(){return De()}function lb(s){return!!s&&"function"==typeof s.then}function Ee(s){return!!s&&"function"==typeof s.subscribe}const Ku=Ee;function yh(s,o,a,c){const h=De(),g=Jt(),y=Gn();return function Om(s,o,a,c,h,g,y){const w=jo(c),S=s.firstCreatePass&&qw(s),R=o[8],F=iv(o);let W=!0;if(3&c.type||y){const Le=pr(c,o),qe=y?y(Le):Le,Je=F.length,ht=y?It=>y(kn(It[c.index])):c.index;let Ne=null;if(!y&&w&&(Ne=function Yu(s,o,a,c){const h=s.cleanup;if(null!=h)for(let g=0;g<h.length-1;g+=2){const y=h[g];if(y===a&&h[g+1]===c){const w=o[7],I=h[g+2];return w.length>I?w[I]:null}"string"==typeof y&&(g+=2)}return null}(s,o,h,c.index)),null!==Ne)(Ne.__ngLastListenerFn__||Ne).__ngNextListenerFn__=g,Ne.__ngLastListenerFn__=g,W=!1;else{g=db(c,o,R,g,!1);const It=a.listen(qe,h,g);F.push(g,It),S&&S.push(h,ht,Je,Je+1)}}else g=db(c,o,R,g,!1);const ee=c.outputs;let ve;if(W&&null!==ee&&(ve=ee[h])){const Le=ve.length;if(Le)for(let qe=0;qe<Le;qe+=2){const wn=o[ve[qe]][ve[qe+1]].subscribe(g),mn=F.length;F.push(g,wn),S&&S.push(h,c.index,mn,-(mn+1))}}}(g,h,h[11],y,s,o,c),yh}function Ev(s,o,a,c){try{return!1!==a(c)}catch(h){return sv(s,h),!1}}function db(s,o,a,c,h){return function g(y){if(y===Function)return c;rv(s.componentOffset>-1?jr(s.index,o):o);let I=Ev(o,0,c,y),S=g.__ngNextListenerFn__;for(;S;)I=Ev(o,0,S,y)&&I,S=S.__ngNextListenerFn__;return h&&!1===I&&(y.preventDefault(),y.returnValue=!1),I}}function Wr(s=1){return function vd(s){return(tt.lFrame.contextLView=function jc(s,o){for(;s>0;)o=o[15],s--;return o}(s,tt.lFrame.contextLView))[8]}(s)}function bv(s,o,a){return Iv(s,"",o,"",a),bv}function Iv(s,o,a,c,h){const g=De(),y=gp(g,o,a,c);return y!==Pt&&_s(Jt(),rn(),g,s,y,g[11],h,!1),Iv}function Fm(s,o,a,c,h){const g=s[a+1],y=null===o;let w=c?Xs(g):sa(g),I=!1;for(;0!==w&&(!1===I||y);){const R=s[w+1];Tv(s[w],o)&&(I=!0,s[w+1]=c?um(R):ch(R)),w=c?Xs(R):sa(R)}I&&(s[a+1]=c?ch(g):um(g))}function Tv(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&at(s,o)>=0}const Nr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function yb(s){return s.substring(Nr.key,Nr.keyEnd)}function _b(s,o){const a=Nr.textEnd;return a===o?-1:(o=Nr.keyEnd=function JT(s,o,a){for(;o<a&&s.charCodeAt(o)>32;)o++;return o}(s,Nr.key=o,a),Sl(s,o,a))}function Sl(s,o,a){for(;o<a&&s.charCodeAt(o)<=32;)o++;return o}function Lm(s,o,a){return Es(s,o,a,!1),Lm}function bp(s,o){return Es(s,o,null,!0),bp}function wb(s){!function Oo(s,o,a,c){const h=Jt(),g=as(2);h.firstUpdatePass&&Mv(h,null,g,c);const y=De();if(a!==Pt&&ji(y,g,a)){const w=h.data[zn()];if(Pv(w,c)&&!Vm(h,g)){let I=c?w.classesWithoutHost:w.stylesWithoutHost;null!==I&&(a=me(I,a||"")),ab(h,w,y,a,c)}else!function Ov(s,o,a,c,h,g,y,w){h===Pt&&(h=bt);let I=0,S=0,R=0<h.length?h[0]:null,F=0<g.length?g[0]:null;for(;null!==R||null!==F;){const W=I<h.length?h[I+1]:void 0,ee=S<g.length?g[S+1]:void 0;let Le,ve=null;R===F?(I+=2,S+=2,W!==ee&&(ve=F,Le=ee)):null===F||null!==R&&R<F?(I+=2,ve=R):(S+=2,ve=F,Le=ee),null!==ve&&kv(s,o,a,c,ve,Le,y,w),R=I<h.length?h[I]:null,F=S<g.length?g[S]:null}}(h,w,y,y[11],y[g+1],y[g+1]=function Rv(s,o,a){if(null==a||""===a)return bt;const c=[],h=ms(a);if(Array.isArray(h))for(let g=0;g<h.length;g++)s(c,h[g],!0);else if("object"==typeof h)for(const g in h)h.hasOwnProperty(g)&&s(c,g,h[g]);else"string"==typeof h&&o(c,h);return c}(s,o,a),c,g)}}(Sr,ro,s,!0)}function ro(s,o){for(let a=function QT(s){return function wp(s){Nr.key=0,Nr.keyEnd=0,Nr.value=0,Nr.valueEnd=0,Nr.textEnd=s.length}(s),_b(s,Sl(s,0,Nr.textEnd))}(o);a>=0;a=_b(o,a))Sr(s,yb(o),!0)}function Es(s,o,a,c){const h=De(),g=Jt(),y=as(2);g.firstUpdatePass&&Mv(g,s,y,c),o!==Pt&&ji(h,y,o)&&kv(g,g.data[zn()],h,h[11],s,h[y+1]=function _h(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=pe(ms(s)))),s}(o,a),c,y)}function Vm(s,o){return o>=s.expandoStartIndex}function Mv(s,o,a,c){const h=s.data;if(null===h[a+1]){const g=h[zn()],y=Vm(s,a);Pv(g,c)&&null===o&&!y&&(o=!1),o=function bb(s,o,a,c){const h=cf(s);let g=c?o.residualClasses:o.residualStyles;if(null===h)0===(c?o.classBindings:o.styleBindings)&&(a=Qu(a=Nv(null,s,o,a,c),o.attrs,c),g=null);else{const y=o.directiveStylingLast;if(-1===y||s[y]!==h)if(a=Nv(h,s,o,a,c),null===g){let I=function xv(s,o,a){const c=a?o.classBindings:o.styleBindings;if(0!==sa(c))return s[Xs(c)]}(s,o,c);void 0!==I&&Array.isArray(I)&&(I=Nv(null,s,o,I[1],c),I=Qu(I,o.attrs,c),function tA(s,o,a,c){s[Xs(a?o.classBindings:o.styleBindings)]=c}(s,o,c,I))}else g=function nA(s,o,a){let c;const h=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<h;g++)c=Qu(c,s[g].hostAttrs,a);return Qu(c,o.attrs,a)}(s,o,c)}return void 0!==g&&(c?o.residualClasses=g:o.residualStyles=g),a}(h,g,o,c),function Cv(s,o,a,c,h,g){let y=g?o.classBindings:o.styleBindings,w=Xs(y),I=sa(y);s[c]=a;let R,S=!1;if(Array.isArray(a)){const F=a;R=F[1],(null===R||at(F,R)>0)&&(S=!0)}else R=a;if(h)if(0!==I){const W=Xs(s[w+1]);s[c+1]=Xf(W,w),0!==W&&(s[W+1]=am(s[W+1],c)),s[w+1]=function Rw(s,o){return 131071&s|o<<17}(s[w+1],c)}else s[c+1]=Xf(w,0),0!==w&&(s[w+1]=am(s[w+1],c)),w=c;else s[c+1]=Xf(I,0),0===w?w=c:s[I+1]=am(s[I+1],c),I=c;S&&(s[c+1]=ch(s[c+1])),Fm(s,R,c,!0),Fm(s,R,c,!1),function Pm(s,o,a,c,h){const g=h?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof o&&at(g,o)>=0&&(a[c+1]=um(a[c+1]))}(o,R,s,c,g),y=Xf(w,I),g?o.classBindings=y:o.styleBindings=y}(h,g,o,a,y,c)}}function Nv(s,o,a,c,h){let g=null;const y=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<y&&(g=o[w],c=Qu(c,g.hostAttrs,h),g!==s);)w++;return null!==s&&(a.directiveStylingLast=w),c}function Qu(s,o,a){const c=a?1:2;let h=-1;if(null!==o)for(let g=0;g<o.length;g++){const y=o[g];"number"==typeof y?h=y:h===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Sr(s,y,!!a||o[++g]))}return void 0===s?null:s}function kv(s,o,a,c,h,g,y,w){if(!(3&o.type))return;const I=s.data,S=I[w+1];Dp(function j_(s){return 1==(1&s)}(S)?Ib(I,o,a,h,sa(S),y):void 0)||(Dp(g)||function B_(s){return 2==(2&s)}(S)&&(g=Ib(I,null,a,h,w,y)),function Bf(s,o,a,c,h){if(o)h?s.addClass(a,c):s.removeClass(a,c);else{let g=-1===c.indexOf("-")?void 0:Zi.DashCase;null==h?s.removeStyle(a,c,g):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),g|=Zi.Important),s.setStyle(a,c,h,g))}}(c,y,Ta(zn(),a),h,g))}function Ib(s,o,a,c,h,g){const y=null===o;let w;for(;h>0;){const I=s[h],S=Array.isArray(I),R=S?I[1]:I,F=null===R;let W=a[h+1];W===Pt&&(W=F?bt:void 0);let ee=F?Ks(W,c):R===c?W:void 0;if(S&&!Dp(ee)&&(ee=Ks(I,c)),Dp(ee)&&(w=ee,y))return w;const ve=s[h+1];h=y?Xs(ve):sa(ve)}if(null!==o){let I=g?o.residualClasses:o.residualStyles;null!=I&&(w=Ks(I,c))}return w}function Dp(s){return void 0!==s}function Pv(s,o){return 0!=(s.flags&(o?8:16))}function Db(s,o=""){const a=De(),c=Jt(),h=s+22,g=c.firstCreatePass?Wa(c,h,1,o,null):c.data[h],y=a[h]=function Rf(s,o){return s.createText(o)}(a[11],o);zd(c,a,y,g),Pi(g,!1)}function Fv(s){return Bm("",s,""),Fv}function Bm(s,o,a){const c=De(),h=gp(c,s,o,a);return h!==Pt&&oa(c,zn(),h),Bm}function Lv(s,o,a,c,h){const g=De(),y=Tl(g,s,o,a,c,h);return y!==Pt&&oa(g,zn(),y),Lv}function Hv(s,o,a){const c=De();if(ji(c,Zo(),o)){const g=Jt(),y=rn();_s(g,y,c,s,o,function xT(s,o,a){return(null===s||Tr(s))&&(a=function Ca(s){for(;Array.isArray(s);){if("object"==typeof s[1])return s;s=s[0]}return null}(a[o.index])),a[11]}(cf(g.data),y,c),a,!0)}return Hv}const vh=void 0;var dA=["en",[["a","p"],["AM","PM"],vh],[["AM","PM"],vh,vh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],vh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],vh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",vh,"{1} 'at' {0}",vh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function ON(s){const a=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let Tp={};function Bb(s){const o=function jb(s){return s.toLowerCase().replace(/_/g,"-")}(s);let a=$v(o);if(a)return a;const c=o.split("-")[0];if(a=$v(c),a)return a;if("en"===c)return dA;throw new ge(701,!1)}function hA(s){return Bb(s)[At.PluralCase]}function $v(s){return s in Tp||(Tp[s]=kt.ng&&kt.ng.common&&kt.ng.common.locales&&kt.ng.common.locales[s]),Tp[s]}var At=(()=>((At=At||{})[At.LocaleId=0]="LocaleId",At[At.DayPeriodsFormat=1]="DayPeriodsFormat",At[At.DayPeriodsStandalone=2]="DayPeriodsStandalone",At[At.DaysFormat=3]="DaysFormat",At[At.DaysStandalone=4]="DaysStandalone",At[At.MonthsFormat=5]="MonthsFormat",At[At.MonthsStandalone=6]="MonthsStandalone",At[At.Eras=7]="Eras",At[At.FirstDayOfWeek=8]="FirstDayOfWeek",At[At.WeekendRange=9]="WeekendRange",At[At.DateFormat=10]="DateFormat",At[At.TimeFormat=11]="TimeFormat",At[At.DateTimeFormat=12]="DateTimeFormat",At[At.NumberSymbols=13]="NumberSymbols",At[At.NumberFormats=14]="NumberFormats",At[At.CurrencyCode=15]="CurrencyCode",At[At.CurrencySymbol=16]="CurrencySymbol",At[At.CurrencyName=17]="CurrencyName",At[At.Currencies=18]="Currencies",At[At.Directionality=19]="Directionality",At[At.PluralCase=20]="PluralCase",At[At.ExtraData=21]="ExtraData",At))();const Ml="en-US";let Gm=Ml;function Jm(s,o,a,c,h){if(s=Q(s),Array.isArray(s))for(let g=0;g<s.length;g++)Jm(s[g],o,a,c,h);else{const g=Jt(),y=De();let w=$u(s)?s:Q(s.provide),I=D_(s);const S=Gn(),R=1048575&S.providerIndexes,F=S.directiveStart,W=S.providerIndexes>>20;if($u(s)||!s.multi){const ee=new cs(I,h,El),ve=Xm(w,o,h?R:R+W,F);-1===ve?(Hs(qc(S,y),g,w),l0(g,s,o.length),o.push(w),S.directiveStart++,S.directiveEnd++,h&&(S.providerIndexes+=1048576),a.push(ee),y.push(ee)):(a[ve]=ee,y[ve]=ee)}else{const ee=Xm(w,o,R+W,F),ve=Xm(w,o,R,R+W),Le=ee>=0&&a[ee],qe=ve>=0&&a[ve];if(h&&!qe||!h&&!Le){Hs(qc(S,y),g,w);const Je=function dI(s,o,a,c,h){const g=new cs(s,a,El);return g.multi=[],g.index=o,g.componentProviders=0,lI(g,h,c&&!a),g}(h?AA:d0,a.length,h,c,I);!h&&qe&&(a[ve].providerFactory=Je),l0(g,s,o.length,0),o.push(w),S.directiveStart++,S.directiveEnd++,h&&(S.providerIndexes+=1048576),a.push(Je),y.push(Je)}else l0(g,s,ee>-1?ee:ve,lI(a[h?ve:ee],I,!h&&c));!h&&c&&qe&&a[ve].componentProviders++}}}function l0(s,o,a,c){const h=$u(o),g=function ow(s){return!!s.useClass}(o);if(h||g){const I=(g?Q(o.useClass):o).prototype.ngOnDestroy;if(I){const S=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const R=S.indexOf(a);-1===R?S.push(a,[c,I]):S[R+1].push(c,I)}else S.push(a,I)}}}function lI(s,o,a){return a&&s.componentProviders++,s.multi.push(o)-1}function Xm(s,o,a,c){for(let h=a;h<c;h++)if(o[h]===s)return h;return-1}function d0(s,o,a,c){return kp(this.multi,[])}function AA(s,o,a,c){const h=this.multi;let g;if(this.providerFactory){const y=this.providerFactory.componentProviders,w=Jo(a,a[1],this.providerFactory.index,c);g=w.slice(0,y),kp(h,g);for(let I=y;I<w.length;I++)g.push(w[I])}else g=[],kp(h,g);return g}function kp(s,o){for(let a=0;a<s.length;a++)o.push((0,s[a])());return o}function hI(s,o=[]){return a=>{a.providersResolver=(c,h)=>function TA(s,o,a){const c=Jt();if(c.firstCreatePass){const h=Tr(s);Jm(a,c.data,c.blueprint,h,!0),Jm(o,c.data,c.blueprint,h,!1)}}(c,h?h(s):s,o)}}class Xa{}class ey{}function h0(s,o){return new fI(s,o??null)}class fI extends Xa{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Im(this);const c=hr(o);this._bootstrapComponents=za(c.bootstrap),this._r3Injector=tT(o,a,[{provide:Xa,useValue:this},{provide:tm,useValue:this.componentFactoryResolver}],pe(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class xl extends ey{constructor(o){super(),this.moduleType=o}create(o){return new fI(this.moduleType,o)}}class pI extends Xa{constructor(o,a,c){super(),this.componentFactoryResolver=new Im(this),this.instance=null;const h=new uw([...o,{provide:Xa,useValue:this},{provide:tm,useValue:this.componentFactoryResolver}],a||Kf(),c,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function ty(s,o,a=null){return new pI(s,o,a).injector}let gI=(()=>{class s{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=em(0,a.type),h=c.length>0?ty([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,h)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=Et({token:s,providedIn:"environment",factory:()=>new s(Ge(ml))}),s})();function Pp(s){s.getStandaloneInjector=o=>o.get(gI).getOrCreateStandaloneInjector(s)}function iy(s,o,a,c,h,g){const y=o+a;return ji(s,y,h)?function Ka(s,o,a){return s[o]=a}(s,y+1,g?c.call(g,h):c(h)):function nc(s,o){const a=s[o];return a===Pt?void 0:a}(s,y+1)}function Ch(s,o){const a=Jt();let c;const h=s+22;a.firstCreatePass?(c=function TI(s,o){if(o)for(let a=o.length-1;a>=0;a--){const c=o[a];if(s===c.name)return c}}(o,a.pipeRegistry),a.data[h]=c,c.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(h,c.onDestroy)):c=a.data[h];const g=c.factory||(c.factory=gi(c.type)),y=Cn(El);try{const w=js(!1),I=g();return js(w),function zT(s,o,a,c){a>=s.data.length&&(s.data[a]=null,s.blueprint[a]=null),o[a]=c}(a,De(),h,I),I}finally{Cn(y)}}function Th(s,o,a){const c=s+22,h=De(),g=Fs(h,c);return function Ah(s,o){return s[1].data[o].pure}(h,c)?iy(h,function ir(){const s=tt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}(),o,g.transform,a,g):g.transform(a)}function C0(s){return o=>{setTimeout(s,void 0,o)}}const Di=class AI extends d.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,c){let h=o,g=a||(()=>null),y=c;if(o&&"object"==typeof o){const I=o;h=I.next?.bind(I),g=I.error?.bind(I),y=I.complete?.bind(I)}this.__isAsync&&(g=C0(g),h&&(h=C0(h)),y&&(y=C0(y)));const w=super.subscribe({next:h,error:g,complete:y});return o instanceof te.w0&&o.add(w),w}};function eu(){return this._results[Wu()]()}class Sh{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Wu(),c=Sh.prototype;c[a]||(c[a]=eu)}get changes(){return this._changes||(this._changes=new Di)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const c=this;c.dirty=!1;const h=Qe(o);(this._changesDetected=!function Fa(s,o,a){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let h=s[c],g=o[c];if(a&&(h=a(h),g=a(g)),g!==h)return!1}return!0}(c._results,h,a))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let rc=(()=>{class s{}return s.__NG_ELEMENT_ID__=sy,s})();const SI=rc,jn=class extends SI{constructor(o,a,c){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(o,a){const c=this._declarationTContainer.tViews,h=fm(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,a||null);h[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(h[19]=y.createEmbeddedView(c)),fh(c,h,o),new Il(h)}};function sy(){return ic(Gn(),De())}function ic(s,o){return 4&s.type?new jn(o,s,yl(s,o)):null}let sc=(()=>{class s{}return s.__NG_ELEMENT_ID__=kA,s})();function kA(){return RI(Gn(),De())}const MI=sc,xI=class extends MI{constructor(o,a,c){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=c}get element(){return yl(this._hostTNode,this._hostLView)}get injector(){return new ka(this._hostTNode,this._hostLView)}get parentInjector(){const o=Oa(this._hostTNode,this._hostLView);if(Ra(o)){const a=Bs(o,this._hostLView),c=Us(o);return new ka(a[1].data[c+8],a)}return new ka(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=NI(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,c){let h,g;"number"==typeof c?h=c:null!=c&&(h=c.index,g=c.injector);const y=o.createEmbeddedView(a||{},g);return this.insert(y,h),y}createComponent(o,a,c,h,g){const y=o&&!function Xc(s){return"function"==typeof s}(o);let w;if(y)w=a;else{const F=a||{};w=F.index,c=F.injector,h=F.projectableNodes,g=F.environmentInjector||F.ngModuleRef}const I=y?o:new Dl(en(o)),S=c||this.parentInjector;if(!g&&null==I.ngModule){const W=(y?S:this.parentInjector).get(ml,null);W&&(g=W)}const R=I.create(S,h,void 0,g);return this.insert(R.hostView,w),R}insert(o,a){const c=o._lView,h=c[1];if(function mu(s){return ni(s[3])}(c)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const F=c[3],W=new xI(F,F[6],F[3]);W.detach(W.indexOf(o))}}const g=this._adjustIndex(a),y=this._lContainer;!function zg(s,o,a,c){const h=10+c,g=a.length;c>0&&(a[h-1][4]=o),c<g-10?(o[4]=a[h],sr(a,10+c,o)):(a.push(o),o[4]=null),o[3]=a;const y=o[17];null!==y&&a!==y&&function qg(s,o){const a=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===a?s[9]=[o]:a.push(o)}(y,o);const w=o[19];null!==w&&w.insertView(s),o[2]|=64}(h,c,y,g);const w=Wd(g,y),I=c[11],S=ra(I,y[7]);return null!==S&&function Co(s,o,a,c,h,g){c[0]=h,c[6]=o,ja(s,c,a,1,h,g)}(h,y[6],I,c,S,w),o.attachToViewContainerRef(),sr(T0(y),g,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=NI(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),c=Pf(this._lContainer,a);c&&(ds(T0(this._lContainer),a),Ff(c[1],c))}detach(o){const a=this._adjustIndex(o,-1),c=Pf(this._lContainer,a);return c&&null!=ds(T0(this._lContainer),a)?new Il(c):null}_adjustIndex(o,a=0){return o??this.length+a}};function NI(s){return s[8]}function T0(s){return s[8]||(s[8]=[])}function RI(s,o){let a;const c=o[s.index];if(ni(c))a=c;else{let h;if(8&s.type)h=kn(c);else{const g=o[11];h=g.createComment("");const y=pr(s,o);To(g,ra(g,y),h,function Ao(s,o){return s.nextSibling(o)}(g,y),!1)}o[s.index]=a=$w(c,o,h,s),up(o,a)}return new xI(a,s,o)}class oy{constructor(o){this.queryList=o,this.matches=null}clone(){return new oy(this.queryList)}setDirty(){this.queryList.setDirty()}}class ay{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const c=null!==o.contentQueries?o.contentQueries[0]:a.length,h=[];for(let g=0;g<c;g++){const y=a.getByIndex(g);h.push(this.queries[y.indexInDeclarationView].clone())}return new ay(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==$p(o,a).matches&&this.queries[a].setDirty()}}class kl{constructor(o,a,c=null){this.predicate=o,this.flags=a,this.read=c}}class A0{constructor(o=[]){this.queries=o}elementStart(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let c=0;c<this.length;c++){const h=null!==a?a.length:0,g=this.getByIndex(c).embeddedTView(o,h);g&&(g.indexInDeclarationView=c,null!==a?a.push(g):a=[g])}return null!==a?new A0(a):null}template(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class S0{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new S0(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const g=c[h];this.matchTNodeWithReadOption(o,a,OI(a,g)),this.matchTNodeWithReadOption(o,a,Su(a,o,g,!1,!1))}else c===rc?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Su(a,o,c,!1,!1))}matchTNodeWithReadOption(o,a,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===Yf||h===sc||h===rc&&4&a.type)this.addMatch(a.index,-2);else{const g=Su(a,o,h,!1,!1);null!==g&&this.addMatch(a.index,g)}else this.addMatch(a.index,c)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function OI(s,o){const a=s.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===o)return a[c+1];return null}function kI(s,o,a,c){return-1===a?function FA(s,o){return 11&s.type?yl(s,o):4&s.type?ic(s,o):null}(o,s):-2===a?function PI(s,o,a){return a===Yf?yl(o,s):a===rc?ic(o,s):a===sc?RI(o,s):void 0}(s,o,c):Jo(s,s[1],a,o)}function uy(s,o,a,c){const h=o[19].queries[c];if(null===h.matches){const g=s.data,y=a.matches,w=[];for(let I=0;I<y.length;I+=2){const S=y[I];w.push(S<0?null:kI(o,g[S],y[I+1],a.metadata.read))}h.matches=w}return h.matches}function Bp(s,o,a,c){const h=s.queries.getByIndex(a),g=h.matches;if(null!==g){const y=uy(s,o,h,a);for(let w=0;w<g.length;w+=2){const I=g[w];if(I>0)c.push(y[w/2]);else{const S=g[w+1],R=o[-I];for(let F=10;F<R.length;F++){const W=R[F];W[17]===W[3]&&Bp(W[1],W,S,c)}if(null!==R[9]){const F=R[9];for(let W=0;W<F.length;W++){const ee=F[W];Bp(ee[1],ee,S,c)}}}}}return c}function M0(s){const o=De(),a=Jt(),c=vu();lf(c+1);const h=$p(a,c);if(s.dirty&&function Oc(s){return 4==(4&s[2])}(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const g=h.crossesNgTemplate?Bp(a,o,c,[]):uy(a,o,h,c);s.reset(g,UC),s.notifyOnChanges()}return!0}return!1}function x0(s,o,a){const c=Jt();c.firstCreatePass&&(jp(c,new kl(s,o,a),-1),2==(2&o)&&(c.staticViewQueries=!0)),LI(c,De(),o)}function cy(s,o,a,c){const h=Jt();if(h.firstCreatePass){const g=Gn();jp(h,new kl(o,a,c),g.index),function Hp(s,o){const a=s.contentQueries||(s.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(s.queries.length-1,o)}(h,s),2==(2&a)&&(h.staticContentQueries=!0)}LI(h,De(),a)}function FI(){return function LA(s,o){return s[19].queries[o].queryList}(De(),vu())}function LI(s,o,a){const c=new Sh(4==(4&a));op(s,o,c,c.destroy),null===o[19]&&(o[19]=new ay),o[19].queries.push(new oy(c))}function jp(s,o,a){null===s.queries&&(s.queries=new A0),s.queries.track(new S0(o,a))}function $p(s,o){return s.queries.getByIndex(o)}function ly(s,o){return ic(s,o)}function ke(...s){}const uc=new _n("Application Initializer");let xh=(()=>{class s{constructor(a){this.appInits=a,this.resolve=ke,this.reject=ke,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const g=this.appInits[h]();if(lb(g))a.push(g);else if(Ku(g)){const y=new Promise((w,I)=>{g.subscribe({complete:w,error:I})});a.push(y)}}Promise.all(a).then(()=>{c()}).catch(h=>{this.reject(h)}),0===a.length&&c(),this.initialized=!0}}return s.\u0275fac=function(a){return new(a||s)(Ge(uc,8))},s.\u0275prov=Et({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const st=new _n("AppId",{providedIn:"root",factory:function xt(){return`${Ze()}${Ze()}${Ze()}`}});function Ze(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const he=new _n("Platform Initializer"),Oe=new _n("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Er=new _n("appBootstrapListener"),qA=new _n("AnimationModuleType");let WA=(()=>{class s{log(a){console.log(a)}warn(a){console.warn(a)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=Et({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const vy=new _n("LocaleId",{providedIn:"root",factory:()=>et(vy,_t.Optional|_t.SkipSelf)||function ZA(){return typeof $localize<"u"&&$localize.locale||Ml}()}),KA=new _n("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class QA{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let eD=(()=>{class s{compileModuleSync(a){return new xl(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),g=za(hr(a).declarations).reduce((y,w)=>{const I=en(w);return I&&y.push(new Dl(I)),y},[]);return new QA(c,g)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=Et({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const JA=(()=>Promise.resolve(0))();function Hn(s){typeof Zone>"u"?JA.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Qi{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Di(!1),this.onMicrotaskEmpty=new Di(!1),this.onStable=new Di(!1),this.onError=new Di(!1),typeof Zone>"u")throw new ge(908,!1);Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&a,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function Ke(){let s=kt.requestAnimationFrame,o=kt.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const a=s[Zone.__symbol__("OriginalDelegate")];a&&(s=a);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function XA(s){const o=()=>{!function wy(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(kt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Ul(s),s.isCheckStableRunning=!0,j0(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Ul(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,h,g,y,w)=>{try{return H0(s),a.invokeTask(h,g,y,w)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),$0(s)}},onInvoke:(a,c,h,g,y,w,I)=>{try{return H0(s),a.invoke(h,g,y,w,I)}finally{s.shouldCoalesceRunChangeDetection&&o(),$0(s)}},onHasTask:(a,c,h,g)=>{a.hasTask(h,g),c===h&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,Ul(s),j0(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(a,c,h,g)=>(a.handleError(h,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Qi.isInAngularZone())throw new ge(909,!1)}static assertNotInAngularZone(){if(Qi.isInAngularZone())throw new ge(909,!1)}run(o,a,c){return this._inner.run(o,a,c)}runTask(o,a,c,h){const g=this._inner,y=g.scheduleEventTask("NgZoneEvent: "+h,o,Vl,ke,ke);try{return g.runTask(y,a,c)}finally{g.cancelTask(y)}}runGuarded(o,a,c){return this._inner.runGuarded(o,a,c)}runOutsideAngular(o){return this._outer.run(o)}}const Vl={};function j0(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Ul(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function H0(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function $0(s){s._nesting--,j0(s)}class bs{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Di,this.onMicrotaskEmpty=new Di,this.onStable=new Di,this.onError=new Di}run(o,a,c){return o.apply(a,c)}runGuarded(o,a,c){return o.apply(a,c)}runOutsideAngular(o){return o()}runTask(o,a,c,h){return o.apply(a,c)}}const by=new _n(""),G0=new _n("");let ae,nD=(()=>{class s{constructor(a,c,h){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,ae||(function z0(s){ae=s}(h),h.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Qi.assertNotInAngularZone(),Hn(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Hn(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,h){let g=-1;c&&c>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==g),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:g,updateCb:h})}whenStable(a,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,h){return[]}}return s.\u0275fac=function(a){return new(a||s)(Ge(Qi),Ge(nu),Ge(G0))},s.\u0275prov=Et({token:s,factory:s.\u0275fac}),s})(),nu=(()=>{class s{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return ae?.findTestabilityInTree(this,a,c)??null}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=Et({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),ko=null;const io=new _n("AllowMultipleToken"),q0=new _n("PlatformDestroyListeners");class rD{constructor(o,a){this.name=o,this.token=a}}function Z0(s,o,a=[]){const c=`Platform: ${o}`,h=new _n(c);return(g=[])=>{let y=Nh();if(!y||y.injector.get(io,!1)){const w=[...a,...g,{provide:h,useValue:!0}];s?s(w):function W0(s){if(ko&&!ko.get(io,!1))throw new ge(400,!1);ko=s;const o=s.get(Kr);(function iD(s){const o=s.get(he,null);o&&o.forEach(a=>a())})(s)}(function K0(s=[],o){return xo.create({name:o,providers:[{provide:rh,useValue:"platform"},{provide:q0,useValue:new Set([()=>ko=null])},...s]})}(w,c))}return function jl(s){const o=Nh();if(!o)throw new ge(401,!1);return o}()}}function Nh(){return ko?.get(Kr)??null}let Kr=(()=>{class s{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const h=function Y0(s,o){let a;return a="noop"===s?new bs:("zone.js"===s?void 0:s)||new Qi(o),a}(c?.ngZone,function En(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(c)),g=[{provide:Qi,useValue:h}];return h.run(()=>{const y=xo.create({providers:g,parent:this.injector,name:a.moduleType.name}),w=a.create(y),I=w.injector.get(Qf,null);if(!I)throw new ge(402,!1);return h.runOutsideAngular(()=>{const S=h.onError.subscribe({next:R=>{I.handleError(R)}});w.onDestroy(()=>{tr(this._modules,w),S.unsubscribe()})}),function Hl(s,o,a){try{const c=a();return lb(c)?c.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(I,h,()=>{const S=w.injector.get(xh);return S.runInitializers(),S.donePromise.then(()=>(function zb(s){Ht(s,"Expected localeId to be defined"),"string"==typeof s&&(Gm=s.toLowerCase().replace(/_/g,"-"))}(w.injector.get(vy,Ml)||Ml),this._moduleDoBootstrap(w),w))})})}bootstrapModule(a,c=[]){const h=Ji({},c);return function cc(s,o,a){const c=new xl(a);return Promise.resolve(c)}(0,0,a).then(g=>this.bootstrapModuleFactory(g,h))}_moduleDoBootstrap(a){const c=a.injector.get(Iy);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!a.instance.ngDoBootstrap)throw new ge(403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ge(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(q0,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(a){return new(a||s)(Ge(xo))},s.\u0275prov=Et({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function Ji(s,o){return Array.isArray(o)?o.reduce(Ji,s):{...s,...o}}let Iy=(()=>{class s{constructor(a,c,h){this._zone=a,this._injector=c,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new k.y(w=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{w.next(this._stable),w.complete()})}),y=new k.y(w=>{let I;this._zone.runOutsideAngular(()=>{I=this._zone.onStable.subscribe(()=>{Qi.assertNotInAngularZone(),Hn(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,w.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{Qi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{w.next(!1)}))});return()=>{I.unsubscribe(),S.unsubscribe()}});this.isStable=(0,le.T)(g,y.pipe((0,ue.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const h=a instanceof cw;if(!this._injector.get(xh).done)throw!h&&$n(a),new ge(405,false);let y;y=h?a:this._injector.get(tm).resolveComponentFactory(a),this.componentTypes.push(y.componentType);const w=function Bl(s){return s.isBoundToModule}(y)?void 0:this._injector.get(Xa),S=y.create(xo.NULL,[],c||y.selector,w),R=S.location.nativeElement,F=S.injector.get(by,null);return F?.registerApplication(R),S.onDestroy(()=>{this.detachView(S.hostView),tr(this.components,S),F?.unregisterApplication(R)}),this._loadComponent(S),S}tick(){if(this._runningTick)throw new ge(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;tr(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(Er,[]).concat(this._bootstrapListeners).forEach(h=>h(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>tr(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new ge(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(a){return new(a||s)(Ge(Qi),Ge(ml),Ge(Qf))},s.\u0275prov=Et({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function tr(s,o){const a=s.indexOf(o);a>-1&&s.splice(a,1)}function nr(){return!1}let nS=(()=>{class s{}return s.__NG_ELEMENT_ID__=dc,s})();function dc(s){return function Jp(s,o,a){if(Tc(s)&&!a){const c=jr(s.index,o);return new Il(c,c)}return 47&s.type?new Il(o[16],o):null}(Gn(),De(),16==(16&s))}class J0{constructor(){}supports(o){return gh(o)}create(o){return new cD(o)}}const li=(s,o)=>o;class cD{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||li}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,c=this._removalsHead,h=0,g=null;for(;a||c;){const y=!c||a&&a.currentIndex<mc(c,h,g)?a:c,w=mc(y,h,g),I=y.currentIndex;if(y===c)h--,c=c._nextRemoved;else if(a=a._next,null==y.previousIndex)h++;else{g||(g=[]);const S=w-h,R=I-h;if(S!=R){for(let W=0;W<S;W++){const ee=W<g.length?g[W]:g[W]=0,ve=ee+W;R<=ve&&ve<S&&(g[W]=ee+1)}g[y.previousIndex]=R-S}}w!==I&&o(y,w,I)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!gh(o))throw new ge(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,g,y,a=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let w=0;w<this.length;w++)g=o[w],y=this._trackByFn(w,g),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,g,y,w)),Object.is(a.item,g)||this._addIdentityChange(a,g)):(a=this._mismatch(a,g,y,w),c=!0),a=a._next}else h=0,function tb(s,o){if(Array.isArray(s))for(let a=0;a<s.length;a++)o(s[a]);else{const a=s[Wu()]();let c;for(;!(c=a.next()).done;)o(c.value)}}(o,w=>{y=this._trackByFn(h,w),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,w,y,h)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,y,h),c=!0),a=a._next,h++}),this.length=h;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,c,h){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,g,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,g,h)):o=this._addAfter(new Nn(a,c),g,h),o}_verifyReinsertion(o,a,c,h){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==g?o=this._reinsertAfter(g,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,g=o._nextRemoved;return null===h?this._removalsHead=g:h._nextRemoved=g,null===g?this._removalsTail=h:g._prevRemoved=h,this._insertAfter(o,a,c),this._addToMoves(o,c),o}_moveAfter(o,a,c){return this._unlink(o),this._insertAfter(o,a,c),this._addToMoves(o,c),o}_addAfter(o,a,c){return this._insertAfter(o,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,c){const h=null===a?this._itHead:a._next;return o._next=h,o._prev=a,null===h?this._itTail=o:h._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new X0),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,c=o._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new X0),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class Nn{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class oS{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const a=o._prevDup,c=o._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class X0{constructor(){this.map=new Map}put(o){const a=o.trackById;let c=this.map.get(a);c||(c=new oS,this.map.set(a,c)),c.add(o)}get(o,a){const h=this.map.get(o);return h?h.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function mc(s,o,a){const c=s.previousIndex;if(null===c)return c;let h=0;return a&&c<a.length&&(h=a[c]),c+o+h}class lD{constructor(){}supports(o){return o instanceof Map||fv(o)}create(){return new eg}}class eg{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||fv(o)))throw new ge(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,h)=>{if(a&&a.key===h)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const g=this._getOrCreateRecordForKey(h,c);a=this._insertBeforeOrAppend(a,g)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const c=o._prev;return a._next=o,a._prev=c,o._prev=a,c&&(c._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,a);const g=h._prev,y=h._next;return g&&(g._next=y),y&&(y._prev=g),h._next=null,h._prev=null,h}const c=new Ty(o);return this._records.set(o,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(c=>a(o[c],c))}}class Ty{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function tg(){return new Ay([new J0])}let Ay=(()=>{class s{constructor(a){this.factories=a}static create(a,c){if(null!=c){const h=c.factories.slice();a=a.concat(h)}return new s(a)}static extend(a){return{provide:s,useFactory:c=>s.create(a,c||tg()),deps:[[s,new Dn,new St]]}}find(a){const c=this.factories.find(h=>h.supports(a));if(null!=c)return c;throw new ge(901,!1)}}return s.\u0275prov=Et({token:s,providedIn:"root",factory:tg}),s})();function Yr(){return new eE([new lD])}let eE=(()=>{class s{constructor(a){this.factories=a}static create(a,c){if(c){const h=c.factories.slice();a=a.concat(h)}return new s(a)}static extend(a){return{provide:s,useFactory:c=>s.create(a,c||Yr()),deps:[[s,new Dn,new St]]}}find(a){const c=this.factories.find(h=>h.supports(a));if(c)return c;throw new ge(901,!1)}}return s.\u0275prov=Et({token:s,providedIn:"root",factory:Yr}),s})();const dS=Z0(null,"core",[]);let hS=(()=>{class s{constructor(a){}}return s.\u0275fac=function(a){return new(a||s)(Ge(Iy))},s.\u0275mod=Sn({type:s}),s.\u0275inj=di({}),s})();function fS(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(lt,Ie,P)=>{P.d(Ie,{Z:()=>Ye});var d=P(2090),te=P(4859),k=P(9681),le=P(1877);class ue{constructor(ge,Me){this._delegate=ge,this.firebase=Me,(0,k._addComponent)(ge,new te.wA("app-compat",()=>this,"PUBLIC")),this.container=ge.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ge){this._delegate.automaticDataCollectionEnabled=ge}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ge=>{this._delegate.checkDestroyed(),ge()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(ge,Me=k._DEFAULT_ENTRY_NAME){var Ce;this._delegate.checkDestroyed();const Ve=this._delegate.container.getProvider(ge);return!Ve.isInitialized()&&"EXPLICIT"===(null===(Ce=Ve.getComponent())||void 0===Ce?void 0:Ce.instantiationMode)&&Ve.initialize(),Ve.getImmediate({identifier:Me})}_removeServiceInstance(ge,Me=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ge).clearInstance(Me)}_addComponent(ge){(0,k._addComponent)(this._delegate,ge)}_addOrOverwriteComponent(ge){(0,k._addOrOverwriteComponent)(this._delegate,ge)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ce=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),H=function me(){const rt=function pe(rt){const ge={},Me={__esModule:!0,initializeApp:function xe(Pe,j={}){const we=k.initializeApp(Pe,j);if((0,d.r3)(ge,we.name))return ge[we.name];const K=new rt(we,Me);return ge[we.name]=K,K},app:Ve,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function Re(Pe){const j=Pe.name,we=j.replace("-compat","");if(k._registerComponent(Pe)&&"PUBLIC"===Pe.type){const K=(X=Ve())=>{if("function"!=typeof X[we])throw ce.create("invalid-app-argument",{appName:j});return X[we]()};void 0!==Pe.serviceProps&&(0,d.ZB)(K,Pe.serviceProps),Me[we]=K,rt.prototype[we]=function(...X){return this._getService.bind(this,j).apply(this,Pe.multipleInstances?X:[])}}return"PUBLIC"===Pe.type?Me[we]:null},removeApp:function Ce(Pe){delete ge[Pe]},useAsService:function $e(Pe,j){return"serverAuth"===j?null:j},modularAPIs:k}};function Ve(Pe){if(!(0,d.r3)(ge,Pe=Pe||k._DEFAULT_ENTRY_NAME))throw ce.create("no-app",{appName:Pe});return ge[Pe]}return Me.default=Me,Object.defineProperty(Me,"apps",{get:function be(){return Object.keys(ge).map(Pe=>ge[Pe])}}),Ve.App=rt,Me}(ue);return rt.INTERNAL=Object.assign(Object.assign({},rt.INTERNAL),{createFirebaseNamespace:me,extendNamespace:function ge(Me){(0,d.ZB)(rt,Me)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),rt}(),$=new le.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const rt=self.firebase.SDK_VERSION;rt&&rt.indexOf("LITE")>=0&&$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ye=H;!function Ae(rt){(0,k.registerVersion)("@firebase/app-compat","0.1.39",rt)}()},9681:(lt,Ie,P)=>{P.r(Ie),P.d(Ie,{FirebaseError:()=>le.ZR,SDK_VERSION:()=>Vo,_DEFAULT_ENTRY_NAME:()=>gn,_addComponent:()=>tn,_addOrOverwriteComponent:()=>wr,_apps:()=>Ht,_clearComponents:()=>di,_components:()=>yt,_getProvider:()=>Et,_registerComponent:()=>kr,_removeServiceInstance:()=>In,deleteApp:()=>ao,getApp:()=>xi,getApps:()=>Lr,initializeApp:()=>Ms,onLog:()=>_t,registerVersion:()=>ei,setLogLevel:()=>ts});var d=P(5861),te=P(4859),k=P(1877),le=P(2090),ue=P(8766);class fe{constructor(Te){this.container=Te}getPlatformInfoString(){return this.container.getProviders().map(et=>{if(function ce(Ge){return"VERSION"===Ge.getComponent()?.type}(et)){const Dt=et.getImmediate();return`${Dt.library}/${Dt.version}`}return null}).filter(et=>et).join(" ")}}const pe="@firebase/app",H=new k.Yd("@firebase/app"),gn="[DEFAULT]",Bt={[pe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ht=new Map,yt=new Map;function tn(Ge,Te){try{Ge.container.addComponent(Te)}catch(et){H.debug(`Component ${Te.name} failed to register with FirebaseApp ${Ge.name}`,et)}}function wr(Ge,Te){Ge.container.addOrOverwriteComponent(Te)}function kr(Ge){const Te=Ge.name;if(yt.has(Te))return H.debug(`There were multiple attempts to register component ${Te}.`),!1;yt.set(Te,Ge);for(const et of Ht.values())tn(et,Ge);return!0}function Et(Ge,Te){const et=Ge.container.getProvider("heartbeat").getImmediate({optional:!0});return et&&et.triggerHeartbeat(),Ge.container.getProvider(Te)}function In(Ge,Te,et=gn){Et(Ge,Te).clearInstance(et)}function di(){yt.clear()}const Pr=new le.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Fr{constructor(Te,et,Dt){this._isDeleted=!1,this._options=Object.assign({},Te),this._config=Object.assign({},et),this._name=et.name,this._automaticDataCollectionEnabled=et.automaticDataCollectionEnabled,this._container=Dt,this.container.addComponent(new te.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Te){this.checkDestroyed(),this._automaticDataCollectionEnabled=Te}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Te){this._isDeleted=Te}checkDestroyed(){if(this.isDeleted)throw Pr.create("app-deleted",{appName:this._name})}}const Vo="9.14.0";function Ms(Ge,Te={}){let et=Ge;"object"!=typeof Te&&(Te={name:Te});const Dt=Object.assign({name:gn,automaticDataCollectionEnabled:!1},Te),Ct=Dt.name;if("string"!=typeof Ct||!Ct)throw Pr.create("bad-app-name",{appName:String(Ct)});if(et||(et=(0,le.aH)()),!et)throw Pr.create("no-options");const jt=Ht.get(Ct);if(jt){if((0,le.vZ)(et,jt.options)&&(0,le.vZ)(Dt,jt.config))return jt;throw Pr.create("duplicate-app",{appName:Ct})}const z=new te.H0(Ct);for(const Y of yt.values())z.addComponent(Y);const U=new Fr(et,Dt,z);return Ht.set(Ct,U),U}function xi(Ge=gn){const Te=Ht.get(Ge);if(!Te&&Ge===gn)return Ms();if(!Te)throw Pr.create("no-app",{appName:Ge});return Te}function Lr(){return Array.from(Ht.values())}function ao(Ge){return yn.apply(this,arguments)}function yn(){return(yn=(0,d.Z)(function*(Ge){const Te=Ge.name;Ht.has(Te)&&(Ht.delete(Te),yield Promise.all(Ge.container.getProviders().map(et=>et.delete())),Ge.isDeleted=!0)})).apply(this,arguments)}function ei(Ge,Te,et){var Dt;let Ct=null!==(Dt=Bt[Ge])&&void 0!==Dt?Dt:Ge;et&&(Ct+=`-${et}`);const jt=Ct.match(/\s|\//),z=Te.match(/\s|\//);if(jt||z){const U=[`Unable to register library "${Ct}" with version "${Te}":`];return jt&&U.push(`library name "${Ct}" contains illegal characters (whitespace or "/")`),jt&&z&&U.push("and"),z&&U.push(`version name "${Te}" contains illegal characters (whitespace or "/")`),void H.warn(U.join(" "))}kr(new te.wA(`${Ct}-version`,()=>({library:Ct,version:Te}),"VERSION"))}function _t(Ge,Te){if(null!==Ge&&"function"!=typeof Ge)throw Pr.create("invalid-log-argument");(0,k.Am)(Ge,Te)}function ts(Ge){(0,k.Ub)(Ge)}const Vr="firebase-heartbeat-store";let xs=null;function kt(){return xs||(xs=(0,ue.X3)("firebase-heartbeat-database",1,{upgrade:(Ge,Te)=>{0===Te&&Ge.createObjectStore(Vr)}}).catch(Ge=>{throw Pr.create("idb-open",{originalErrorMessage:Ge.message})})),xs}function Tt(){return(Tt=(0,d.Z)(function*(Ge){var Te;try{return(yield kt()).transaction(Vr).objectStore(Vr).get(Tn(Ge))}catch(et){if(et instanceof le.ZR)H.warn(et.message);else{const Dt=Pr.create("idb-get",{originalErrorMessage:null===(Te=et)||void 0===Te?void 0:Te.message});H.warn(Dt.message)}}})).apply(this,arguments)}function ns(Ge,Te){return On.apply(this,arguments)}function On(){return(On=(0,d.Z)(function*(Ge,Te){var et;try{const Ct=(yield kt()).transaction(Vr,"readwrite");return yield Ct.objectStore(Vr).put(Te,Tn(Ge)),Ct.done}catch(Dt){if(Dt instanceof le.ZR)H.warn(Dt.message);else{const Ct=Pr.create("idb-set",{originalErrorMessage:null===(et=Dt)||void 0===et?void 0:et.message});H.warn(Ct.message)}}})).apply(this,arguments)}function Tn(Ge){return`${Ge.name}!${Ge.options.appId}`}class pa{constructor(Te){this.container=Te,this._heartbeatsCache=null;const et=this.container.getProvider("app").getImmediate();this._storage=new Xt(et),this._heartbeatsCachePromise=this._storage.read().then(Dt=>(this._heartbeatsCache=Dt,Dt))}triggerHeartbeat(){var Te=this;return(0,d.Z)(function*(){const Dt=Te.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ct=un();if(null===Te._heartbeatsCache&&(Te._heartbeatsCache=yield Te._heartbeatsCachePromise),Te._heartbeatsCache.lastSentHeartbeatDate!==Ct&&!Te._heartbeatsCache.heartbeats.some(jt=>jt.date===Ct))return Te._heartbeatsCache.heartbeats.push({date:Ct,agent:Dt}),Te._heartbeatsCache.heartbeats=Te._heartbeatsCache.heartbeats.filter(jt=>{const z=new Date(jt.date).valueOf();return Date.now()-z<=2592e6}),Te._storage.overwrite(Te._heartbeatsCache)})()}getHeartbeatsHeader(){var Te=this;return(0,d.Z)(function*(){if(null===Te._heartbeatsCache&&(yield Te._heartbeatsCachePromise),null===Te._heartbeatsCache||0===Te._heartbeatsCache.heartbeats.length)return"";const et=un(),{heartbeatsToSend:Dt,unsentEntries:Ct}=function rs(Ge,Te=1024){const et=[];let Dt=Ge.slice();for(const Ct of Ge){const jt=et.find(z=>z.agent===Ct.agent);if(jt){if(jt.dates.push(Ct.date),Ir(et)>Te){jt.dates.pop();break}}else if(et.push({agent:Ct.agent,dates:[Ct.date]}),Ir(et)>Te){et.pop();break}Dt=Dt.slice(1)}return{heartbeatsToSend:et,unsentEntries:Dt}}(Te._heartbeatsCache.heartbeats),jt=(0,le.L)(JSON.stringify({version:2,heartbeats:Dt}));return Te._heartbeatsCache.lastSentHeartbeatDate=et,Ct.length>0?(Te._heartbeatsCache.heartbeats=Ct,yield Te._storage.overwrite(Te._heartbeatsCache)):(Te._heartbeatsCache.heartbeats=[],Te._storage.overwrite(Te._heartbeatsCache)),jt})()}}function un(){return(new Date).toISOString().substring(0,10)}class Xt{constructor(Te){this.app=Te,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,le.hl)()&&(0,le.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Te=this;return(0,d.Z)(function*(){return(yield Te._canUseIndexedDBPromise)&&(yield function wt(Ge){return Tt.apply(this,arguments)}(Te.app))||{heartbeats:[]}})()}overwrite(Te){var et=this;return(0,d.Z)(function*(){var Dt;if(yield et._canUseIndexedDBPromise){const jt=yield et.read();return ns(et.app,{lastSentHeartbeatDate:null!==(Dt=Te.lastSentHeartbeatDate)&&void 0!==Dt?Dt:jt.lastSentHeartbeatDate,heartbeats:Te.heartbeats})}})()}add(Te){var et=this;return(0,d.Z)(function*(){var Dt;if(yield et._canUseIndexedDBPromise){const jt=yield et.read();return ns(et.app,{lastSentHeartbeatDate:null!==(Dt=Te.lastSentHeartbeatDate)&&void 0!==Dt?Dt:jt.lastSentHeartbeatDate,heartbeats:[...jt.heartbeats,...Te.heartbeats]})}})()}}function Ir(Ge){return(0,le.L)(JSON.stringify({version:2,heartbeats:Ge})).length}!function Hi(Ge){kr(new te.wA("platform-logger",Te=>new fe(Te),"PRIVATE")),kr(new te.wA("heartbeat",Te=>new pa(Te),"PRIVATE")),ei(pe,"0.8.4",Ge),ei(pe,"0.8.4","esm2017"),ei("fire-js","")}("")},4859:(lt,Ie,P)=>{P.d(Ie,{H0:()=>pe,wA:()=>k});var d=P(5861),te=P(2090);class k{constructor(H,$,Q){this.name=H,this.instanceFactory=$,this.type=Q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(H){return this.instantiationMode=H,this}setMultipleInstances(H){return this.multipleInstances=H,this}setServiceProps(H){return this.serviceProps=H,this}setInstanceCreatedCallback(H){return this.onInstanceCreated=H,this}}const le="[DEFAULT]";class ue{constructor(H,$){this.name=H,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(H){const $=this.normalizeInstanceIdentifier(H);if(!this.instancesDeferred.has($)){const Q=new te.BH;if(this.instancesDeferred.set($,Q),this.isInitialized($)||this.shouldAutoInitialize())try{const He=this.getOrInitializeService({instanceIdentifier:$});He&&Q.resolve(He)}catch{}}return this.instancesDeferred.get($).promise}getImmediate(H){var $;const Q=this.normalizeInstanceIdentifier(H?.identifier),He=null!==($=H?.optional)&&void 0!==$&&$;if(!this.isInitialized(Q)&&!this.shouldAutoInitialize()){if(He)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Q})}catch(Ae){if(He)return null;throw Ae}}getComponent(){return this.component}setComponent(H){if(H.name!==this.name)throw Error(`Mismatching Component ${H.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=H,this.shouldAutoInitialize()){if(function ce(me){return"EAGER"===me.instantiationMode}(H))try{this.getOrInitializeService({instanceIdentifier:le})}catch{}for(const[$,Q]of this.instancesDeferred.entries()){const He=this.normalizeInstanceIdentifier($);try{const Ae=this.getOrInitializeService({instanceIdentifier:He});Q.resolve(Ae)}catch{}}}}clearInstance(H=le){this.instancesDeferred.delete(H),this.instancesOptions.delete(H),this.instances.delete(H)}delete(){var H=this;return(0,d.Z)(function*(){const $=Array.from(H.instances.values());yield Promise.all([...$.filter(Q=>"INTERNAL"in Q).map(Q=>Q.INTERNAL.delete()),...$.filter(Q=>"_delete"in Q).map(Q=>Q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(H=le){return this.instances.has(H)}getOptions(H=le){return this.instancesOptions.get(H)||{}}initialize(H={}){const{options:$={}}=H,Q=this.normalizeInstanceIdentifier(H.instanceIdentifier);if(this.isInitialized(Q))throw Error(`${this.name}(${Q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const He=this.getOrInitializeService({instanceIdentifier:Q,options:$});for(const[Ae,Ye]of this.instancesDeferred.entries())Q===this.normalizeInstanceIdentifier(Ae)&&Ye.resolve(He);return He}onInit(H,$){var Q;const He=this.normalizeInstanceIdentifier($),Ae=null!==(Q=this.onInitCallbacks.get(He))&&void 0!==Q?Q:new Set;Ae.add(H),this.onInitCallbacks.set(He,Ae);const Ye=this.instances.get(He);return Ye&&H(Ye,He),()=>{Ae.delete(H)}}invokeOnInitCallbacks(H,$){const Q=this.onInitCallbacks.get($);if(Q)for(const He of Q)try{He(H,$)}catch{}}getOrInitializeService({instanceIdentifier:H,options:$={}}){let Q=this.instances.get(H);if(!Q&&this.component&&(Q=this.component.instanceFactory(this.container,{instanceIdentifier:(me=H,me===le?void 0:me),options:$}),this.instances.set(H,Q),this.instancesOptions.set(H,$),this.invokeOnInitCallbacks(Q,H),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,H,Q)}catch{}var me;return Q||null}normalizeInstanceIdentifier(H=le){return this.component?this.component.multipleInstances?H:le:H}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class pe{constructor(H){this.name=H,this.providers=new Map}addComponent(H){const $=this.getProvider(H.name);if($.isComponentSet())throw new Error(`Component ${H.name} has already been registered with ${this.name}`);$.setComponent(H)}addOrOverwriteComponent(H){this.getProvider(H.name).isComponentSet()&&this.providers.delete(H.name),this.addComponent(H)}getProvider(H){if(this.providers.has(H))return this.providers.get(H);const $=new ue(H,this);return this.providers.set(H,$),$}getProviders(){return Array.from(this.providers.values())}}},1877:(lt,Ie,P)=>{P.d(Ie,{Am:()=>me,Ub:()=>pe,Yd:()=>ce,in:()=>te});const d=[];var te=(()=>{return(H=te||(te={}))[H.DEBUG=0]="DEBUG",H[H.VERBOSE=1]="VERBOSE",H[H.INFO=2]="INFO",H[H.WARN=3]="WARN",H[H.ERROR=4]="ERROR",H[H.SILENT=5]="SILENT",te;var H})();const k={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},le=te.INFO,ue={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},fe=(H,$,...Q)=>{if($<H.logLevel)return;const He=(new Date).toISOString(),Ae=ue[$];if(!Ae)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[Ae](`[${He}]  ${H.name}:`,...Q)};class ce{constructor($){this.name=$,this._logLevel=le,this._logHandler=fe,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in te))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?k[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...$),this._logHandler(this,te.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...$),this._logHandler(this,te.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,te.INFO,...$),this._logHandler(this,te.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,te.WARN,...$),this._logHandler(this,te.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...$),this._logHandler(this,te.ERROR,...$)}}function pe(H){d.forEach($=>{$.setLogLevel(H)})}function me(H,$){for(const Q of d){let He=null;$&&$.level&&(He=k[$.level]),Q.userLogHandler=null===H?null:(Ae,Ye,...rt)=>{const ge=rt.map(Me=>{if(null==Me)return null;if("string"==typeof Me)return Me;if("number"==typeof Me||"boolean"==typeof Me)return Me.toString();if(Me instanceof Error)return Me.message;try{return JSON.stringify(Me)}catch{return null}}).filter(Me=>Me).join(" ");Ye>=(He??Ae.logLevel)&&H({level:te[Ye].toLowerCase(),message:ge,args:rt,type:Ae.name})}}}},8766:(lt,Ie,P)=>{P.d(Ie,{Lj:()=>xe,X3:()=>Ve});var d=P(5861);let k,le;const ce=new WeakMap,pe=new WeakMap,me=new WeakMap,H=new WeakMap,$=new WeakMap;let Ae={get(j,we,K){if(j instanceof IDBTransaction){if("done"===we)return pe.get(j);if("objectStoreNames"===we)return j.objectStoreNames||me.get(j);if("store"===we)return K.objectStoreNames[1]?void 0:K.objectStore(K.objectStoreNames[0])}return Me(j[we])},set:(j,we,K)=>(j[we]=K,!0),has:(j,we)=>j instanceof IDBTransaction&&("done"===we||"store"===we)||we in j};function ge(j){return"function"==typeof j?function rt(j){return j!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function fe(){return le||(le=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(j)?function(...we){return j.apply(Ce(this),we),Me(ce.get(this))}:function(...we){return Me(j.apply(Ce(this),we))}:function(we,...K){const X=j.call(Ce(this),we,...K);return me.set(X,we.sort?we.sort():[we]),Me(X)}}(j):(j instanceof IDBTransaction&&function He(j){if(pe.has(j))return;const we=new Promise((K,X)=>{const oe=()=>{j.removeEventListener("complete",ie),j.removeEventListener("error",Ue),j.removeEventListener("abort",Ue)},ie=()=>{K(),oe()},Ue=()=>{X(j.error||new DOMException("AbortError","AbortError")),oe()};j.addEventListener("complete",ie),j.addEventListener("error",Ue),j.addEventListener("abort",Ue)});pe.set(j,we)}(j),((j,we)=>we.some(K=>j instanceof K))(j,function ue(){return k||(k=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(j,Ae):j)}function Me(j){if(j instanceof IDBRequest)return function Q(j){const we=new Promise((K,X)=>{const oe=()=>{j.removeEventListener("success",ie),j.removeEventListener("error",Ue)},ie=()=>{K(Me(j.result)),oe()},Ue=()=>{X(j.error),oe()};j.addEventListener("success",ie),j.addEventListener("error",Ue)});return we.then(K=>{K instanceof IDBCursor&&ce.set(K,j)}).catch(()=>{}),$.set(we,j),we}(j);if(H.has(j))return H.get(j);const we=ge(j);return we!==j&&(H.set(j,we),$.set(we,j)),we}const Ce=j=>$.get(j);function Ve(j,we,{blocked:K,upgrade:X,blocking:oe,terminated:ie}={}){const Ue=indexedDB.open(j,we),Fe=Me(Ue);return X&&Ue.addEventListener("upgradeneeded",pt=>{X(Me(Ue.result),pt.oldVersion,pt.newVersion,Me(Ue.transaction))}),K&&Ue.addEventListener("blocked",()=>K()),Fe.then(pt=>{ie&&pt.addEventListener("close",()=>ie()),oe&&pt.addEventListener("versionchange",()=>oe())}).catch(()=>{}),Fe}function xe(j,{blocked:we}={}){const K=indexedDB.deleteDatabase(j);return we&&K.addEventListener("blocked",()=>we()),Me(K).then(()=>{})}const be=["get","getKey","getAll","getAllKeys","count"],Re=["put","add","delete","clear"],$e=new Map;function Pe(j,we){if(!(j instanceof IDBDatabase)||we in j||"string"!=typeof we)return;if($e.get(we))return $e.get(we);const K=we.replace(/FromIndex$/,""),X=we!==K,oe=Re.includes(K);if(!(K in(X?IDBIndex:IDBObjectStore).prototype)||!oe&&!be.includes(K))return;const ie=function(){var Ue=(0,d.Z)(function*(Fe,...pt){const nn=this.transaction(Fe,oe?"readwrite":"readonly");let gn=nn.store;return X&&(gn=gn.index(pt.shift())),(yield Promise.all([gn[K](...pt),oe&&nn.done]))[0]});return function(pt){return Ue.apply(this,arguments)}}();return $e.set(we,ie),ie}!function Ye(j){Ae=j(Ae)}(j=>({...j,get:(we,K,X)=>Pe(we,K)||j.get(we,K,X),has:(we,K)=>!!Pe(we,K)||j.has(we,K)}))},5861:(lt,Ie,P)=>{function d(k,le,ue,fe,ce,pe,me){try{var H=k[pe](me),$=H.value}catch(Q){return void ue(Q)}H.done?le($):Promise.resolve($).then(fe,ce)}function te(k){return function(){var le=this,ue=arguments;return new Promise(function(fe,ce){var pe=k.apply(le,ue);function me($){d(pe,fe,ce,me,H,"next",$)}function H($){d(pe,fe,ce,me,H,"throw",$)}me(void 0)})}}P.d(Ie,{Z:()=>te})}},lt=>{lt(lt.s=2546)}]);